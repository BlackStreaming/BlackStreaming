(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(i){if(i.ep)return;i.ep=!0;const l=r(i);fetch(i.href,l)}})();function vP(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Ow={exports:{}},Kx={},Vw={exports:{}},Pt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gc=Symbol.for("react.element"),jP=Symbol.for("react.portal"),NP=Symbol.for("react.fragment"),wP=Symbol.for("react.strict_mode"),kP=Symbol.for("react.profiler"),IP=Symbol.for("react.provider"),PP=Symbol.for("react.context"),SP=Symbol.for("react.forward_ref"),EP=Symbol.for("react.suspense"),CP=Symbol.for("react.memo"),TP=Symbol.for("react.lazy"),hb=Symbol.iterator;function _P(s){return s===null||typeof s!="object"?null:(s=hb&&s[hb]||s["@@iterator"],typeof s=="function"?s:null)}var Bw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},zw=Object.assign,Fw={};function Ko(s,t,r){this.props=s,this.context=t,this.refs=Fw,this.updater=r||Bw}Ko.prototype.isReactComponent={};Ko.prototype.setState=function(s,t){if(typeof s!="object"&&typeof s!="function"&&s!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,s,t,"setState")};Ko.prototype.forceUpdate=function(s){this.updater.enqueueForceUpdate(this,s,"forceUpdate")};function Uw(){}Uw.prototype=Ko.prototype;function K0(s,t,r){this.props=s,this.context=t,this.refs=Fw,this.updater=r||Bw}var Q0=K0.prototype=new Uw;Q0.constructor=K0;zw(Q0,Ko.prototype);Q0.isPureReactComponent=!0;var pb=Array.isArray,$w=Object.prototype.hasOwnProperty,Y0={current:null},Ww={key:!0,ref:!0,__self:!0,__source:!0};function qw(s,t,r){var a,i={},l=null,o=null;if(t!=null)for(a in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(l=""+t.key),t)$w.call(t,a)&&!Ww.hasOwnProperty(a)&&(i[a]=t[a]);var c=arguments.length-2;if(c===1)i.children=r;else if(1<c){for(var d=Array(c),x=0;x<c;x++)d[x]=arguments[x+2];i.children=d}if(s&&s.defaultProps)for(a in c=s.defaultProps,c)i[a]===void 0&&(i[a]=c[a]);return{$$typeof:Gc,type:s,key:l,ref:o,props:i,_owner:Y0.current}}function DP(s,t){return{$$typeof:Gc,type:s.type,key:t,ref:s.ref,props:s.props,_owner:s._owner}}function X0(s){return typeof s=="object"&&s!==null&&s.$$typeof===Gc}function AP(s){var t={"=":"=0",":":"=2"};return"$"+s.replace(/[=:]/g,function(r){return t[r]})}var fb=/\/+/g;function eh(s,t){return typeof s=="object"&&s!==null&&s.key!=null?AP(""+s.key):t.toString(36)}function xu(s,t,r,a,i){var l=typeof s;(l==="undefined"||l==="boolean")&&(s=null);var o=!1;if(s===null)o=!0;else switch(l){case"string":case"number":o=!0;break;case"object":switch(s.$$typeof){case Gc:case jP:o=!0}}if(o)return o=s,i=i(o),s=a===""?"."+eh(o,0):a,pb(i)?(r="",s!=null&&(r=s.replace(fb,"$&/")+"/"),xu(i,t,r,"",function(x){return x})):i!=null&&(X0(i)&&(i=DP(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(fb,"$&/")+"/")+s)),t.push(i)),1;if(o=0,a=a===""?".":a+":",pb(s))for(var c=0;c<s.length;c++){l=s[c];var d=a+eh(l,c);o+=xu(l,t,r,d,i)}else if(d=_P(s),typeof d=="function")for(s=d.call(s),c=0;!(l=s.next()).done;)l=l.value,d=a+eh(l,c++),o+=xu(l,t,r,d,i);else if(l==="object")throw t=String(s),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Ld(s,t,r){if(s==null)return s;var a=[],i=0;return xu(s,a,"","",function(l){return t.call(r,l,i++)}),a}function RP(s){if(s._status===-1){var t=s._result;t=t(),t.then(function(r){(s._status===0||s._status===-1)&&(s._status=1,s._result=r)},function(r){(s._status===0||s._status===-1)&&(s._status=2,s._result=r)}),s._status===-1&&(s._status=0,s._result=t)}if(s._status===1)return s._result.default;throw s._result}var cr={current:null},mu={transition:null},MP={ReactCurrentDispatcher:cr,ReactCurrentBatchConfig:mu,ReactCurrentOwner:Y0};function Hw(){throw Error("act(...) is not supported in production builds of React.")}Pt.Children={map:Ld,forEach:function(s,t,r){Ld(s,function(){t.apply(this,arguments)},r)},count:function(s){var t=0;return Ld(s,function(){t++}),t},toArray:function(s){return Ld(s,function(t){return t})||[]},only:function(s){if(!X0(s))throw Error("React.Children.only expected to receive a single React element child.");return s}};Pt.Component=Ko;Pt.Fragment=NP;Pt.Profiler=kP;Pt.PureComponent=K0;Pt.StrictMode=wP;Pt.Suspense=EP;Pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MP;Pt.act=Hw;Pt.cloneElement=function(s,t,r){if(s==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+s+".");var a=zw({},s.props),i=s.key,l=s.ref,o=s._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,o=Y0.current),t.key!==void 0&&(i=""+t.key),s.type&&s.type.defaultProps)var c=s.type.defaultProps;for(d in t)$w.call(t,d)&&!Ww.hasOwnProperty(d)&&(a[d]=t[d]===void 0&&c!==void 0?c[d]:t[d])}var d=arguments.length-2;if(d===1)a.children=r;else if(1<d){c=Array(d);for(var x=0;x<d;x++)c[x]=arguments[x+2];a.children=c}return{$$typeof:Gc,type:s.type,key:i,ref:l,props:a,_owner:o}};Pt.createContext=function(s){return s={$$typeof:PP,_currentValue:s,_currentValue2:s,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},s.Provider={$$typeof:IP,_context:s},s.Consumer=s};Pt.createElement=qw;Pt.createFactory=function(s){var t=qw.bind(null,s);return t.type=s,t};Pt.createRef=function(){return{current:null}};Pt.forwardRef=function(s){return{$$typeof:SP,render:s}};Pt.isValidElement=X0;Pt.lazy=function(s){return{$$typeof:TP,_payload:{_status:-1,_result:s},_init:RP}};Pt.memo=function(s,t){return{$$typeof:CP,type:s,compare:t===void 0?null:t}};Pt.startTransition=function(s){var t=mu.transition;mu.transition={};try{s()}finally{mu.transition=t}};Pt.unstable_act=Hw;Pt.useCallback=function(s,t){return cr.current.useCallback(s,t)};Pt.useContext=function(s){return cr.current.useContext(s)};Pt.useDebugValue=function(){};Pt.useDeferredValue=function(s){return cr.current.useDeferredValue(s)};Pt.useEffect=function(s,t){return cr.current.useEffect(s,t)};Pt.useId=function(){return cr.current.useId()};Pt.useImperativeHandle=function(s,t,r){return cr.current.useImperativeHandle(s,t,r)};Pt.useInsertionEffect=function(s,t){return cr.current.useInsertionEffect(s,t)};Pt.useLayoutEffect=function(s,t){return cr.current.useLayoutEffect(s,t)};Pt.useMemo=function(s,t){return cr.current.useMemo(s,t)};Pt.useReducer=function(s,t,r){return cr.current.useReducer(s,t,r)};Pt.useRef=function(s){return cr.current.useRef(s)};Pt.useState=function(s){return cr.current.useState(s)};Pt.useSyncExternalStore=function(s,t,r){return cr.current.useSyncExternalStore(s,t,r)};Pt.useTransition=function(){return cr.current.useTransition()};Pt.version="18.3.1";Vw.exports=Pt;var b=Vw.exports;const Pn=vP(b);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LP=b,OP=Symbol.for("react.element"),VP=Symbol.for("react.fragment"),BP=Object.prototype.hasOwnProperty,zP=LP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,FP={key:!0,ref:!0,__self:!0,__source:!0};function Gw(s,t,r){var a,i={},l=null,o=null;r!==void 0&&(l=""+r),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(o=t.ref);for(a in t)BP.call(t,a)&&!FP.hasOwnProperty(a)&&(i[a]=t[a]);if(s&&s.defaultProps)for(a in t=s.defaultProps,t)i[a]===void 0&&(i[a]=t[a]);return{$$typeof:OP,type:s,key:l,ref:o,props:i,_owner:zP.current}}Kx.Fragment=VP;Kx.jsx=Gw;Kx.jsxs=Gw;Ow.exports=Kx;var e=Ow.exports,ap={},Kw={exports:{}},_r={},Qw={exports:{}},Yw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(s){function t(ue,me){var pe=ue.length;ue.push(me);e:for(;0<pe;){var Oe=pe-1>>>1,De=ue[Oe];if(0<i(De,me))ue[Oe]=me,ue[pe]=De,pe=Oe;else break e}}function r(ue){return ue.length===0?null:ue[0]}function a(ue){if(ue.length===0)return null;var me=ue[0],pe=ue.pop();if(pe!==me){ue[0]=pe;e:for(var Oe=0,De=ue.length,n=De>>>1;Oe<n;){var N=2*(Oe+1)-1,h=ue[N],D=N+1,H=ue[D];if(0>i(h,pe))D<De&&0>i(H,h)?(ue[Oe]=H,ue[D]=pe,Oe=D):(ue[Oe]=h,ue[N]=pe,Oe=N);else if(D<De&&0>i(H,pe))ue[Oe]=H,ue[D]=pe,Oe=D;else break e}}return me}function i(ue,me){var pe=ue.sortIndex-me.sortIndex;return pe!==0?pe:ue.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;s.unstable_now=function(){return l.now()}}else{var o=Date,c=o.now();s.unstable_now=function(){return o.now()-c}}var d=[],x=[],f=1,j=null,w=3,S=!1,g=!1,V=!1,E=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(ue){for(var me=r(x);me!==null;){if(me.callback===null)a(x);else if(me.startTime<=ue)a(x),me.sortIndex=me.expirationTime,t(d,me);else break;me=r(x)}}function q(ue){if(V=!1,R(ue),!g)if(r(d)!==null)g=!0,_e(G);else{var me=r(x);me!==null&&be(q,me.startTime-ue)}}function G(ue,me){g=!1,V&&(V=!1,_(u),u=-1),S=!0;var pe=w;try{for(R(me),j=r(d);j!==null&&(!(j.expirationTime>me)||ue&&!Q());){var Oe=j.callback;if(typeof Oe=="function"){j.callback=null,w=j.priorityLevel;var De=Oe(j.expirationTime<=me);me=s.unstable_now(),typeof De=="function"?j.callback=De:j===r(d)&&a(d),R(me)}else a(d);j=r(d)}if(j!==null)var n=!0;else{var N=r(x);N!==null&&be(q,N.startTime-me),n=!1}return n}finally{j=null,w=pe,S=!1}}var Y=!1,O=null,u=-1,U=5,F=-1;function Q(){return!(s.unstable_now()-F<U)}function T(){if(O!==null){var ue=s.unstable_now();F=ue;var me=!0;try{me=O(!0,ue)}finally{me?W():(Y=!1,O=null)}}else Y=!1}var W;if(typeof M=="function")W=function(){M(T)};else if(typeof MessageChannel<"u"){var Ae=new MessageChannel,Ue=Ae.port2;Ae.port1.onmessage=T,W=function(){Ue.postMessage(null)}}else W=function(){E(T,0)};function _e(ue){O=ue,Y||(Y=!0,W())}function be(ue,me){u=E(function(){ue(s.unstable_now())},me)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(ue){ue.callback=null},s.unstable_continueExecution=function(){g||S||(g=!0,_e(G))},s.unstable_forceFrameRate=function(ue){0>ue||125<ue?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<ue?Math.floor(1e3/ue):5},s.unstable_getCurrentPriorityLevel=function(){return w},s.unstable_getFirstCallbackNode=function(){return r(d)},s.unstable_next=function(ue){switch(w){case 1:case 2:case 3:var me=3;break;default:me=w}var pe=w;w=me;try{return ue()}finally{w=pe}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(ue,me){switch(ue){case 1:case 2:case 3:case 4:case 5:break;default:ue=3}var pe=w;w=ue;try{return me()}finally{w=pe}},s.unstable_scheduleCallback=function(ue,me,pe){var Oe=s.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?Oe+pe:Oe):pe=Oe,ue){case 1:var De=-1;break;case 2:De=250;break;case 5:De=1073741823;break;case 4:De=1e4;break;default:De=5e3}return De=pe+De,ue={id:f++,callback:me,priorityLevel:ue,startTime:pe,expirationTime:De,sortIndex:-1},pe>Oe?(ue.sortIndex=pe,t(x,ue),r(d)===null&&ue===r(x)&&(V?(_(u),u=-1):V=!0,be(q,pe-Oe))):(ue.sortIndex=De,t(d,ue),g||S||(g=!0,_e(G))),ue},s.unstable_shouldYield=Q,s.unstable_wrapCallback=function(ue){var me=w;return function(){var pe=w;w=me;try{return ue.apply(this,arguments)}finally{w=pe}}}})(Yw);Qw.exports=Yw;var UP=Qw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $P=b,Tr=UP;function Re(s){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+s,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+s+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Xw=new Set,dc={};function Ri(s,t){_o(s,t),_o(s+"Capture",t)}function _o(s,t){for(dc[s]=t,s=0;s<t.length;s++)Xw.add(t[s])}var qa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),np=Object.prototype.hasOwnProperty,WP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,gb={},yb={};function qP(s){return np.call(yb,s)?!0:np.call(gb,s)?!1:WP.test(s)?yb[s]=!0:(gb[s]=!0,!1)}function HP(s,t,r,a){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:r!==null?!r.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function GP(s,t,r,a){if(t===null||typeof t>"u"||HP(s,t,r,a))return!0;if(a)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function dr(s,t,r,a,i,l,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=s,this.type=t,this.sanitizeURL=l,this.removeEmptyString=o}var Fs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){Fs[s]=new dr(s,0,!1,s,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var t=s[0];Fs[t]=new dr(t,1,!1,s[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(s){Fs[s]=new dr(s,2,!1,s.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){Fs[s]=new dr(s,2,!1,s,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){Fs[s]=new dr(s,3,!1,s.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(s){Fs[s]=new dr(s,3,!0,s,null,!1,!1)});["capture","download"].forEach(function(s){Fs[s]=new dr(s,4,!1,s,null,!1,!1)});["cols","rows","size","span"].forEach(function(s){Fs[s]=new dr(s,6,!1,s,null,!1,!1)});["rowSpan","start"].forEach(function(s){Fs[s]=new dr(s,5,!1,s.toLowerCase(),null,!1,!1)});var J0=/[\-:]([a-z])/g;function Z0(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var t=s.replace(J0,Z0);Fs[t]=new dr(t,1,!1,s,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var t=s.replace(J0,Z0);Fs[t]=new dr(t,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(s){var t=s.replace(J0,Z0);Fs[t]=new dr(t,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(s){Fs[s]=new dr(s,1,!1,s.toLowerCase(),null,!1,!1)});Fs.xlinkHref=new dr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(s){Fs[s]=new dr(s,1,!1,s.toLowerCase(),null,!0,!0)});function ef(s,t,r,a){var i=Fs.hasOwnProperty(t)?Fs[t]:null;(i!==null?i.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(GP(t,r,i,a)&&(r=null),a||i===null?qP(t)&&(r===null?s.removeAttribute(t):s.setAttribute(t,""+r)):i.mustUseProperty?s[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,a=i.attributeNamespace,r===null?s.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,a?s.setAttributeNS(a,t,r):s.setAttribute(t,r))))}var sn=$P.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Od=Symbol.for("react.element"),eo=Symbol.for("react.portal"),to=Symbol.for("react.fragment"),tf=Symbol.for("react.strict_mode"),ip=Symbol.for("react.profiler"),Jw=Symbol.for("react.provider"),Zw=Symbol.for("react.context"),sf=Symbol.for("react.forward_ref"),op=Symbol.for("react.suspense"),lp=Symbol.for("react.suspense_list"),rf=Symbol.for("react.memo"),pn=Symbol.for("react.lazy"),e5=Symbol.for("react.offscreen"),bb=Symbol.iterator;function vl(s){return s===null||typeof s!="object"?null:(s=bb&&s[bb]||s["@@iterator"],typeof s=="function"?s:null)}var cs=Object.assign,th;function _l(s){if(th===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);th=t&&t[1]||""}return`
`+th+s}var sh=!1;function rh(s,t){if(!s||sh)return"";sh=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(x){var a=x}Reflect.construct(s,[],t)}else{try{t.call()}catch(x){a=x}s.call(t.prototype)}else{try{throw Error()}catch(x){a=x}s()}}catch(x){if(x&&a&&typeof x.stack=="string"){for(var i=x.stack.split(`
`),l=a.stack.split(`
`),o=i.length-1,c=l.length-1;1<=o&&0<=c&&i[o]!==l[c];)c--;for(;1<=o&&0<=c;o--,c--)if(i[o]!==l[c]){if(o!==1||c!==1)do if(o--,c--,0>c||i[o]!==l[c]){var d=`
`+i[o].replace(" at new "," at ");return s.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",s.displayName)),d}while(1<=o&&0<=c);break}}}finally{sh=!1,Error.prepareStackTrace=r}return(s=s?s.displayName||s.name:"")?_l(s):""}function KP(s){switch(s.tag){case 5:return _l(s.type);case 16:return _l("Lazy");case 13:return _l("Suspense");case 19:return _l("SuspenseList");case 0:case 2:case 15:return s=rh(s.type,!1),s;case 11:return s=rh(s.type.render,!1),s;case 1:return s=rh(s.type,!0),s;default:return""}}function cp(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case to:return"Fragment";case eo:return"Portal";case ip:return"Profiler";case tf:return"StrictMode";case op:return"Suspense";case lp:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case Zw:return(s.displayName||"Context")+".Consumer";case Jw:return(s._context.displayName||"Context")+".Provider";case sf:var t=s.render;return s=s.displayName,s||(s=t.displayName||t.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case rf:return t=s.displayName||null,t!==null?t:cp(s.type)||"Memo";case pn:t=s._payload,s=s._init;try{return cp(s(t))}catch{}}return null}function QP(s){var t=s.type;switch(s.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=t.render,s=s.displayName||s.name||"",t.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return cp(t);case 8:return t===tf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Bn(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function t5(s){var t=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function YP(s){var t=t5(s)?"checked":"value",r=Object.getOwnPropertyDescriptor(s.constructor.prototype,t),a=""+s[t];if(!s.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,l=r.set;return Object.defineProperty(s,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){a=""+o,l.call(this,o)}}),Object.defineProperty(s,t,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(o){a=""+o},stopTracking:function(){s._valueTracker=null,delete s[t]}}}}function Vd(s){s._valueTracker||(s._valueTracker=YP(s))}function s5(s){if(!s)return!1;var t=s._valueTracker;if(!t)return!0;var r=t.getValue(),a="";return s&&(a=t5(s)?s.checked?"true":"false":s.value),s=a,s!==r?(t.setValue(s),!0):!1}function Fu(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function dp(s,t){var r=t.checked;return cs({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??s._wrapperState.initialChecked})}function vb(s,t){var r=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;r=Bn(t.value!=null?t.value:r),s._wrapperState={initialChecked:a,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function r5(s,t){t=t.checked,t!=null&&ef(s,"checked",t,!1)}function up(s,t){r5(s,t);var r=Bn(t.value),a=t.type;if(r!=null)a==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+r):s.value!==""+r&&(s.value=""+r);else if(a==="submit"||a==="reset"){s.removeAttribute("value");return}t.hasOwnProperty("value")?xp(s,t.type,r):t.hasOwnProperty("defaultValue")&&xp(s,t.type,Bn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(s.defaultChecked=!!t.defaultChecked)}function jb(s,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+s._wrapperState.initialValue,r||t===s.value||(s.value=t),s.defaultValue=t}r=s.name,r!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,r!==""&&(s.name=r)}function xp(s,t,r){(t!=="number"||Fu(s.ownerDocument)!==s)&&(r==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+r&&(s.defaultValue=""+r))}var Dl=Array.isArray;function vo(s,t,r,a){if(s=s.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<s.length;r++)i=t.hasOwnProperty("$"+s[r].value),s[r].selected!==i&&(s[r].selected=i),i&&a&&(s[r].defaultSelected=!0)}else{for(r=""+Bn(r),t=null,i=0;i<s.length;i++){if(s[i].value===r){s[i].selected=!0,a&&(s[i].defaultSelected=!0);return}t!==null||s[i].disabled||(t=s[i])}t!==null&&(t.selected=!0)}}function mp(s,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Re(91));return cs({},t,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function Nb(s,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Re(92));if(Dl(r)){if(1<r.length)throw Error(Re(93));r=r[0]}t=r}t==null&&(t=""),r=t}s._wrapperState={initialValue:Bn(r)}}function a5(s,t){var r=Bn(t.value),a=Bn(t.defaultValue);r!=null&&(r=""+r,r!==s.value&&(s.value=r),t.defaultValue==null&&s.defaultValue!==r&&(s.defaultValue=r)),a!=null&&(s.defaultValue=""+a)}function wb(s){var t=s.textContent;t===s._wrapperState.initialValue&&t!==""&&t!==null&&(s.value=t)}function n5(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hp(s,t){return s==null||s==="http://www.w3.org/1999/xhtml"?n5(t):s==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var Bd,i5=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,a,i){MSApp.execUnsafeLocalFunction(function(){return s(t,r,a,i)})}:s}(function(s,t){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=t;else{for(Bd=Bd||document.createElement("div"),Bd.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Bd.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;t.firstChild;)s.appendChild(t.firstChild)}});function uc(s,t){if(t){var r=s.firstChild;if(r&&r===s.lastChild&&r.nodeType===3){r.nodeValue=t;return}}s.textContent=t}var Ul={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},XP=["Webkit","ms","Moz","O"];Object.keys(Ul).forEach(function(s){XP.forEach(function(t){t=t+s.charAt(0).toUpperCase()+s.substring(1),Ul[t]=Ul[s]})});function o5(s,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Ul.hasOwnProperty(s)&&Ul[s]?(""+t).trim():t+"px"}function l5(s,t){s=s.style;for(var r in t)if(t.hasOwnProperty(r)){var a=r.indexOf("--")===0,i=o5(r,t[r],a);r==="float"&&(r="cssFloat"),a?s.setProperty(r,i):s[r]=i}}var JP=cs({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pp(s,t){if(t){if(JP[s]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Re(137,s));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Re(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Re(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Re(62))}}function fp(s,t){if(s.indexOf("-")===-1)return typeof t.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gp=null;function af(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var yp=null,jo=null,No=null;function kb(s){if(s=Yc(s)){if(typeof yp!="function")throw Error(Re(280));var t=s.stateNode;t&&(t=Zx(t),yp(s.stateNode,s.type,t))}}function c5(s){jo?No?No.push(s):No=[s]:jo=s}function d5(){if(jo){var s=jo,t=No;if(No=jo=null,kb(s),t)for(s=0;s<t.length;s++)kb(t[s])}}function u5(s,t){return s(t)}function x5(){}var ah=!1;function m5(s,t,r){if(ah)return s(t,r);ah=!0;try{return u5(s,t,r)}finally{ah=!1,(jo!==null||No!==null)&&(x5(),d5())}}function xc(s,t){var r=s.stateNode;if(r===null)return null;var a=Zx(r);if(a===null)return null;r=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(s=s.type,a=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!a;break e;default:s=!1}if(s)return null;if(r&&typeof r!="function")throw Error(Re(231,t,typeof r));return r}var bp=!1;if(qa)try{var jl={};Object.defineProperty(jl,"passive",{get:function(){bp=!0}}),window.addEventListener("test",jl,jl),window.removeEventListener("test",jl,jl)}catch{bp=!1}function ZP(s,t,r,a,i,l,o,c,d){var x=Array.prototype.slice.call(arguments,3);try{t.apply(r,x)}catch(f){this.onError(f)}}var $l=!1,Uu=null,$u=!1,vp=null,eS={onError:function(s){$l=!0,Uu=s}};function tS(s,t,r,a,i,l,o,c,d){$l=!1,Uu=null,ZP.apply(eS,arguments)}function sS(s,t,r,a,i,l,o,c,d){if(tS.apply(this,arguments),$l){if($l){var x=Uu;$l=!1,Uu=null}else throw Error(Re(198));$u||($u=!0,vp=x)}}function Mi(s){var t=s,r=s;if(s.alternate)for(;t.return;)t=t.return;else{s=t;do t=s,t.flags&4098&&(r=t.return),s=t.return;while(s)}return t.tag===3?r:null}function h5(s){if(s.tag===13){var t=s.memoizedState;if(t===null&&(s=s.alternate,s!==null&&(t=s.memoizedState)),t!==null)return t.dehydrated}return null}function Ib(s){if(Mi(s)!==s)throw Error(Re(188))}function rS(s){var t=s.alternate;if(!t){if(t=Mi(s),t===null)throw Error(Re(188));return t!==s?null:s}for(var r=s,a=t;;){var i=r.return;if(i===null)break;var l=i.alternate;if(l===null){if(a=i.return,a!==null){r=a;continue}break}if(i.child===l.child){for(l=i.child;l;){if(l===r)return Ib(i),s;if(l===a)return Ib(i),t;l=l.sibling}throw Error(Re(188))}if(r.return!==a.return)r=i,a=l;else{for(var o=!1,c=i.child;c;){if(c===r){o=!0,r=i,a=l;break}if(c===a){o=!0,a=i,r=l;break}c=c.sibling}if(!o){for(c=l.child;c;){if(c===r){o=!0,r=l,a=i;break}if(c===a){o=!0,a=l,r=i;break}c=c.sibling}if(!o)throw Error(Re(189))}}if(r.alternate!==a)throw Error(Re(190))}if(r.tag!==3)throw Error(Re(188));return r.stateNode.current===r?s:t}function p5(s){return s=rS(s),s!==null?f5(s):null}function f5(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var t=f5(s);if(t!==null)return t;s=s.sibling}return null}var g5=Tr.unstable_scheduleCallback,Pb=Tr.unstable_cancelCallback,aS=Tr.unstable_shouldYield,nS=Tr.unstable_requestPaint,gs=Tr.unstable_now,iS=Tr.unstable_getCurrentPriorityLevel,nf=Tr.unstable_ImmediatePriority,y5=Tr.unstable_UserBlockingPriority,Wu=Tr.unstable_NormalPriority,oS=Tr.unstable_LowPriority,b5=Tr.unstable_IdlePriority,Qx=null,fa=null;function lS(s){if(fa&&typeof fa.onCommitFiberRoot=="function")try{fa.onCommitFiberRoot(Qx,s,void 0,(s.current.flags&128)===128)}catch{}}var sa=Math.clz32?Math.clz32:uS,cS=Math.log,dS=Math.LN2;function uS(s){return s>>>=0,s===0?32:31-(cS(s)/dS|0)|0}var zd=64,Fd=4194304;function Al(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function qu(s,t){var r=s.pendingLanes;if(r===0)return 0;var a=0,i=s.suspendedLanes,l=s.pingedLanes,o=r&268435455;if(o!==0){var c=o&~i;c!==0?a=Al(c):(l&=o,l!==0&&(a=Al(l)))}else o=r&~i,o!==0?a=Al(o):l!==0&&(a=Al(l));if(a===0)return 0;if(t!==0&&t!==a&&!(t&i)&&(i=a&-a,l=t&-t,i>=l||i===16&&(l&4194240)!==0))return t;if(a&4&&(a|=r&16),t=s.entangledLanes,t!==0)for(s=s.entanglements,t&=a;0<t;)r=31-sa(t),i=1<<r,a|=s[r],t&=~i;return a}function xS(s,t){switch(s){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mS(s,t){for(var r=s.suspendedLanes,a=s.pingedLanes,i=s.expirationTimes,l=s.pendingLanes;0<l;){var o=31-sa(l),c=1<<o,d=i[o];d===-1?(!(c&r)||c&a)&&(i[o]=xS(c,t)):d<=t&&(s.expiredLanes|=c),l&=~c}}function jp(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function v5(){var s=zd;return zd<<=1,!(zd&4194240)&&(zd=64),s}function nh(s){for(var t=[],r=0;31>r;r++)t.push(s);return t}function Kc(s,t,r){s.pendingLanes|=t,t!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,t=31-sa(t),s[t]=r}function hS(s,t){var r=s.pendingLanes&~t;s.pendingLanes=t,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=t,s.mutableReadLanes&=t,s.entangledLanes&=t,t=s.entanglements;var a=s.eventTimes;for(s=s.expirationTimes;0<r;){var i=31-sa(r),l=1<<i;t[i]=0,a[i]=-1,s[i]=-1,r&=~l}}function of(s,t){var r=s.entangledLanes|=t;for(s=s.entanglements;r;){var a=31-sa(r),i=1<<a;i&t|s[a]&t&&(s[a]|=t),r&=~i}}var Ft=0;function j5(s){return s&=-s,1<s?4<s?s&268435455?16:536870912:4:1}var N5,lf,w5,k5,I5,Np=!1,Ud=[],Sn=null,En=null,Cn=null,mc=new Map,hc=new Map,gn=[],pS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sb(s,t){switch(s){case"focusin":case"focusout":Sn=null;break;case"dragenter":case"dragleave":En=null;break;case"mouseover":case"mouseout":Cn=null;break;case"pointerover":case"pointerout":mc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":hc.delete(t.pointerId)}}function Nl(s,t,r,a,i,l){return s===null||s.nativeEvent!==l?(s={blockedOn:t,domEventName:r,eventSystemFlags:a,nativeEvent:l,targetContainers:[i]},t!==null&&(t=Yc(t),t!==null&&lf(t)),s):(s.eventSystemFlags|=a,t=s.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),s)}function fS(s,t,r,a,i){switch(t){case"focusin":return Sn=Nl(Sn,s,t,r,a,i),!0;case"dragenter":return En=Nl(En,s,t,r,a,i),!0;case"mouseover":return Cn=Nl(Cn,s,t,r,a,i),!0;case"pointerover":var l=i.pointerId;return mc.set(l,Nl(mc.get(l)||null,s,t,r,a,i)),!0;case"gotpointercapture":return l=i.pointerId,hc.set(l,Nl(hc.get(l)||null,s,t,r,a,i)),!0}return!1}function P5(s){var t=ui(s.target);if(t!==null){var r=Mi(t);if(r!==null){if(t=r.tag,t===13){if(t=h5(r),t!==null){s.blockedOn=t,I5(s.priority,function(){w5(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){s.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}s.blockedOn=null}function hu(s){if(s.blockedOn!==null)return!1;for(var t=s.targetContainers;0<t.length;){var r=wp(s.domEventName,s.eventSystemFlags,t[0],s.nativeEvent);if(r===null){r=s.nativeEvent;var a=new r.constructor(r.type,r);gp=a,r.target.dispatchEvent(a),gp=null}else return t=Yc(r),t!==null&&lf(t),s.blockedOn=r,!1;t.shift()}return!0}function Eb(s,t,r){hu(s)&&r.delete(t)}function gS(){Np=!1,Sn!==null&&hu(Sn)&&(Sn=null),En!==null&&hu(En)&&(En=null),Cn!==null&&hu(Cn)&&(Cn=null),mc.forEach(Eb),hc.forEach(Eb)}function wl(s,t){s.blockedOn===t&&(s.blockedOn=null,Np||(Np=!0,Tr.unstable_scheduleCallback(Tr.unstable_NormalPriority,gS)))}function pc(s){function t(i){return wl(i,s)}if(0<Ud.length){wl(Ud[0],s);for(var r=1;r<Ud.length;r++){var a=Ud[r];a.blockedOn===s&&(a.blockedOn=null)}}for(Sn!==null&&wl(Sn,s),En!==null&&wl(En,s),Cn!==null&&wl(Cn,s),mc.forEach(t),hc.forEach(t),r=0;r<gn.length;r++)a=gn[r],a.blockedOn===s&&(a.blockedOn=null);for(;0<gn.length&&(r=gn[0],r.blockedOn===null);)P5(r),r.blockedOn===null&&gn.shift()}var wo=sn.ReactCurrentBatchConfig,Hu=!0;function yS(s,t,r,a){var i=Ft,l=wo.transition;wo.transition=null;try{Ft=1,cf(s,t,r,a)}finally{Ft=i,wo.transition=l}}function bS(s,t,r,a){var i=Ft,l=wo.transition;wo.transition=null;try{Ft=4,cf(s,t,r,a)}finally{Ft=i,wo.transition=l}}function cf(s,t,r,a){if(Hu){var i=wp(s,t,r,a);if(i===null)ph(s,t,a,Gu,r),Sb(s,a);else if(fS(i,s,t,r,a))a.stopPropagation();else if(Sb(s,a),t&4&&-1<pS.indexOf(s)){for(;i!==null;){var l=Yc(i);if(l!==null&&N5(l),l=wp(s,t,r,a),l===null&&ph(s,t,a,Gu,r),l===i)break;i=l}i!==null&&a.stopPropagation()}else ph(s,t,a,null,r)}}var Gu=null;function wp(s,t,r,a){if(Gu=null,s=af(a),s=ui(s),s!==null)if(t=Mi(s),t===null)s=null;else if(r=t.tag,r===13){if(s=h5(t),s!==null)return s;s=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;s=null}else t!==s&&(s=null);return Gu=s,null}function S5(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(iS()){case nf:return 1;case y5:return 4;case Wu:case oS:return 16;case b5:return 536870912;default:return 16}default:return 16}}var wn=null,df=null,pu=null;function E5(){if(pu)return pu;var s,t=df,r=t.length,a,i="value"in wn?wn.value:wn.textContent,l=i.length;for(s=0;s<r&&t[s]===i[s];s++);var o=r-s;for(a=1;a<=o&&t[r-a]===i[l-a];a++);return pu=i.slice(s,1<a?1-a:void 0)}function fu(s){var t=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&t===13&&(s=13)):s=t,s===10&&(s=13),32<=s||s===13?s:0}function $d(){return!0}function Cb(){return!1}function Dr(s){function t(r,a,i,l,o){this._reactName=r,this._targetInst=i,this.type=a,this.nativeEvent=l,this.target=o,this.currentTarget=null;for(var c in s)s.hasOwnProperty(c)&&(r=s[c],this[c]=r?r(l):l[c]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?$d:Cb,this.isPropagationStopped=Cb,this}return cs(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=$d)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=$d)},persist:function(){},isPersistent:$d}),t}var Qo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uf=Dr(Qo),Qc=cs({},Qo,{view:0,detail:0}),vS=Dr(Qc),ih,oh,kl,Yx=cs({},Qc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xf,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==kl&&(kl&&s.type==="mousemove"?(ih=s.screenX-kl.screenX,oh=s.screenY-kl.screenY):oh=ih=0,kl=s),ih)},movementY:function(s){return"movementY"in s?s.movementY:oh}}),Tb=Dr(Yx),jS=cs({},Yx,{dataTransfer:0}),NS=Dr(jS),wS=cs({},Qc,{relatedTarget:0}),lh=Dr(wS),kS=cs({},Qo,{animationName:0,elapsedTime:0,pseudoElement:0}),IS=Dr(kS),PS=cs({},Qo,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),SS=Dr(PS),ES=cs({},Qo,{data:0}),_b=Dr(ES),CS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},TS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_S={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function DS(s){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(s):(s=_S[s])?!!t[s]:!1}function xf(){return DS}var AS=cs({},Qc,{key:function(s){if(s.key){var t=CS[s.key]||s.key;if(t!=="Unidentified")return t}return s.type==="keypress"?(s=fu(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?TS[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xf,charCode:function(s){return s.type==="keypress"?fu(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?fu(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),RS=Dr(AS),MS=cs({},Yx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Db=Dr(MS),LS=cs({},Qc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xf}),OS=Dr(LS),VS=cs({},Qo,{propertyName:0,elapsedTime:0,pseudoElement:0}),BS=Dr(VS),zS=cs({},Yx,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),FS=Dr(zS),US=[9,13,27,32],mf=qa&&"CompositionEvent"in window,Wl=null;qa&&"documentMode"in document&&(Wl=document.documentMode);var $S=qa&&"TextEvent"in window&&!Wl,C5=qa&&(!mf||Wl&&8<Wl&&11>=Wl),Ab=String.fromCharCode(32),Rb=!1;function T5(s,t){switch(s){case"keyup":return US.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _5(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var so=!1;function WS(s,t){switch(s){case"compositionend":return _5(t);case"keypress":return t.which!==32?null:(Rb=!0,Ab);case"textInput":return s=t.data,s===Ab&&Rb?null:s;default:return null}}function qS(s,t){if(so)return s==="compositionend"||!mf&&T5(s,t)?(s=E5(),pu=df=wn=null,so=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return C5&&t.locale!=="ko"?null:t.data;default:return null}}var HS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mb(s){var t=s&&s.nodeName&&s.nodeName.toLowerCase();return t==="input"?!!HS[s.type]:t==="textarea"}function D5(s,t,r,a){c5(a),t=Ku(t,"onChange"),0<t.length&&(r=new uf("onChange","change",null,r,a),s.push({event:r,listeners:t}))}var ql=null,fc=null;function GS(s){$5(s,0)}function Xx(s){var t=no(s);if(s5(t))return s}function KS(s,t){if(s==="change")return t}var A5=!1;if(qa){var ch;if(qa){var dh="oninput"in document;if(!dh){var Lb=document.createElement("div");Lb.setAttribute("oninput","return;"),dh=typeof Lb.oninput=="function"}ch=dh}else ch=!1;A5=ch&&(!document.documentMode||9<document.documentMode)}function Ob(){ql&&(ql.detachEvent("onpropertychange",R5),fc=ql=null)}function R5(s){if(s.propertyName==="value"&&Xx(fc)){var t=[];D5(t,fc,s,af(s)),m5(GS,t)}}function QS(s,t,r){s==="focusin"?(Ob(),ql=t,fc=r,ql.attachEvent("onpropertychange",R5)):s==="focusout"&&Ob()}function YS(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Xx(fc)}function XS(s,t){if(s==="click")return Xx(t)}function JS(s,t){if(s==="input"||s==="change")return Xx(t)}function ZS(s,t){return s===t&&(s!==0||1/s===1/t)||s!==s&&t!==t}var aa=typeof Object.is=="function"?Object.is:ZS;function gc(s,t){if(aa(s,t))return!0;if(typeof s!="object"||s===null||typeof t!="object"||t===null)return!1;var r=Object.keys(s),a=Object.keys(t);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var i=r[a];if(!np.call(t,i)||!aa(s[i],t[i]))return!1}return!0}function Vb(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Bb(s,t){var r=Vb(s);s=0;for(var a;r;){if(r.nodeType===3){if(a=s+r.textContent.length,s<=t&&a>=t)return{node:r,offset:t-s};s=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Vb(r)}}function M5(s,t){return s&&t?s===t?!0:s&&s.nodeType===3?!1:t&&t.nodeType===3?M5(s,t.parentNode):"contains"in s?s.contains(t):s.compareDocumentPosition?!!(s.compareDocumentPosition(t)&16):!1:!1}function L5(){for(var s=window,t=Fu();t instanceof s.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)s=t.contentWindow;else break;t=Fu(s.document)}return t}function hf(s){var t=s&&s.nodeName&&s.nodeName.toLowerCase();return t&&(t==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||t==="textarea"||s.contentEditable==="true")}function eE(s){var t=L5(),r=s.focusedElem,a=s.selectionRange;if(t!==r&&r&&r.ownerDocument&&M5(r.ownerDocument.documentElement,r)){if(a!==null&&hf(r)){if(t=a.start,s=a.end,s===void 0&&(s=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(s,r.value.length);else if(s=(t=r.ownerDocument||document)&&t.defaultView||window,s.getSelection){s=s.getSelection();var i=r.textContent.length,l=Math.min(a.start,i);a=a.end===void 0?l:Math.min(a.end,i),!s.extend&&l>a&&(i=a,a=l,l=i),i=Bb(r,l);var o=Bb(r,a);i&&o&&(s.rangeCount!==1||s.anchorNode!==i.node||s.anchorOffset!==i.offset||s.focusNode!==o.node||s.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),s.removeAllRanges(),l>a?(s.addRange(t),s.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),s.addRange(t)))}}for(t=[],s=r;s=s.parentNode;)s.nodeType===1&&t.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)s=t[r],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var tE=qa&&"documentMode"in document&&11>=document.documentMode,ro=null,kp=null,Hl=null,Ip=!1;function zb(s,t,r){var a=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Ip||ro==null||ro!==Fu(a)||(a=ro,"selectionStart"in a&&hf(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Hl&&gc(Hl,a)||(Hl=a,a=Ku(kp,"onSelect"),0<a.length&&(t=new uf("onSelect","select",null,t,r),s.push({event:t,listeners:a}),t.target=ro)))}function Wd(s,t){var r={};return r[s.toLowerCase()]=t.toLowerCase(),r["Webkit"+s]="webkit"+t,r["Moz"+s]="moz"+t,r}var ao={animationend:Wd("Animation","AnimationEnd"),animationiteration:Wd("Animation","AnimationIteration"),animationstart:Wd("Animation","AnimationStart"),transitionend:Wd("Transition","TransitionEnd")},uh={},O5={};qa&&(O5=document.createElement("div").style,"AnimationEvent"in window||(delete ao.animationend.animation,delete ao.animationiteration.animation,delete ao.animationstart.animation),"TransitionEvent"in window||delete ao.transitionend.transition);function Jx(s){if(uh[s])return uh[s];if(!ao[s])return s;var t=ao[s],r;for(r in t)if(t.hasOwnProperty(r)&&r in O5)return uh[s]=t[r];return s}var V5=Jx("animationend"),B5=Jx("animationiteration"),z5=Jx("animationstart"),F5=Jx("transitionend"),U5=new Map,Fb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yn(s,t){U5.set(s,t),Ri(t,[s])}for(var xh=0;xh<Fb.length;xh++){var mh=Fb[xh],sE=mh.toLowerCase(),rE=mh[0].toUpperCase()+mh.slice(1);Yn(sE,"on"+rE)}Yn(V5,"onAnimationEnd");Yn(B5,"onAnimationIteration");Yn(z5,"onAnimationStart");Yn("dblclick","onDoubleClick");Yn("focusin","onFocus");Yn("focusout","onBlur");Yn(F5,"onTransitionEnd");_o("onMouseEnter",["mouseout","mouseover"]);_o("onMouseLeave",["mouseout","mouseover"]);_o("onPointerEnter",["pointerout","pointerover"]);_o("onPointerLeave",["pointerout","pointerover"]);Ri("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ri("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ri("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ri("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ri("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ri("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rl));function Ub(s,t,r){var a=s.type||"unknown-event";s.currentTarget=r,sS(a,t,void 0,s),s.currentTarget=null}function $5(s,t){t=(t&4)!==0;for(var r=0;r<s.length;r++){var a=s[r],i=a.event;a=a.listeners;e:{var l=void 0;if(t)for(var o=a.length-1;0<=o;o--){var c=a[o],d=c.instance,x=c.currentTarget;if(c=c.listener,d!==l&&i.isPropagationStopped())break e;Ub(i,c,x),l=d}else for(o=0;o<a.length;o++){if(c=a[o],d=c.instance,x=c.currentTarget,c=c.listener,d!==l&&i.isPropagationStopped())break e;Ub(i,c,x),l=d}}}if($u)throw s=vp,$u=!1,vp=null,s}function Jt(s,t){var r=t[Tp];r===void 0&&(r=t[Tp]=new Set);var a=s+"__bubble";r.has(a)||(W5(t,s,2,!1),r.add(a))}function hh(s,t,r){var a=0;t&&(a|=4),W5(r,s,a,t)}var qd="_reactListening"+Math.random().toString(36).slice(2);function yc(s){if(!s[qd]){s[qd]=!0,Xw.forEach(function(r){r!=="selectionchange"&&(aE.has(r)||hh(r,!1,s),hh(r,!0,s))});var t=s.nodeType===9?s:s.ownerDocument;t===null||t[qd]||(t[qd]=!0,hh("selectionchange",!1,t))}}function W5(s,t,r,a){switch(S5(t)){case 1:var i=yS;break;case 4:i=bS;break;default:i=cf}r=i.bind(null,t,r,s),i=void 0,!bp||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),a?i!==void 0?s.addEventListener(t,r,{capture:!0,passive:i}):s.addEventListener(t,r,!0):i!==void 0?s.addEventListener(t,r,{passive:i}):s.addEventListener(t,r,!1)}function ph(s,t,r,a,i){var l=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var o=a.tag;if(o===3||o===4){var c=a.stateNode.containerInfo;if(c===i||c.nodeType===8&&c.parentNode===i)break;if(o===4)for(o=a.return;o!==null;){var d=o.tag;if((d===3||d===4)&&(d=o.stateNode.containerInfo,d===i||d.nodeType===8&&d.parentNode===i))return;o=o.return}for(;c!==null;){if(o=ui(c),o===null)return;if(d=o.tag,d===5||d===6){a=l=o;continue e}c=c.parentNode}}a=a.return}m5(function(){var x=l,f=af(r),j=[];e:{var w=U5.get(s);if(w!==void 0){var S=uf,g=s;switch(s){case"keypress":if(fu(r)===0)break e;case"keydown":case"keyup":S=RS;break;case"focusin":g="focus",S=lh;break;case"focusout":g="blur",S=lh;break;case"beforeblur":case"afterblur":S=lh;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=Tb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=NS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=OS;break;case V5:case B5:case z5:S=IS;break;case F5:S=BS;break;case"scroll":S=vS;break;case"wheel":S=FS;break;case"copy":case"cut":case"paste":S=SS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=Db}var V=(t&4)!==0,E=!V&&s==="scroll",_=V?w!==null?w+"Capture":null:w;V=[];for(var M=x,R;M!==null;){R=M;var q=R.stateNode;if(R.tag===5&&q!==null&&(R=q,_!==null&&(q=xc(M,_),q!=null&&V.push(bc(M,q,R)))),E)break;M=M.return}0<V.length&&(w=new S(w,g,null,r,f),j.push({event:w,listeners:V}))}}if(!(t&7)){e:{if(w=s==="mouseover"||s==="pointerover",S=s==="mouseout"||s==="pointerout",w&&r!==gp&&(g=r.relatedTarget||r.fromElement)&&(ui(g)||g[Ha]))break e;if((S||w)&&(w=f.window===f?f:(w=f.ownerDocument)?w.defaultView||w.parentWindow:window,S?(g=r.relatedTarget||r.toElement,S=x,g=g?ui(g):null,g!==null&&(E=Mi(g),g!==E||g.tag!==5&&g.tag!==6)&&(g=null)):(S=null,g=x),S!==g)){if(V=Tb,q="onMouseLeave",_="onMouseEnter",M="mouse",(s==="pointerout"||s==="pointerover")&&(V=Db,q="onPointerLeave",_="onPointerEnter",M="pointer"),E=S==null?w:no(S),R=g==null?w:no(g),w=new V(q,M+"leave",S,r,f),w.target=E,w.relatedTarget=R,q=null,ui(f)===x&&(V=new V(_,M+"enter",g,r,f),V.target=R,V.relatedTarget=E,q=V),E=q,S&&g)t:{for(V=S,_=g,M=0,R=V;R;R=Qi(R))M++;for(R=0,q=_;q;q=Qi(q))R++;for(;0<M-R;)V=Qi(V),M--;for(;0<R-M;)_=Qi(_),R--;for(;M--;){if(V===_||_!==null&&V===_.alternate)break t;V=Qi(V),_=Qi(_)}V=null}else V=null;S!==null&&$b(j,w,S,V,!1),g!==null&&E!==null&&$b(j,E,g,V,!0)}}e:{if(w=x?no(x):window,S=w.nodeName&&w.nodeName.toLowerCase(),S==="select"||S==="input"&&w.type==="file")var G=KS;else if(Mb(w))if(A5)G=JS;else{G=YS;var Y=QS}else(S=w.nodeName)&&S.toLowerCase()==="input"&&(w.type==="checkbox"||w.type==="radio")&&(G=XS);if(G&&(G=G(s,x))){D5(j,G,r,f);break e}Y&&Y(s,w,x),s==="focusout"&&(Y=w._wrapperState)&&Y.controlled&&w.type==="number"&&xp(w,"number",w.value)}switch(Y=x?no(x):window,s){case"focusin":(Mb(Y)||Y.contentEditable==="true")&&(ro=Y,kp=x,Hl=null);break;case"focusout":Hl=kp=ro=null;break;case"mousedown":Ip=!0;break;case"contextmenu":case"mouseup":case"dragend":Ip=!1,zb(j,r,f);break;case"selectionchange":if(tE)break;case"keydown":case"keyup":zb(j,r,f)}var O;if(mf)e:{switch(s){case"compositionstart":var u="onCompositionStart";break e;case"compositionend":u="onCompositionEnd";break e;case"compositionupdate":u="onCompositionUpdate";break e}u=void 0}else so?T5(s,r)&&(u="onCompositionEnd"):s==="keydown"&&r.keyCode===229&&(u="onCompositionStart");u&&(C5&&r.locale!=="ko"&&(so||u!=="onCompositionStart"?u==="onCompositionEnd"&&so&&(O=E5()):(wn=f,df="value"in wn?wn.value:wn.textContent,so=!0)),Y=Ku(x,u),0<Y.length&&(u=new _b(u,s,null,r,f),j.push({event:u,listeners:Y}),O?u.data=O:(O=_5(r),O!==null&&(u.data=O)))),(O=$S?WS(s,r):qS(s,r))&&(x=Ku(x,"onBeforeInput"),0<x.length&&(f=new _b("onBeforeInput","beforeinput",null,r,f),j.push({event:f,listeners:x}),f.data=O))}$5(j,t)})}function bc(s,t,r){return{instance:s,listener:t,currentTarget:r}}function Ku(s,t){for(var r=t+"Capture",a=[];s!==null;){var i=s,l=i.stateNode;i.tag===5&&l!==null&&(i=l,l=xc(s,r),l!=null&&a.unshift(bc(s,l,i)),l=xc(s,t),l!=null&&a.push(bc(s,l,i))),s=s.return}return a}function Qi(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function $b(s,t,r,a,i){for(var l=t._reactName,o=[];r!==null&&r!==a;){var c=r,d=c.alternate,x=c.stateNode;if(d!==null&&d===a)break;c.tag===5&&x!==null&&(c=x,i?(d=xc(r,l),d!=null&&o.unshift(bc(r,d,c))):i||(d=xc(r,l),d!=null&&o.push(bc(r,d,c)))),r=r.return}o.length!==0&&s.push({event:t,listeners:o})}var nE=/\r\n?/g,iE=/\u0000|\uFFFD/g;function Wb(s){return(typeof s=="string"?s:""+s).replace(nE,`
`).replace(iE,"")}function Hd(s,t,r){if(t=Wb(t),Wb(s)!==t&&r)throw Error(Re(425))}function Qu(){}var Pp=null,Sp=null;function Ep(s,t){return s==="textarea"||s==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Cp=typeof setTimeout=="function"?setTimeout:void 0,oE=typeof clearTimeout=="function"?clearTimeout:void 0,qb=typeof Promise=="function"?Promise:void 0,lE=typeof queueMicrotask=="function"?queueMicrotask:typeof qb<"u"?function(s){return qb.resolve(null).then(s).catch(cE)}:Cp;function cE(s){setTimeout(function(){throw s})}function fh(s,t){var r=t,a=0;do{var i=r.nextSibling;if(s.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(a===0){s.removeChild(i),pc(t);return}a--}else r!=="$"&&r!=="$?"&&r!=="$!"||a++;r=i}while(r);pc(t)}function Tn(s){for(;s!=null;s=s.nextSibling){var t=s.nodeType;if(t===1||t===3)break;if(t===8){if(t=s.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return s}function Hb(s){s=s.previousSibling;for(var t=0;s;){if(s.nodeType===8){var r=s.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return s;t--}else r==="/$"&&t++}s=s.previousSibling}return null}var Yo=Math.random().toString(36).slice(2),pa="__reactFiber$"+Yo,vc="__reactProps$"+Yo,Ha="__reactContainer$"+Yo,Tp="__reactEvents$"+Yo,dE="__reactListeners$"+Yo,uE="__reactHandles$"+Yo;function ui(s){var t=s[pa];if(t)return t;for(var r=s.parentNode;r;){if(t=r[Ha]||r[pa]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(s=Hb(s);s!==null;){if(r=s[pa])return r;s=Hb(s)}return t}s=r,r=s.parentNode}return null}function Yc(s){return s=s[pa]||s[Ha],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function no(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(Re(33))}function Zx(s){return s[vc]||null}var _p=[],io=-1;function Xn(s){return{current:s}}function Zt(s){0>io||(s.current=_p[io],_p[io]=null,io--)}function Kt(s,t){io++,_p[io]=s.current,s.current=t}var zn={},Zs=Xn(zn),pr=Xn(!1),Ni=zn;function Do(s,t){var r=s.type.contextTypes;if(!r)return zn;var a=s.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var i={},l;for(l in r)i[l]=t[l];return a&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=t,s.__reactInternalMemoizedMaskedChildContext=i),i}function fr(s){return s=s.childContextTypes,s!=null}function Yu(){Zt(pr),Zt(Zs)}function Gb(s,t,r){if(Zs.current!==zn)throw Error(Re(168));Kt(Zs,t),Kt(pr,r)}function q5(s,t,r){var a=s.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return r;a=a.getChildContext();for(var i in a)if(!(i in t))throw Error(Re(108,QP(s)||"Unknown",i));return cs({},r,a)}function Xu(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||zn,Ni=Zs.current,Kt(Zs,s),Kt(pr,pr.current),!0}function Kb(s,t,r){var a=s.stateNode;if(!a)throw Error(Re(169));r?(s=q5(s,t,Ni),a.__reactInternalMemoizedMergedChildContext=s,Zt(pr),Zt(Zs),Kt(Zs,s)):Zt(pr),Kt(pr,r)}var Oa=null,em=!1,gh=!1;function H5(s){Oa===null?Oa=[s]:Oa.push(s)}function xE(s){em=!0,H5(s)}function Jn(){if(!gh&&Oa!==null){gh=!0;var s=0,t=Ft;try{var r=Oa;for(Ft=1;s<r.length;s++){var a=r[s];do a=a(!0);while(a!==null)}Oa=null,em=!1}catch(i){throw Oa!==null&&(Oa=Oa.slice(s+1)),g5(nf,Jn),i}finally{Ft=t,gh=!1}}return null}var oo=[],lo=0,Ju=null,Zu=0,Lr=[],Or=0,wi=null,Va=1,Ba="";function oi(s,t){oo[lo++]=Zu,oo[lo++]=Ju,Ju=s,Zu=t}function G5(s,t,r){Lr[Or++]=Va,Lr[Or++]=Ba,Lr[Or++]=wi,wi=s;var a=Va;s=Ba;var i=32-sa(a)-1;a&=~(1<<i),r+=1;var l=32-sa(t)+i;if(30<l){var o=i-i%5;l=(a&(1<<o)-1).toString(32),a>>=o,i-=o,Va=1<<32-sa(t)+i|r<<i|a,Ba=l+s}else Va=1<<l|r<<i|a,Ba=s}function pf(s){s.return!==null&&(oi(s,1),G5(s,1,0))}function ff(s){for(;s===Ju;)Ju=oo[--lo],oo[lo]=null,Zu=oo[--lo],oo[lo]=null;for(;s===wi;)wi=Lr[--Or],Lr[Or]=null,Ba=Lr[--Or],Lr[Or]=null,Va=Lr[--Or],Lr[Or]=null}var Sr=null,Ir=null,es=!1,Jr=null;function K5(s,t){var r=Br(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=s,t=s.deletions,t===null?(s.deletions=[r],s.flags|=16):t.push(r)}function Qb(s,t){switch(s.tag){case 5:var r=s.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(s.stateNode=t,Sr=s,Ir=Tn(t.firstChild),!0):!1;case 6:return t=s.pendingProps===""||t.nodeType!==3?null:t,t!==null?(s.stateNode=t,Sr=s,Ir=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=wi!==null?{id:Va,overflow:Ba}:null,s.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Br(18,null,null,0),r.stateNode=t,r.return=s,s.child=r,Sr=s,Ir=null,!0):!1;default:return!1}}function Dp(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Ap(s){if(es){var t=Ir;if(t){var r=t;if(!Qb(s,t)){if(Dp(s))throw Error(Re(418));t=Tn(r.nextSibling);var a=Sr;t&&Qb(s,t)?K5(a,r):(s.flags=s.flags&-4097|2,es=!1,Sr=s)}}else{if(Dp(s))throw Error(Re(418));s.flags=s.flags&-4097|2,es=!1,Sr=s}}}function Yb(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Sr=s}function Gd(s){if(s!==Sr)return!1;if(!es)return Yb(s),es=!0,!1;var t;if((t=s.tag!==3)&&!(t=s.tag!==5)&&(t=s.type,t=t!=="head"&&t!=="body"&&!Ep(s.type,s.memoizedProps)),t&&(t=Ir)){if(Dp(s))throw Q5(),Error(Re(418));for(;t;)K5(s,t),t=Tn(t.nextSibling)}if(Yb(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Re(317));e:{for(s=s.nextSibling,t=0;s;){if(s.nodeType===8){var r=s.data;if(r==="/$"){if(t===0){Ir=Tn(s.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}s=s.nextSibling}Ir=null}}else Ir=Sr?Tn(s.stateNode.nextSibling):null;return!0}function Q5(){for(var s=Ir;s;)s=Tn(s.nextSibling)}function Ao(){Ir=Sr=null,es=!1}function gf(s){Jr===null?Jr=[s]:Jr.push(s)}var mE=sn.ReactCurrentBatchConfig;function Il(s,t,r){if(s=r.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Re(309));var a=r.stateNode}if(!a)throw Error(Re(147,s));var i=a,l=""+s;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(o){var c=i.refs;o===null?delete c[l]:c[l]=o},t._stringRef=l,t)}if(typeof s!="string")throw Error(Re(284));if(!r._owner)throw Error(Re(290,s))}return s}function Kd(s,t){throw s=Object.prototype.toString.call(t),Error(Re(31,s==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":s))}function Xb(s){var t=s._init;return t(s._payload)}function Y5(s){function t(_,M){if(s){var R=_.deletions;R===null?(_.deletions=[M],_.flags|=16):R.push(M)}}function r(_,M){if(!s)return null;for(;M!==null;)t(_,M),M=M.sibling;return null}function a(_,M){for(_=new Map;M!==null;)M.key!==null?_.set(M.key,M):_.set(M.index,M),M=M.sibling;return _}function i(_,M){return _=Rn(_,M),_.index=0,_.sibling=null,_}function l(_,M,R){return _.index=R,s?(R=_.alternate,R!==null?(R=R.index,R<M?(_.flags|=2,M):R):(_.flags|=2,M)):(_.flags|=1048576,M)}function o(_){return s&&_.alternate===null&&(_.flags|=2),_}function c(_,M,R,q){return M===null||M.tag!==6?(M=kh(R,_.mode,q),M.return=_,M):(M=i(M,R),M.return=_,M)}function d(_,M,R,q){var G=R.type;return G===to?f(_,M,R.props.children,q,R.key):M!==null&&(M.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===pn&&Xb(G)===M.type)?(q=i(M,R.props),q.ref=Il(_,M,R),q.return=_,q):(q=wu(R.type,R.key,R.props,null,_.mode,q),q.ref=Il(_,M,R),q.return=_,q)}function x(_,M,R,q){return M===null||M.tag!==4||M.stateNode.containerInfo!==R.containerInfo||M.stateNode.implementation!==R.implementation?(M=Ih(R,_.mode,q),M.return=_,M):(M=i(M,R.children||[]),M.return=_,M)}function f(_,M,R,q,G){return M===null||M.tag!==7?(M=bi(R,_.mode,q,G),M.return=_,M):(M=i(M,R),M.return=_,M)}function j(_,M,R){if(typeof M=="string"&&M!==""||typeof M=="number")return M=kh(""+M,_.mode,R),M.return=_,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Od:return R=wu(M.type,M.key,M.props,null,_.mode,R),R.ref=Il(_,null,M),R.return=_,R;case eo:return M=Ih(M,_.mode,R),M.return=_,M;case pn:var q=M._init;return j(_,q(M._payload),R)}if(Dl(M)||vl(M))return M=bi(M,_.mode,R,null),M.return=_,M;Kd(_,M)}return null}function w(_,M,R,q){var G=M!==null?M.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return G!==null?null:c(_,M,""+R,q);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Od:return R.key===G?d(_,M,R,q):null;case eo:return R.key===G?x(_,M,R,q):null;case pn:return G=R._init,w(_,M,G(R._payload),q)}if(Dl(R)||vl(R))return G!==null?null:f(_,M,R,q,null);Kd(_,R)}return null}function S(_,M,R,q,G){if(typeof q=="string"&&q!==""||typeof q=="number")return _=_.get(R)||null,c(M,_,""+q,G);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case Od:return _=_.get(q.key===null?R:q.key)||null,d(M,_,q,G);case eo:return _=_.get(q.key===null?R:q.key)||null,x(M,_,q,G);case pn:var Y=q._init;return S(_,M,R,Y(q._payload),G)}if(Dl(q)||vl(q))return _=_.get(R)||null,f(M,_,q,G,null);Kd(M,q)}return null}function g(_,M,R,q){for(var G=null,Y=null,O=M,u=M=0,U=null;O!==null&&u<R.length;u++){O.index>u?(U=O,O=null):U=O.sibling;var F=w(_,O,R[u],q);if(F===null){O===null&&(O=U);break}s&&O&&F.alternate===null&&t(_,O),M=l(F,M,u),Y===null?G=F:Y.sibling=F,Y=F,O=U}if(u===R.length)return r(_,O),es&&oi(_,u),G;if(O===null){for(;u<R.length;u++)O=j(_,R[u],q),O!==null&&(M=l(O,M,u),Y===null?G=O:Y.sibling=O,Y=O);return es&&oi(_,u),G}for(O=a(_,O);u<R.length;u++)U=S(O,_,u,R[u],q),U!==null&&(s&&U.alternate!==null&&O.delete(U.key===null?u:U.key),M=l(U,M,u),Y===null?G=U:Y.sibling=U,Y=U);return s&&O.forEach(function(Q){return t(_,Q)}),es&&oi(_,u),G}function V(_,M,R,q){var G=vl(R);if(typeof G!="function")throw Error(Re(150));if(R=G.call(R),R==null)throw Error(Re(151));for(var Y=G=null,O=M,u=M=0,U=null,F=R.next();O!==null&&!F.done;u++,F=R.next()){O.index>u?(U=O,O=null):U=O.sibling;var Q=w(_,O,F.value,q);if(Q===null){O===null&&(O=U);break}s&&O&&Q.alternate===null&&t(_,O),M=l(Q,M,u),Y===null?G=Q:Y.sibling=Q,Y=Q,O=U}if(F.done)return r(_,O),es&&oi(_,u),G;if(O===null){for(;!F.done;u++,F=R.next())F=j(_,F.value,q),F!==null&&(M=l(F,M,u),Y===null?G=F:Y.sibling=F,Y=F);return es&&oi(_,u),G}for(O=a(_,O);!F.done;u++,F=R.next())F=S(O,_,u,F.value,q),F!==null&&(s&&F.alternate!==null&&O.delete(F.key===null?u:F.key),M=l(F,M,u),Y===null?G=F:Y.sibling=F,Y=F);return s&&O.forEach(function(T){return t(_,T)}),es&&oi(_,u),G}function E(_,M,R,q){if(typeof R=="object"&&R!==null&&R.type===to&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case Od:e:{for(var G=R.key,Y=M;Y!==null;){if(Y.key===G){if(G=R.type,G===to){if(Y.tag===7){r(_,Y.sibling),M=i(Y,R.props.children),M.return=_,_=M;break e}}else if(Y.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===pn&&Xb(G)===Y.type){r(_,Y.sibling),M=i(Y,R.props),M.ref=Il(_,Y,R),M.return=_,_=M;break e}r(_,Y);break}else t(_,Y);Y=Y.sibling}R.type===to?(M=bi(R.props.children,_.mode,q,R.key),M.return=_,_=M):(q=wu(R.type,R.key,R.props,null,_.mode,q),q.ref=Il(_,M,R),q.return=_,_=q)}return o(_);case eo:e:{for(Y=R.key;M!==null;){if(M.key===Y)if(M.tag===4&&M.stateNode.containerInfo===R.containerInfo&&M.stateNode.implementation===R.implementation){r(_,M.sibling),M=i(M,R.children||[]),M.return=_,_=M;break e}else{r(_,M);break}else t(_,M);M=M.sibling}M=Ih(R,_.mode,q),M.return=_,_=M}return o(_);case pn:return Y=R._init,E(_,M,Y(R._payload),q)}if(Dl(R))return g(_,M,R,q);if(vl(R))return V(_,M,R,q);Kd(_,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,M!==null&&M.tag===6?(r(_,M.sibling),M=i(M,R),M.return=_,_=M):(r(_,M),M=kh(R,_.mode,q),M.return=_,_=M),o(_)):r(_,M)}return E}var Ro=Y5(!0),X5=Y5(!1),ex=Xn(null),tx=null,co=null,yf=null;function bf(){yf=co=tx=null}function vf(s){var t=ex.current;Zt(ex),s._currentValue=t}function Rp(s,t,r){for(;s!==null;){var a=s.alternate;if((s.childLanes&t)!==t?(s.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),s===r)break;s=s.return}}function ko(s,t){tx=s,yf=co=null,s=s.dependencies,s!==null&&s.firstContext!==null&&(s.lanes&t&&(mr=!0),s.firstContext=null)}function Ur(s){var t=s._currentValue;if(yf!==s)if(s={context:s,memoizedValue:t,next:null},co===null){if(tx===null)throw Error(Re(308));co=s,tx.dependencies={lanes:0,firstContext:s}}else co=co.next=s;return t}var xi=null;function jf(s){xi===null?xi=[s]:xi.push(s)}function J5(s,t,r,a){var i=t.interleaved;return i===null?(r.next=r,jf(t)):(r.next=i.next,i.next=r),t.interleaved=r,Ga(s,a)}function Ga(s,t){s.lanes|=t;var r=s.alternate;for(r!==null&&(r.lanes|=t),r=s,s=s.return;s!==null;)s.childLanes|=t,r=s.alternate,r!==null&&(r.childLanes|=t),r=s,s=s.return;return r.tag===3?r.stateNode:null}var fn=!1;function Nf(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Z5(s,t){s=s.updateQueue,t.updateQueue===s&&(t.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Ua(s,t){return{eventTime:s,lane:t,tag:0,payload:null,callback:null,next:null}}function _n(s,t,r){var a=s.updateQueue;if(a===null)return null;if(a=a.shared,Lt&2){var i=a.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),a.pending=t,Ga(s,r)}return i=a.interleaved,i===null?(t.next=t,jf(a)):(t.next=i.next,i.next=t),a.interleaved=t,Ga(s,r)}function gu(s,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var a=t.lanes;a&=s.pendingLanes,r|=a,t.lanes=r,of(s,r)}}function Jb(s,t){var r=s.updateQueue,a=s.alternate;if(a!==null&&(a=a.updateQueue,r===a)){var i=null,l=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};l===null?i=l=o:l=l.next=o,r=r.next}while(r!==null);l===null?i=l=t:l=l.next=t}else i=l=t;r={baseState:a.baseState,firstBaseUpdate:i,lastBaseUpdate:l,shared:a.shared,effects:a.effects},s.updateQueue=r;return}s=r.lastBaseUpdate,s===null?r.firstBaseUpdate=t:s.next=t,r.lastBaseUpdate=t}function sx(s,t,r,a){var i=s.updateQueue;fn=!1;var l=i.firstBaseUpdate,o=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var d=c,x=d.next;d.next=null,o===null?l=x:o.next=x,o=d;var f=s.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==o&&(c===null?f.firstBaseUpdate=x:c.next=x,f.lastBaseUpdate=d))}if(l!==null){var j=i.baseState;o=0,f=x=d=null,c=l;do{var w=c.lane,S=c.eventTime;if((a&w)===w){f!==null&&(f=f.next={eventTime:S,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var g=s,V=c;switch(w=t,S=r,V.tag){case 1:if(g=V.payload,typeof g=="function"){j=g.call(S,j,w);break e}j=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=V.payload,w=typeof g=="function"?g.call(S,j,w):g,w==null)break e;j=cs({},j,w);break e;case 2:fn=!0}}c.callback!==null&&c.lane!==0&&(s.flags|=64,w=i.effects,w===null?i.effects=[c]:w.push(c))}else S={eventTime:S,lane:w,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(x=f=S,d=j):f=f.next=S,o|=w;if(c=c.next,c===null){if(c=i.shared.pending,c===null)break;w=c,c=w.next,w.next=null,i.lastBaseUpdate=w,i.shared.pending=null}}while(1);if(f===null&&(d=j),i.baseState=d,i.firstBaseUpdate=x,i.lastBaseUpdate=f,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else l===null&&(i.shared.lanes=0);Ii|=o,s.lanes=o,s.memoizedState=j}}function Zb(s,t,r){if(s=t.effects,t.effects=null,s!==null)for(t=0;t<s.length;t++){var a=s[t],i=a.callback;if(i!==null){if(a.callback=null,a=r,typeof i!="function")throw Error(Re(191,i));i.call(a)}}}var Xc={},ga=Xn(Xc),jc=Xn(Xc),Nc=Xn(Xc);function mi(s){if(s===Xc)throw Error(Re(174));return s}function wf(s,t){switch(Kt(Nc,t),Kt(jc,s),Kt(ga,Xc),s=t.nodeType,s){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:hp(null,"");break;default:s=s===8?t.parentNode:t,t=s.namespaceURI||null,s=s.tagName,t=hp(t,s)}Zt(ga),Kt(ga,t)}function Mo(){Zt(ga),Zt(jc),Zt(Nc)}function e2(s){mi(Nc.current);var t=mi(ga.current),r=hp(t,s.type);t!==r&&(Kt(jc,s),Kt(ga,r))}function kf(s){jc.current===s&&(Zt(ga),Zt(jc))}var as=Xn(0);function rx(s){for(var t=s;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break;for(;t.sibling===null;){if(t.return===null||t.return===s)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var yh=[];function If(){for(var s=0;s<yh.length;s++)yh[s]._workInProgressVersionPrimary=null;yh.length=0}var yu=sn.ReactCurrentDispatcher,bh=sn.ReactCurrentBatchConfig,ki=0,is=null,Ns=null,Ss=null,ax=!1,Gl=!1,wc=0,hE=0;function Hs(){throw Error(Re(321))}function Pf(s,t){if(t===null)return!1;for(var r=0;r<t.length&&r<s.length;r++)if(!aa(s[r],t[r]))return!1;return!0}function Sf(s,t,r,a,i,l){if(ki=l,is=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,yu.current=s===null||s.memoizedState===null?yE:bE,s=r(a,i),Gl){l=0;do{if(Gl=!1,wc=0,25<=l)throw Error(Re(301));l+=1,Ss=Ns=null,t.updateQueue=null,yu.current=vE,s=r(a,i)}while(Gl)}if(yu.current=nx,t=Ns!==null&&Ns.next!==null,ki=0,Ss=Ns=is=null,ax=!1,t)throw Error(Re(300));return s}function Ef(){var s=wc!==0;return wc=0,s}function ma(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ss===null?is.memoizedState=Ss=s:Ss=Ss.next=s,Ss}function $r(){if(Ns===null){var s=is.alternate;s=s!==null?s.memoizedState:null}else s=Ns.next;var t=Ss===null?is.memoizedState:Ss.next;if(t!==null)Ss=t,Ns=s;else{if(s===null)throw Error(Re(310));Ns=s,s={memoizedState:Ns.memoizedState,baseState:Ns.baseState,baseQueue:Ns.baseQueue,queue:Ns.queue,next:null},Ss===null?is.memoizedState=Ss=s:Ss=Ss.next=s}return Ss}function kc(s,t){return typeof t=="function"?t(s):t}function vh(s){var t=$r(),r=t.queue;if(r===null)throw Error(Re(311));r.lastRenderedReducer=s;var a=Ns,i=a.baseQueue,l=r.pending;if(l!==null){if(i!==null){var o=i.next;i.next=l.next,l.next=o}a.baseQueue=i=l,r.pending=null}if(i!==null){l=i.next,a=a.baseState;var c=o=null,d=null,x=l;do{var f=x.lane;if((ki&f)===f)d!==null&&(d=d.next={lane:0,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null}),a=x.hasEagerState?x.eagerState:s(a,x.action);else{var j={lane:f,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null};d===null?(c=d=j,o=a):d=d.next=j,is.lanes|=f,Ii|=f}x=x.next}while(x!==null&&x!==l);d===null?o=a:d.next=c,aa(a,t.memoizedState)||(mr=!0),t.memoizedState=a,t.baseState=o,t.baseQueue=d,r.lastRenderedState=a}if(s=r.interleaved,s!==null){i=s;do l=i.lane,is.lanes|=l,Ii|=l,i=i.next;while(i!==s)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function jh(s){var t=$r(),r=t.queue;if(r===null)throw Error(Re(311));r.lastRenderedReducer=s;var a=r.dispatch,i=r.pending,l=t.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do l=s(l,o.action),o=o.next;while(o!==i);aa(l,t.memoizedState)||(mr=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),r.lastRenderedState=l}return[l,a]}function t2(){}function s2(s,t){var r=is,a=$r(),i=t(),l=!aa(a.memoizedState,i);if(l&&(a.memoizedState=i,mr=!0),a=a.queue,Cf(n2.bind(null,r,a,s),[s]),a.getSnapshot!==t||l||Ss!==null&&Ss.memoizedState.tag&1){if(r.flags|=2048,Ic(9,a2.bind(null,r,a,i,t),void 0,null),Ts===null)throw Error(Re(349));ki&30||r2(r,t,i)}return i}function r2(s,t,r){s.flags|=16384,s={getSnapshot:t,value:r},t=is.updateQueue,t===null?(t={lastEffect:null,stores:null},is.updateQueue=t,t.stores=[s]):(r=t.stores,r===null?t.stores=[s]:r.push(s))}function a2(s,t,r,a){t.value=r,t.getSnapshot=a,i2(t)&&o2(s)}function n2(s,t,r){return r(function(){i2(t)&&o2(s)})}function i2(s){var t=s.getSnapshot;s=s.value;try{var r=t();return!aa(s,r)}catch{return!0}}function o2(s){var t=Ga(s,1);t!==null&&ra(t,s,1,-1)}function ev(s){var t=ma();return typeof s=="function"&&(s=s()),t.memoizedState=t.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:kc,lastRenderedState:s},t.queue=s,s=s.dispatch=gE.bind(null,is,s),[t.memoizedState,s]}function Ic(s,t,r,a){return s={tag:s,create:t,destroy:r,deps:a,next:null},t=is.updateQueue,t===null?(t={lastEffect:null,stores:null},is.updateQueue=t,t.lastEffect=s.next=s):(r=t.lastEffect,r===null?t.lastEffect=s.next=s:(a=r.next,r.next=s,s.next=a,t.lastEffect=s)),s}function l2(){return $r().memoizedState}function bu(s,t,r,a){var i=ma();is.flags|=s,i.memoizedState=Ic(1|t,r,void 0,a===void 0?null:a)}function tm(s,t,r,a){var i=$r();a=a===void 0?null:a;var l=void 0;if(Ns!==null){var o=Ns.memoizedState;if(l=o.destroy,a!==null&&Pf(a,o.deps)){i.memoizedState=Ic(t,r,l,a);return}}is.flags|=s,i.memoizedState=Ic(1|t,r,l,a)}function tv(s,t){return bu(8390656,8,s,t)}function Cf(s,t){return tm(2048,8,s,t)}function c2(s,t){return tm(4,2,s,t)}function d2(s,t){return tm(4,4,s,t)}function u2(s,t){if(typeof t=="function")return s=s(),t(s),function(){t(null)};if(t!=null)return s=s(),t.current=s,function(){t.current=null}}function x2(s,t,r){return r=r!=null?r.concat([s]):null,tm(4,4,u2.bind(null,t,s),r)}function Tf(){}function m2(s,t){var r=$r();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&Pf(t,a[1])?a[0]:(r.memoizedState=[s,t],s)}function h2(s,t){var r=$r();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&Pf(t,a[1])?a[0]:(s=s(),r.memoizedState=[s,t],s)}function p2(s,t,r){return ki&21?(aa(r,t)||(r=v5(),is.lanes|=r,Ii|=r,s.baseState=!0),t):(s.baseState&&(s.baseState=!1,mr=!0),s.memoizedState=r)}function pE(s,t){var r=Ft;Ft=r!==0&&4>r?r:4,s(!0);var a=bh.transition;bh.transition={};try{s(!1),t()}finally{Ft=r,bh.transition=a}}function f2(){return $r().memoizedState}function fE(s,t,r){var a=An(s);if(r={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null},g2(s))y2(t,r);else if(r=J5(s,t,r,a),r!==null){var i=or();ra(r,s,a,i),b2(r,t,a)}}function gE(s,t,r){var a=An(s),i={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null};if(g2(s))y2(t,i);else{var l=s.alternate;if(s.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var o=t.lastRenderedState,c=l(o,r);if(i.hasEagerState=!0,i.eagerState=c,aa(c,o)){var d=t.interleaved;d===null?(i.next=i,jf(t)):(i.next=d.next,d.next=i),t.interleaved=i;return}}catch{}finally{}r=J5(s,t,i,a),r!==null&&(i=or(),ra(r,s,a,i),b2(r,t,a))}}function g2(s){var t=s.alternate;return s===is||t!==null&&t===is}function y2(s,t){Gl=ax=!0;var r=s.pending;r===null?t.next=t:(t.next=r.next,r.next=t),s.pending=t}function b2(s,t,r){if(r&4194240){var a=t.lanes;a&=s.pendingLanes,r|=a,t.lanes=r,of(s,r)}}var nx={readContext:Ur,useCallback:Hs,useContext:Hs,useEffect:Hs,useImperativeHandle:Hs,useInsertionEffect:Hs,useLayoutEffect:Hs,useMemo:Hs,useReducer:Hs,useRef:Hs,useState:Hs,useDebugValue:Hs,useDeferredValue:Hs,useTransition:Hs,useMutableSource:Hs,useSyncExternalStore:Hs,useId:Hs,unstable_isNewReconciler:!1},yE={readContext:Ur,useCallback:function(s,t){return ma().memoizedState=[s,t===void 0?null:t],s},useContext:Ur,useEffect:tv,useImperativeHandle:function(s,t,r){return r=r!=null?r.concat([s]):null,bu(4194308,4,u2.bind(null,t,s),r)},useLayoutEffect:function(s,t){return bu(4194308,4,s,t)},useInsertionEffect:function(s,t){return bu(4,2,s,t)},useMemo:function(s,t){var r=ma();return t=t===void 0?null:t,s=s(),r.memoizedState=[s,t],s},useReducer:function(s,t,r){var a=ma();return t=r!==void 0?r(t):t,a.memoizedState=a.baseState=t,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:t},a.queue=s,s=s.dispatch=fE.bind(null,is,s),[a.memoizedState,s]},useRef:function(s){var t=ma();return s={current:s},t.memoizedState=s},useState:ev,useDebugValue:Tf,useDeferredValue:function(s){return ma().memoizedState=s},useTransition:function(){var s=ev(!1),t=s[0];return s=pE.bind(null,s[1]),ma().memoizedState=s,[t,s]},useMutableSource:function(){},useSyncExternalStore:function(s,t,r){var a=is,i=ma();if(es){if(r===void 0)throw Error(Re(407));r=r()}else{if(r=t(),Ts===null)throw Error(Re(349));ki&30||r2(a,t,r)}i.memoizedState=r;var l={value:r,getSnapshot:t};return i.queue=l,tv(n2.bind(null,a,l,s),[s]),a.flags|=2048,Ic(9,a2.bind(null,a,l,r,t),void 0,null),r},useId:function(){var s=ma(),t=Ts.identifierPrefix;if(es){var r=Ba,a=Va;r=(a&~(1<<32-sa(a)-1)).toString(32)+r,t=":"+t+"R"+r,r=wc++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=hE++,t=":"+t+"r"+r.toString(32)+":";return s.memoizedState=t},unstable_isNewReconciler:!1},bE={readContext:Ur,useCallback:m2,useContext:Ur,useEffect:Cf,useImperativeHandle:x2,useInsertionEffect:c2,useLayoutEffect:d2,useMemo:h2,useReducer:vh,useRef:l2,useState:function(){return vh(kc)},useDebugValue:Tf,useDeferredValue:function(s){var t=$r();return p2(t,Ns.memoizedState,s)},useTransition:function(){var s=vh(kc)[0],t=$r().memoizedState;return[s,t]},useMutableSource:t2,useSyncExternalStore:s2,useId:f2,unstable_isNewReconciler:!1},vE={readContext:Ur,useCallback:m2,useContext:Ur,useEffect:Cf,useImperativeHandle:x2,useInsertionEffect:c2,useLayoutEffect:d2,useMemo:h2,useReducer:jh,useRef:l2,useState:function(){return jh(kc)},useDebugValue:Tf,useDeferredValue:function(s){var t=$r();return Ns===null?t.memoizedState=s:p2(t,Ns.memoizedState,s)},useTransition:function(){var s=jh(kc)[0],t=$r().memoizedState;return[s,t]},useMutableSource:t2,useSyncExternalStore:s2,useId:f2,unstable_isNewReconciler:!1};function Yr(s,t){if(s&&s.defaultProps){t=cs({},t),s=s.defaultProps;for(var r in s)t[r]===void 0&&(t[r]=s[r]);return t}return t}function Mp(s,t,r,a){t=s.memoizedState,r=r(a,t),r=r==null?t:cs({},t,r),s.memoizedState=r,s.lanes===0&&(s.updateQueue.baseState=r)}var sm={isMounted:function(s){return(s=s._reactInternals)?Mi(s)===s:!1},enqueueSetState:function(s,t,r){s=s._reactInternals;var a=or(),i=An(s),l=Ua(a,i);l.payload=t,r!=null&&(l.callback=r),t=_n(s,l,i),t!==null&&(ra(t,s,i,a),gu(t,s,i))},enqueueReplaceState:function(s,t,r){s=s._reactInternals;var a=or(),i=An(s),l=Ua(a,i);l.tag=1,l.payload=t,r!=null&&(l.callback=r),t=_n(s,l,i),t!==null&&(ra(t,s,i,a),gu(t,s,i))},enqueueForceUpdate:function(s,t){s=s._reactInternals;var r=or(),a=An(s),i=Ua(r,a);i.tag=2,t!=null&&(i.callback=t),t=_n(s,i,a),t!==null&&(ra(t,s,a,r),gu(t,s,a))}};function sv(s,t,r,a,i,l,o){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(a,l,o):t.prototype&&t.prototype.isPureReactComponent?!gc(r,a)||!gc(i,l):!0}function v2(s,t,r){var a=!1,i=zn,l=t.contextType;return typeof l=="object"&&l!==null?l=Ur(l):(i=fr(t)?Ni:Zs.current,a=t.contextTypes,l=(a=a!=null)?Do(s,i):zn),t=new t(r,l),s.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=sm,s.stateNode=t,t._reactInternals=s,a&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=i,s.__reactInternalMemoizedMaskedChildContext=l),t}function rv(s,t,r,a){s=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,a),t.state!==s&&sm.enqueueReplaceState(t,t.state,null)}function Lp(s,t,r,a){var i=s.stateNode;i.props=r,i.state=s.memoizedState,i.refs={},Nf(s);var l=t.contextType;typeof l=="object"&&l!==null?i.context=Ur(l):(l=fr(t)?Ni:Zs.current,i.context=Do(s,l)),i.state=s.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(Mp(s,t,l,r),i.state=s.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&sm.enqueueReplaceState(i,i.state,null),sx(s,r,i,a),i.state=s.memoizedState),typeof i.componentDidMount=="function"&&(s.flags|=4194308)}function Lo(s,t){try{var r="",a=t;do r+=KP(a),a=a.return;while(a);var i=r}catch(l){i=`
Error generating stack: `+l.message+`
`+l.stack}return{value:s,source:t,stack:i,digest:null}}function Nh(s,t,r){return{value:s,source:null,stack:r??null,digest:t??null}}function Op(s,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var jE=typeof WeakMap=="function"?WeakMap:Map;function j2(s,t,r){r=Ua(-1,r),r.tag=3,r.payload={element:null};var a=t.value;return r.callback=function(){ox||(ox=!0,Gp=a),Op(s,t)},r}function N2(s,t,r){r=Ua(-1,r),r.tag=3;var a=s.type.getDerivedStateFromError;if(typeof a=="function"){var i=t.value;r.payload=function(){return a(i)},r.callback=function(){Op(s,t)}}var l=s.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(r.callback=function(){Op(s,t),typeof a!="function"&&(Dn===null?Dn=new Set([this]):Dn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function av(s,t,r){var a=s.pingCache;if(a===null){a=s.pingCache=new jE;var i=new Set;a.set(t,i)}else i=a.get(t),i===void 0&&(i=new Set,a.set(t,i));i.has(r)||(i.add(r),s=ME.bind(null,s,t,r),t.then(s,s))}function nv(s){do{var t;if((t=s.tag===13)&&(t=s.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return s;s=s.return}while(s!==null);return null}function iv(s,t,r,a,i){return s.mode&1?(s.flags|=65536,s.lanes=i,s):(s===t?s.flags|=65536:(s.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Ua(-1,1),t.tag=2,_n(r,t,1))),r.lanes|=1),s)}var NE=sn.ReactCurrentOwner,mr=!1;function ar(s,t,r,a){t.child=s===null?X5(t,null,r,a):Ro(t,s.child,r,a)}function ov(s,t,r,a,i){r=r.render;var l=t.ref;return ko(t,i),a=Sf(s,t,r,a,l,i),r=Ef(),s!==null&&!mr?(t.updateQueue=s.updateQueue,t.flags&=-2053,s.lanes&=~i,Ka(s,t,i)):(es&&r&&pf(t),t.flags|=1,ar(s,t,a,i),t.child)}function lv(s,t,r,a,i){if(s===null){var l=r.type;return typeof l=="function"&&!Vf(l)&&l.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=l,w2(s,t,l,a,i)):(s=wu(r.type,null,a,t,t.mode,i),s.ref=t.ref,s.return=t,t.child=s)}if(l=s.child,!(s.lanes&i)){var o=l.memoizedProps;if(r=r.compare,r=r!==null?r:gc,r(o,a)&&s.ref===t.ref)return Ka(s,t,i)}return t.flags|=1,s=Rn(l,a),s.ref=t.ref,s.return=t,t.child=s}function w2(s,t,r,a,i){if(s!==null){var l=s.memoizedProps;if(gc(l,a)&&s.ref===t.ref)if(mr=!1,t.pendingProps=a=l,(s.lanes&i)!==0)s.flags&131072&&(mr=!0);else return t.lanes=s.lanes,Ka(s,t,i)}return Vp(s,t,r,a,i)}function k2(s,t,r){var a=t.pendingProps,i=a.children,l=s!==null?s.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Kt(xo,wr),wr|=r;else{if(!(r&1073741824))return s=l!==null?l.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:s,cachePool:null,transitions:null},t.updateQueue=null,Kt(xo,wr),wr|=s,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=l!==null?l.baseLanes:r,Kt(xo,wr),wr|=a}else l!==null?(a=l.baseLanes|r,t.memoizedState=null):a=r,Kt(xo,wr),wr|=a;return ar(s,t,i,r),t.child}function I2(s,t){var r=t.ref;(s===null&&r!==null||s!==null&&s.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Vp(s,t,r,a,i){var l=fr(r)?Ni:Zs.current;return l=Do(t,l),ko(t,i),r=Sf(s,t,r,a,l,i),a=Ef(),s!==null&&!mr?(t.updateQueue=s.updateQueue,t.flags&=-2053,s.lanes&=~i,Ka(s,t,i)):(es&&a&&pf(t),t.flags|=1,ar(s,t,r,i),t.child)}function cv(s,t,r,a,i){if(fr(r)){var l=!0;Xu(t)}else l=!1;if(ko(t,i),t.stateNode===null)vu(s,t),v2(t,r,a),Lp(t,r,a,i),a=!0;else if(s===null){var o=t.stateNode,c=t.memoizedProps;o.props=c;var d=o.context,x=r.contextType;typeof x=="object"&&x!==null?x=Ur(x):(x=fr(r)?Ni:Zs.current,x=Do(t,x));var f=r.getDerivedStateFromProps,j=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";j||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==a||d!==x)&&rv(t,o,a,x),fn=!1;var w=t.memoizedState;o.state=w,sx(t,a,o,i),d=t.memoizedState,c!==a||w!==d||pr.current||fn?(typeof f=="function"&&(Mp(t,r,f,a),d=t.memoizedState),(c=fn||sv(t,r,c,a,w,d,x))?(j||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=d),o.props=a,o.state=d,o.context=x,a=c):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{o=t.stateNode,Z5(s,t),c=t.memoizedProps,x=t.type===t.elementType?c:Yr(t.type,c),o.props=x,j=t.pendingProps,w=o.context,d=r.contextType,typeof d=="object"&&d!==null?d=Ur(d):(d=fr(r)?Ni:Zs.current,d=Do(t,d));var S=r.getDerivedStateFromProps;(f=typeof S=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==j||w!==d)&&rv(t,o,a,d),fn=!1,w=t.memoizedState,o.state=w,sx(t,a,o,i);var g=t.memoizedState;c!==j||w!==g||pr.current||fn?(typeof S=="function"&&(Mp(t,r,S,a),g=t.memoizedState),(x=fn||sv(t,r,x,a,w,g,d)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(a,g,d),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(a,g,d)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===s.memoizedProps&&w===s.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===s.memoizedProps&&w===s.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=g),o.props=a,o.state=g,o.context=d,a=x):(typeof o.componentDidUpdate!="function"||c===s.memoizedProps&&w===s.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===s.memoizedProps&&w===s.memoizedState||(t.flags|=1024),a=!1)}return Bp(s,t,r,a,l,i)}function Bp(s,t,r,a,i,l){I2(s,t);var o=(t.flags&128)!==0;if(!a&&!o)return i&&Kb(t,r,!1),Ka(s,t,l);a=t.stateNode,NE.current=t;var c=o&&typeof r.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,s!==null&&o?(t.child=Ro(t,s.child,null,l),t.child=Ro(t,null,c,l)):ar(s,t,c,l),t.memoizedState=a.state,i&&Kb(t,r,!0),t.child}function P2(s){var t=s.stateNode;t.pendingContext?Gb(s,t.pendingContext,t.pendingContext!==t.context):t.context&&Gb(s,t.context,!1),wf(s,t.containerInfo)}function dv(s,t,r,a,i){return Ao(),gf(i),t.flags|=256,ar(s,t,r,a),t.child}var zp={dehydrated:null,treeContext:null,retryLane:0};function Fp(s){return{baseLanes:s,cachePool:null,transitions:null}}function S2(s,t,r){var a=t.pendingProps,i=as.current,l=!1,o=(t.flags&128)!==0,c;if((c=o)||(c=s!==null&&s.memoizedState===null?!1:(i&2)!==0),c?(l=!0,t.flags&=-129):(s===null||s.memoizedState!==null)&&(i|=1),Kt(as,i&1),s===null)return Ap(t),s=t.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?(t.mode&1?s.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=a.children,s=a.fallback,l?(a=t.mode,l=t.child,o={mode:"hidden",children:o},!(a&1)&&l!==null?(l.childLanes=0,l.pendingProps=o):l=nm(o,a,0,null),s=bi(s,a,r,null),l.return=t,s.return=t,l.sibling=s,t.child=l,t.child.memoizedState=Fp(r),t.memoizedState=zp,s):_f(t,o));if(i=s.memoizedState,i!==null&&(c=i.dehydrated,c!==null))return wE(s,t,o,a,c,i,r);if(l){l=a.fallback,o=t.mode,i=s.child,c=i.sibling;var d={mode:"hidden",children:a.children};return!(o&1)&&t.child!==i?(a=t.child,a.childLanes=0,a.pendingProps=d,t.deletions=null):(a=Rn(i,d),a.subtreeFlags=i.subtreeFlags&14680064),c!==null?l=Rn(c,l):(l=bi(l,o,r,null),l.flags|=2),l.return=t,a.return=t,a.sibling=l,t.child=a,a=l,l=t.child,o=s.child.memoizedState,o=o===null?Fp(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},l.memoizedState=o,l.childLanes=s.childLanes&~r,t.memoizedState=zp,a}return l=s.child,s=l.sibling,a=Rn(l,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=r),a.return=t,a.sibling=null,s!==null&&(r=t.deletions,r===null?(t.deletions=[s],t.flags|=16):r.push(s)),t.child=a,t.memoizedState=null,a}function _f(s,t){return t=nm({mode:"visible",children:t},s.mode,0,null),t.return=s,s.child=t}function Qd(s,t,r,a){return a!==null&&gf(a),Ro(t,s.child,null,r),s=_f(t,t.pendingProps.children),s.flags|=2,t.memoizedState=null,s}function wE(s,t,r,a,i,l,o){if(r)return t.flags&256?(t.flags&=-257,a=Nh(Error(Re(422))),Qd(s,t,o,a)):t.memoizedState!==null?(t.child=s.child,t.flags|=128,null):(l=a.fallback,i=t.mode,a=nm({mode:"visible",children:a.children},i,0,null),l=bi(l,i,o,null),l.flags|=2,a.return=t,l.return=t,a.sibling=l,t.child=a,t.mode&1&&Ro(t,s.child,null,o),t.child.memoizedState=Fp(o),t.memoizedState=zp,l);if(!(t.mode&1))return Qd(s,t,o,null);if(i.data==="$!"){if(a=i.nextSibling&&i.nextSibling.dataset,a)var c=a.dgst;return a=c,l=Error(Re(419)),a=Nh(l,a,void 0),Qd(s,t,o,a)}if(c=(o&s.childLanes)!==0,mr||c){if(a=Ts,a!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(a.suspendedLanes|o)?0:i,i!==0&&i!==l.retryLane&&(l.retryLane=i,Ga(s,i),ra(a,s,i,-1))}return Of(),a=Nh(Error(Re(421))),Qd(s,t,o,a)}return i.data==="$?"?(t.flags|=128,t.child=s.child,t=LE.bind(null,s),i._reactRetry=t,null):(s=l.treeContext,Ir=Tn(i.nextSibling),Sr=t,es=!0,Jr=null,s!==null&&(Lr[Or++]=Va,Lr[Or++]=Ba,Lr[Or++]=wi,Va=s.id,Ba=s.overflow,wi=t),t=_f(t,a.children),t.flags|=4096,t)}function uv(s,t,r){s.lanes|=t;var a=s.alternate;a!==null&&(a.lanes|=t),Rp(s.return,t,r)}function wh(s,t,r,a,i){var l=s.memoizedState;l===null?s.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:i}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=a,l.tail=r,l.tailMode=i)}function E2(s,t,r){var a=t.pendingProps,i=a.revealOrder,l=a.tail;if(ar(s,t,a.children,r),a=as.current,a&2)a=a&1|2,t.flags|=128;else{if(s!==null&&s.flags&128)e:for(s=t.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&uv(s,r,t);else if(s.tag===19)uv(s,r,t);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}a&=1}if(Kt(as,a),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)s=r.alternate,s!==null&&rx(s)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),wh(t,!1,i,r,l);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(s=i.alternate,s!==null&&rx(s)===null){t.child=i;break}s=i.sibling,i.sibling=r,r=i,i=s}wh(t,!0,r,null,l);break;case"together":wh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function vu(s,t){!(t.mode&1)&&s!==null&&(s.alternate=null,t.alternate=null,t.flags|=2)}function Ka(s,t,r){if(s!==null&&(t.dependencies=s.dependencies),Ii|=t.lanes,!(r&t.childLanes))return null;if(s!==null&&t.child!==s.child)throw Error(Re(153));if(t.child!==null){for(s=t.child,r=Rn(s,s.pendingProps),t.child=r,r.return=t;s.sibling!==null;)s=s.sibling,r=r.sibling=Rn(s,s.pendingProps),r.return=t;r.sibling=null}return t.child}function kE(s,t,r){switch(t.tag){case 3:P2(t),Ao();break;case 5:e2(t);break;case 1:fr(t.type)&&Xu(t);break;case 4:wf(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,i=t.memoizedProps.value;Kt(ex,a._currentValue),a._currentValue=i;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(Kt(as,as.current&1),t.flags|=128,null):r&t.child.childLanes?S2(s,t,r):(Kt(as,as.current&1),s=Ka(s,t,r),s!==null?s.sibling:null);Kt(as,as.current&1);break;case 19:if(a=(r&t.childLanes)!==0,s.flags&128){if(a)return E2(s,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Kt(as,as.current),a)break;return null;case 22:case 23:return t.lanes=0,k2(s,t,r)}return Ka(s,t,r)}var C2,Up,T2,_2;C2=function(s,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)s.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Up=function(){};T2=function(s,t,r,a){var i=s.memoizedProps;if(i!==a){s=t.stateNode,mi(ga.current);var l=null;switch(r){case"input":i=dp(s,i),a=dp(s,a),l=[];break;case"select":i=cs({},i,{value:void 0}),a=cs({},a,{value:void 0}),l=[];break;case"textarea":i=mp(s,i),a=mp(s,a),l=[];break;default:typeof i.onClick!="function"&&typeof a.onClick=="function"&&(s.onclick=Qu)}pp(r,a);var o;r=null;for(x in i)if(!a.hasOwnProperty(x)&&i.hasOwnProperty(x)&&i[x]!=null)if(x==="style"){var c=i[x];for(o in c)c.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else x!=="dangerouslySetInnerHTML"&&x!=="children"&&x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(dc.hasOwnProperty(x)?l||(l=[]):(l=l||[]).push(x,null));for(x in a){var d=a[x];if(c=i!=null?i[x]:void 0,a.hasOwnProperty(x)&&d!==c&&(d!=null||c!=null))if(x==="style")if(c){for(o in c)!c.hasOwnProperty(o)||d&&d.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in d)d.hasOwnProperty(o)&&c[o]!==d[o]&&(r||(r={}),r[o]=d[o])}else r||(l||(l=[]),l.push(x,r)),r=d;else x==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,c=c?c.__html:void 0,d!=null&&c!==d&&(l=l||[]).push(x,d)):x==="children"?typeof d!="string"&&typeof d!="number"||(l=l||[]).push(x,""+d):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&(dc.hasOwnProperty(x)?(d!=null&&x==="onScroll"&&Jt("scroll",s),l||c===d||(l=[])):(l=l||[]).push(x,d))}r&&(l=l||[]).push("style",r);var x=l;(t.updateQueue=x)&&(t.flags|=4)}};_2=function(s,t,r,a){r!==a&&(t.flags|=4)};function Pl(s,t){if(!es)switch(s.tailMode){case"hidden":t=s.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?s.tail=null:r.sibling=null;break;case"collapsed":r=s.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t||s.tail===null?s.tail=null:s.tail.sibling=null:a.sibling=null}}function Gs(s){var t=s.alternate!==null&&s.alternate.child===s.child,r=0,a=0;if(t)for(var i=s.child;i!==null;)r|=i.lanes|i.childLanes,a|=i.subtreeFlags&14680064,a|=i.flags&14680064,i.return=s,i=i.sibling;else for(i=s.child;i!==null;)r|=i.lanes|i.childLanes,a|=i.subtreeFlags,a|=i.flags,i.return=s,i=i.sibling;return s.subtreeFlags|=a,s.childLanes=r,t}function IE(s,t,r){var a=t.pendingProps;switch(ff(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gs(t),null;case 1:return fr(t.type)&&Yu(),Gs(t),null;case 3:return a=t.stateNode,Mo(),Zt(pr),Zt(Zs),If(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(s===null||s.child===null)&&(Gd(t)?t.flags|=4:s===null||s.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Jr!==null&&(Yp(Jr),Jr=null))),Up(s,t),Gs(t),null;case 5:kf(t);var i=mi(Nc.current);if(r=t.type,s!==null&&t.stateNode!=null)T2(s,t,r,a,i),s.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(Re(166));return Gs(t),null}if(s=mi(ga.current),Gd(t)){a=t.stateNode,r=t.type;var l=t.memoizedProps;switch(a[pa]=t,a[vc]=l,s=(t.mode&1)!==0,r){case"dialog":Jt("cancel",a),Jt("close",a);break;case"iframe":case"object":case"embed":Jt("load",a);break;case"video":case"audio":for(i=0;i<Rl.length;i++)Jt(Rl[i],a);break;case"source":Jt("error",a);break;case"img":case"image":case"link":Jt("error",a),Jt("load",a);break;case"details":Jt("toggle",a);break;case"input":vb(a,l),Jt("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!l.multiple},Jt("invalid",a);break;case"textarea":Nb(a,l),Jt("invalid",a)}pp(r,l),i=null;for(var o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="children"?typeof c=="string"?a.textContent!==c&&(l.suppressHydrationWarning!==!0&&Hd(a.textContent,c,s),i=["children",c]):typeof c=="number"&&a.textContent!==""+c&&(l.suppressHydrationWarning!==!0&&Hd(a.textContent,c,s),i=["children",""+c]):dc.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&Jt("scroll",a)}switch(r){case"input":Vd(a),jb(a,l,!0);break;case"textarea":Vd(a),wb(a);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(a.onclick=Qu)}a=i,t.updateQueue=a,a!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=n5(r)),s==="http://www.w3.org/1999/xhtml"?r==="script"?(s=o.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof a.is=="string"?s=o.createElement(r,{is:a.is}):(s=o.createElement(r),r==="select"&&(o=s,a.multiple?o.multiple=!0:a.size&&(o.size=a.size))):s=o.createElementNS(s,r),s[pa]=t,s[vc]=a,C2(s,t,!1,!1),t.stateNode=s;e:{switch(o=fp(r,a),r){case"dialog":Jt("cancel",s),Jt("close",s),i=a;break;case"iframe":case"object":case"embed":Jt("load",s),i=a;break;case"video":case"audio":for(i=0;i<Rl.length;i++)Jt(Rl[i],s);i=a;break;case"source":Jt("error",s),i=a;break;case"img":case"image":case"link":Jt("error",s),Jt("load",s),i=a;break;case"details":Jt("toggle",s),i=a;break;case"input":vb(s,a),i=dp(s,a),Jt("invalid",s);break;case"option":i=a;break;case"select":s._wrapperState={wasMultiple:!!a.multiple},i=cs({},a,{value:void 0}),Jt("invalid",s);break;case"textarea":Nb(s,a),i=mp(s,a),Jt("invalid",s);break;default:i=a}pp(r,i),c=i;for(l in c)if(c.hasOwnProperty(l)){var d=c[l];l==="style"?l5(s,d):l==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&i5(s,d)):l==="children"?typeof d=="string"?(r!=="textarea"||d!=="")&&uc(s,d):typeof d=="number"&&uc(s,""+d):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(dc.hasOwnProperty(l)?d!=null&&l==="onScroll"&&Jt("scroll",s):d!=null&&ef(s,l,d,o))}switch(r){case"input":Vd(s),jb(s,a,!1);break;case"textarea":Vd(s),wb(s);break;case"option":a.value!=null&&s.setAttribute("value",""+Bn(a.value));break;case"select":s.multiple=!!a.multiple,l=a.value,l!=null?vo(s,!!a.multiple,l,!1):a.defaultValue!=null&&vo(s,!!a.multiple,a.defaultValue,!0);break;default:typeof i.onClick=="function"&&(s.onclick=Qu)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Gs(t),null;case 6:if(s&&t.stateNode!=null)_2(s,t,s.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(Re(166));if(r=mi(Nc.current),mi(ga.current),Gd(t)){if(a=t.stateNode,r=t.memoizedProps,a[pa]=t,(l=a.nodeValue!==r)&&(s=Sr,s!==null))switch(s.tag){case 3:Hd(a.nodeValue,r,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Hd(a.nodeValue,r,(s.mode&1)!==0)}l&&(t.flags|=4)}else a=(r.nodeType===9?r:r.ownerDocument).createTextNode(a),a[pa]=t,t.stateNode=a}return Gs(t),null;case 13:if(Zt(as),a=t.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(es&&Ir!==null&&t.mode&1&&!(t.flags&128))Q5(),Ao(),t.flags|=98560,l=!1;else if(l=Gd(t),a!==null&&a.dehydrated!==null){if(s===null){if(!l)throw Error(Re(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(Re(317));l[pa]=t}else Ao(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Gs(t),l=!1}else Jr!==null&&(Yp(Jr),Jr=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(a=a!==null,a!==(s!==null&&s.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(s===null||as.current&1?ws===0&&(ws=3):Of())),t.updateQueue!==null&&(t.flags|=4),Gs(t),null);case 4:return Mo(),Up(s,t),s===null&&yc(t.stateNode.containerInfo),Gs(t),null;case 10:return vf(t.type._context),Gs(t),null;case 17:return fr(t.type)&&Yu(),Gs(t),null;case 19:if(Zt(as),l=t.memoizedState,l===null)return Gs(t),null;if(a=(t.flags&128)!==0,o=l.rendering,o===null)if(a)Pl(l,!1);else{if(ws!==0||s!==null&&s.flags&128)for(s=t.child;s!==null;){if(o=rx(s),o!==null){for(t.flags|=128,Pl(l,!1),a=o.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=r,r=t.child;r!==null;)l=r,s=a,l.flags&=14680066,o=l.alternate,o===null?(l.childLanes=0,l.lanes=s,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,l.type=o.type,s=o.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r=r.sibling;return Kt(as,as.current&1|2),t.child}s=s.sibling}l.tail!==null&&gs()>Oo&&(t.flags|=128,a=!0,Pl(l,!1),t.lanes=4194304)}else{if(!a)if(s=rx(o),s!==null){if(t.flags|=128,a=!0,r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Pl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!o.alternate&&!es)return Gs(t),null}else 2*gs()-l.renderingStartTime>Oo&&r!==1073741824&&(t.flags|=128,a=!0,Pl(l,!1),t.lanes=4194304);l.isBackwards?(o.sibling=t.child,t.child=o):(r=l.last,r!==null?r.sibling=o:t.child=o,l.last=o)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=gs(),t.sibling=null,r=as.current,Kt(as,a?r&1|2:r&1),t):(Gs(t),null);case 22:case 23:return Lf(),a=t.memoizedState!==null,s!==null&&s.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?wr&1073741824&&(Gs(t),t.subtreeFlags&6&&(t.flags|=8192)):Gs(t),null;case 24:return null;case 25:return null}throw Error(Re(156,t.tag))}function PE(s,t){switch(ff(t),t.tag){case 1:return fr(t.type)&&Yu(),s=t.flags,s&65536?(t.flags=s&-65537|128,t):null;case 3:return Mo(),Zt(pr),Zt(Zs),If(),s=t.flags,s&65536&&!(s&128)?(t.flags=s&-65537|128,t):null;case 5:return kf(t),null;case 13:if(Zt(as),s=t.memoizedState,s!==null&&s.dehydrated!==null){if(t.alternate===null)throw Error(Re(340));Ao()}return s=t.flags,s&65536?(t.flags=s&-65537|128,t):null;case 19:return Zt(as),null;case 4:return Mo(),null;case 10:return vf(t.type._context),null;case 22:case 23:return Lf(),null;case 24:return null;default:return null}}var Yd=!1,Xs=!1,SE=typeof WeakSet=="function"?WeakSet:Set,Je=null;function uo(s,t){var r=s.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(a){hs(s,t,a)}else r.current=null}function $p(s,t,r){try{r()}catch(a){hs(s,t,a)}}var xv=!1;function EE(s,t){if(Pp=Hu,s=L5(),hf(s)){if("selectionStart"in s)var r={start:s.selectionStart,end:s.selectionEnd};else e:{r=(r=s.ownerDocument)&&r.defaultView||window;var a=r.getSelection&&r.getSelection();if(a&&a.rangeCount!==0){r=a.anchorNode;var i=a.anchorOffset,l=a.focusNode;a=a.focusOffset;try{r.nodeType,l.nodeType}catch{r=null;break e}var o=0,c=-1,d=-1,x=0,f=0,j=s,w=null;t:for(;;){for(var S;j!==r||i!==0&&j.nodeType!==3||(c=o+i),j!==l||a!==0&&j.nodeType!==3||(d=o+a),j.nodeType===3&&(o+=j.nodeValue.length),(S=j.firstChild)!==null;)w=j,j=S;for(;;){if(j===s)break t;if(w===r&&++x===i&&(c=o),w===l&&++f===a&&(d=o),(S=j.nextSibling)!==null)break;j=w,w=j.parentNode}j=S}r=c===-1||d===-1?null:{start:c,end:d}}else r=null}r=r||{start:0,end:0}}else r=null;for(Sp={focusedElem:s,selectionRange:r},Hu=!1,Je=t;Je!==null;)if(t=Je,s=t.child,(t.subtreeFlags&1028)!==0&&s!==null)s.return=t,Je=s;else for(;Je!==null;){t=Je;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var V=g.memoizedProps,E=g.memoizedState,_=t.stateNode,M=_.getSnapshotBeforeUpdate(t.elementType===t.type?V:Yr(t.type,V),E);_.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var R=t.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Re(163))}}catch(q){hs(t,t.return,q)}if(s=t.sibling,s!==null){s.return=t.return,Je=s;break}Je=t.return}return g=xv,xv=!1,g}function Kl(s,t,r){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var i=a=a.next;do{if((i.tag&s)===s){var l=i.destroy;i.destroy=void 0,l!==void 0&&$p(t,r,l)}i=i.next}while(i!==a)}}function rm(s,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&s)===s){var a=r.create;r.destroy=a()}r=r.next}while(r!==t)}}function Wp(s){var t=s.ref;if(t!==null){var r=s.stateNode;switch(s.tag){case 5:s=r;break;default:s=r}typeof t=="function"?t(s):t.current=s}}function D2(s){var t=s.alternate;t!==null&&(s.alternate=null,D2(t)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(t=s.stateNode,t!==null&&(delete t[pa],delete t[vc],delete t[Tp],delete t[dE],delete t[uE])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function A2(s){return s.tag===5||s.tag===3||s.tag===4}function mv(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||A2(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function qp(s,t,r){var a=s.tag;if(a===5||a===6)s=s.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(s,t):r.insertBefore(s,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(s,r)):(t=r,t.appendChild(s)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Qu));else if(a!==4&&(s=s.child,s!==null))for(qp(s,t,r),s=s.sibling;s!==null;)qp(s,t,r),s=s.sibling}function Hp(s,t,r){var a=s.tag;if(a===5||a===6)s=s.stateNode,t?r.insertBefore(s,t):r.appendChild(s);else if(a!==4&&(s=s.child,s!==null))for(Hp(s,t,r),s=s.sibling;s!==null;)Hp(s,t,r),s=s.sibling}var Rs=null,Xr=!1;function xn(s,t,r){for(r=r.child;r!==null;)R2(s,t,r),r=r.sibling}function R2(s,t,r){if(fa&&typeof fa.onCommitFiberUnmount=="function")try{fa.onCommitFiberUnmount(Qx,r)}catch{}switch(r.tag){case 5:Xs||uo(r,t);case 6:var a=Rs,i=Xr;Rs=null,xn(s,t,r),Rs=a,Xr=i,Rs!==null&&(Xr?(s=Rs,r=r.stateNode,s.nodeType===8?s.parentNode.removeChild(r):s.removeChild(r)):Rs.removeChild(r.stateNode));break;case 18:Rs!==null&&(Xr?(s=Rs,r=r.stateNode,s.nodeType===8?fh(s.parentNode,r):s.nodeType===1&&fh(s,r),pc(s)):fh(Rs,r.stateNode));break;case 4:a=Rs,i=Xr,Rs=r.stateNode.containerInfo,Xr=!0,xn(s,t,r),Rs=a,Xr=i;break;case 0:case 11:case 14:case 15:if(!Xs&&(a=r.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){i=a=a.next;do{var l=i,o=l.destroy;l=l.tag,o!==void 0&&(l&2||l&4)&&$p(r,t,o),i=i.next}while(i!==a)}xn(s,t,r);break;case 1:if(!Xs&&(uo(r,t),a=r.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=r.memoizedProps,a.state=r.memoizedState,a.componentWillUnmount()}catch(c){hs(r,t,c)}xn(s,t,r);break;case 21:xn(s,t,r);break;case 22:r.mode&1?(Xs=(a=Xs)||r.memoizedState!==null,xn(s,t,r),Xs=a):xn(s,t,r);break;default:xn(s,t,r)}}function hv(s){var t=s.updateQueue;if(t!==null){s.updateQueue=null;var r=s.stateNode;r===null&&(r=s.stateNode=new SE),t.forEach(function(a){var i=OE.bind(null,s,a);r.has(a)||(r.add(a),a.then(i,i))})}}function Kr(s,t){var r=t.deletions;if(r!==null)for(var a=0;a<r.length;a++){var i=r[a];try{var l=s,o=t,c=o;e:for(;c!==null;){switch(c.tag){case 5:Rs=c.stateNode,Xr=!1;break e;case 3:Rs=c.stateNode.containerInfo,Xr=!0;break e;case 4:Rs=c.stateNode.containerInfo,Xr=!0;break e}c=c.return}if(Rs===null)throw Error(Re(160));R2(l,o,i),Rs=null,Xr=!1;var d=i.alternate;d!==null&&(d.return=null),i.return=null}catch(x){hs(i,t,x)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)M2(t,s),t=t.sibling}function M2(s,t){var r=s.alternate,a=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Kr(t,s),xa(s),a&4){try{Kl(3,s,s.return),rm(3,s)}catch(V){hs(s,s.return,V)}try{Kl(5,s,s.return)}catch(V){hs(s,s.return,V)}}break;case 1:Kr(t,s),xa(s),a&512&&r!==null&&uo(r,r.return);break;case 5:if(Kr(t,s),xa(s),a&512&&r!==null&&uo(r,r.return),s.flags&32){var i=s.stateNode;try{uc(i,"")}catch(V){hs(s,s.return,V)}}if(a&4&&(i=s.stateNode,i!=null)){var l=s.memoizedProps,o=r!==null?r.memoizedProps:l,c=s.type,d=s.updateQueue;if(s.updateQueue=null,d!==null)try{c==="input"&&l.type==="radio"&&l.name!=null&&r5(i,l),fp(c,o);var x=fp(c,l);for(o=0;o<d.length;o+=2){var f=d[o],j=d[o+1];f==="style"?l5(i,j):f==="dangerouslySetInnerHTML"?i5(i,j):f==="children"?uc(i,j):ef(i,f,j,x)}switch(c){case"input":up(i,l);break;case"textarea":a5(i,l);break;case"select":var w=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!l.multiple;var S=l.value;S!=null?vo(i,!!l.multiple,S,!1):w!==!!l.multiple&&(l.defaultValue!=null?vo(i,!!l.multiple,l.defaultValue,!0):vo(i,!!l.multiple,l.multiple?[]:"",!1))}i[vc]=l}catch(V){hs(s,s.return,V)}}break;case 6:if(Kr(t,s),xa(s),a&4){if(s.stateNode===null)throw Error(Re(162));i=s.stateNode,l=s.memoizedProps;try{i.nodeValue=l}catch(V){hs(s,s.return,V)}}break;case 3:if(Kr(t,s),xa(s),a&4&&r!==null&&r.memoizedState.isDehydrated)try{pc(t.containerInfo)}catch(V){hs(s,s.return,V)}break;case 4:Kr(t,s),xa(s);break;case 13:Kr(t,s),xa(s),i=s.child,i.flags&8192&&(l=i.memoizedState!==null,i.stateNode.isHidden=l,!l||i.alternate!==null&&i.alternate.memoizedState!==null||(Rf=gs())),a&4&&hv(s);break;case 22:if(f=r!==null&&r.memoizedState!==null,s.mode&1?(Xs=(x=Xs)||f,Kr(t,s),Xs=x):Kr(t,s),xa(s),a&8192){if(x=s.memoizedState!==null,(s.stateNode.isHidden=x)&&!f&&s.mode&1)for(Je=s,f=s.child;f!==null;){for(j=Je=f;Je!==null;){switch(w=Je,S=w.child,w.tag){case 0:case 11:case 14:case 15:Kl(4,w,w.return);break;case 1:uo(w,w.return);var g=w.stateNode;if(typeof g.componentWillUnmount=="function"){a=w,r=w.return;try{t=a,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(V){hs(a,r,V)}}break;case 5:uo(w,w.return);break;case 22:if(w.memoizedState!==null){fv(j);continue}}S!==null?(S.return=w,Je=S):fv(j)}f=f.sibling}e:for(f=null,j=s;;){if(j.tag===5){if(f===null){f=j;try{i=j.stateNode,x?(l=i.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(c=j.stateNode,d=j.memoizedProps.style,o=d!=null&&d.hasOwnProperty("display")?d.display:null,c.style.display=o5("display",o))}catch(V){hs(s,s.return,V)}}}else if(j.tag===6){if(f===null)try{j.stateNode.nodeValue=x?"":j.memoizedProps}catch(V){hs(s,s.return,V)}}else if((j.tag!==22&&j.tag!==23||j.memoizedState===null||j===s)&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===s)break e;for(;j.sibling===null;){if(j.return===null||j.return===s)break e;f===j&&(f=null),j=j.return}f===j&&(f=null),j.sibling.return=j.return,j=j.sibling}}break;case 19:Kr(t,s),xa(s),a&4&&hv(s);break;case 21:break;default:Kr(t,s),xa(s)}}function xa(s){var t=s.flags;if(t&2){try{e:{for(var r=s.return;r!==null;){if(A2(r)){var a=r;break e}r=r.return}throw Error(Re(160))}switch(a.tag){case 5:var i=a.stateNode;a.flags&32&&(uc(i,""),a.flags&=-33);var l=mv(s);Hp(s,l,i);break;case 3:case 4:var o=a.stateNode.containerInfo,c=mv(s);qp(s,c,o);break;default:throw Error(Re(161))}}catch(d){hs(s,s.return,d)}s.flags&=-3}t&4096&&(s.flags&=-4097)}function CE(s,t,r){Je=s,L2(s)}function L2(s,t,r){for(var a=(s.mode&1)!==0;Je!==null;){var i=Je,l=i.child;if(i.tag===22&&a){var o=i.memoizedState!==null||Yd;if(!o){var c=i.alternate,d=c!==null&&c.memoizedState!==null||Xs;c=Yd;var x=Xs;if(Yd=o,(Xs=d)&&!x)for(Je=i;Je!==null;)o=Je,d=o.child,o.tag===22&&o.memoizedState!==null?gv(i):d!==null?(d.return=o,Je=d):gv(i);for(;l!==null;)Je=l,L2(l),l=l.sibling;Je=i,Yd=c,Xs=x}pv(s)}else i.subtreeFlags&8772&&l!==null?(l.return=i,Je=l):pv(s)}}function pv(s){for(;Je!==null;){var t=Je;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Xs||rm(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!Xs)if(r===null)a.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:Yr(t.type,r.memoizedProps);a.componentDidUpdate(i,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&Zb(t,l,a);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Zb(t,o,r)}break;case 5:var c=t.stateNode;if(r===null&&t.flags&4){r=c;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&r.focus();break;case"img":d.src&&(r.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var x=t.alternate;if(x!==null){var f=x.memoizedState;if(f!==null){var j=f.dehydrated;j!==null&&pc(j)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Re(163))}Xs||t.flags&512&&Wp(t)}catch(w){hs(t,t.return,w)}}if(t===s){Je=null;break}if(r=t.sibling,r!==null){r.return=t.return,Je=r;break}Je=t.return}}function fv(s){for(;Je!==null;){var t=Je;if(t===s){Je=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Je=r;break}Je=t.return}}function gv(s){for(;Je!==null;){var t=Je;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{rm(4,t)}catch(d){hs(t,r,d)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var i=t.return;try{a.componentDidMount()}catch(d){hs(t,i,d)}}var l=t.return;try{Wp(t)}catch(d){hs(t,l,d)}break;case 5:var o=t.return;try{Wp(t)}catch(d){hs(t,o,d)}}}catch(d){hs(t,t.return,d)}if(t===s){Je=null;break}var c=t.sibling;if(c!==null){c.return=t.return,Je=c;break}Je=t.return}}var TE=Math.ceil,ix=sn.ReactCurrentDispatcher,Df=sn.ReactCurrentOwner,zr=sn.ReactCurrentBatchConfig,Lt=0,Ts=null,bs=null,Bs=0,wr=0,xo=Xn(0),ws=0,Pc=null,Ii=0,am=0,Af=0,Ql=null,xr=null,Rf=0,Oo=1/0,La=null,ox=!1,Gp=null,Dn=null,Xd=!1,kn=null,lx=0,Yl=0,Kp=null,ju=-1,Nu=0;function or(){return Lt&6?gs():ju!==-1?ju:ju=gs()}function An(s){return s.mode&1?Lt&2&&Bs!==0?Bs&-Bs:mE.transition!==null?(Nu===0&&(Nu=v5()),Nu):(s=Ft,s!==0||(s=window.event,s=s===void 0?16:S5(s.type)),s):1}function ra(s,t,r,a){if(50<Yl)throw Yl=0,Kp=null,Error(Re(185));Kc(s,r,a),(!(Lt&2)||s!==Ts)&&(s===Ts&&(!(Lt&2)&&(am|=r),ws===4&&yn(s,Bs)),gr(s,a),r===1&&Lt===0&&!(t.mode&1)&&(Oo=gs()+500,em&&Jn()))}function gr(s,t){var r=s.callbackNode;mS(s,t);var a=qu(s,s===Ts?Bs:0);if(a===0)r!==null&&Pb(r),s.callbackNode=null,s.callbackPriority=0;else if(t=a&-a,s.callbackPriority!==t){if(r!=null&&Pb(r),t===1)s.tag===0?xE(yv.bind(null,s)):H5(yv.bind(null,s)),lE(function(){!(Lt&6)&&Jn()}),r=null;else{switch(j5(a)){case 1:r=nf;break;case 4:r=y5;break;case 16:r=Wu;break;case 536870912:r=b5;break;default:r=Wu}r=W2(r,O2.bind(null,s))}s.callbackPriority=t,s.callbackNode=r}}function O2(s,t){if(ju=-1,Nu=0,Lt&6)throw Error(Re(327));var r=s.callbackNode;if(Io()&&s.callbackNode!==r)return null;var a=qu(s,s===Ts?Bs:0);if(a===0)return null;if(a&30||a&s.expiredLanes||t)t=cx(s,a);else{t=a;var i=Lt;Lt|=2;var l=B2();(Ts!==s||Bs!==t)&&(La=null,Oo=gs()+500,yi(s,t));do try{AE();break}catch(c){V2(s,c)}while(1);bf(),ix.current=l,Lt=i,bs!==null?t=0:(Ts=null,Bs=0,t=ws)}if(t!==0){if(t===2&&(i=jp(s),i!==0&&(a=i,t=Qp(s,i))),t===1)throw r=Pc,yi(s,0),yn(s,a),gr(s,gs()),r;if(t===6)yn(s,a);else{if(i=s.current.alternate,!(a&30)&&!_E(i)&&(t=cx(s,a),t===2&&(l=jp(s),l!==0&&(a=l,t=Qp(s,l))),t===1))throw r=Pc,yi(s,0),yn(s,a),gr(s,gs()),r;switch(s.finishedWork=i,s.finishedLanes=a,t){case 0:case 1:throw Error(Re(345));case 2:li(s,xr,La);break;case 3:if(yn(s,a),(a&130023424)===a&&(t=Rf+500-gs(),10<t)){if(qu(s,0)!==0)break;if(i=s.suspendedLanes,(i&a)!==a){or(),s.pingedLanes|=s.suspendedLanes&i;break}s.timeoutHandle=Cp(li.bind(null,s,xr,La),t);break}li(s,xr,La);break;case 4:if(yn(s,a),(a&4194240)===a)break;for(t=s.eventTimes,i=-1;0<a;){var o=31-sa(a);l=1<<o,o=t[o],o>i&&(i=o),a&=~l}if(a=i,a=gs()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*TE(a/1960))-a,10<a){s.timeoutHandle=Cp(li.bind(null,s,xr,La),a);break}li(s,xr,La);break;case 5:li(s,xr,La);break;default:throw Error(Re(329))}}}return gr(s,gs()),s.callbackNode===r?O2.bind(null,s):null}function Qp(s,t){var r=Ql;return s.current.memoizedState.isDehydrated&&(yi(s,t).flags|=256),s=cx(s,t),s!==2&&(t=xr,xr=r,t!==null&&Yp(t)),s}function Yp(s){xr===null?xr=s:xr.push.apply(xr,s)}function _E(s){for(var t=s;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var a=0;a<r.length;a++){var i=r[a],l=i.getSnapshot;i=i.value;try{if(!aa(l(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===s)break;for(;t.sibling===null;){if(t.return===null||t.return===s)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function yn(s,t){for(t&=~Af,t&=~am,s.suspendedLanes|=t,s.pingedLanes&=~t,s=s.expirationTimes;0<t;){var r=31-sa(t),a=1<<r;s[r]=-1,t&=~a}}function yv(s){if(Lt&6)throw Error(Re(327));Io();var t=qu(s,0);if(!(t&1))return gr(s,gs()),null;var r=cx(s,t);if(s.tag!==0&&r===2){var a=jp(s);a!==0&&(t=a,r=Qp(s,a))}if(r===1)throw r=Pc,yi(s,0),yn(s,t),gr(s,gs()),r;if(r===6)throw Error(Re(345));return s.finishedWork=s.current.alternate,s.finishedLanes=t,li(s,xr,La),gr(s,gs()),null}function Mf(s,t){var r=Lt;Lt|=1;try{return s(t)}finally{Lt=r,Lt===0&&(Oo=gs()+500,em&&Jn())}}function Pi(s){kn!==null&&kn.tag===0&&!(Lt&6)&&Io();var t=Lt;Lt|=1;var r=zr.transition,a=Ft;try{if(zr.transition=null,Ft=1,s)return s()}finally{Ft=a,zr.transition=r,Lt=t,!(Lt&6)&&Jn()}}function Lf(){wr=xo.current,Zt(xo)}function yi(s,t){s.finishedWork=null,s.finishedLanes=0;var r=s.timeoutHandle;if(r!==-1&&(s.timeoutHandle=-1,oE(r)),bs!==null)for(r=bs.return;r!==null;){var a=r;switch(ff(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&Yu();break;case 3:Mo(),Zt(pr),Zt(Zs),If();break;case 5:kf(a);break;case 4:Mo();break;case 13:Zt(as);break;case 19:Zt(as);break;case 10:vf(a.type._context);break;case 22:case 23:Lf()}r=r.return}if(Ts=s,bs=s=Rn(s.current,null),Bs=wr=t,ws=0,Pc=null,Af=am=Ii=0,xr=Ql=null,xi!==null){for(t=0;t<xi.length;t++)if(r=xi[t],a=r.interleaved,a!==null){r.interleaved=null;var i=a.next,l=r.pending;if(l!==null){var o=l.next;l.next=i,a.next=o}r.pending=a}xi=null}return s}function V2(s,t){do{var r=bs;try{if(bf(),yu.current=nx,ax){for(var a=is.memoizedState;a!==null;){var i=a.queue;i!==null&&(i.pending=null),a=a.next}ax=!1}if(ki=0,Ss=Ns=is=null,Gl=!1,wc=0,Df.current=null,r===null||r.return===null){ws=1,Pc=t,bs=null;break}e:{var l=s,o=r.return,c=r,d=t;if(t=Bs,c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var x=d,f=c,j=f.tag;if(!(f.mode&1)&&(j===0||j===11||j===15)){var w=f.alternate;w?(f.updateQueue=w.updateQueue,f.memoizedState=w.memoizedState,f.lanes=w.lanes):(f.updateQueue=null,f.memoizedState=null)}var S=nv(o);if(S!==null){S.flags&=-257,iv(S,o,c,l,t),S.mode&1&&av(l,x,t),t=S,d=x;var g=t.updateQueue;if(g===null){var V=new Set;V.add(d),t.updateQueue=V}else g.add(d);break e}else{if(!(t&1)){av(l,x,t),Of();break e}d=Error(Re(426))}}else if(es&&c.mode&1){var E=nv(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),iv(E,o,c,l,t),gf(Lo(d,c));break e}}l=d=Lo(d,c),ws!==4&&(ws=2),Ql===null?Ql=[l]:Ql.push(l),l=o;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var _=j2(l,d,t);Jb(l,_);break e;case 1:c=d;var M=l.type,R=l.stateNode;if(!(l.flags&128)&&(typeof M.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(Dn===null||!Dn.has(R)))){l.flags|=65536,t&=-t,l.lanes|=t;var q=N2(l,c,t);Jb(l,q);break e}}l=l.return}while(l!==null)}F2(r)}catch(G){t=G,bs===r&&r!==null&&(bs=r=r.return);continue}break}while(1)}function B2(){var s=ix.current;return ix.current=nx,s===null?nx:s}function Of(){(ws===0||ws===3||ws===2)&&(ws=4),Ts===null||!(Ii&268435455)&&!(am&268435455)||yn(Ts,Bs)}function cx(s,t){var r=Lt;Lt|=2;var a=B2();(Ts!==s||Bs!==t)&&(La=null,yi(s,t));do try{DE();break}catch(i){V2(s,i)}while(1);if(bf(),Lt=r,ix.current=a,bs!==null)throw Error(Re(261));return Ts=null,Bs=0,ws}function DE(){for(;bs!==null;)z2(bs)}function AE(){for(;bs!==null&&!aS();)z2(bs)}function z2(s){var t=$2(s.alternate,s,wr);s.memoizedProps=s.pendingProps,t===null?F2(s):bs=t,Df.current=null}function F2(s){var t=s;do{var r=t.alternate;if(s=t.return,t.flags&32768){if(r=PE(r,t),r!==null){r.flags&=32767,bs=r;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{ws=6,bs=null;return}}else if(r=IE(r,t,wr),r!==null){bs=r;return}if(t=t.sibling,t!==null){bs=t;return}bs=t=s}while(t!==null);ws===0&&(ws=5)}function li(s,t,r){var a=Ft,i=zr.transition;try{zr.transition=null,Ft=1,RE(s,t,r,a)}finally{zr.transition=i,Ft=a}return null}function RE(s,t,r,a){do Io();while(kn!==null);if(Lt&6)throw Error(Re(327));r=s.finishedWork;var i=s.finishedLanes;if(r===null)return null;if(s.finishedWork=null,s.finishedLanes=0,r===s.current)throw Error(Re(177));s.callbackNode=null,s.callbackPriority=0;var l=r.lanes|r.childLanes;if(hS(s,l),s===Ts&&(bs=Ts=null,Bs=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Xd||(Xd=!0,W2(Wu,function(){return Io(),null})),l=(r.flags&15990)!==0,r.subtreeFlags&15990||l){l=zr.transition,zr.transition=null;var o=Ft;Ft=1;var c=Lt;Lt|=4,Df.current=null,EE(s,r),M2(r,s),eE(Sp),Hu=!!Pp,Sp=Pp=null,s.current=r,CE(r),nS(),Lt=c,Ft=o,zr.transition=l}else s.current=r;if(Xd&&(Xd=!1,kn=s,lx=i),l=s.pendingLanes,l===0&&(Dn=null),lS(r.stateNode),gr(s,gs()),t!==null)for(a=s.onRecoverableError,r=0;r<t.length;r++)i=t[r],a(i.value,{componentStack:i.stack,digest:i.digest});if(ox)throw ox=!1,s=Gp,Gp=null,s;return lx&1&&s.tag!==0&&Io(),l=s.pendingLanes,l&1?s===Kp?Yl++:(Yl=0,Kp=s):Yl=0,Jn(),null}function Io(){if(kn!==null){var s=j5(lx),t=zr.transition,r=Ft;try{if(zr.transition=null,Ft=16>s?16:s,kn===null)var a=!1;else{if(s=kn,kn=null,lx=0,Lt&6)throw Error(Re(331));var i=Lt;for(Lt|=4,Je=s.current;Je!==null;){var l=Je,o=l.child;if(Je.flags&16){var c=l.deletions;if(c!==null){for(var d=0;d<c.length;d++){var x=c[d];for(Je=x;Je!==null;){var f=Je;switch(f.tag){case 0:case 11:case 15:Kl(8,f,l)}var j=f.child;if(j!==null)j.return=f,Je=j;else for(;Je!==null;){f=Je;var w=f.sibling,S=f.return;if(D2(f),f===x){Je=null;break}if(w!==null){w.return=S,Je=w;break}Je=S}}}var g=l.alternate;if(g!==null){var V=g.child;if(V!==null){g.child=null;do{var E=V.sibling;V.sibling=null,V=E}while(V!==null)}}Je=l}}if(l.subtreeFlags&2064&&o!==null)o.return=l,Je=o;else e:for(;Je!==null;){if(l=Je,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Kl(9,l,l.return)}var _=l.sibling;if(_!==null){_.return=l.return,Je=_;break e}Je=l.return}}var M=s.current;for(Je=M;Je!==null;){o=Je;var R=o.child;if(o.subtreeFlags&2064&&R!==null)R.return=o,Je=R;else e:for(o=M;Je!==null;){if(c=Je,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:rm(9,c)}}catch(G){hs(c,c.return,G)}if(c===o){Je=null;break e}var q=c.sibling;if(q!==null){q.return=c.return,Je=q;break e}Je=c.return}}if(Lt=i,Jn(),fa&&typeof fa.onPostCommitFiberRoot=="function")try{fa.onPostCommitFiberRoot(Qx,s)}catch{}a=!0}return a}finally{Ft=r,zr.transition=t}}return!1}function bv(s,t,r){t=Lo(r,t),t=j2(s,t,1),s=_n(s,t,1),t=or(),s!==null&&(Kc(s,1,t),gr(s,t))}function hs(s,t,r){if(s.tag===3)bv(s,s,r);else for(;t!==null;){if(t.tag===3){bv(t,s,r);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Dn===null||!Dn.has(a))){s=Lo(r,s),s=N2(t,s,1),t=_n(t,s,1),s=or(),t!==null&&(Kc(t,1,s),gr(t,s));break}}t=t.return}}function ME(s,t,r){var a=s.pingCache;a!==null&&a.delete(t),t=or(),s.pingedLanes|=s.suspendedLanes&r,Ts===s&&(Bs&r)===r&&(ws===4||ws===3&&(Bs&130023424)===Bs&&500>gs()-Rf?yi(s,0):Af|=r),gr(s,t)}function U2(s,t){t===0&&(s.mode&1?(t=Fd,Fd<<=1,!(Fd&130023424)&&(Fd=4194304)):t=1);var r=or();s=Ga(s,t),s!==null&&(Kc(s,t,r),gr(s,r))}function LE(s){var t=s.memoizedState,r=0;t!==null&&(r=t.retryLane),U2(s,r)}function OE(s,t){var r=0;switch(s.tag){case 13:var a=s.stateNode,i=s.memoizedState;i!==null&&(r=i.retryLane);break;case 19:a=s.stateNode;break;default:throw Error(Re(314))}a!==null&&a.delete(t),U2(s,r)}var $2;$2=function(s,t,r){if(s!==null)if(s.memoizedProps!==t.pendingProps||pr.current)mr=!0;else{if(!(s.lanes&r)&&!(t.flags&128))return mr=!1,kE(s,t,r);mr=!!(s.flags&131072)}else mr=!1,es&&t.flags&1048576&&G5(t,Zu,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;vu(s,t),s=t.pendingProps;var i=Do(t,Zs.current);ko(t,r),i=Sf(null,t,a,s,i,r);var l=Ef();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,fr(a)?(l=!0,Xu(t)):l=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Nf(t),i.updater=sm,t.stateNode=i,i._reactInternals=t,Lp(t,a,s,r),t=Bp(null,t,a,!0,l,r)):(t.tag=0,es&&l&&pf(t),ar(null,t,i,r),t=t.child),t;case 16:a=t.elementType;e:{switch(vu(s,t),s=t.pendingProps,i=a._init,a=i(a._payload),t.type=a,i=t.tag=BE(a),s=Yr(a,s),i){case 0:t=Vp(null,t,a,s,r);break e;case 1:t=cv(null,t,a,s,r);break e;case 11:t=ov(null,t,a,s,r);break e;case 14:t=lv(null,t,a,Yr(a.type,s),r);break e}throw Error(Re(306,a,""))}return t;case 0:return a=t.type,i=t.pendingProps,i=t.elementType===a?i:Yr(a,i),Vp(s,t,a,i,r);case 1:return a=t.type,i=t.pendingProps,i=t.elementType===a?i:Yr(a,i),cv(s,t,a,i,r);case 3:e:{if(P2(t),s===null)throw Error(Re(387));a=t.pendingProps,l=t.memoizedState,i=l.element,Z5(s,t),sx(t,a,null,r);var o=t.memoizedState;if(a=o.element,l.isDehydrated)if(l={element:a,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){i=Lo(Error(Re(423)),t),t=dv(s,t,a,r,i);break e}else if(a!==i){i=Lo(Error(Re(424)),t),t=dv(s,t,a,r,i);break e}else for(Ir=Tn(t.stateNode.containerInfo.firstChild),Sr=t,es=!0,Jr=null,r=X5(t,null,a,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ao(),a===i){t=Ka(s,t,r);break e}ar(s,t,a,r)}t=t.child}return t;case 5:return e2(t),s===null&&Ap(t),a=t.type,i=t.pendingProps,l=s!==null?s.memoizedProps:null,o=i.children,Ep(a,i)?o=null:l!==null&&Ep(a,l)&&(t.flags|=32),I2(s,t),ar(s,t,o,r),t.child;case 6:return s===null&&Ap(t),null;case 13:return S2(s,t,r);case 4:return wf(t,t.stateNode.containerInfo),a=t.pendingProps,s===null?t.child=Ro(t,null,a,r):ar(s,t,a,r),t.child;case 11:return a=t.type,i=t.pendingProps,i=t.elementType===a?i:Yr(a,i),ov(s,t,a,i,r);case 7:return ar(s,t,t.pendingProps,r),t.child;case 8:return ar(s,t,t.pendingProps.children,r),t.child;case 12:return ar(s,t,t.pendingProps.children,r),t.child;case 10:e:{if(a=t.type._context,i=t.pendingProps,l=t.memoizedProps,o=i.value,Kt(ex,a._currentValue),a._currentValue=o,l!==null)if(aa(l.value,o)){if(l.children===i.children&&!pr.current){t=Ka(s,t,r);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var c=l.dependencies;if(c!==null){o=l.child;for(var d=c.firstContext;d!==null;){if(d.context===a){if(l.tag===1){d=Ua(-1,r&-r),d.tag=2;var x=l.updateQueue;if(x!==null){x=x.shared;var f=x.pending;f===null?d.next=d:(d.next=f.next,f.next=d),x.pending=d}}l.lanes|=r,d=l.alternate,d!==null&&(d.lanes|=r),Rp(l.return,r,t),c.lanes|=r;break}d=d.next}}else if(l.tag===10)o=l.type===t.type?null:l.child;else if(l.tag===18){if(o=l.return,o===null)throw Error(Re(341));o.lanes|=r,c=o.alternate,c!==null&&(c.lanes|=r),Rp(o,r,t),o=l.sibling}else o=l.child;if(o!==null)o.return=l;else for(o=l;o!==null;){if(o===t){o=null;break}if(l=o.sibling,l!==null){l.return=o.return,o=l;break}o=o.return}l=o}ar(s,t,i.children,r),t=t.child}return t;case 9:return i=t.type,a=t.pendingProps.children,ko(t,r),i=Ur(i),a=a(i),t.flags|=1,ar(s,t,a,r),t.child;case 14:return a=t.type,i=Yr(a,t.pendingProps),i=Yr(a.type,i),lv(s,t,a,i,r);case 15:return w2(s,t,t.type,t.pendingProps,r);case 17:return a=t.type,i=t.pendingProps,i=t.elementType===a?i:Yr(a,i),vu(s,t),t.tag=1,fr(a)?(s=!0,Xu(t)):s=!1,ko(t,r),v2(t,a,i),Lp(t,a,i,r),Bp(null,t,a,!0,s,r);case 19:return E2(s,t,r);case 22:return k2(s,t,r)}throw Error(Re(156,t.tag))};function W2(s,t){return g5(s,t)}function VE(s,t,r,a){this.tag=s,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Br(s,t,r,a){return new VE(s,t,r,a)}function Vf(s){return s=s.prototype,!(!s||!s.isReactComponent)}function BE(s){if(typeof s=="function")return Vf(s)?1:0;if(s!=null){if(s=s.$$typeof,s===sf)return 11;if(s===rf)return 14}return 2}function Rn(s,t){var r=s.alternate;return r===null?(r=Br(s.tag,t,s.key,s.mode),r.elementType=s.elementType,r.type=s.type,r.stateNode=s.stateNode,r.alternate=s,s.alternate=r):(r.pendingProps=t,r.type=s.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=s.flags&14680064,r.childLanes=s.childLanes,r.lanes=s.lanes,r.child=s.child,r.memoizedProps=s.memoizedProps,r.memoizedState=s.memoizedState,r.updateQueue=s.updateQueue,t=s.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=s.sibling,r.index=s.index,r.ref=s.ref,r}function wu(s,t,r,a,i,l){var o=2;if(a=s,typeof s=="function")Vf(s)&&(o=1);else if(typeof s=="string")o=5;else e:switch(s){case to:return bi(r.children,i,l,t);case tf:o=8,i|=8;break;case ip:return s=Br(12,r,t,i|2),s.elementType=ip,s.lanes=l,s;case op:return s=Br(13,r,t,i),s.elementType=op,s.lanes=l,s;case lp:return s=Br(19,r,t,i),s.elementType=lp,s.lanes=l,s;case e5:return nm(r,i,l,t);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case Jw:o=10;break e;case Zw:o=9;break e;case sf:o=11;break e;case rf:o=14;break e;case pn:o=16,a=null;break e}throw Error(Re(130,s==null?s:typeof s,""))}return t=Br(o,r,t,i),t.elementType=s,t.type=a,t.lanes=l,t}function bi(s,t,r,a){return s=Br(7,s,a,t),s.lanes=r,s}function nm(s,t,r,a){return s=Br(22,s,a,t),s.elementType=e5,s.lanes=r,s.stateNode={isHidden:!1},s}function kh(s,t,r){return s=Br(6,s,null,t),s.lanes=r,s}function Ih(s,t,r){return t=Br(4,s.children!==null?s.children:[],s.key,t),t.lanes=r,t.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},t}function zE(s,t,r,a,i){this.tag=t,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nh(0),this.expirationTimes=nh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nh(0),this.identifierPrefix=a,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bf(s,t,r,a,i,l,o,c,d){return s=new zE(s,t,r,c,d),t===1?(t=1,l===!0&&(t|=8)):t=0,l=Br(3,null,null,t),s.current=l,l.stateNode=s,l.memoizedState={element:a,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nf(l),s}function FE(s,t,r){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:eo,key:a==null?null:""+a,children:s,containerInfo:t,implementation:r}}function q2(s){if(!s)return zn;s=s._reactInternals;e:{if(Mi(s)!==s||s.tag!==1)throw Error(Re(170));var t=s;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(fr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Re(171))}if(s.tag===1){var r=s.type;if(fr(r))return q5(s,r,t)}return t}function H2(s,t,r,a,i,l,o,c,d){return s=Bf(r,a,!0,s,i,l,o,c,d),s.context=q2(null),r=s.current,a=or(),i=An(r),l=Ua(a,i),l.callback=t??null,_n(r,l,i),s.current.lanes=i,Kc(s,i,a),gr(s,a),s}function im(s,t,r,a){var i=t.current,l=or(),o=An(i);return r=q2(r),t.context===null?t.context=r:t.pendingContext=r,t=Ua(l,o),t.payload={element:s},a=a===void 0?null:a,a!==null&&(t.callback=a),s=_n(i,t,o),s!==null&&(ra(s,i,o,l),gu(s,i,o)),o}function dx(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function vv(s,t){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var r=s.retryLane;s.retryLane=r!==0&&r<t?r:t}}function zf(s,t){vv(s,t),(s=s.alternate)&&vv(s,t)}function UE(){return null}var G2=typeof reportError=="function"?reportError:function(s){console.error(s)};function Ff(s){this._internalRoot=s}om.prototype.render=Ff.prototype.render=function(s){var t=this._internalRoot;if(t===null)throw Error(Re(409));im(s,t,null,null)};om.prototype.unmount=Ff.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var t=s.containerInfo;Pi(function(){im(null,s,null,null)}),t[Ha]=null}};function om(s){this._internalRoot=s}om.prototype.unstable_scheduleHydration=function(s){if(s){var t=k5();s={blockedOn:null,target:s,priority:t};for(var r=0;r<gn.length&&t!==0&&t<gn[r].priority;r++);gn.splice(r,0,s),r===0&&P5(s)}};function Uf(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function lm(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function jv(){}function $E(s,t,r,a,i){if(i){if(typeof a=="function"){var l=a;a=function(){var x=dx(o);l.call(x)}}var o=H2(t,a,s,0,null,!1,!1,"",jv);return s._reactRootContainer=o,s[Ha]=o.current,yc(s.nodeType===8?s.parentNode:s),Pi(),o}for(;i=s.lastChild;)s.removeChild(i);if(typeof a=="function"){var c=a;a=function(){var x=dx(d);c.call(x)}}var d=Bf(s,0,!1,null,null,!1,!1,"",jv);return s._reactRootContainer=d,s[Ha]=d.current,yc(s.nodeType===8?s.parentNode:s),Pi(function(){im(t,d,r,a)}),d}function cm(s,t,r,a,i){var l=r._reactRootContainer;if(l){var o=l;if(typeof i=="function"){var c=i;i=function(){var d=dx(o);c.call(d)}}im(t,o,s,i)}else o=$E(r,t,s,i,a);return dx(o)}N5=function(s){switch(s.tag){case 3:var t=s.stateNode;if(t.current.memoizedState.isDehydrated){var r=Al(t.pendingLanes);r!==0&&(of(t,r|1),gr(t,gs()),!(Lt&6)&&(Oo=gs()+500,Jn()))}break;case 13:Pi(function(){var a=Ga(s,1);if(a!==null){var i=or();ra(a,s,1,i)}}),zf(s,1)}};lf=function(s){if(s.tag===13){var t=Ga(s,134217728);if(t!==null){var r=or();ra(t,s,134217728,r)}zf(s,134217728)}};w5=function(s){if(s.tag===13){var t=An(s),r=Ga(s,t);if(r!==null){var a=or();ra(r,s,t,a)}zf(s,t)}};k5=function(){return Ft};I5=function(s,t){var r=Ft;try{return Ft=s,t()}finally{Ft=r}};yp=function(s,t,r){switch(t){case"input":if(up(s,r),t=r.name,r.type==="radio"&&t!=null){for(r=s;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var a=r[t];if(a!==s&&a.form===s.form){var i=Zx(a);if(!i)throw Error(Re(90));s5(a),up(a,i)}}}break;case"textarea":a5(s,r);break;case"select":t=r.value,t!=null&&vo(s,!!r.multiple,t,!1)}};u5=Mf;x5=Pi;var WE={usingClientEntryPoint:!1,Events:[Yc,no,Zx,c5,d5,Mf]},Sl={findFiberByHostInstance:ui,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qE={bundleType:Sl.bundleType,version:Sl.version,rendererPackageName:Sl.rendererPackageName,rendererConfig:Sl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:sn.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=p5(s),s===null?null:s.stateNode},findFiberByHostInstance:Sl.findFiberByHostInstance||UE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jd.isDisabled&&Jd.supportsFiber)try{Qx=Jd.inject(qE),fa=Jd}catch{}}_r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WE;_r.createPortal=function(s,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Uf(t))throw Error(Re(200));return FE(s,t,null,r)};_r.createRoot=function(s,t){if(!Uf(s))throw Error(Re(299));var r=!1,a="",i=G2;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Bf(s,1,!1,null,null,r,!1,a,i),s[Ha]=t.current,yc(s.nodeType===8?s.parentNode:s),new Ff(t)};_r.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var t=s._reactInternals;if(t===void 0)throw typeof s.render=="function"?Error(Re(188)):(s=Object.keys(s).join(","),Error(Re(268,s)));return s=p5(t),s=s===null?null:s.stateNode,s};_r.flushSync=function(s){return Pi(s)};_r.hydrate=function(s,t,r){if(!lm(t))throw Error(Re(200));return cm(null,s,t,!0,r)};_r.hydrateRoot=function(s,t,r){if(!Uf(s))throw Error(Re(405));var a=r!=null&&r.hydratedSources||null,i=!1,l="",o=G2;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=H2(t,null,s,1,r??null,i,!1,l,o),s[Ha]=t.current,yc(s),a)for(s=0;s<a.length;s++)r=a[s],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new om(t)};_r.render=function(s,t,r){if(!lm(t))throw Error(Re(200));return cm(null,s,t,!1,r)};_r.unmountComponentAtNode=function(s){if(!lm(s))throw Error(Re(40));return s._reactRootContainer?(Pi(function(){cm(null,null,s,!1,function(){s._reactRootContainer=null,s[Ha]=null})}),!0):!1};_r.unstable_batchedUpdates=Mf;_r.unstable_renderSubtreeIntoContainer=function(s,t,r,a){if(!lm(r))throw Error(Re(200));if(s==null||s._reactInternals===void 0)throw Error(Re(38));return cm(s,t,r,!1,a)};_r.version="18.3.1-next-f1338f8080-20240426";function K2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(K2)}catch(s){console.error(s)}}K2(),Kw.exports=_r;var HE=Kw.exports,Nv=HE;ap.createRoot=Nv.createRoot,ap.hydrateRoot=Nv.hydrateRoot;const GE="modulepreload",KE=function(s){return"/"+s},wv={},QE=function(t,r,a){if(!r||r.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(r.map(l=>{if(l=KE(l),l in wv)return;wv[l]=!0;const o=l.endsWith(".css"),c=o?'[rel="stylesheet"]':"";if(!!a)for(let f=i.length-1;f>=0;f--){const j=i[f];if(j.href===l&&(!o||j.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${c}`))return;const x=document.createElement("link");if(x.rel=o?"stylesheet":GE,o||(x.as="script",x.crossOrigin=""),x.href=l,document.head.appendChild(x),o)return new Promise((f,j)=>{x.addEventListener("load",f),x.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${l}`)))})})).then(()=>t()).catch(l=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l})};var $f={};Object.defineProperty($f,"__esModule",{value:!0});$f.parse=sC;$f.serialize=rC;const YE=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,XE=/^[\u0021-\u003A\u003C-\u007E]*$/,JE=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,ZE=/^[\u0020-\u003A\u003D-\u007E]*$/,eC=Object.prototype.toString,tC=(()=>{const s=function(){};return s.prototype=Object.create(null),s})();function sC(s,t){const r=new tC,a=s.length;if(a<2)return r;const i=(t==null?void 0:t.decode)||aC;let l=0;do{const o=s.indexOf("=",l);if(o===-1)break;const c=s.indexOf(";",l),d=c===-1?a:c;if(o>d){l=s.lastIndexOf(";",o-1)+1;continue}const x=kv(s,l,o),f=Iv(s,o,x),j=s.slice(x,f);if(r[j]===void 0){let w=kv(s,o+1,d),S=Iv(s,d,w);const g=i(s.slice(w,S));r[j]=g}l=d+1}while(l<a);return r}function kv(s,t,r){do{const a=s.charCodeAt(t);if(a!==32&&a!==9)return t}while(++t<r);return r}function Iv(s,t,r){for(;t>r;){const a=s.charCodeAt(--t);if(a!==32&&a!==9)return t+1}return r}function rC(s,t,r){const a=(r==null?void 0:r.encode)||encodeURIComponent;if(!YE.test(s))throw new TypeError(`argument name is invalid: ${s}`);const i=a(t);if(!XE.test(i))throw new TypeError(`argument val is invalid: ${t}`);let l=s+"="+i;if(!r)return l;if(r.maxAge!==void 0){if(!Number.isInteger(r.maxAge))throw new TypeError(`option maxAge is invalid: ${r.maxAge}`);l+="; Max-Age="+r.maxAge}if(r.domain){if(!JE.test(r.domain))throw new TypeError(`option domain is invalid: ${r.domain}`);l+="; Domain="+r.domain}if(r.path){if(!ZE.test(r.path))throw new TypeError(`option path is invalid: ${r.path}`);l+="; Path="+r.path}if(r.expires){if(!nC(r.expires)||!Number.isFinite(r.expires.valueOf()))throw new TypeError(`option expires is invalid: ${r.expires}`);l+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(l+="; HttpOnly"),r.secure&&(l+="; Secure"),r.partitioned&&(l+="; Partitioned"),r.priority)switch(typeof r.priority=="string"?r.priority.toLowerCase():void 0){case"low":l+="; Priority=Low";break;case"medium":l+="; Priority=Medium";break;case"high":l+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${r.priority}`)}if(r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:case"strict":l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"none":l+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${r.sameSite}`)}return l}function aC(s){if(s.indexOf("%")===-1)return s;try{return decodeURIComponent(s)}catch{return s}}function nC(s){return eC.call(s)==="[object Date]"}var Pv="popstate";function iC(s={}){function t(a,i){let{pathname:l,search:o,hash:c}=a.location;return Xp("",{pathname:l,search:o,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(a,i){return typeof i=="string"?i:Sc(i)}return lC(t,r,null,s)}function os(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}function Ia(s,t){if(!s){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function oC(){return Math.random().toString(36).substring(2,10)}function Sv(s,t){return{usr:s.state,key:s.key,idx:t}}function Xp(s,t,r=null,a){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof t=="string"?Xo(t):t,state:r,key:t&&t.key||a||oC()}}function Sc({pathname:s="/",search:t="",hash:r=""}){return t&&t!=="?"&&(s+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(s+=r.charAt(0)==="#"?r:"#"+r),s}function Xo(s){let t={};if(s){let r=s.indexOf("#");r>=0&&(t.hash=s.substring(r),s=s.substring(0,r));let a=s.indexOf("?");a>=0&&(t.search=s.substring(a),s=s.substring(0,a)),s&&(t.pathname=s)}return t}function lC(s,t,r,a={}){let{window:i=document.defaultView,v5Compat:l=!1}=a,o=i.history,c="POP",d=null,x=f();x==null&&(x=0,o.replaceState({...o.state,idx:x},""));function f(){return(o.state||{idx:null}).idx}function j(){c="POP";let E=f(),_=E==null?null:E-x;x=E,d&&d({action:c,location:V.location,delta:_})}function w(E,_){c="PUSH";let M=Xp(V.location,E,_);r&&r(M,E),x=f()+1;let R=Sv(M,x),q=V.createHref(M);try{o.pushState(R,"",q)}catch(G){if(G instanceof DOMException&&G.name==="DataCloneError")throw G;i.location.assign(q)}l&&d&&d({action:c,location:V.location,delta:1})}function S(E,_){c="REPLACE";let M=Xp(V.location,E,_);r&&r(M,E),x=f();let R=Sv(M,x),q=V.createHref(M);o.replaceState(R,"",q),l&&d&&d({action:c,location:V.location,delta:0})}function g(E){let _=i.location.origin!=="null"?i.location.origin:i.location.href,M=typeof E=="string"?E:Sc(E);return M=M.replace(/ $/,"%20"),os(_,`No window.location.(origin|href) available to create URL for href: ${M}`),new URL(M,_)}let V={get action(){return c},get location(){return s(i,o)},listen(E){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(Pv,j),d=E,()=>{i.removeEventListener(Pv,j),d=null}},createHref(E){return t(i,E)},createURL:g,encodeLocation(E){let _=g(E);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:w,replace:S,go(E){return o.go(E)}};return V}function Q2(s,t,r="/"){return cC(s,t,r,!1)}function cC(s,t,r,a){let i=typeof t=="string"?Xo(t):t,l=Qa(i.pathname||"/",r);if(l==null)return null;let o=Y2(s);dC(o);let c=null;for(let d=0;c==null&&d<o.length;++d){let x=jC(l);c=bC(o[d],x,a)}return c}function Y2(s,t=[],r=[],a=""){let i=(l,o,c)=>{let d={relativePath:c===void 0?l.path||"":c,caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};d.relativePath.startsWith("/")&&(os(d.relativePath.startsWith(a),`Absolute route path "${d.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(a.length));let x=$a([a,d.relativePath]),f=r.concat(d);l.children&&l.children.length>0&&(os(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${x}".`),Y2(l.children,t,f,x)),!(l.path==null&&!l.index)&&t.push({path:x,score:gC(x,l.index),routesMeta:f})};return s.forEach((l,o)=>{var c;if(l.path===""||!((c=l.path)!=null&&c.includes("?")))i(l,o);else for(let d of X2(l.path))i(l,o,d)}),t}function X2(s){let t=s.split("/");if(t.length===0)return[];let[r,...a]=t,i=r.endsWith("?"),l=r.replace(/\?$/,"");if(a.length===0)return i?[l,""]:[l];let o=X2(a.join("/")),c=[];return c.push(...o.map(d=>d===""?l:[l,d].join("/"))),i&&c.push(...o),c.map(d=>s.startsWith("/")&&d===""?"/":d)}function dC(s){s.sort((t,r)=>t.score!==r.score?r.score-t.score:yC(t.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}var uC=/^:[\w-]+$/,xC=3,mC=2,hC=1,pC=10,fC=-2,Ev=s=>s==="*";function gC(s,t){let r=s.split("/"),a=r.length;return r.some(Ev)&&(a+=fC),t&&(a+=mC),r.filter(i=>!Ev(i)).reduce((i,l)=>i+(uC.test(l)?xC:l===""?hC:pC),a)}function yC(s,t){return s.length===t.length&&s.slice(0,-1).every((a,i)=>a===t[i])?s[s.length-1]-t[t.length-1]:0}function bC(s,t,r=!1){let{routesMeta:a}=s,i={},l="/",o=[];for(let c=0;c<a.length;++c){let d=a[c],x=c===a.length-1,f=l==="/"?t:t.slice(l.length)||"/",j=ux({path:d.relativePath,caseSensitive:d.caseSensitive,end:x},f),w=d.route;if(!j&&x&&r&&!a[a.length-1].route.index&&(j=ux({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},f)),!j)return null;Object.assign(i,j.params),o.push({params:i,pathname:$a([l,j.pathname]),pathnameBase:IC($a([l,j.pathnameBase])),route:w}),j.pathnameBase!=="/"&&(l=$a([l,j.pathnameBase]))}return o}function ux(s,t){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[r,a]=vC(s.path,s.caseSensitive,s.end),i=t.match(r);if(!i)return null;let l=i[0],o=l.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:a.reduce((x,{paramName:f,isOptional:j},w)=>{if(f==="*"){let g=c[w]||"";o=l.slice(0,l.length-g.length).replace(/(.)\/+$/,"$1")}const S=c[w];return j&&!S?x[f]=void 0:x[f]=(S||"").replace(/%2F/g,"/"),x},{}),pathname:l,pathnameBase:o,pattern:s}}function vC(s,t=!1,r=!0){Ia(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let a=[],i="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,d)=>(a.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(a.push({paramName:"*"}),i+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":s!==""&&s!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),a]}function jC(s){try{return s.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ia(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),s}}function Qa(s,t){if(t==="/")return s;if(!s.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,a=s.charAt(r);return a&&a!=="/"?null:s.slice(r)||"/"}function NC(s,t="/"){let{pathname:r,search:a="",hash:i=""}=typeof s=="string"?Xo(s):s;return{pathname:r?r.startsWith("/")?r:wC(r,t):t,search:PC(a),hash:SC(i)}}function wC(s,t){let r=t.replace(/\/+$/,"").split("/");return s.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function Ph(s,t,r,a){return`Cannot include a '${s}' character in a manually specified \`to.${t}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function kC(s){return s.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function J2(s){let t=kC(s);return t.map((r,a)=>a===t.length-1?r.pathname:r.pathnameBase)}function Z2(s,t,r,a=!1){let i;typeof s=="string"?i=Xo(s):(i={...s},os(!i.pathname||!i.pathname.includes("?"),Ph("?","pathname","search",i)),os(!i.pathname||!i.pathname.includes("#"),Ph("#","pathname","hash",i)),os(!i.search||!i.search.includes("#"),Ph("#","search","hash",i)));let l=s===""||i.pathname==="",o=l?"/":i.pathname,c;if(o==null)c=r;else{let j=t.length-1;if(!a&&o.startsWith("..")){let w=o.split("/");for(;w[0]==="..";)w.shift(),j-=1;i.pathname=w.join("/")}c=j>=0?t[j]:"/"}let d=NC(i,c),x=o&&o!=="/"&&o.endsWith("/"),f=(l||o===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(x||f)&&(d.pathname+="/"),d}var $a=s=>s.join("/").replace(/\/\/+/g,"/"),IC=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),PC=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,SC=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function EC(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}var e4=["POST","PUT","PATCH","DELETE"];new Set(e4);var CC=["GET",...e4];new Set(CC);var Jo=b.createContext(null);Jo.displayName="DataRouter";var dm=b.createContext(null);dm.displayName="DataRouterState";var t4=b.createContext({isTransitioning:!1});t4.displayName="ViewTransition";var TC=b.createContext(new Map);TC.displayName="Fetchers";var _C=b.createContext(null);_C.displayName="Await";var Ca=b.createContext(null);Ca.displayName="Navigation";var Jc=b.createContext(null);Jc.displayName="Location";var rn=b.createContext({outlet:null,matches:[],isDataRoute:!1});rn.displayName="Route";var Wf=b.createContext(null);Wf.displayName="RouteError";function DC(s,{relative:t}={}){os(Zc(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:a}=b.useContext(Ca),{hash:i,pathname:l,search:o}=ed(s,{relative:t}),c=l;return r!=="/"&&(c=l==="/"?r:$a([r,l])),a.createHref({pathname:c,search:o,hash:i})}function Zc(){return b.useContext(Jc)!=null}function Li(){return os(Zc(),"useLocation() may be used only in the context of a <Router> component."),b.useContext(Jc).location}var s4="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function r4(s){b.useContext(Ca).static||b.useLayoutEffect(s)}function Nt(){let{isDataRoute:s}=b.useContext(rn);return s?qC():AC()}function AC(){os(Zc(),"useNavigate() may be used only in the context of a <Router> component.");let s=b.useContext(Jo),{basename:t,navigator:r}=b.useContext(Ca),{matches:a}=b.useContext(rn),{pathname:i}=Li(),l=JSON.stringify(J2(a)),o=b.useRef(!1);return r4(()=>{o.current=!0}),b.useCallback((d,x={})=>{if(Ia(o.current,s4),!o.current)return;if(typeof d=="number"){r.go(d);return}let f=Z2(d,JSON.parse(l),i,x.relative==="path");s==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:$a([t,f.pathname])),(x.replace?r.replace:r.push)(f,x.state,x)},[t,r,l,i,s])}b.createContext(null);function ed(s,{relative:t}={}){let{matches:r}=b.useContext(rn),{pathname:a}=Li(),i=JSON.stringify(J2(r));return b.useMemo(()=>Z2(s,JSON.parse(i),a,t==="path"),[s,i,a,t])}function RC(s,t){return a4(s,t)}function a4(s,t,r,a){var M;os(Zc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:l}=b.useContext(Ca),{matches:o}=b.useContext(rn),c=o[o.length-1],d=c?c.params:{},x=c?c.pathname:"/",f=c?c.pathnameBase:"/",j=c&&c.route;{let R=j&&j.path||"";n4(x,!j||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${x}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let w=Li(),S;if(t){let R=typeof t=="string"?Xo(t):t;os(f==="/"||((M=R.pathname)==null?void 0:M.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${R.pathname}" was given in the \`location\` prop.`),S=R}else S=w;let g=S.pathname||"/",V=g;if(f!=="/"){let R=f.replace(/^\//,"").split("/");V="/"+g.replace(/^\//,"").split("/").slice(R.length).join("/")}let E=!l&&r&&r.matches&&r.matches.length>0?r.matches:Q2(s,{pathname:V});Ia(j||E!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),Ia(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=BC(E&&E.map(R=>Object.assign({},R,{params:Object.assign({},d,R.params),pathname:$a([f,i.encodeLocation?i.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?f:$a([f,i.encodeLocation?i.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),o,r,a);return t&&_?b.createElement(Jc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},_):_}function MC(){let s=WC(),t=EC(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),r=s instanceof Error?s.stack:null,a="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:a},l={padding:"2px 4px",backgroundColor:a},o=null;return console.error("Error handled by React Router default ErrorBoundary:",s),o=b.createElement(b.Fragment,null,b.createElement("p",null,"💿 Hey developer 👋"),b.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",b.createElement("code",{style:l},"ErrorBoundary")," or"," ",b.createElement("code",{style:l},"errorElement")," prop on your route.")),b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},t),r?b.createElement("pre",{style:i},r):null,o)}var LC=b.createElement(MC,null),OC=class extends b.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,t){return t.location!==s.location||t.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:t.error,location:t.location,revalidation:s.revalidation||t.revalidation}}componentDidCatch(s,t){console.error("React Router caught the following error during render",s,t)}render(){return this.state.error!==void 0?b.createElement(rn.Provider,{value:this.props.routeContext},b.createElement(Wf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function VC({routeContext:s,match:t,children:r}){let a=b.useContext(Jo);return a&&a.static&&a.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=t.route.id),b.createElement(rn.Provider,{value:s},r)}function BC(s,t=[],r=null,a=null){if(s==null){if(!r)return null;if(r.errors)s=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)s=r.matches;else return null}let i=s,l=r==null?void 0:r.errors;if(l!=null){let d=i.findIndex(x=>x.route.id&&(l==null?void 0:l[x.route.id])!==void 0);os(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),i=i.slice(0,Math.min(i.length,d+1))}let o=!1,c=-1;if(r)for(let d=0;d<i.length;d++){let x=i[d];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(c=d),x.route.id){let{loaderData:f,errors:j}=r,w=x.route.loader&&!f.hasOwnProperty(x.route.id)&&(!j||j[x.route.id]===void 0);if(x.route.lazy||w){o=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((d,x,f)=>{let j,w=!1,S=null,g=null;r&&(j=l&&x.route.id?l[x.route.id]:void 0,S=x.route.errorElement||LC,o&&(c<0&&f===0?(n4("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,g=null):c===f&&(w=!0,g=x.route.hydrateFallbackElement||null)));let V=t.concat(i.slice(0,f+1)),E=()=>{let _;return j?_=S:w?_=g:x.route.Component?_=b.createElement(x.route.Component,null):x.route.element?_=x.route.element:_=d,b.createElement(VC,{match:x,routeContext:{outlet:d,matches:V,isDataRoute:r!=null},children:_})};return r&&(x.route.ErrorBoundary||x.route.errorElement||f===0)?b.createElement(OC,{location:r.location,revalidation:r.revalidation,component:S,error:j,children:E(),routeContext:{outlet:null,matches:V,isDataRoute:!0}}):E()},null)}function qf(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function zC(s){let t=b.useContext(Jo);return os(t,qf(s)),t}function FC(s){let t=b.useContext(dm);return os(t,qf(s)),t}function UC(s){let t=b.useContext(rn);return os(t,qf(s)),t}function Hf(s){let t=UC(s),r=t.matches[t.matches.length-1];return os(r.route.id,`${s} can only be used on routes that contain a unique "id"`),r.route.id}function $C(){return Hf("useRouteId")}function WC(){var a;let s=b.useContext(Wf),t=FC("useRouteError"),r=Hf("useRouteError");return s!==void 0?s:(a=t.errors)==null?void 0:a[r]}function qC(){let{router:s}=zC("useNavigate"),t=Hf("useNavigate"),r=b.useRef(!1);return r4(()=>{r.current=!0}),b.useCallback(async(i,l={})=>{Ia(r.current,s4),r.current&&(typeof i=="number"?s.navigate(i):await s.navigate(i,{fromRouteId:t,...l}))},[s,t])}var Cv={};function n4(s,t,r){!t&&!Cv[s]&&(Cv[s]=!0,Ia(!1,r))}b.memo(HC);function HC({routes:s,future:t,state:r}){return a4(s,void 0,r,t)}function kt(s){os(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function GC({basename:s="/",children:t=null,location:r,navigationType:a="POP",navigator:i,static:l=!1}){os(!Zc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=s.replace(/^\/*/,"/"),c=b.useMemo(()=>({basename:o,navigator:i,static:l,future:{}}),[o,i,l]);typeof r=="string"&&(r=Xo(r));let{pathname:d="/",search:x="",hash:f="",state:j=null,key:w="default"}=r,S=b.useMemo(()=>{let g=Qa(d,o);return g==null?null:{location:{pathname:g,search:x,hash:f,state:j,key:w},navigationType:a}},[o,d,x,f,j,w,a]);return Ia(S!=null,`<Router basename="${o}"> is not able to match the URL "${d}${x}${f}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:b.createElement(Ca.Provider,{value:c},b.createElement(Jc.Provider,{children:t,value:S}))}function KC({children:s,location:t}){return RC(Jp(s),t)}function Jp(s,t=[]){let r=[];return b.Children.forEach(s,(a,i)=>{if(!b.isValidElement(a))return;let l=[...t,i];if(a.type===b.Fragment){r.push.apply(r,Jp(a.props.children,l));return}os(a.type===kt,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),os(!a.props.index||!a.props.children,"An index route cannot have child routes.");let o={id:a.props.id||l.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(o.children=Jp(a.props.children,l)),r.push(o)}),r}var ku="get",Iu="application/x-www-form-urlencoded";function um(s){return s!=null&&typeof s.tagName=="string"}function QC(s){return um(s)&&s.tagName.toLowerCase()==="button"}function YC(s){return um(s)&&s.tagName.toLowerCase()==="form"}function XC(s){return um(s)&&s.tagName.toLowerCase()==="input"}function JC(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function ZC(s,t){return s.button===0&&(!t||t==="_self")&&!JC(s)}var Zd=null;function eT(){if(Zd===null)try{new FormData(document.createElement("form"),0),Zd=!1}catch{Zd=!0}return Zd}var tT=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Sh(s){return s!=null&&!tT.has(s)?(Ia(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Iu}"`),null):s}function sT(s,t){let r,a,i,l,o;if(YC(s)){let c=s.getAttribute("action");a=c?Qa(c,t):null,r=s.getAttribute("method")||ku,i=Sh(s.getAttribute("enctype"))||Iu,l=new FormData(s)}else if(QC(s)||XC(s)&&(s.type==="submit"||s.type==="image")){let c=s.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=s.getAttribute("formaction")||c.getAttribute("action");if(a=d?Qa(d,t):null,r=s.getAttribute("formmethod")||c.getAttribute("method")||ku,i=Sh(s.getAttribute("formenctype"))||Sh(c.getAttribute("enctype"))||Iu,l=new FormData(c,s),!eT()){let{name:x,type:f,value:j}=s;if(f==="image"){let w=x?`${x}.`:"";l.append(`${w}x`,"0"),l.append(`${w}y`,"0")}else x&&l.append(x,j)}}else{if(um(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=ku,a=null,i=Iu,o=s}return l&&i==="text/plain"&&(o=l,l=void 0),{action:a,method:r.toLowerCase(),encType:i,formData:l,body:o}}function Gf(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}async function rT(s,t){if(s.id in t)return t[s.id];try{let r=await QE(()=>import(s.module),[]);return t[s.id]=r,r}catch(r){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function aT(s){return s!=null&&typeof s.page=="string"}function nT(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function iT(s,t,r){let a=await Promise.all(s.map(async i=>{let l=t.routes[i.route.id];if(l){let o=await rT(l,r);return o.links?o.links():[]}return[]}));return dT(a.flat(1).filter(nT).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Tv(s,t,r,a,i,l){let o=(d,x)=>r[x]?d.route.id!==r[x].route.id:!0,c=(d,x)=>{var f;return r[x].pathname!==d.pathname||((f=r[x].route.path)==null?void 0:f.endsWith("*"))&&r[x].params["*"]!==d.params["*"]};return l==="assets"?t.filter((d,x)=>o(d,x)||c(d,x)):l==="data"?t.filter((d,x)=>{var j;let f=a.routes[d.route.id];if(!f||!f.hasLoader)return!1;if(o(d,x)||c(d,x))return!0;if(d.route.shouldRevalidate){let w=d.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((j=r[0])==null?void 0:j.params)||{},nextUrl:new URL(s,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function oT(s,t,{includeHydrateFallback:r}={}){return lT(s.map(a=>{let i=t.routes[a.route.id];if(!i)return[];let l=[i.module];return i.clientActionModule&&(l=l.concat(i.clientActionModule)),i.clientLoaderModule&&(l=l.concat(i.clientLoaderModule)),r&&i.hydrateFallbackModule&&(l=l.concat(i.hydrateFallbackModule)),i.imports&&(l=l.concat(i.imports)),l}).flat(1))}function lT(s){return[...new Set(s)]}function cT(s){let t={},r=Object.keys(s).sort();for(let a of r)t[a]=s[a];return t}function dT(s,t){let r=new Set,a=new Set(t);return s.reduce((i,l)=>{if(t&&!aT(l)&&l.as==="script"&&l.href&&a.has(l.href))return i;let c=JSON.stringify(cT(l));return r.has(c)||(r.add(c),i.push({key:c,link:l})),i},[])}function uT(s,t){let r=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return r.pathname==="/"?r.pathname="_root.data":t&&Qa(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.data`:r.pathname=`${r.pathname.replace(/\/$/,"")}.data`,r}function i4(){let s=b.useContext(Jo);return Gf(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function xT(){let s=b.useContext(dm);return Gf(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var Kf=b.createContext(void 0);Kf.displayName="FrameworkContext";function o4(){let s=b.useContext(Kf);return Gf(s,"You must render this element inside a <HydratedRouter> element"),s}function mT(s,t){let r=b.useContext(Kf),[a,i]=b.useState(!1),[l,o]=b.useState(!1),{onFocus:c,onBlur:d,onMouseEnter:x,onMouseLeave:f,onTouchStart:j}=t,w=b.useRef(null);b.useEffect(()=>{if(s==="render"&&o(!0),s==="viewport"){let V=_=>{_.forEach(M=>{o(M.isIntersecting)})},E=new IntersectionObserver(V,{threshold:.5});return w.current&&E.observe(w.current),()=>{E.disconnect()}}},[s]),b.useEffect(()=>{if(a){let V=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(V)}}},[a]);let S=()=>{i(!0)},g=()=>{i(!1),o(!1)};return r?s!=="intent"?[l,w,{}]:[l,w,{onFocus:El(c,S),onBlur:El(d,g),onMouseEnter:El(x,S),onMouseLeave:El(f,g),onTouchStart:El(j,S)}]:[!1,w,{}]}function El(s,t){return r=>{s&&s(r),r.defaultPrevented||t(r)}}function hT({page:s,...t}){let{router:r}=i4(),a=b.useMemo(()=>Q2(r.routes,s,r.basename),[r.routes,s,r.basename]);return a?b.createElement(fT,{page:s,matches:a,...t}):null}function pT(s){let{manifest:t,routeModules:r}=o4(),[a,i]=b.useState([]);return b.useEffect(()=>{let l=!1;return iT(s,t,r).then(o=>{l||i(o)}),()=>{l=!0}},[s,t,r]),a}function fT({page:s,matches:t,...r}){let a=Li(),{manifest:i,routeModules:l}=o4(),{basename:o}=i4(),{loaderData:c,matches:d}=xT(),x=b.useMemo(()=>Tv(s,t,d,i,a,"data"),[s,t,d,i,a]),f=b.useMemo(()=>Tv(s,t,d,i,a,"assets"),[s,t,d,i,a]),j=b.useMemo(()=>{if(s===a.pathname+a.search+a.hash)return[];let g=new Set,V=!1;if(t.forEach(_=>{var R;let M=i.routes[_.route.id];!M||!M.hasLoader||(!x.some(q=>q.route.id===_.route.id)&&_.route.id in c&&((R=l[_.route.id])!=null&&R.shouldRevalidate)||M.hasClientLoader?V=!0:g.add(_.route.id))}),g.size===0)return[];let E=uT(s,o);return V&&g.size>0&&E.searchParams.set("_routes",t.filter(_=>g.has(_.route.id)).map(_=>_.route.id).join(",")),[E.pathname+E.search]},[o,c,a,i,x,t,s,l]),w=b.useMemo(()=>oT(f,i),[f,i]),S=pT(f);return b.createElement(b.Fragment,null,j.map(g=>b.createElement("link",{key:g,rel:"prefetch",as:"fetch",href:g,...r})),w.map(g=>b.createElement("link",{key:g,rel:"modulepreload",href:g,...r})),S.map(({key:g,link:V})=>b.createElement("link",{key:g,...V})))}function gT(...s){return t=>{s.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var l4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{l4&&(window.__reactRouterVersion="7.5.0")}catch{}function yT({basename:s,children:t,window:r}){let a=b.useRef();a.current==null&&(a.current=iC({window:r,v5Compat:!0}));let i=a.current,[l,o]=b.useState({action:i.action,location:i.location}),c=b.useCallback(d=>{b.startTransition(()=>o(d))},[o]);return b.useLayoutEffect(()=>i.listen(c),[i,c]),b.createElement(GC,{basename:s,children:t,location:l.location,navigationType:l.action,navigator:i})}var c4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,y=b.forwardRef(function({onClick:t,discover:r="render",prefetch:a="none",relative:i,reloadDocument:l,replace:o,state:c,target:d,to:x,preventScrollReset:f,viewTransition:j,...w},S){let{basename:g}=b.useContext(Ca),V=typeof x=="string"&&c4.test(x),E,_=!1;if(typeof x=="string"&&V&&(E=x,l4))try{let U=new URL(window.location.href),F=x.startsWith("//")?new URL(U.protocol+x):new URL(x),Q=Qa(F.pathname,g);F.origin===U.origin&&Q!=null?x=Q+F.search+F.hash:_=!0}catch{Ia(!1,`<Link to="${x}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let M=DC(x,{relative:i}),[R,q,G]=mT(a,w),Y=NT(x,{replace:o,state:c,target:d,preventScrollReset:f,relative:i,viewTransition:j});function O(U){t&&t(U),U.defaultPrevented||Y(U)}let u=b.createElement("a",{...w,...G,href:E||M,onClick:_||l?t:O,ref:gT(S,q),target:d,"data-discover":!V&&r==="render"?"true":void 0});return R&&!V?b.createElement(b.Fragment,null,u,b.createElement(hT,{page:M})):u});y.displayName="Link";var bT=b.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:a="",end:i=!1,style:l,to:o,viewTransition:c,children:d,...x},f){let j=ed(o,{relative:x.relative}),w=Li(),S=b.useContext(dm),{navigator:g,basename:V}=b.useContext(Ca),E=S!=null&&ST(j)&&c===!0,_=g.encodeLocation?g.encodeLocation(j).pathname:j.pathname,M=w.pathname,R=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;r||(M=M.toLowerCase(),R=R?R.toLowerCase():null,_=_.toLowerCase()),R&&V&&(R=Qa(R,V)||R);const q=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let G=M===_||!i&&M.startsWith(_)&&M.charAt(q)==="/",Y=R!=null&&(R===_||!i&&R.startsWith(_)&&R.charAt(_.length)==="/"),O={isActive:G,isPending:Y,isTransitioning:E},u=G?t:void 0,U;typeof a=="function"?U=a(O):U=[a,G?"active":null,Y?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let F=typeof l=="function"?l(O):l;return b.createElement(y,{...x,"aria-current":u,className:U,ref:f,style:F,to:o,viewTransition:c},typeof d=="function"?d(O):d)});bT.displayName="NavLink";var vT=b.forwardRef(({discover:s="render",fetcherKey:t,navigate:r,reloadDocument:a,replace:i,state:l,method:o=ku,action:c,onSubmit:d,relative:x,preventScrollReset:f,viewTransition:j,...w},S)=>{let g=IT(),V=PT(c,{relative:x}),E=o.toLowerCase()==="get"?"get":"post",_=typeof c=="string"&&c4.test(c),M=R=>{if(d&&d(R),R.defaultPrevented)return;R.preventDefault();let q=R.nativeEvent.submitter,G=(q==null?void 0:q.getAttribute("formmethod"))||o;g(q||R.currentTarget,{fetcherKey:t,method:G,navigate:r,replace:i,state:l,relative:x,preventScrollReset:f,viewTransition:j})};return b.createElement("form",{ref:S,method:E,action:V,onSubmit:a?d:M,...w,"data-discover":!_&&s==="render"?"true":void 0})});vT.displayName="Form";function jT(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function d4(s){let t=b.useContext(Jo);return os(t,jT(s)),t}function NT(s,{target:t,replace:r,state:a,preventScrollReset:i,relative:l,viewTransition:o}={}){let c=Nt(),d=Li(),x=ed(s,{relative:l});return b.useCallback(f=>{if(ZC(f,t)){f.preventDefault();let j=r!==void 0?r:Sc(d)===Sc(x);c(s,{replace:j,state:a,preventScrollReset:i,relative:l,viewTransition:o})}},[d,c,x,r,a,t,s,i,l,o])}var wT=0,kT=()=>`__${String(++wT)}__`;function IT(){let{router:s}=d4("useSubmit"),{basename:t}=b.useContext(Ca),r=$C();return b.useCallback(async(a,i={})=>{let{action:l,method:o,encType:c,formData:d,body:x}=sT(a,t);if(i.navigate===!1){let f=i.fetcherKey||kT();await s.fetch(f,r,i.action||l,{preventScrollReset:i.preventScrollReset,formData:d,body:x,formMethod:i.method||o,formEncType:i.encType||c,flushSync:i.flushSync})}else await s.navigate(i.action||l,{preventScrollReset:i.preventScrollReset,formData:d,body:x,formMethod:i.method||o,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:r,flushSync:i.flushSync,viewTransition:i.viewTransition})},[s,t,r])}function PT(s,{relative:t}={}){let{basename:r}=b.useContext(Ca),a=b.useContext(rn);os(a,"useFormAction must be used inside a RouteContext");let[i]=a.matches.slice(-1),l={...ed(s||".",{relative:t})},o=Li();if(s==null){l.search=o.search;let c=new URLSearchParams(l.search),d=c.getAll("index");if(d.some(f=>f==="")){c.delete("index"),d.filter(j=>j).forEach(j=>c.append("index",j));let f=c.toString();l.search=f?`?${f}`:""}}return(!s||s===".")&&i.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(l.pathname=l.pathname==="/"?r:$a([r,l.pathname])),Sc(l)}function ST(s,t={}){let r=b.useContext(t4);os(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=d4("useViewTransitionState"),i=ed(s,{relative:t.relative});if(!r.isTransitioning)return!1;let l=Qa(r.currentLocation.pathname,a)||r.currentLocation.pathname,o=Qa(r.nextLocation.pathname,a)||r.nextLocation.pathname;return ux(i.pathname,o)!=null||ux(i.pathname,l)!=null}new TextEncoder;var u4={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},_v=Pn.createContext&&Pn.createContext(u4),ET=["attr","size","title"];function CT(s,t){if(s==null)return{};var r=TT(s,t),a,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);for(i=0;i<l.length;i++)a=l[i],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(s,a)&&(r[a]=s[a])}return r}function TT(s,t){if(s==null)return{};var r={};for(var a in s)if(Object.prototype.hasOwnProperty.call(s,a)){if(t.indexOf(a)>=0)continue;r[a]=s[a]}return r}function xx(){return xx=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},xx.apply(this,arguments)}function Dv(s,t){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(s);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(s,i).enumerable})),r.push.apply(r,a)}return r}function mx(s){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Dv(Object(r),!0).forEach(function(a){_T(s,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):Dv(Object(r)).forEach(function(a){Object.defineProperty(s,a,Object.getOwnPropertyDescriptor(r,a))})}return s}function _T(s,t,r){return t=DT(t),t in s?Object.defineProperty(s,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[t]=r,s}function DT(s){var t=AT(s,"string");return typeof t=="symbol"?t:t+""}function AT(s,t){if(typeof s!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var a=r.call(s,t||"default");if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(s)}function x4(s){return s&&s.map((t,r)=>Pn.createElement(t.tag,mx({key:r},t.attr),x4(t.child)))}function et(s){return t=>Pn.createElement(RT,xx({attr:mx({},s.attr)},t),x4(s.child))}function RT(s){var t=r=>{var{attr:a,size:i,title:l}=s,o=CT(s,ET),c=i||r.size||"1em",d;return r.className&&(d=r.className),s.className&&(d=(d?d+" ":"")+s.className),Pn.createElement("svg",xx({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,a,o,{className:d,style:mx(mx({color:s.color||r.color},r.style),s.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),l&&Pn.createElement("title",null,l),s.children)};return _v!==void 0?Pn.createElement(_v.Consumer,null,r=>t(r)):t(u4)}function MT(s){return et({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(s)}function Zp(s){return et({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(s)}function Av(s){return et({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M150.94 192h33.73c11.01 0 18.61-10.83 14.86-21.18-4.93-13.58-7.55-27.98-7.55-42.82s2.62-29.24 7.55-42.82C203.29 74.83 195.68 64 184.67 64h-33.73c-7.01 0-13.46 4.49-15.41 11.23C130.64 92.21 128 109.88 128 128c0 18.12 2.64 35.79 7.54 52.76 1.94 6.74 8.39 11.24 15.4 11.24zM89.92 23.34C95.56 12.72 87.97 0 75.96 0H40.63c-6.27 0-12.14 3.59-14.74 9.31C9.4 45.54 0 85.65 0 128c0 24.75 3.12 68.33 26.69 118.86 2.62 5.63 8.42 9.14 14.61 9.14h34.84c12.02 0 19.61-12.74 13.95-23.37-49.78-93.32-16.71-178.15-.17-209.29zM614.06 9.29C611.46 3.58 605.6 0 599.33 0h-35.42c-11.98 0-19.66 12.66-14.02 23.25 18.27 34.29 48.42 119.42.28 209.23-5.72 10.68 1.8 23.52 13.91 23.52h35.23c6.27 0 12.13-3.58 14.73-9.29C630.57 210.48 640 170.36 640 128s-9.42-82.48-25.94-118.71zM489.06 64h-33.73c-11.01 0-18.61 10.83-14.86 21.18 4.93 13.58 7.55 27.98 7.55 42.82s-2.62 29.24-7.55 42.82c-3.76 10.35 3.85 21.18 14.86 21.18h33.73c7.02 0 13.46-4.49 15.41-11.24 4.9-16.97 7.53-34.64 7.53-52.76 0-18.12-2.64-35.79-7.54-52.76-1.94-6.75-8.39-11.24-15.4-11.24zm-116.3 100.12c7.05-10.29 11.2-22.71 11.2-36.12 0-35.35-28.63-64-63.96-64-35.32 0-63.96 28.65-63.96 64 0 13.41 4.15 25.83 11.2 36.12l-130.5 313.41c-3.4 8.15.46 17.52 8.61 20.92l29.51 12.31c8.15 3.4 17.52-.46 20.91-8.61L244.96 384h150.07l49.2 118.15c3.4 8.16 12.76 12.01 20.91 8.61l29.51-12.31c8.15-3.4 12-12.77 8.61-20.92l-130.5-313.41zM271.62 320L320 203.81 368.38 320h-96.76z"},child:[]}]})(s)}function LT(s){return et({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},child:[]}]})(s)}function OT(s){return et({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},child:[]}]})(s)}function Rv(s){return et({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zM224 416H64V160h160v256zm224 0H288V160h160v256z"},child:[]}]})(s)}function hx(s){return et({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"},child:[]}]})(s)}function e0(s){return et({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(s)}function px(s){return et({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M416 448h-84c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h84c17.7 0 32-14.3 32-32V160c0-17.7-14.3-32-32-32h-84c-6.6 0-12-5.4-12-12V76c0-6.6 5.4-12 12-12h84c53 0 96 43 96 96v192c0 53-43 96-96 96zm-47-201L201 79c-15-15-41-4.5-41 17v96H24c-13.3 0-24 10.7-24 24v96c0 13.3 10.7 24 24 24h136v96c0 21.5 26 32 41 17l168-168c9.3-9.4 9.3-24.6 0-34z"},child:[]}]})(s)}function Mv(s){return et({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(s)}function fx(s){return et({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"},child:[]}]})(s)}function Lv(s){return et({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(s)}function m4(s){return et({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(s)}const VT=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h4=function(s){const t=[];let r=0;for(let a=0;a<s.length;a++){let i=s.charCodeAt(a);i<128?t[r++]=i:i<2048?(t[r++]=i>>6|192,t[r++]=i&63|128):(i&64512)===55296&&a+1<s.length&&(s.charCodeAt(a+1)&64512)===56320?(i=65536+((i&1023)<<10)+(s.charCodeAt(++a)&1023),t[r++]=i>>18|240,t[r++]=i>>12&63|128,t[r++]=i>>6&63|128,t[r++]=i&63|128):(t[r++]=i>>12|224,t[r++]=i>>6&63|128,t[r++]=i&63|128)}return t},BT=function(s){const t=[];let r=0,a=0;for(;r<s.length;){const i=s[r++];if(i<128)t[a++]=String.fromCharCode(i);else if(i>191&&i<224){const l=s[r++];t[a++]=String.fromCharCode((i&31)<<6|l&63)}else if(i>239&&i<365){const l=s[r++],o=s[r++],c=s[r++],d=((i&7)<<18|(l&63)<<12|(o&63)<<6|c&63)-65536;t[a++]=String.fromCharCode(55296+(d>>10)),t[a++]=String.fromCharCode(56320+(d&1023))}else{const l=s[r++],o=s[r++];t[a++]=String.fromCharCode((i&15)<<12|(l&63)<<6|o&63)}}return t.join("")},p4={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let i=0;i<s.length;i+=3){const l=s[i],o=i+1<s.length,c=o?s[i+1]:0,d=i+2<s.length,x=d?s[i+2]:0,f=l>>2,j=(l&3)<<4|c>>4;let w=(c&15)<<2|x>>6,S=x&63;d||(S=64,o||(w=64)),a.push(r[f],r[j],r[w],r[S])}return a.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(h4(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):BT(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let i=0;i<s.length;){const l=r[s.charAt(i++)],c=i<s.length?r[s.charAt(i)]:0;++i;const x=i<s.length?r[s.charAt(i)]:64;++i;const j=i<s.length?r[s.charAt(i)]:64;if(++i,l==null||c==null||x==null||j==null)throw new zT;const w=l<<2|c>>4;if(a.push(w),x!==64){const S=c<<4&240|x>>2;if(a.push(S),j!==64){const g=x<<6&192|j;a.push(g)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class zT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const FT=function(s){const t=h4(s);return p4.encodeByteArray(t,!0)},gx=function(s){return FT(s).replace(/\./g,"")},f4=function(s){try{return p4.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T=()=>UT().__FIREBASE_DEFAULTS__,WT=()=>{if(typeof process>"u"||typeof process.env>"u")return;const s={}.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},qT=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&f4(s[1]);return t&&JSON.parse(t)},xm=()=>{try{return VT()||$T()||WT()||qT()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},g4=s=>{var t,r;return(r=(t=xm())===null||t===void 0?void 0:t.emulatorHosts)===null||r===void 0?void 0:r[s]},y4=s=>{const t=g4(s);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const a=parseInt(t.substring(r+1),10);return t[0]==="["?[t.substring(1,r-1),a]:[t.substring(0,r),a]},b4=()=>{var s;return(s=xm())===null||s===void 0?void 0:s.config},v4=s=>{var t;return(t=xm())===null||t===void 0?void 0:t[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,a)=>{r?this.reject(r):this.resolve(a),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,a))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j4(s,t){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},a=t||"demo-project",i=s.iat||0,l=s.sub||s.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${a}`,aud:a,iat:i,exp:i+3600,auth_time:i,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},s),c="";return[gx(JSON.stringify(r)),gx(JSON.stringify(o)),c].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function GT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(er())}function KT(){var s;const t=(s=xm())===null||s===void 0?void 0:s.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function QT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function N4(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function YT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function XT(){const s=er();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function JT(){return!KT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function w4(){try{return typeof indexedDB=="object"}catch{return!1}}function k4(){return new Promise((s,t)=>{try{let r=!0;const a="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(a);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(a),s(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var l;t(((l=i.error)===null||l===void 0?void 0:l.message)||"")}}catch(r){t(r)}})}function ZT(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_="FirebaseError";class qr extends Error{constructor(t,r,a){super(r),this.code=t,this.customData=a,this.name=e_,Object.setPrototypeOf(this,qr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Oi.prototype.create)}}class Oi{constructor(t,r,a){this.service=t,this.serviceName=r,this.errors=a}create(t,...r){const a=r[0]||{},i=`${this.service}/${t}`,l=this.errors[t],o=l?t_(l,a):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new qr(i,c,a)}}function t_(s,t){return s.replace(s_,(r,a)=>{const i=t[a];return i!=null?String(i):`<${a}?>`})}const s_=/\{\$([^}]+)}/g;function r_(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}function Fn(s,t){if(s===t)return!0;const r=Object.keys(s),a=Object.keys(t);for(const i of r){if(!a.includes(i))return!1;const l=s[i],o=t[i];if(Ov(l)&&Ov(o)){if(!Fn(l,o))return!1}else if(l!==o)return!1}for(const i of a)if(!r.includes(i))return!1;return!0}function Ov(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function td(s){const t=[];for(const[r,a]of Object.entries(s))Array.isArray(a)?a.forEach(i=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(a));return t.length?"&"+t.join("&"):""}function Ml(s){const t={};return s.replace(/^\?/,"").split("&").forEach(a=>{if(a){const[i,l]=a.split("=");t[decodeURIComponent(i)]=decodeURIComponent(l)}}),t}function Ll(s){const t=s.indexOf("?");if(!t)return"";const r=s.indexOf("#",t);return s.substring(t,r>0?r:void 0)}function a_(s,t){const r=new n_(s,t);return r.subscribe.bind(r)}class n_{constructor(t,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{t(this)}).catch(a=>{this.error(a)})}next(t){this.forEachObserver(r=>{r.next(t)})}error(t){this.forEachObserver(r=>{r.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,r,a){let i;if(t===void 0&&r===void 0&&a===void 0)throw new Error("Missing Observer.");i_(t,["next","error","complete"])?i=t:i={next:t,error:r,complete:a},i.next===void 0&&(i.next=Eh),i.error===void 0&&(i.error=Eh),i.complete===void 0&&(i.complete=Eh);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),l}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,t)}sendOne(t,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{r(this.observers[t])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function i_(s,t){if(typeof s!="object"||s===null)return!1;for(const r of t)if(r in s&&typeof s[r]=="function")return!0;return!1}function Eh(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_=1e3,l_=2,c_=4*60*60*1e3,d_=.5;function Vv(s,t=o_,r=l_){const a=t*Math.pow(r,s),i=Math.round(d_*a*(Math.random()-.5)*2);return Math.min(c_,a+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(s){return s&&s._delegate?s._delegate:s}class Wr{constructor(t,r,a){this.name=t,this.instanceFactory=r,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ci="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const a=new HT;if(this.instancesDeferred.set(r,a),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&a.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){var r;const a=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(r=t==null?void 0:t.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(a)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:a})}catch(l){if(i)return null;throw l}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(m_(t))try{this.getOrInitializeService({instanceIdentifier:ci})}catch{}for(const[r,a]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const l=this.getOrInitializeService({instanceIdentifier:i});a.resolve(l)}catch{}}}}clearInstance(t=ci){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ci){return this.instances.has(t)}getOptions(t=ci){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,a=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:a,options:r});for(const[l,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(l);a===c&&o.resolve(i)}return i}onInit(t,r){var a;const i=this.normalizeInstanceIdentifier(r),l=(a=this.onInitCallbacks.get(i))!==null&&a!==void 0?a:new Set;l.add(t),this.onInitCallbacks.set(i,l);const o=this.instances.get(i);return o&&t(o,i),()=>{l.delete(t)}}invokeOnInitCallbacks(t,r){const a=this.onInitCallbacks.get(r);if(a)for(const i of a)try{i(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let a=this.instances.get(t);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:x_(t),options:r}),this.instances.set(t,a),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(a,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,a)}catch{}return a||null}normalizeInstanceIdentifier(t=ci){return this.component?this.component.multipleInstances?t:ci:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function x_(s){return s===ci?void 0:s}function m_(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new u_(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Et;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Et||(Et={}));const p_={debug:Et.DEBUG,verbose:Et.VERBOSE,info:Et.INFO,warn:Et.WARN,error:Et.ERROR,silent:Et.SILENT},f_=Et.INFO,g_={[Et.DEBUG]:"log",[Et.VERBOSE]:"log",[Et.INFO]:"info",[Et.WARN]:"warn",[Et.ERROR]:"error"},y_=(s,t,...r)=>{if(t<s.logLevel)return;const a=new Date().toISOString(),i=g_[t];if(i)console[i](`[${a}]  ${s.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class mm{constructor(t){this.name=t,this._logLevel=f_,this._logHandler=y_,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Et))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?p_[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Et.DEBUG,...t),this._logHandler(this,Et.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Et.VERBOSE,...t),this._logHandler(this,Et.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Et.INFO,...t),this._logHandler(this,Et.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Et.WARN,...t),this._logHandler(this,Et.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Et.ERROR,...t),this._logHandler(this,Et.ERROR,...t)}}const b_=(s,t)=>t.some(r=>s instanceof r);let Bv,zv;function v_(){return Bv||(Bv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function j_(){return zv||(zv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const I4=new WeakMap,t0=new WeakMap,P4=new WeakMap,Ch=new WeakMap,Qf=new WeakMap;function N_(s){const t=new Promise((r,a)=>{const i=()=>{s.removeEventListener("success",l),s.removeEventListener("error",o)},l=()=>{r(Mn(s.result)),i()},o=()=>{a(s.error),i()};s.addEventListener("success",l),s.addEventListener("error",o)});return t.then(r=>{r instanceof IDBCursor&&I4.set(r,s)}).catch(()=>{}),Qf.set(t,s),t}function w_(s){if(t0.has(s))return;const t=new Promise((r,a)=>{const i=()=>{s.removeEventListener("complete",l),s.removeEventListener("error",o),s.removeEventListener("abort",o)},l=()=>{r(),i()},o=()=>{a(s.error||new DOMException("AbortError","AbortError")),i()};s.addEventListener("complete",l),s.addEventListener("error",o),s.addEventListener("abort",o)});t0.set(s,t)}let s0={get(s,t,r){if(s instanceof IDBTransaction){if(t==="done")return t0.get(s);if(t==="objectStoreNames")return s.objectStoreNames||P4.get(s);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Mn(s[t])},set(s,t,r){return s[t]=r,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function k_(s){s0=s(s0)}function I_(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const a=s.call(Th(this),t,...r);return P4.set(a,t.sort?t.sort():[t]),Mn(a)}:j_().includes(s)?function(...t){return s.apply(Th(this),t),Mn(I4.get(this))}:function(...t){return Mn(s.apply(Th(this),t))}}function P_(s){return typeof s=="function"?I_(s):(s instanceof IDBTransaction&&w_(s),b_(s,v_())?new Proxy(s,s0):s)}function Mn(s){if(s instanceof IDBRequest)return N_(s);if(Ch.has(s))return Ch.get(s);const t=P_(s);return t!==s&&(Ch.set(s,t),Qf.set(t,s)),t}const Th=s=>Qf.get(s);function S4(s,t,{blocked:r,upgrade:a,blocking:i,terminated:l}={}){const o=indexedDB.open(s,t),c=Mn(o);return a&&o.addEventListener("upgradeneeded",d=>{a(Mn(o.result),d.oldVersion,d.newVersion,Mn(o.transaction),d)}),r&&o.addEventListener("blocked",d=>r(d.oldVersion,d.newVersion,d)),c.then(d=>{l&&d.addEventListener("close",()=>l()),i&&d.addEventListener("versionchange",x=>i(x.oldVersion,x.newVersion,x))}).catch(()=>{}),c}const S_=["get","getKey","getAll","getAllKeys","count"],E_=["put","add","delete","clear"],_h=new Map;function Fv(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(_h.get(t))return _h.get(t);const r=t.replace(/FromIndex$/,""),a=t!==r,i=E_.includes(r);if(!(r in(a?IDBIndex:IDBObjectStore).prototype)||!(i||S_.includes(r)))return;const l=async function(o,...c){const d=this.transaction(o,i?"readwrite":"readonly");let x=d.store;return a&&(x=x.index(c.shift())),(await Promise.all([x[r](...c),i&&d.done]))[0]};return _h.set(t,l),l}k_(s=>({...s,get:(t,r,a)=>Fv(t,r)||s.get(t,r,a),has:(t,r)=>!!Fv(t,r)||s.has(t,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(T_(r)){const a=r.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(r=>r).join(" ")}}function T_(s){const t=s.getComponent();return(t==null?void 0:t.type)==="VERSION"}const r0="@firebase/app",Uv="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ya=new mm("@firebase/app"),__="@firebase/app-compat",D_="@firebase/analytics-compat",A_="@firebase/analytics",R_="@firebase/app-check-compat",M_="@firebase/app-check",L_="@firebase/auth",O_="@firebase/auth-compat",V_="@firebase/database",B_="@firebase/data-connect",z_="@firebase/database-compat",F_="@firebase/functions",U_="@firebase/functions-compat",$_="@firebase/installations",W_="@firebase/installations-compat",q_="@firebase/messaging",H_="@firebase/messaging-compat",G_="@firebase/performance",K_="@firebase/performance-compat",Q_="@firebase/remote-config",Y_="@firebase/remote-config-compat",X_="@firebase/storage",J_="@firebase/storage-compat",Z_="@firebase/firestore",eD="@firebase/vertexai",tD="@firebase/firestore-compat",sD="firebase",rD="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0="[DEFAULT]",aD={[r0]:"fire-core",[__]:"fire-core-compat",[A_]:"fire-analytics",[D_]:"fire-analytics-compat",[M_]:"fire-app-check",[R_]:"fire-app-check-compat",[L_]:"fire-auth",[O_]:"fire-auth-compat",[V_]:"fire-rtdb",[B_]:"fire-data-connect",[z_]:"fire-rtdb-compat",[F_]:"fire-fn",[U_]:"fire-fn-compat",[$_]:"fire-iid",[W_]:"fire-iid-compat",[q_]:"fire-fcm",[H_]:"fire-fcm-compat",[G_]:"fire-perf",[K_]:"fire-perf-compat",[Q_]:"fire-rc",[Y_]:"fire-rc-compat",[X_]:"fire-gcs",[J_]:"fire-gcs-compat",[Z_]:"fire-fst",[tD]:"fire-fst-compat",[eD]:"fire-vertex","fire-js":"fire-js",[sD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx=new Map,nD=new Map,n0=new Map;function $v(s,t){try{s.container.addComponent(t)}catch(r){Ya.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,r)}}function na(s){const t=s.name;if(n0.has(t))return Ya.debug(`There were multiple attempts to register component ${t}.`),!1;n0.set(t,s);for(const r of yx.values())$v(r,s);for(const r of nD.values())$v(r,s);return!0}function Zn(s,t){const r=s.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),s.container.getProvider(t)}function kr(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ln=new Oi("app","Firebase",iD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(t,r,a){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Wr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ln.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi=rD;function E4(s,t={}){let r=s;typeof t!="object"&&(t={name:t});const a=Object.assign({name:a0,automaticDataCollectionEnabled:!1},t),i=a.name;if(typeof i!="string"||!i)throw Ln.create("bad-app-name",{appName:String(i)});if(r||(r=b4()),!r)throw Ln.create("no-options");const l=yx.get(i);if(l){if(Fn(r,l.options)&&Fn(a,l.config))return l;throw Ln.create("duplicate-app",{appName:i})}const o=new h_(i);for(const d of n0.values())o.addComponent(d);const c=new oD(r,a,o);return yx.set(i,c),c}function hm(s=a0){const t=yx.get(s);if(!t&&s===a0&&b4())return E4();if(!t)throw Ln.create("no-app",{appName:s});return t}function yr(s,t,r){var a;let i=(a=aD[s])!==null&&a!==void 0?a:s;r&&(i+=`-${r}`);const l=i.match(/\s|\//),o=t.match(/\s|\//);if(l||o){const c=[`Unable to register library "${i}" with version "${t}":`];l&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),l&&o&&c.push("and"),o&&c.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ya.warn(c.join(" "));return}na(new Wr(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD="firebase-heartbeat-database",cD=1,Ec="firebase-heartbeat-store";let Dh=null;function C4(){return Dh||(Dh=S4(lD,cD,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(Ec)}catch(r){console.warn(r)}}}}).catch(s=>{throw Ln.create("idb-open",{originalErrorMessage:s.message})})),Dh}async function dD(s){try{const r=(await C4()).transaction(Ec),a=await r.objectStore(Ec).get(T4(s));return await r.done,a}catch(t){if(t instanceof qr)Ya.warn(t.message);else{const r=Ln.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Ya.warn(r.message)}}}async function Wv(s,t){try{const a=(await C4()).transaction(Ec,"readwrite");await a.objectStore(Ec).put(t,T4(s)),await a.done}catch(r){if(r instanceof qr)Ya.warn(r.message);else{const a=Ln.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Ya.warn(a.message)}}}function T4(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD=1024,xD=30;class mD{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new pD(r),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var t,r;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=qv();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(o=>o.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:i}),this._heartbeatsCache.heartbeats.length>xD){const o=fD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){Ya.warn(a)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=qv(),{heartbeatsToSend:a,unsentEntries:i}=hD(this._heartbeatsCache.heartbeats),l=gx(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=r,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(r){return Ya.warn(r),""}}}function qv(){return new Date().toISOString().substring(0,10)}function hD(s,t=uD){const r=[];let a=s.slice();for(const i of s){const l=r.find(o=>o.agent===i.agent);if(l){if(l.dates.push(i.date),Hv(r)>t){l.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),Hv(r)>t){r.pop();break}a=a.slice(1)}return{heartbeatsToSend:r,unsentEntries:a}}class pD{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return w4()?k4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await dD(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return Wv(this.app,{lastSentHeartbeatDate:(r=t.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return Wv(this.app,{lastSentHeartbeatDate:(r=t.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function Hv(s){return gx(JSON.stringify({version:2,heartbeats:s})).length}function fD(s){if(s.length===0)return-1;let t=0,r=s[0].date;for(let a=1;a<s.length;a++)s[a].date<r&&(r=s[a].date,t=a);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gD(s){na(new Wr("platform-logger",t=>new C_(t),"PRIVATE")),na(new Wr("heartbeat",t=>new mD(t),"PRIVATE")),yr(r0,Uv,s),yr(r0,Uv,"esm2017"),yr("fire-js","")}gD("");var Gv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var On,_4;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(O,u){function U(){}U.prototype=u.prototype,O.D=u.prototype,O.prototype=new U,O.prototype.constructor=O,O.C=function(F,Q,T){for(var W=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)W[Ae-2]=arguments[Ae];return u.prototype[Q].apply(F,W)}}function r(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(a,r),a.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(O,u,U){U||(U=0);var F=Array(16);if(typeof u=="string")for(var Q=0;16>Q;++Q)F[Q]=u.charCodeAt(U++)|u.charCodeAt(U++)<<8|u.charCodeAt(U++)<<16|u.charCodeAt(U++)<<24;else for(Q=0;16>Q;++Q)F[Q]=u[U++]|u[U++]<<8|u[U++]<<16|u[U++]<<24;u=O.g[0],U=O.g[1],Q=O.g[2];var T=O.g[3],W=u+(T^U&(Q^T))+F[0]+3614090360&4294967295;u=U+(W<<7&4294967295|W>>>25),W=T+(Q^u&(U^Q))+F[1]+3905402710&4294967295,T=u+(W<<12&4294967295|W>>>20),W=Q+(U^T&(u^U))+F[2]+606105819&4294967295,Q=T+(W<<17&4294967295|W>>>15),W=U+(u^Q&(T^u))+F[3]+3250441966&4294967295,U=Q+(W<<22&4294967295|W>>>10),W=u+(T^U&(Q^T))+F[4]+4118548399&4294967295,u=U+(W<<7&4294967295|W>>>25),W=T+(Q^u&(U^Q))+F[5]+1200080426&4294967295,T=u+(W<<12&4294967295|W>>>20),W=Q+(U^T&(u^U))+F[6]+2821735955&4294967295,Q=T+(W<<17&4294967295|W>>>15),W=U+(u^Q&(T^u))+F[7]+4249261313&4294967295,U=Q+(W<<22&4294967295|W>>>10),W=u+(T^U&(Q^T))+F[8]+1770035416&4294967295,u=U+(W<<7&4294967295|W>>>25),W=T+(Q^u&(U^Q))+F[9]+2336552879&4294967295,T=u+(W<<12&4294967295|W>>>20),W=Q+(U^T&(u^U))+F[10]+4294925233&4294967295,Q=T+(W<<17&4294967295|W>>>15),W=U+(u^Q&(T^u))+F[11]+2304563134&4294967295,U=Q+(W<<22&4294967295|W>>>10),W=u+(T^U&(Q^T))+F[12]+1804603682&4294967295,u=U+(W<<7&4294967295|W>>>25),W=T+(Q^u&(U^Q))+F[13]+4254626195&4294967295,T=u+(W<<12&4294967295|W>>>20),W=Q+(U^T&(u^U))+F[14]+2792965006&4294967295,Q=T+(W<<17&4294967295|W>>>15),W=U+(u^Q&(T^u))+F[15]+1236535329&4294967295,U=Q+(W<<22&4294967295|W>>>10),W=u+(Q^T&(U^Q))+F[1]+4129170786&4294967295,u=U+(W<<5&4294967295|W>>>27),W=T+(U^Q&(u^U))+F[6]+3225465664&4294967295,T=u+(W<<9&4294967295|W>>>23),W=Q+(u^U&(T^u))+F[11]+643717713&4294967295,Q=T+(W<<14&4294967295|W>>>18),W=U+(T^u&(Q^T))+F[0]+3921069994&4294967295,U=Q+(W<<20&4294967295|W>>>12),W=u+(Q^T&(U^Q))+F[5]+3593408605&4294967295,u=U+(W<<5&4294967295|W>>>27),W=T+(U^Q&(u^U))+F[10]+38016083&4294967295,T=u+(W<<9&4294967295|W>>>23),W=Q+(u^U&(T^u))+F[15]+3634488961&4294967295,Q=T+(W<<14&4294967295|W>>>18),W=U+(T^u&(Q^T))+F[4]+3889429448&4294967295,U=Q+(W<<20&4294967295|W>>>12),W=u+(Q^T&(U^Q))+F[9]+568446438&4294967295,u=U+(W<<5&4294967295|W>>>27),W=T+(U^Q&(u^U))+F[14]+3275163606&4294967295,T=u+(W<<9&4294967295|W>>>23),W=Q+(u^U&(T^u))+F[3]+4107603335&4294967295,Q=T+(W<<14&4294967295|W>>>18),W=U+(T^u&(Q^T))+F[8]+1163531501&4294967295,U=Q+(W<<20&4294967295|W>>>12),W=u+(Q^T&(U^Q))+F[13]+2850285829&4294967295,u=U+(W<<5&4294967295|W>>>27),W=T+(U^Q&(u^U))+F[2]+4243563512&4294967295,T=u+(W<<9&4294967295|W>>>23),W=Q+(u^U&(T^u))+F[7]+1735328473&4294967295,Q=T+(W<<14&4294967295|W>>>18),W=U+(T^u&(Q^T))+F[12]+2368359562&4294967295,U=Q+(W<<20&4294967295|W>>>12),W=u+(U^Q^T)+F[5]+4294588738&4294967295,u=U+(W<<4&4294967295|W>>>28),W=T+(u^U^Q)+F[8]+2272392833&4294967295,T=u+(W<<11&4294967295|W>>>21),W=Q+(T^u^U)+F[11]+1839030562&4294967295,Q=T+(W<<16&4294967295|W>>>16),W=U+(Q^T^u)+F[14]+4259657740&4294967295,U=Q+(W<<23&4294967295|W>>>9),W=u+(U^Q^T)+F[1]+2763975236&4294967295,u=U+(W<<4&4294967295|W>>>28),W=T+(u^U^Q)+F[4]+1272893353&4294967295,T=u+(W<<11&4294967295|W>>>21),W=Q+(T^u^U)+F[7]+4139469664&4294967295,Q=T+(W<<16&4294967295|W>>>16),W=U+(Q^T^u)+F[10]+3200236656&4294967295,U=Q+(W<<23&4294967295|W>>>9),W=u+(U^Q^T)+F[13]+681279174&4294967295,u=U+(W<<4&4294967295|W>>>28),W=T+(u^U^Q)+F[0]+3936430074&4294967295,T=u+(W<<11&4294967295|W>>>21),W=Q+(T^u^U)+F[3]+3572445317&4294967295,Q=T+(W<<16&4294967295|W>>>16),W=U+(Q^T^u)+F[6]+76029189&4294967295,U=Q+(W<<23&4294967295|W>>>9),W=u+(U^Q^T)+F[9]+3654602809&4294967295,u=U+(W<<4&4294967295|W>>>28),W=T+(u^U^Q)+F[12]+3873151461&4294967295,T=u+(W<<11&4294967295|W>>>21),W=Q+(T^u^U)+F[15]+530742520&4294967295,Q=T+(W<<16&4294967295|W>>>16),W=U+(Q^T^u)+F[2]+3299628645&4294967295,U=Q+(W<<23&4294967295|W>>>9),W=u+(Q^(U|~T))+F[0]+4096336452&4294967295,u=U+(W<<6&4294967295|W>>>26),W=T+(U^(u|~Q))+F[7]+1126891415&4294967295,T=u+(W<<10&4294967295|W>>>22),W=Q+(u^(T|~U))+F[14]+2878612391&4294967295,Q=T+(W<<15&4294967295|W>>>17),W=U+(T^(Q|~u))+F[5]+4237533241&4294967295,U=Q+(W<<21&4294967295|W>>>11),W=u+(Q^(U|~T))+F[12]+1700485571&4294967295,u=U+(W<<6&4294967295|W>>>26),W=T+(U^(u|~Q))+F[3]+2399980690&4294967295,T=u+(W<<10&4294967295|W>>>22),W=Q+(u^(T|~U))+F[10]+4293915773&4294967295,Q=T+(W<<15&4294967295|W>>>17),W=U+(T^(Q|~u))+F[1]+2240044497&4294967295,U=Q+(W<<21&4294967295|W>>>11),W=u+(Q^(U|~T))+F[8]+1873313359&4294967295,u=U+(W<<6&4294967295|W>>>26),W=T+(U^(u|~Q))+F[15]+4264355552&4294967295,T=u+(W<<10&4294967295|W>>>22),W=Q+(u^(T|~U))+F[6]+2734768916&4294967295,Q=T+(W<<15&4294967295|W>>>17),W=U+(T^(Q|~u))+F[13]+1309151649&4294967295,U=Q+(W<<21&4294967295|W>>>11),W=u+(Q^(U|~T))+F[4]+4149444226&4294967295,u=U+(W<<6&4294967295|W>>>26),W=T+(U^(u|~Q))+F[11]+3174756917&4294967295,T=u+(W<<10&4294967295|W>>>22),W=Q+(u^(T|~U))+F[2]+718787259&4294967295,Q=T+(W<<15&4294967295|W>>>17),W=U+(T^(Q|~u))+F[9]+3951481745&4294967295,O.g[0]=O.g[0]+u&4294967295,O.g[1]=O.g[1]+(Q+(W<<21&4294967295|W>>>11))&4294967295,O.g[2]=O.g[2]+Q&4294967295,O.g[3]=O.g[3]+T&4294967295}a.prototype.u=function(O,u){u===void 0&&(u=O.length);for(var U=u-this.blockSize,F=this.B,Q=this.h,T=0;T<u;){if(Q==0)for(;T<=U;)i(this,O,T),T+=this.blockSize;if(typeof O=="string"){for(;T<u;)if(F[Q++]=O.charCodeAt(T++),Q==this.blockSize){i(this,F),Q=0;break}}else for(;T<u;)if(F[Q++]=O[T++],Q==this.blockSize){i(this,F),Q=0;break}}this.h=Q,this.o+=u},a.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var u=1;u<O.length-8;++u)O[u]=0;var U=8*this.o;for(u=O.length-8;u<O.length;++u)O[u]=U&255,U/=256;for(this.u(O),O=Array(16),u=U=0;4>u;++u)for(var F=0;32>F;F+=8)O[U++]=this.g[u]>>>F&255;return O};function l(O,u){var U=c;return Object.prototype.hasOwnProperty.call(U,O)?U[O]:U[O]=u(O)}function o(O,u){this.h=u;for(var U=[],F=!0,Q=O.length-1;0<=Q;Q--){var T=O[Q]|0;F&&T==u||(U[Q]=T,F=!1)}this.g=U}var c={};function d(O){return-128<=O&&128>O?l(O,function(u){return new o([u|0],0>u?-1:0)}):new o([O|0],0>O?-1:0)}function x(O){if(isNaN(O)||!isFinite(O))return j;if(0>O)return E(x(-O));for(var u=[],U=1,F=0;O>=U;F++)u[F]=O/U|0,U*=4294967296;return new o(u,0)}function f(O,u){if(O.length==0)throw Error("number format error: empty string");if(u=u||10,2>u||36<u)throw Error("radix out of range: "+u);if(O.charAt(0)=="-")return E(f(O.substring(1),u));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var U=x(Math.pow(u,8)),F=j,Q=0;Q<O.length;Q+=8){var T=Math.min(8,O.length-Q),W=parseInt(O.substring(Q,Q+T),u);8>T?(T=x(Math.pow(u,T)),F=F.j(T).add(x(W))):(F=F.j(U),F=F.add(x(W)))}return F}var j=d(0),w=d(1),S=d(16777216);s=o.prototype,s.m=function(){if(V(this))return-E(this).m();for(var O=0,u=1,U=0;U<this.g.length;U++){var F=this.i(U);O+=(0<=F?F:4294967296+F)*u,u*=4294967296}return O},s.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(g(this))return"0";if(V(this))return"-"+E(this).toString(O);for(var u=x(Math.pow(O,6)),U=this,F="";;){var Q=q(U,u).g;U=_(U,Q.j(u));var T=((0<U.g.length?U.g[0]:U.h)>>>0).toString(O);if(U=Q,g(U))return T+F;for(;6>T.length;)T="0"+T;F=T+F}},s.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function g(O){if(O.h!=0)return!1;for(var u=0;u<O.g.length;u++)if(O.g[u]!=0)return!1;return!0}function V(O){return O.h==-1}s.l=function(O){return O=_(this,O),V(O)?-1:g(O)?0:1};function E(O){for(var u=O.g.length,U=[],F=0;F<u;F++)U[F]=~O.g[F];return new o(U,~O.h).add(w)}s.abs=function(){return V(this)?E(this):this},s.add=function(O){for(var u=Math.max(this.g.length,O.g.length),U=[],F=0,Q=0;Q<=u;Q++){var T=F+(this.i(Q)&65535)+(O.i(Q)&65535),W=(T>>>16)+(this.i(Q)>>>16)+(O.i(Q)>>>16);F=W>>>16,T&=65535,W&=65535,U[Q]=W<<16|T}return new o(U,U[U.length-1]&-2147483648?-1:0)};function _(O,u){return O.add(E(u))}s.j=function(O){if(g(this)||g(O))return j;if(V(this))return V(O)?E(this).j(E(O)):E(E(this).j(O));if(V(O))return E(this.j(E(O)));if(0>this.l(S)&&0>O.l(S))return x(this.m()*O.m());for(var u=this.g.length+O.g.length,U=[],F=0;F<2*u;F++)U[F]=0;for(F=0;F<this.g.length;F++)for(var Q=0;Q<O.g.length;Q++){var T=this.i(F)>>>16,W=this.i(F)&65535,Ae=O.i(Q)>>>16,Ue=O.i(Q)&65535;U[2*F+2*Q]+=W*Ue,M(U,2*F+2*Q),U[2*F+2*Q+1]+=T*Ue,M(U,2*F+2*Q+1),U[2*F+2*Q+1]+=W*Ae,M(U,2*F+2*Q+1),U[2*F+2*Q+2]+=T*Ae,M(U,2*F+2*Q+2)}for(F=0;F<u;F++)U[F]=U[2*F+1]<<16|U[2*F];for(F=u;F<2*u;F++)U[F]=0;return new o(U,0)};function M(O,u){for(;(O[u]&65535)!=O[u];)O[u+1]+=O[u]>>>16,O[u]&=65535,u++}function R(O,u){this.g=O,this.h=u}function q(O,u){if(g(u))throw Error("division by zero");if(g(O))return new R(j,j);if(V(O))return u=q(E(O),u),new R(E(u.g),E(u.h));if(V(u))return u=q(O,E(u)),new R(E(u.g),u.h);if(30<O.g.length){if(V(O)||V(u))throw Error("slowDivide_ only works with positive integers.");for(var U=w,F=u;0>=F.l(O);)U=G(U),F=G(F);var Q=Y(U,1),T=Y(F,1);for(F=Y(F,2),U=Y(U,2);!g(F);){var W=T.add(F);0>=W.l(O)&&(Q=Q.add(U),T=W),F=Y(F,1),U=Y(U,1)}return u=_(O,Q.j(u)),new R(Q,u)}for(Q=j;0<=O.l(u);){for(U=Math.max(1,Math.floor(O.m()/u.m())),F=Math.ceil(Math.log(U)/Math.LN2),F=48>=F?1:Math.pow(2,F-48),T=x(U),W=T.j(u);V(W)||0<W.l(O);)U-=F,T=x(U),W=T.j(u);g(T)&&(T=w),Q=Q.add(T),O=_(O,W)}return new R(Q,O)}s.A=function(O){return q(this,O).h},s.and=function(O){for(var u=Math.max(this.g.length,O.g.length),U=[],F=0;F<u;F++)U[F]=this.i(F)&O.i(F);return new o(U,this.h&O.h)},s.or=function(O){for(var u=Math.max(this.g.length,O.g.length),U=[],F=0;F<u;F++)U[F]=this.i(F)|O.i(F);return new o(U,this.h|O.h)},s.xor=function(O){for(var u=Math.max(this.g.length,O.g.length),U=[],F=0;F<u;F++)U[F]=this.i(F)^O.i(F);return new o(U,this.h^O.h)};function G(O){for(var u=O.g.length+1,U=[],F=0;F<u;F++)U[F]=O.i(F)<<1|O.i(F-1)>>>31;return new o(U,O.h)}function Y(O,u){var U=u>>5;u%=32;for(var F=O.g.length-U,Q=[],T=0;T<F;T++)Q[T]=0<u?O.i(T+U)>>>u|O.i(T+U+1)<<32-u:O.i(T+U);return new o(Q,O.h)}a.prototype.digest=a.prototype.v,a.prototype.reset=a.prototype.s,a.prototype.update=a.prototype.u,_4=a,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=x,o.fromString=f,On=o}).apply(typeof Gv<"u"?Gv:typeof self<"u"?self:typeof window<"u"?window:{});var eu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var D4,Ol,A4,Pu,i0,R4,M4,L4;(function(){var s,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,P,L){return m==Array.prototype||m==Object.prototype||(m[P]=L.value),m};function r(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof eu=="object"&&eu];for(var P=0;P<m.length;++P){var L=m[P];if(L&&L.Math==Math)return L}throw Error("Cannot find global object")}var a=r(this);function i(m,P){if(P)e:{var L=a;m=m.split(".");for(var K=0;K<m.length-1;K++){var de=m[K];if(!(de in L))break e;L=L[de]}m=m[m.length-1],K=L[m],P=P(K),P!=K&&P!=null&&t(L,m,{configurable:!0,writable:!0,value:P})}}function l(m,P){m instanceof String&&(m+="");var L=0,K=!1,de={next:function(){if(!K&&L<m.length){var ge=L++;return{value:P(ge,m[ge]),done:!1}}return K=!0,{done:!0,value:void 0}}};return de[Symbol.iterator]=function(){return de},de}i("Array.prototype.values",function(m){return m||function(){return l(this,function(P,L){return L})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function d(m){var P=typeof m;return P=P!="object"?P:m?Array.isArray(m)?"array":P:"null",P=="array"||P=="object"&&typeof m.length=="number"}function x(m){var P=typeof m;return P=="object"&&m!=null||P=="function"}function f(m,P,L){return m.call.apply(m.bind,arguments)}function j(m,P,L){if(!m)throw Error();if(2<arguments.length){var K=Array.prototype.slice.call(arguments,2);return function(){var de=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(de,K),m.apply(P,de)}}return function(){return m.apply(P,arguments)}}function w(m,P,L){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:j,w.apply(null,arguments)}function S(m,P){var L=Array.prototype.slice.call(arguments,1);return function(){var K=L.slice();return K.push.apply(K,arguments),m.apply(this,K)}}function g(m,P){function L(){}L.prototype=P.prototype,m.aa=P.prototype,m.prototype=new L,m.prototype.constructor=m,m.Qb=function(K,de,ge){for(var $e=Array(arguments.length-2),Ht=2;Ht<arguments.length;Ht++)$e[Ht-2]=arguments[Ht];return P.prototype[de].apply(K,$e)}}function V(m){const P=m.length;if(0<P){const L=Array(P);for(let K=0;K<P;K++)L[K]=m[K];return L}return[]}function E(m,P){for(let L=1;L<arguments.length;L++){const K=arguments[L];if(d(K)){const de=m.length||0,ge=K.length||0;m.length=de+ge;for(let $e=0;$e<ge;$e++)m[de+$e]=K[$e]}else m.push(K)}}class _{constructor(P,L){this.i=P,this.j=L,this.h=0,this.g=null}get(){let P;return 0<this.h?(this.h--,P=this.g,this.g=P.next,P.next=null):P=this.i(),P}}function M(m){return/^[\s\xa0]*$/.test(m)}function R(){var m=c.navigator;return m&&(m=m.userAgent)?m:""}function q(m){return q[" "](m),m}q[" "]=function(){};var G=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function Y(m,P,L){for(const K in m)P.call(L,m[K],K,m)}function O(m,P){for(const L in m)P.call(void 0,m[L],L,m)}function u(m){const P={};for(const L in m)P[L]=m[L];return P}const U="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(m,P){let L,K;for(let de=1;de<arguments.length;de++){K=arguments[de];for(L in K)m[L]=K[L];for(let ge=0;ge<U.length;ge++)L=U[ge],Object.prototype.hasOwnProperty.call(K,L)&&(m[L]=K[L])}}function Q(m){var P=1;m=m.split(":");const L=[];for(;0<P&&m.length;)L.push(m.shift()),P--;return m.length&&L.push(m.join(":")),L}function T(m){c.setTimeout(()=>{throw m},0)}function W(){var m=me;let P=null;return m.g&&(P=m.g,m.g=m.g.next,m.g||(m.h=null),P.next=null),P}class Ae{constructor(){this.h=this.g=null}add(P,L){const K=Ue.get();K.set(P,L),this.h?this.h.next=K:this.g=K,this.h=K}}var Ue=new _(()=>new _e,m=>m.reset());class _e{constructor(){this.next=this.g=this.h=null}set(P,L){this.h=P,this.g=L,this.next=null}reset(){this.next=this.g=this.h=null}}let be,ue=!1,me=new Ae,pe=()=>{const m=c.Promise.resolve(void 0);be=()=>{m.then(Oe)}};var Oe=()=>{for(var m;m=W();){try{m.h.call(m.g)}catch(L){T(L)}var P=Ue;P.j(m),100>P.h&&(P.h++,m.next=P.g,P.g=m)}ue=!1};function De(){this.s=this.s,this.C=this.C}De.prototype.s=!1,De.prototype.ma=function(){this.s||(this.s=!0,this.N())},De.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function n(m,P){this.type=m,this.g=this.target=P,this.defaultPrevented=!1}n.prototype.h=function(){this.defaultPrevented=!0};var N=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var m=!1,P=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const L=()=>{};c.addEventListener("test",L,P),c.removeEventListener("test",L,P)}catch{}return m}();function h(m,P){if(n.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var L=this.type=m.type,K=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=P,P=m.relatedTarget){if(G){e:{try{q(P.nodeName);var de=!0;break e}catch{}de=!1}de||(P=null)}}else L=="mouseover"?P=m.fromElement:L=="mouseout"&&(P=m.toElement);this.relatedTarget=P,K?(this.clientX=K.clientX!==void 0?K.clientX:K.pageX,this.clientY=K.clientY!==void 0?K.clientY:K.pageY,this.screenX=K.screenX||0,this.screenY=K.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:D[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&h.aa.h.call(this)}}g(h,n);var D={2:"touch",3:"pen",4:"mouse"};h.prototype.h=function(){h.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var H="closure_listenable_"+(1e6*Math.random()|0),ne=0;function k(m,P,L,K,de){this.listener=m,this.proxy=null,this.src=P,this.type=L,this.capture=!!K,this.ha=de,this.key=++ne,this.da=this.fa=!1}function A(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function C(m){this.src=m,this.g={},this.h=0}C.prototype.add=function(m,P,L,K,de){var ge=m.toString();m=this.g[ge],m||(m=this.g[ge]=[],this.h++);var $e=p(m,P,K,de);return-1<$e?(P=m[$e],L||(P.fa=!1)):(P=new k(P,this.src,ge,!!K,de),P.fa=L,m.push(P)),P};function v(m,P){var L=P.type;if(L in m.g){var K=m.g[L],de=Array.prototype.indexOf.call(K,P,void 0),ge;(ge=0<=de)&&Array.prototype.splice.call(K,de,1),ge&&(A(P),m.g[L].length==0&&(delete m.g[L],m.h--))}}function p(m,P,L,K){for(var de=0;de<m.length;++de){var ge=m[de];if(!ge.da&&ge.listener==P&&ge.capture==!!L&&ge.ha==K)return de}return-1}var z="closure_lm_"+(1e6*Math.random()|0),oe={};function se(m,P,L,K,de){if(K&&K.once)return re(m,P,L,K,de);if(Array.isArray(P)){for(var ge=0;ge<P.length;ge++)se(m,P[ge],L,K,de);return null}return L=fe(L),m&&m[H]?m.K(P,L,x(K)?!!K.capture:!!K,de):ie(m,P,L,!1,K,de)}function ie(m,P,L,K,de,ge){if(!P)throw Error("Invalid event type");var $e=x(de)?!!de.capture:!!de,Ht=ke(m);if(Ht||(m[z]=Ht=new C(m)),L=Ht.add(P,L,K,$e,ge),L.proxy)return L;if(K=ae(),L.proxy=K,K.src=m,K.listener=L,m.addEventListener)N||(de=$e),de===void 0&&(de=!1),m.addEventListener(P.toString(),K,de);else if(m.attachEvent)m.attachEvent(J(P.toString()),K);else if(m.addListener&&m.removeListener)m.addListener(K);else throw Error("addEventListener and attachEvent are unavailable.");return L}function ae(){function m(L){return P.call(m.src,m.listener,L)}const P=xe;return m}function re(m,P,L,K,de){if(Array.isArray(P)){for(var ge=0;ge<P.length;ge++)re(m,P[ge],L,K,de);return null}return L=fe(L),m&&m[H]?m.L(P,L,x(K)?!!K.capture:!!K,de):ie(m,P,L,!0,K,de)}function le(m,P,L,K,de){if(Array.isArray(P))for(var ge=0;ge<P.length;ge++)le(m,P[ge],L,K,de);else K=x(K)?!!K.capture:!!K,L=fe(L),m&&m[H]?(m=m.i,P=String(P).toString(),P in m.g&&(ge=m.g[P],L=p(ge,L,K,de),-1<L&&(A(ge[L]),Array.prototype.splice.call(ge,L,1),ge.length==0&&(delete m.g[P],m.h--)))):m&&(m=ke(m))&&(P=m.g[P.toString()],m=-1,P&&(m=p(P,L,K,de)),(L=-1<m?P[m]:null)&&$(L))}function $(m){if(typeof m!="number"&&m&&!m.da){var P=m.src;if(P&&P[H])v(P.i,m);else{var L=m.type,K=m.proxy;P.removeEventListener?P.removeEventListener(L,K,m.capture):P.detachEvent?P.detachEvent(J(L),K):P.addListener&&P.removeListener&&P.removeListener(K),(L=ke(P))?(v(L,m),L.h==0&&(L.src=null,P[z]=null)):A(m)}}}function J(m){return m in oe?oe[m]:oe[m]="on"+m}function xe(m,P){if(m.da)m=!0;else{P=new h(P,this);var L=m.listener,K=m.ha||m.src;m.fa&&$(m),m=L.call(K,P)}return m}function ke(m){return m=m[z],m instanceof C?m:null}var Te="__closure_events_fn_"+(1e9*Math.random()>>>0);function fe(m){return typeof m=="function"?m:(m[Te]||(m[Te]=function(P){return m.handleEvent(P)}),m[Te])}function Me(){De.call(this),this.i=new C(this),this.M=this,this.F=null}g(Me,De),Me.prototype[H]=!0,Me.prototype.removeEventListener=function(m,P,L,K){le(this,m,P,L,K)};function Ne(m,P){var L,K=m.F;if(K)for(L=[];K;K=K.F)L.push(K);if(m=m.M,K=P.type||P,typeof P=="string")P=new n(P,m);else if(P instanceof n)P.target=P.target||m;else{var de=P;P=new n(K,m),F(P,de)}if(de=!0,L)for(var ge=L.length-1;0<=ge;ge--){var $e=P.g=L[ge];de=Le($e,K,!0,P)&&de}if($e=P.g=m,de=Le($e,K,!0,P)&&de,de=Le($e,K,!1,P)&&de,L)for(ge=0;ge<L.length;ge++)$e=P.g=L[ge],de=Le($e,K,!1,P)&&de}Me.prototype.N=function(){if(Me.aa.N.call(this),this.i){var m=this.i,P;for(P in m.g){for(var L=m.g[P],K=0;K<L.length;K++)A(L[K]);delete m.g[P],m.h--}}this.F=null},Me.prototype.K=function(m,P,L,K){return this.i.add(String(m),P,!1,L,K)},Me.prototype.L=function(m,P,L,K){return this.i.add(String(m),P,!0,L,K)};function Le(m,P,L,K){if(P=m.i.g[String(P)],!P)return!0;P=P.concat();for(var de=!0,ge=0;ge<P.length;++ge){var $e=P[ge];if($e&&!$e.da&&$e.capture==L){var Ht=$e.listener,As=$e.ha||$e.src;$e.fa&&v(m.i,$e),de=Ht.call(As,K)!==!1&&de}}return de&&!K.defaultPrevented}function X(m,P,L){if(typeof m=="function")L&&(m=w(m,L));else if(m&&typeof m.handleEvent=="function")m=w(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(P)?-1:c.setTimeout(m,P||0)}function ce(m){m.g=X(()=>{m.g=null,m.i&&(m.i=!1,ce(m))},m.l);const P=m.h;m.h=null,m.m.apply(null,P)}class ve extends De{constructor(P,L){super(),this.m=P,this.l=L,this.h=null,this.i=!1,this.g=null}j(P){this.h=arguments,this.g?this.i=!0:ce(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function st(m){De.call(this),this.h=m,this.g={}}g(st,De);var Tt=[];function St(m){Y(m.g,function(P,L){this.g.hasOwnProperty(L)&&$(P)},m),m.g={}}st.prototype.N=function(){st.aa.N.call(this),St(this)},st.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ts=c.JSON.stringify,_s=c.JSON.parse,wt=class{stringify(m){return c.JSON.stringify(m,void 0)}parse(m){return c.JSON.parse(m,void 0)}};function yt(){}yt.prototype.h=null;function ss(m){return m.h||(m.h=m.i())}function us(){}var js={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function tr(){n.call(this,"d")}g(tr,n);function sr(){n.call(this,"c")}g(sr,n);var $s={},on=null;function Ds(){return on=on||new Me}$s.La="serverreachability";function Da(m){n.call(this,$s.La,m)}g(Da,n);function vr(m){const P=Ds();Ne(P,new Da(P))}$s.STAT_EVENT="statevent";function Hr(m,P){n.call(this,$s.STAT_EVENT,m),this.stat=P}g(Hr,n);function ee(m){const P=Ds();Ne(P,new Hr(P,m))}$s.Ma="timingevent";function we(m,P){n.call(this,$s.Ma,m),this.size=P}g(we,n);function Ve(m,P){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){m()},P)}function Ke(){this.g=!0}Ke.prototype.xa=function(){this.g=!1};function bt(m,P,L,K,de,ge){m.info(function(){if(m.g)if(ge)for(var $e="",Ht=ge.split("&"),As=0;As<Ht.length;As++){var Bt=Ht[As].split("=");if(1<Bt.length){var Ws=Bt[0];Bt=Bt[1];var qs=Ws.split("_");$e=2<=qs.length&&qs[1]=="type"?$e+(Ws+"="+Bt+"&"):$e+(Ws+"=redacted&")}}else $e=null;else $e=ge;return"XMLHTTP REQ ("+K+") [attempt "+de+"]: "+P+`
`+L+`
`+$e})}function _t(m,P,L,K,de,ge,$e){m.info(function(){return"XMLHTTP RESP ("+K+") [ attempt "+de+"]: "+P+`
`+L+`
`+ge+" "+$e})}function Mt(m,P,L,K){m.info(function(){return"XMLHTTP TEXT ("+P+"): "+Ar(m,L)+(K?" "+K:"")})}function la(m,P){m.info(function(){return"TIMEOUT: "+P})}Ke.prototype.info=function(){};function Ar(m,P){if(!m.g)return P;if(!P)return null;try{var L=JSON.parse(P);if(L){for(m=0;m<L.length;m++)if(Array.isArray(L[m])){var K=L[m];if(!(2>K.length)){var de=K[1];if(Array.isArray(de)&&!(1>de.length)){var ge=de[0];if(ge!="noop"&&ge!="stop"&&ge!="close")for(var $e=1;$e<de.length;$e++)de[$e]=""}}}}return ts(L)}catch{return P}}var Is={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Aa={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ln;function ca(){}g(ca,yt),ca.prototype.g=function(){return new XMLHttpRequest},ca.prototype.i=function(){return{}},ln=new ca;function rr(m,P,L,K){this.j=m,this.i=P,this.l=L,this.R=K||1,this.U=new st(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ll}function ll(){this.i=null,this.g="",this.h=!1}var jd={},cl={};function dl(m,P,L){m.L=1,m.v=Sd(Ra(P)),m.m=L,m.P=!0,$i(m,null)}function $i(m,P){m.F=Date.now(),Wi(m),m.A=Ra(m.v);var L=m.A,K=m.R;Array.isArray(K)||(K=[String(K)]),Hy(L.i,"t",K),m.C=0,L=m.j.J,m.h=new ll,m.g=db(m.j,L?P:null,!m.m),0<m.O&&(m.M=new ve(w(m.Y,m,m.g),m.O)),P=m.U,L=m.g,K=m.ca;var de="readystatechange";Array.isArray(de)||(de&&(Tt[0]=de.toString()),de=Tt);for(var ge=0;ge<de.length;ge++){var $e=se(L,de[ge],K||P.handleEvent,!1,P.h||P);if(!$e)break;P.g[$e.key]=$e}P=m.H?u(m.H):{},m.m?(m.u||(m.u="POST"),P["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,P)):(m.u="GET",m.g.ea(m.A,m.u,null,P)),vr(),bt(m.i,m.u,m.A,m.l,m.R,m.m)}rr.prototype.ca=function(m){m=m.target;const P=this.M;P&&Ma(m)==3?P.j():this.Y(m)},rr.prototype.Y=function(m){try{if(m==this.g)e:{const qs=Ma(this.g);var P=this.g.Ba();const Ki=this.g.Z();if(!(3>qs)&&(qs!=3||this.g&&(this.h.h||this.g.oa()||Zy(this.g)))){this.J||qs!=4||P==7||(P==8||0>=Ki?vr(3):vr(2)),qi(this);var L=this.g.Z();this.X=L;t:if(Nd(this)){var K=Zy(this.g);m="";var de=K.length,ge=Ma(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ua(this),da(this);var $e="";break t}this.h.i=new c.TextDecoder}for(P=0;P<de;P++)this.h.h=!0,m+=this.h.i.decode(K[P],{stream:!(ge&&P==de-1)});K.length=0,this.h.g+=m,this.C=0,$e=this.h.g}else $e=this.g.oa();if(this.o=L==200,_t(this.i,this.u,this.A,this.l,this.R,qs,L),this.o){if(this.T&&!this.K){t:{if(this.g){var Ht,As=this.g;if((Ht=As.g?As.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(Ht)){var Bt=Ht;break t}}Bt=null}if(L=Bt)Mt(this.i,this.l,L,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,cn(this,L);else{this.o=!1,this.s=3,ee(12),ua(this),da(this);break e}}if(this.P){L=!0;let Gr;for(;!this.J&&this.C<$e.length;)if(Gr=Hm(this,$e),Gr==cl){qs==4&&(this.s=4,ee(14),L=!1),Mt(this.i,this.l,null,"[Incomplete Response]");break}else if(Gr==jd){this.s=4,ee(15),Mt(this.i,this.l,$e,"[Invalid Chunk]"),L=!1;break}else Mt(this.i,this.l,Gr,null),cn(this,Gr);if(Nd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qs!=4||$e.length!=0||this.h.h||(this.s=1,ee(16),L=!1),this.o=this.o&&L,!L)Mt(this.i,this.l,$e,"[Invalid Chunked Response]"),ua(this),da(this);else if(0<$e.length&&!this.W){this.W=!0;var Ws=this.j;Ws.g==this&&Ws.ba&&!Ws.M&&(Ws.j.info("Great, no buffering proxy detected. Bytes received: "+$e.length),Jm(Ws),Ws.M=!0,ee(11))}}else Mt(this.i,this.l,$e,null),cn(this,$e);qs==4&&ua(this),this.o&&!this.J&&(qs==4?ib(this.j,this):(this.o=!1,Wi(this)))}else yP(this.g),L==400&&0<$e.indexOf("Unknown SID")?(this.s=3,ee(12)):(this.s=0,ee(13)),ua(this),da(this)}}}catch{}finally{}};function Nd(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function Hm(m,P){var L=m.C,K=P.indexOf(`
`,L);return K==-1?cl:(L=Number(P.substring(L,K)),isNaN(L)?jd:(K+=1,K+L>P.length?cl:(P=P.slice(K,K+L),m.C=K+L,P)))}rr.prototype.cancel=function(){this.J=!0,ua(this)};function Wi(m){m.S=Date.now()+m.I,ri(m,m.I)}function ri(m,P){if(m.B!=null)throw Error("WatchDog timer not null");m.B=Ve(w(m.ba,m),P)}function qi(m){m.B&&(c.clearTimeout(m.B),m.B=null)}rr.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(la(this.i,this.A),this.L!=2&&(vr(),ee(17)),ua(this),this.s=2,da(this)):ri(this,this.S-m)};function da(m){m.j.G==0||m.J||ib(m.j,m)}function ua(m){qi(m);var P=m.M;P&&typeof P.ma=="function"&&P.ma(),m.M=null,St(m.U),m.g&&(P=m.g,m.g=null,P.abort(),P.ma())}function cn(m,P){try{var L=m.j;if(L.G!=0&&(L.g==m||Gm(L.h,m))){if(!m.K&&Gm(L.h,m)&&L.G==3){try{var K=L.Da.g.parse(P)}catch{K=null}if(Array.isArray(K)&&K.length==3){var de=K;if(de[0]==0){e:if(!L.u){if(L.g)if(L.g.F+3e3<m.F)Ad(L),_d(L);else break e;Xm(L),ee(18)}}else L.za=de[1],0<L.za-L.T&&37500>de[2]&&L.F&&L.v==0&&!L.C&&(L.C=Ve(w(L.Za,L),6e3));if(1>=kd(L.h)&&L.ca){try{L.ca()}catch{}L.ca=void 0}}else ni(L,11)}else if((m.K||L.g==m)&&Ad(L),!M(P))for(de=L.Da.g.parse(P),P=0;P<de.length;P++){let Bt=de[P];if(L.T=Bt[0],Bt=Bt[1],L.G==2)if(Bt[0]=="c"){L.K=Bt[1],L.ia=Bt[2];const Ws=Bt[3];Ws!=null&&(L.la=Ws,L.j.info("VER="+L.la));const qs=Bt[4];qs!=null&&(L.Aa=qs,L.j.info("SVER="+L.Aa));const Ki=Bt[5];Ki!=null&&typeof Ki=="number"&&0<Ki&&(K=1.5*Ki,L.L=K,L.j.info("backChannelRequestTimeoutMs_="+K)),K=L;const Gr=m.g;if(Gr){const Md=Gr.g?Gr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Md){var ge=K.h;ge.g||Md.indexOf("spdy")==-1&&Md.indexOf("quic")==-1&&Md.indexOf("h2")==-1||(ge.j=ge.l,ge.g=new Set,ge.h&&(Km(ge,ge.h),ge.h=null))}if(K.D){const Zm=Gr.g?Gr.g.getResponseHeader("X-HTTP-Session-Id"):null;Zm&&(K.ya=Zm,Xt(K.I,K.D,Zm))}}L.G=3,L.l&&L.l.ua(),L.ba&&(L.R=Date.now()-m.F,L.j.info("Handshake RTT: "+L.R+"ms")),K=L;var $e=m;if(K.qa=cb(K,K.J?K.ia:null,K.W),$e.K){Vy(K.h,$e);var Ht=$e,As=K.L;As&&(Ht.I=As),Ht.B&&(qi(Ht),Wi(Ht)),K.g=$e}else ab(K);0<L.i.length&&Dd(L)}else Bt[0]!="stop"&&Bt[0]!="close"||ni(L,7);else L.G==3&&(Bt[0]=="stop"||Bt[0]=="close"?Bt[0]=="stop"?ni(L,7):Ym(L):Bt[0]!="noop"&&L.l&&L.l.ta(Bt),L.v=0)}}vr(4)}catch{}}var wd=class{constructor(m,P){this.g=m,this.map=P}};function ul(m){this.l=m||10,c.PerformanceNavigationTiming?(m=c.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function xl(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function kd(m){return m.h?1:m.g?m.g.size:0}function Gm(m,P){return m.h?m.h==P:m.g?m.g.has(P):!1}function Km(m,P){m.g?m.g.add(P):m.h=P}function Vy(m,P){m.h&&m.h==P?m.h=null:m.g&&m.g.has(P)&&m.g.delete(P)}ul.prototype.cancel=function(){if(this.i=By(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function By(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let P=m.i;for(const L of m.g.values())P=P.concat(L.D);return P}return V(m.i)}function rP(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(d(m)){for(var P=[],L=m.length,K=0;K<L;K++)P.push(m[K]);return P}P=[],L=0;for(K in m)P[L++]=m[K];return P}function aP(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(d(m)||typeof m=="string"){var P=[];m=m.length;for(var L=0;L<m;L++)P.push(L);return P}P=[],L=0;for(const K in m)P[L++]=K;return P}}}function zy(m,P){if(m.forEach&&typeof m.forEach=="function")m.forEach(P,void 0);else if(d(m)||typeof m=="string")Array.prototype.forEach.call(m,P,void 0);else for(var L=aP(m),K=rP(m),de=K.length,ge=0;ge<de;ge++)P.call(void 0,K[ge],L&&L[ge],m)}var Fy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nP(m,P){if(m){m=m.split("&");for(var L=0;L<m.length;L++){var K=m[L].indexOf("="),de=null;if(0<=K){var ge=m[L].substring(0,K);de=m[L].substring(K+1)}else ge=m[L];P(ge,de?decodeURIComponent(de.replace(/\+/g," ")):"")}}}function ai(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof ai){this.h=m.h,Id(this,m.j),this.o=m.o,this.g=m.g,Pd(this,m.s),this.l=m.l;var P=m.i,L=new pl;L.i=P.i,P.g&&(L.g=new Map(P.g),L.h=P.h),Uy(this,L),this.m=m.m}else m&&(P=String(m).match(Fy))?(this.h=!1,Id(this,P[1]||"",!0),this.o=ml(P[2]||""),this.g=ml(P[3]||"",!0),Pd(this,P[4]),this.l=ml(P[5]||"",!0),Uy(this,P[6]||"",!0),this.m=ml(P[7]||"")):(this.h=!1,this.i=new pl(null,this.h))}ai.prototype.toString=function(){var m=[],P=this.j;P&&m.push(hl(P,$y,!0),":");var L=this.g;return(L||P=="file")&&(m.push("//"),(P=this.o)&&m.push(hl(P,$y,!0),"@"),m.push(encodeURIComponent(String(L)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),L=this.s,L!=null&&m.push(":",String(L))),(L=this.l)&&(this.g&&L.charAt(0)!="/"&&m.push("/"),m.push(hl(L,L.charAt(0)=="/"?lP:oP,!0))),(L=this.i.toString())&&m.push("?",L),(L=this.m)&&m.push("#",hl(L,dP)),m.join("")};function Ra(m){return new ai(m)}function Id(m,P,L){m.j=L?ml(P,!0):P,m.j&&(m.j=m.j.replace(/:$/,""))}function Pd(m,P){if(P){if(P=Number(P),isNaN(P)||0>P)throw Error("Bad port number "+P);m.s=P}else m.s=null}function Uy(m,P,L){P instanceof pl?(m.i=P,uP(m.i,m.h)):(L||(P=hl(P,cP)),m.i=new pl(P,m.h))}function Xt(m,P,L){m.i.set(P,L)}function Sd(m){return Xt(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function ml(m,P){return m?P?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function hl(m,P,L){return typeof m=="string"?(m=encodeURI(m).replace(P,iP),L&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function iP(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var $y=/[#\/\?@]/g,oP=/[#\?:]/g,lP=/[#\?]/g,cP=/[#\?@]/g,dP=/#/g;function pl(m,P){this.h=this.g=null,this.i=m||null,this.j=!!P}function dn(m){m.g||(m.g=new Map,m.h=0,m.i&&nP(m.i,function(P,L){m.add(decodeURIComponent(P.replace(/\+/g," ")),L)}))}s=pl.prototype,s.add=function(m,P){dn(this),this.i=null,m=Hi(this,m);var L=this.g.get(m);return L||this.g.set(m,L=[]),L.push(P),this.h+=1,this};function Wy(m,P){dn(m),P=Hi(m,P),m.g.has(P)&&(m.i=null,m.h-=m.g.get(P).length,m.g.delete(P))}function qy(m,P){return dn(m),P=Hi(m,P),m.g.has(P)}s.forEach=function(m,P){dn(this),this.g.forEach(function(L,K){L.forEach(function(de){m.call(P,de,K,this)},this)},this)},s.na=function(){dn(this);const m=Array.from(this.g.values()),P=Array.from(this.g.keys()),L=[];for(let K=0;K<P.length;K++){const de=m[K];for(let ge=0;ge<de.length;ge++)L.push(P[K])}return L},s.V=function(m){dn(this);let P=[];if(typeof m=="string")qy(this,m)&&(P=P.concat(this.g.get(Hi(this,m))));else{m=Array.from(this.g.values());for(let L=0;L<m.length;L++)P=P.concat(m[L])}return P},s.set=function(m,P){return dn(this),this.i=null,m=Hi(this,m),qy(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[P]),this.h+=1,this},s.get=function(m,P){return m?(m=this.V(m),0<m.length?String(m[0]):P):P};function Hy(m,P,L){Wy(m,P),0<L.length&&(m.i=null,m.g.set(Hi(m,P),V(L)),m.h+=L.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],P=Array.from(this.g.keys());for(var L=0;L<P.length;L++){var K=P[L];const ge=encodeURIComponent(String(K)),$e=this.V(K);for(K=0;K<$e.length;K++){var de=ge;$e[K]!==""&&(de+="="+encodeURIComponent(String($e[K]))),m.push(de)}}return this.i=m.join("&")};function Hi(m,P){return P=String(P),m.j&&(P=P.toLowerCase()),P}function uP(m,P){P&&!m.j&&(dn(m),m.i=null,m.g.forEach(function(L,K){var de=K.toLowerCase();K!=de&&(Wy(this,K),Hy(this,de,L))},m)),m.j=P}function xP(m,P){const L=new Ke;if(c.Image){const K=new Image;K.onload=S(un,L,"TestLoadImage: loaded",!0,P,K),K.onerror=S(un,L,"TestLoadImage: error",!1,P,K),K.onabort=S(un,L,"TestLoadImage: abort",!1,P,K),K.ontimeout=S(un,L,"TestLoadImage: timeout",!1,P,K),c.setTimeout(function(){K.ontimeout&&K.ontimeout()},1e4),K.src=m}else P(!1)}function mP(m,P){const L=new Ke,K=new AbortController,de=setTimeout(()=>{K.abort(),un(L,"TestPingServer: timeout",!1,P)},1e4);fetch(m,{signal:K.signal}).then(ge=>{clearTimeout(de),ge.ok?un(L,"TestPingServer: ok",!0,P):un(L,"TestPingServer: server error",!1,P)}).catch(()=>{clearTimeout(de),un(L,"TestPingServer: error",!1,P)})}function un(m,P,L,K,de){try{de&&(de.onload=null,de.onerror=null,de.onabort=null,de.ontimeout=null),K(L)}catch{}}function hP(){this.g=new wt}function pP(m,P,L){const K=L||"";try{zy(m,function(de,ge){let $e=de;x(de)&&($e=ts(de)),P.push(K+ge+"="+encodeURIComponent($e))})}catch(de){throw P.push(K+"type="+encodeURIComponent("_badmap")),de}}function Ed(m){this.l=m.Ub||null,this.j=m.eb||!1}g(Ed,yt),Ed.prototype.g=function(){return new Cd(this.l,this.j)},Ed.prototype.i=function(m){return function(){return m}}({});function Cd(m,P){Me.call(this),this.D=m,this.o=P,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(Cd,Me),s=Cd.prototype,s.open=function(m,P){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=P,this.readyState=1,gl(this)},s.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const P={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(P.body=m),(this.D||c).fetch(new Request(this.A,P)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,fl(this)),this.readyState=0},s.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,gl(this)),this.g&&(this.readyState=3,gl(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Gy(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function Gy(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}s.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var P=m.value?m.value:new Uint8Array(0);(P=this.v.decode(P,{stream:!m.done}))&&(this.response=this.responseText+=P)}m.done?fl(this):gl(this),this.readyState==3&&Gy(this)}},s.Ra=function(m){this.g&&(this.response=this.responseText=m,fl(this))},s.Qa=function(m){this.g&&(this.response=m,fl(this))},s.ga=function(){this.g&&fl(this)};function fl(m){m.readyState=4,m.l=null,m.j=null,m.v=null,gl(m)}s.setRequestHeader=function(m,P){this.u.append(m,P)},s.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],P=this.h.entries();for(var L=P.next();!L.done;)L=L.value,m.push(L[0]+": "+L[1]),L=P.next();return m.join(`\r
`)};function gl(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Cd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Ky(m){let P="";return Y(m,function(L,K){P+=K,P+=":",P+=L,P+=`\r
`}),P}function Qm(m,P,L){e:{for(K in L){var K=!1;break e}K=!0}K||(L=Ky(L),typeof m=="string"?L!=null&&encodeURIComponent(String(L)):Xt(m,P,L))}function xs(m){Me.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(xs,Me);var fP=/^https?$/i,gP=["POST","PUT"];s=xs.prototype,s.Ha=function(m){this.J=m},s.ea=function(m,P,L,K){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);P=P?P.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ln.g(),this.v=this.o?ss(this.o):ss(ln),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(P,String(m),!0),this.B=!1}catch(ge){Qy(this,ge);return}if(m=L||"",L=new Map(this.headers),K)if(Object.getPrototypeOf(K)===Object.prototype)for(var de in K)L.set(de,K[de]);else if(typeof K.keys=="function"&&typeof K.get=="function")for(const ge of K.keys())L.set(ge,K.get(ge));else throw Error("Unknown input type for opt_headers: "+String(K));K=Array.from(L.keys()).find(ge=>ge.toLowerCase()=="content-type"),de=c.FormData&&m instanceof c.FormData,!(0<=Array.prototype.indexOf.call(gP,P,void 0))||K||de||L.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ge,$e]of L)this.g.setRequestHeader(ge,$e);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Jy(this),this.u=!0,this.g.send(m),this.u=!1}catch(ge){Qy(this,ge)}};function Qy(m,P){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=P,m.m=5,Yy(m),Td(m)}function Yy(m){m.A||(m.A=!0,Ne(m,"complete"),Ne(m,"error"))}s.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,Ne(this,"complete"),Ne(this,"abort"),Td(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Td(this,!0)),xs.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?Xy(this):this.bb())},s.bb=function(){Xy(this)};function Xy(m){if(m.h&&typeof o<"u"&&(!m.v[1]||Ma(m)!=4||m.Z()!=2)){if(m.u&&Ma(m)==4)X(m.Ea,0,m);else if(Ne(m,"readystatechange"),Ma(m)==4){m.h=!1;try{const $e=m.Z();e:switch($e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var P=!0;break e;default:P=!1}var L;if(!(L=P)){var K;if(K=$e===0){var de=String(m.D).match(Fy)[1]||null;!de&&c.self&&c.self.location&&(de=c.self.location.protocol.slice(0,-1)),K=!fP.test(de?de.toLowerCase():"")}L=K}if(L)Ne(m,"complete"),Ne(m,"success");else{m.m=6;try{var ge=2<Ma(m)?m.g.statusText:""}catch{ge=""}m.l=ge+" ["+m.Z()+"]",Yy(m)}}finally{Td(m)}}}}function Td(m,P){if(m.g){Jy(m);const L=m.g,K=m.v[0]?()=>{}:null;m.g=null,m.v=null,P||Ne(m,"ready");try{L.onreadystatechange=K}catch{}}}function Jy(m){m.I&&(c.clearTimeout(m.I),m.I=null)}s.isActive=function(){return!!this.g};function Ma(m){return m.g?m.g.readyState:0}s.Z=function(){try{return 2<Ma(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(m){if(this.g){var P=this.g.responseText;return m&&P.indexOf(m)==0&&(P=P.substring(m.length)),_s(P)}};function Zy(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function yP(m){const P={};m=(m.g&&2<=Ma(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let K=0;K<m.length;K++){if(M(m[K]))continue;var L=Q(m[K]);const de=L[0];if(L=L[1],typeof L!="string")continue;L=L.trim();const ge=P[de]||[];P[de]=ge,ge.push(L)}O(P,function(K){return K.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function yl(m,P,L){return L&&L.internalChannelParams&&L.internalChannelParams[m]||P}function eb(m){this.Aa=0,this.i=[],this.j=new Ke,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=yl("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=yl("baseRetryDelayMs",5e3,m),this.cb=yl("retryDelaySeedMs",1e4,m),this.Wa=yl("forwardChannelMaxRetries",2,m),this.wa=yl("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new ul(m&&m.concurrentRequestLimit),this.Da=new hP,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=eb.prototype,s.la=8,s.G=1,s.connect=function(m,P,L,K){ee(0),this.W=m,this.H=P||{},L&&K!==void 0&&(this.H.OSID=L,this.H.OAID=K),this.F=this.X,this.I=cb(this,null,this.W),Dd(this)};function Ym(m){if(tb(m),m.G==3){var P=m.U++,L=Ra(m.I);if(Xt(L,"SID",m.K),Xt(L,"RID",P),Xt(L,"TYPE","terminate"),bl(m,L),P=new rr(m,m.j,P),P.L=2,P.v=Sd(Ra(L)),L=!1,c.navigator&&c.navigator.sendBeacon)try{L=c.navigator.sendBeacon(P.v.toString(),"")}catch{}!L&&c.Image&&(new Image().src=P.v,L=!0),L||(P.g=db(P.j,null),P.g.ea(P.v)),P.F=Date.now(),Wi(P)}lb(m)}function _d(m){m.g&&(Jm(m),m.g.cancel(),m.g=null)}function tb(m){_d(m),m.u&&(c.clearTimeout(m.u),m.u=null),Ad(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&c.clearTimeout(m.s),m.s=null)}function Dd(m){if(!xl(m.h)&&!m.s){m.s=!0;var P=m.Ga;be||pe(),ue||(be(),ue=!0),me.add(P,m),m.B=0}}function bP(m,P){return kd(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=P.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=Ve(w(m.Ga,m,P),ob(m,m.B)),m.B++,!0)}s.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const de=new rr(this,this.j,m);let ge=this.o;if(this.S&&(ge?(ge=u(ge),F(ge,this.S)):ge=this.S),this.m!==null||this.O||(de.H=ge,ge=null),this.P)e:{for(var P=0,L=0;L<this.i.length;L++){t:{var K=this.i[L];if("__data__"in K.map&&(K=K.map.__data__,typeof K=="string")){K=K.length;break t}K=void 0}if(K===void 0)break;if(P+=K,4096<P){P=L;break e}if(P===4096||L===this.i.length-1){P=L+1;break e}}P=1e3}else P=1e3;P=rb(this,de,P),L=Ra(this.I),Xt(L,"RID",m),Xt(L,"CVER",22),this.D&&Xt(L,"X-HTTP-Session-Id",this.D),bl(this,L),ge&&(this.O?P="headers="+encodeURIComponent(String(Ky(ge)))+"&"+P:this.m&&Qm(L,this.m,ge)),Km(this.h,de),this.Ua&&Xt(L,"TYPE","init"),this.P?(Xt(L,"$req",P),Xt(L,"SID","null"),de.T=!0,dl(de,L,null)):dl(de,L,P),this.G=2}}else this.G==3&&(m?sb(this,m):this.i.length==0||xl(this.h)||sb(this))};function sb(m,P){var L;P?L=P.l:L=m.U++;const K=Ra(m.I);Xt(K,"SID",m.K),Xt(K,"RID",L),Xt(K,"AID",m.T),bl(m,K),m.m&&m.o&&Qm(K,m.m,m.o),L=new rr(m,m.j,L,m.B+1),m.m===null&&(L.H=m.o),P&&(m.i=P.D.concat(m.i)),P=rb(m,L,1e3),L.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),Km(m.h,L),dl(L,K,P)}function bl(m,P){m.H&&Y(m.H,function(L,K){Xt(P,K,L)}),m.l&&zy({},function(L,K){Xt(P,K,L)})}function rb(m,P,L){L=Math.min(m.i.length,L);var K=m.l?w(m.l.Na,m.l,m):null;e:{var de=m.i;let ge=-1;for(;;){const $e=["count="+L];ge==-1?0<L?(ge=de[0].g,$e.push("ofs="+ge)):ge=0:$e.push("ofs="+ge);let Ht=!0;for(let As=0;As<L;As++){let Bt=de[As].g;const Ws=de[As].map;if(Bt-=ge,0>Bt)ge=Math.max(0,de[As].g-100),Ht=!1;else try{pP(Ws,$e,"req"+Bt+"_")}catch{K&&K(Ws)}}if(Ht){K=$e.join("&");break e}}}return m=m.i.splice(0,L),P.D=m,K}function ab(m){if(!m.g&&!m.u){m.Y=1;var P=m.Fa;be||pe(),ue||(be(),ue=!0),me.add(P,m),m.v=0}}function Xm(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=Ve(w(m.Fa,m),ob(m,m.v)),m.v++,!0)}s.Fa=function(){if(this.u=null,nb(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=Ve(w(this.ab,this),m)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ee(10),_d(this),nb(this))};function Jm(m){m.A!=null&&(c.clearTimeout(m.A),m.A=null)}function nb(m){m.g=new rr(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var P=Ra(m.qa);Xt(P,"RID","rpc"),Xt(P,"SID",m.K),Xt(P,"AID",m.T),Xt(P,"CI",m.F?"0":"1"),!m.F&&m.ja&&Xt(P,"TO",m.ja),Xt(P,"TYPE","xmlhttp"),bl(m,P),m.m&&m.o&&Qm(P,m.m,m.o),m.L&&(m.g.I=m.L);var L=m.g;m=m.ia,L.L=1,L.v=Sd(Ra(P)),L.m=null,L.P=!0,$i(L,m)}s.Za=function(){this.C!=null&&(this.C=null,_d(this),Xm(this),ee(19))};function Ad(m){m.C!=null&&(c.clearTimeout(m.C),m.C=null)}function ib(m,P){var L=null;if(m.g==P){Ad(m),Jm(m),m.g=null;var K=2}else if(Gm(m.h,P))L=P.D,Vy(m.h,P),K=1;else return;if(m.G!=0){if(P.o)if(K==1){L=P.m?P.m.length:0,P=Date.now()-P.F;var de=m.B;K=Ds(),Ne(K,new we(K,L)),Dd(m)}else ab(m);else if(de=P.s,de==3||de==0&&0<P.X||!(K==1&&bP(m,P)||K==2&&Xm(m)))switch(L&&0<L.length&&(P=m.h,P.i=P.i.concat(L)),de){case 1:ni(m,5);break;case 4:ni(m,10);break;case 3:ni(m,6);break;default:ni(m,2)}}}function ob(m,P){let L=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(L*=2),L*P}function ni(m,P){if(m.j.info("Error code "+P),P==2){var L=w(m.fb,m),K=m.Xa;const de=!K;K=new ai(K||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Id(K,"https"),Sd(K),de?xP(K.toString(),L):mP(K.toString(),L)}else ee(2);m.G=0,m.l&&m.l.sa(P),lb(m),tb(m)}s.fb=function(m){m?(this.j.info("Successfully pinged google.com"),ee(2)):(this.j.info("Failed to ping google.com"),ee(1))};function lb(m){if(m.G=0,m.ka=[],m.l){const P=By(m.h);(P.length!=0||m.i.length!=0)&&(E(m.ka,P),E(m.ka,m.i),m.h.i.length=0,V(m.i),m.i.length=0),m.l.ra()}}function cb(m,P,L){var K=L instanceof ai?Ra(L):new ai(L);if(K.g!="")P&&(K.g=P+"."+K.g),Pd(K,K.s);else{var de=c.location;K=de.protocol,P=P?P+"."+de.hostname:de.hostname,de=+de.port;var ge=new ai(null);K&&Id(ge,K),P&&(ge.g=P),de&&Pd(ge,de),L&&(ge.l=L),K=ge}return L=m.D,P=m.ya,L&&P&&Xt(K,L,P),Xt(K,"VER",m.la),bl(m,K),K}function db(m,P,L){if(P&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return P=m.Ca&&!m.pa?new xs(new Ed({eb:L})):new xs(m.pa),P.Ha(m.J),P}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function ub(){}s=ub.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function Rd(){}Rd.prototype.g=function(m,P){return new jr(m,P)};function jr(m,P){Me.call(this),this.g=new eb(P),this.l=m,this.h=P&&P.messageUrlParams||null,m=P&&P.messageHeaders||null,P&&P.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=P&&P.initMessageHeaders||null,P&&P.messageContentType&&(m?m["X-WebChannel-Content-Type"]=P.messageContentType:m={"X-WebChannel-Content-Type":P.messageContentType}),P&&P.va&&(m?m["X-WebChannel-Client-Profile"]=P.va:m={"X-WebChannel-Client-Profile":P.va}),this.g.S=m,(m=P&&P.Sb)&&!M(m)&&(this.g.m=m),this.v=P&&P.supportsCrossDomainXhr||!1,this.u=P&&P.sendRawJson||!1,(P=P&&P.httpSessionIdParam)&&!M(P)&&(this.g.D=P,m=this.h,m!==null&&P in m&&(m=this.h,P in m&&delete m[P])),this.j=new Gi(this)}g(jr,Me),jr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},jr.prototype.close=function(){Ym(this.g)},jr.prototype.o=function(m){var P=this.g;if(typeof m=="string"){var L={};L.__data__=m,m=L}else this.u&&(L={},L.__data__=ts(m),m=L);P.i.push(new wd(P.Ya++,m)),P.G==3&&Dd(P)},jr.prototype.N=function(){this.g.l=null,delete this.j,Ym(this.g),delete this.g,jr.aa.N.call(this)};function xb(m){tr.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var P=m.__sm__;if(P){e:{for(const L in P){m=L;break e}m=void 0}(this.i=m)&&(m=this.i,P=P!==null&&m in P?P[m]:void 0),this.data=P}else this.data=m}g(xb,tr);function mb(){sr.call(this),this.status=1}g(mb,sr);function Gi(m){this.g=m}g(Gi,ub),Gi.prototype.ua=function(){Ne(this.g,"a")},Gi.prototype.ta=function(m){Ne(this.g,new xb(m))},Gi.prototype.sa=function(m){Ne(this.g,new mb)},Gi.prototype.ra=function(){Ne(this.g,"b")},Rd.prototype.createWebChannel=Rd.prototype.g,jr.prototype.send=jr.prototype.o,jr.prototype.open=jr.prototype.m,jr.prototype.close=jr.prototype.close,L4=function(){return new Rd},M4=function(){return Ds()},R4=$s,i0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Is.NO_ERROR=0,Is.TIMEOUT=8,Is.HTTP_ERROR=6,Pu=Is,Aa.COMPLETE="complete",A4=Aa,us.EventType=js,js.OPEN="a",js.CLOSE="b",js.ERROR="c",js.MESSAGE="d",Me.prototype.listen=Me.prototype.K,Ol=us,xs.prototype.listenOnce=xs.prototype.L,xs.prototype.getLastError=xs.prototype.Ka,xs.prototype.getLastErrorCode=xs.prototype.Ba,xs.prototype.getStatus=xs.prototype.Z,xs.prototype.getResponseJson=xs.prototype.Oa,xs.prototype.getResponseText=xs.prototype.oa,xs.prototype.send=xs.prototype.ea,xs.prototype.setWithCredentials=xs.prototype.Ha,D4=xs}).apply(typeof eu<"u"?eu:typeof self<"u"?self:typeof window<"u"?window:{});const Kv="@firebase/firestore",Qv="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ys.UNAUTHENTICATED=new Ys(null),Ys.GOOGLE_CREDENTIALS=new Ys("google-credentials-uid"),Ys.FIRST_PARTY=new Ys("first-party-uid"),Ys.MOCK_USER=new Ys("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zo="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si=new mm("@firebase/firestore");function Yi(){return Si.logLevel}function Qe(s,...t){if(Si.logLevel<=Et.DEBUG){const r=t.map(Yf);Si.debug(`Firestore (${Zo}): ${s}`,...r)}}function Xa(s,...t){if(Si.logLevel<=Et.ERROR){const r=t.map(Yf);Si.error(`Firestore (${Zo}): ${s}`,...r)}}function Vo(s,...t){if(Si.logLevel<=Et.WARN){const r=t.map(Yf);Si.warn(`Firestore (${Zo}): ${s}`,...r)}}function Yf(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(s="Unexpected state"){const t=`FIRESTORE (${Zo}) INTERNAL ASSERTION FAILED: `+s;throw Xa(t),new Error(t)}function Rt(s,t){s||ut()}function ft(s,t){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class qe extends qr{constructor(t,r){super(t,r),this.code=t,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(){this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(t,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class yD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,r){t.enqueueRetryable(()=>r(Ys.UNAUTHENTICATED))}shutdown(){}}class bD{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,r){this.changeListener=r,t.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class vD{constructor(t){this.t=t,this.currentUser=Ys.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,r){Rt(this.o===void 0);let a=this.i;const i=d=>this.i!==a?(a=this.i,r(d)):Promise.resolve();let l=new ya;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ya,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const d=l;t.enqueueRetryable(async()=>{await d.promise,await i(this.currentUser)})},c=d=>{Qe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(d=>c(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(Qe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ya)}},0),o()}getToken(){const t=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(a=>this.i!==t?(Qe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(Rt(typeof a.accessToken=="string"),new O4(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Rt(t===null||typeof t=="string"),new Ys(t)}}class jD{constructor(t,r,a){this.l=t,this.h=r,this.P=a,this.type="FirstParty",this.user=Ys.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class ND{constructor(t,r,a){this.l=t,this.h=r,this.P=a}getToken(){return Promise.resolve(new jD(this.l,this.h,this.P))}start(t,r){t.enqueueRetryable(()=>r(Ys.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Yv{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wD{constructor(t,r){this.A=r,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,kr(t)&&t.settings.appCheckToken&&(this.V=t.settings.appCheckToken)}start(t,r){Rt(this.o===void 0);const a=l=>{l.error!=null&&Qe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const o=l.token!==this.R;return this.R=l.token,Qe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(l.token):Promise.resolve()};this.o=l=>{t.enqueueRetryable(()=>a(l))};const i=l=>{Qe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>i(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?i(l):Qe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new Yv(this.V));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(r=>r?(Rt(typeof r.token=="string"),this.R=r.token,new Yv(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kD(s){const t=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(s);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(r);else for(let a=0;a<s;a++)r[a]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V4(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const i=kD(40);for(let l=0;l<i.length;++l)a.length<20&&i[l]<r&&(a+=t.charAt(i[l]%62))}return a}}function vt(s,t){return s<t?-1:s>t?1:0}function o0(s,t){let r=0;for(;r<s.length&&r<t.length;){const a=s.codePointAt(r),i=t.codePointAt(r);if(a!==i){if(a<128&&i<128)return vt(a,i);{const l=V4(),o=ID(l.encode(Xv(s,r)),l.encode(Xv(t,r)));return o!==0?o:vt(a,i)}}r+=a>65535?2:1}return vt(s.length,t.length)}function Xv(s,t){return s.codePointAt(t)>65535?s.substring(t,t+2):s.substring(t,t+1)}function ID(s,t){for(let r=0;r<s.length&&r<t.length;++r)if(s[r]!==t[r])return vt(s[r],t[r]);return vt(s.length,t.length)}function Bo(s,t,r){return s.length===t.length&&s.every((a,i)=>r(a,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv=-62135596800,Zv=1e6;class Qt{static now(){return Qt.fromMillis(Date.now())}static fromDate(t){return Qt.fromMillis(t.getTime())}static fromMillis(t){const r=Math.floor(t/1e3),a=Math.floor((t-1e3*r)*Zv);return new Qt(r,a)}constructor(t,r){if(this.seconds=t,this.nanoseconds=r,r<0)throw new qe(Ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new qe(Ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(t<Jv)throw new qe(Ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new qe(Ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Zv}_compareTo(t){return this.seconds===t.seconds?vt(this.nanoseconds,t.nanoseconds):vt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-Jv;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{static fromTimestamp(t){return new xt(t)}static min(){return new xt(new Qt(0,0))}static max(){return new xt(new Qt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ej="__name__";class ha{constructor(t,r,a){r===void 0?r=0:r>t.length&&ut(),a===void 0?a=t.length-r:a>t.length-r&&ut(),this.segments=t,this.offset=r,this.len=a}get length(){return this.len}isEqual(t){return ha.comparator(this,t)===0}child(t){const r=this.segments.slice(this.offset,this.limit());return t instanceof ha?t.forEach(a=>{r.push(a)}):r.push(t),this.construct(r)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}forEach(t){for(let r=this.offset,a=this.limit();r<a;r++)t(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,r){const a=Math.min(t.length,r.length);for(let i=0;i<a;i++){const l=ha.compareSegments(t.get(i),r.get(i));if(l!==0)return l}return vt(t.length,r.length)}static compareSegments(t,r){const a=ha.isNumericId(t),i=ha.isNumericId(r);return a&&!i?-1:!a&&i?1:a&&i?ha.extractNumericId(t).compare(ha.extractNumericId(r)):o0(t,r)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return On.fromString(t.substring(4,t.length-2))}}class Gt extends ha{construct(t,r,a){return new Gt(t,r,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const r=[];for(const a of t){if(a.indexOf("//")>=0)throw new qe(Ie.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);r.push(...a.split("/").filter(i=>i.length>0))}return new Gt(r)}static emptyPath(){return new Gt([])}}const PD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Os extends ha{construct(t,r,a){return new Os(t,r,a)}static isValidIdentifier(t){return PD.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Os.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ej}static keyField(){return new Os([ej])}static fromServerFormat(t){const r=[];let a="",i=0;const l=()=>{if(a.length===0)throw new qe(Ie.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(a),a=""};let o=!1;for(;i<t.length;){const c=t[i];if(c==="\\"){if(i+1===t.length)throw new qe(Ie.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const d=t[i+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new qe(Ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);a+=d,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(a+=c,i++):(l(),i++)}if(l(),o)throw new qe(Ie.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Os(r)}static emptyPath(){return new Os([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(t){this.path=t}static fromPath(t){return new dt(Gt.fromString(t))}static fromName(t){return new dt(Gt.fromString(t).popFirst(5))}static empty(){return new dt(Gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Gt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,r){return Gt.comparator(t.path,r.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new dt(new Gt(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cc=-1;function SD(s,t){const r=s.toTimestamp().seconds,a=s.toTimestamp().nanoseconds+1,i=xt.fromTimestamp(a===1e9?new Qt(r+1,0):new Qt(r,a));return new Un(i,dt.empty(),t)}function ED(s){return new Un(s.readTime,s.key,Cc)}class Un{constructor(t,r,a){this.readTime=t,this.documentKey=r,this.largestBatchId=a}static min(){return new Un(xt.min(),dt.empty(),Cc)}static max(){return new Un(xt.max(),dt.empty(),Cc)}}function CD(s,t){let r=s.readTime.compareTo(t.readTime);return r!==0?r:(r=dt.comparator(s.documentKey,t.documentKey),r!==0?r:vt(s.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _D{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function el(s){if(s.code!==Ie.FAILED_PRECONDITION||s.message!==TD)throw s;Qe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(t){return this.next(void 0,t)}next(t,r){return this.callbackAttached&&ut(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(t,this.result):new Ee((a,i)=>{this.nextCallback=l=>{this.wrapSuccess(t,l).next(a,i)},this.catchCallback=l=>{this.wrapFailure(r,l).next(a,i)}})}toPromise(){return new Promise((t,r)=>{this.next(t,r)})}wrapUserFunction(t){try{const r=t();return r instanceof Ee?r:Ee.resolve(r)}catch(r){return Ee.reject(r)}}wrapSuccess(t,r){return t?this.wrapUserFunction(()=>t(r)):Ee.resolve(r)}wrapFailure(t,r){return t?this.wrapUserFunction(()=>t(r)):Ee.reject(r)}static resolve(t){return new Ee((r,a)=>{r(t)})}static reject(t){return new Ee((r,a)=>{a(t)})}static waitFor(t){return new Ee((r,a)=>{let i=0,l=0,o=!1;t.forEach(c=>{++i,c.next(()=>{++l,o&&l===i&&r()},d=>a(d))}),o=!0,l===i&&r()})}static or(t){let r=Ee.resolve(!1);for(const a of t)r=r.next(i=>i?Ee.resolve(i):a());return r}static forEach(t,r){const a=[];return t.forEach((i,l)=>{a.push(r.call(this,i,l))}),this.waitFor(a)}static mapArray(t,r){return new Ee((a,i)=>{const l=t.length,o=new Array(l);let c=0;for(let d=0;d<l;d++){const x=d;r(t[x]).next(f=>{o[x]=f,++c,c===l&&a(o)},f=>i(f))}})}static doWhile(t,r){return new Ee((a,i)=>{const l=()=>{t()===!0?r().next(()=>{l()},i):a()};l()})}}function DD(s){const t=s.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function tl(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=a=>this.oe(a),this._e=a=>r.writeSequenceNumber(a))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}pm.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xf=-1;function sd(s){return s==null}function bx(s){return s===0&&1/s==-1/0}function AD(s){return typeof s=="number"&&Number.isInteger(s)&&!bx(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z4="";function RD(s){let t="";for(let r=0;r<s.length;r++)t.length>0&&(t=tj(t)),t=MD(s.get(r),t);return tj(t)}function MD(s,t){let r=t;const a=s.length;for(let i=0;i<a;i++){const l=s.charAt(i);switch(l){case"\0":r+="";break;case z4:r+="";break;default:r+=l}}return r}function tj(s){return s+z4+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sj(s){let t=0;for(const r in s)Object.prototype.hasOwnProperty.call(s,r)&&t++;return t}function ei(s,t){for(const r in s)Object.prototype.hasOwnProperty.call(s,r)&&t(r,s[r])}function F4(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(t,r){this.comparator=t,this.root=r||Ls.EMPTY}insert(t,r){return new ds(this.comparator,this.root.insert(t,r,this.comparator).copy(null,null,Ls.BLACK,null,null))}remove(t){return new ds(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ls.BLACK,null,null))}get(t){let r=this.root;for(;!r.isEmpty();){const a=this.comparator(t,r.key);if(a===0)return r.value;a<0?r=r.left:a>0&&(r=r.right)}return null}indexOf(t){let r=0,a=this.root;for(;!a.isEmpty();){const i=this.comparator(t,a.key);if(i===0)return r+a.left.size;i<0?a=a.left:(r+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((r,a)=>(t(r,a),!1))}toString(){const t=[];return this.inorderTraversal((r,a)=>(t.push(`${r}:${a}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new tu(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new tu(this.root,t,this.comparator,!1)}getReverseIterator(){return new tu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new tu(this.root,t,this.comparator,!0)}}class tu{constructor(t,r,a,i){this.isReverse=i,this.nodeStack=[];let l=1;for(;!t.isEmpty();)if(l=r?a(t.key,r):1,r&&i&&(l*=-1),l<0)t=this.isReverse?t.left:t.right;else{if(l===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const r={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ls{constructor(t,r,a,i,l){this.key=t,this.value=r,this.color=a??Ls.RED,this.left=i??Ls.EMPTY,this.right=l??Ls.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,r,a,i,l){return new Ls(t??this.key,r??this.value,a??this.color,i??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,a){let i=this;const l=a(t,i.key);return i=l<0?i.copy(null,null,null,i.left.insert(t,r,a),null):l===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(t,r,a)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ls.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,r){let a,i=this;if(r(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(t,i.key)===0){if(i.right.isEmpty())return Ls.EMPTY;a=i.right.min(),i=i.copy(a.key,a.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ls.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ls.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ut();const t=this.left.check();if(t!==this.right.check())throw ut();return t+(this.isRed()?0:1)}}Ls.EMPTY=null,Ls.RED=!0,Ls.BLACK=!1;Ls.EMPTY=new class{constructor(){this.size=0}get key(){throw ut()}get value(){throw ut()}get color(){throw ut()}get left(){throw ut()}get right(){throw ut()}copy(t,r,a,i,l){return this}insert(t,r,a){return new Ls(t,r)}remove(t,r){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(t){this.comparator=t,this.data=new ds(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((r,a)=>(t(r),!1))}forEachInRange(t,r){const a=this.data.getIteratorFrom(t[0]);for(;a.hasNext();){const i=a.getNext();if(this.comparator(i.key,t[1])>=0)return;r(i.key)}}forEachWhile(t,r){let a;for(a=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();a.hasNext();)if(!t(a.getNext().key))return}firstAfterOrEqual(t){const r=this.data.getIteratorFrom(t);return r.hasNext()?r.getNext().key:null}getIterator(){return new rj(this.data.getIterator())}getIteratorFrom(t){return new rj(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let r=this;return r.size<t.size&&(r=t,t=this),t.forEach(a=>{r=r.add(a)}),r}isEqual(t){if(!(t instanceof ks)||this.size!==t.size)return!1;const r=this.data.getIterator(),a=t.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,l=a.getNext().key;if(this.comparator(i,l)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(r=>{t.push(r)}),t}toString(){const t=[];return this.forEach(r=>t.push(r)),"SortedSet("+t.toString()+")"}copy(t){const r=new ks(this.comparator);return r.data=t,r}}class rj{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(t){this.fields=t,t.sort(Os.comparator)}static empty(){return new Pr([])}unionWith(t){let r=new ks(Os.comparator);for(const a of this.fields)r=r.add(a);for(const a of t)r=r.add(a);return new Pr(r.toArray())}covers(t){for(const r of this.fields)if(r.isPrefixOf(t))return!0;return!1}isEqual(t){return Bo(this.fields,t.fields,(r,a)=>r.isEqual(a))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(t){this.binaryString=t}static fromBase64String(t){const r=function(i){try{return atob(i)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new U4("Invalid base64 string: "+l):l}}(t);return new Us(r)}static fromUint8Array(t){const r=function(i){let l="";for(let o=0;o<i.length;++o)l+=String.fromCharCode(i[o]);return l}(t);return new Us(r)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const a=new Uint8Array(r.length);for(let i=0;i<r.length;i++)a[i]=r.charCodeAt(i);return a}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return vt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Us.EMPTY_BYTE_STRING=new Us("");const LD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $n(s){if(Rt(!!s),typeof s=="string"){let t=0;const r=LD.exec(s);if(Rt(!!r),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),t=Number(i)}const a=new Date(s);return{seconds:Math.floor(a.getTime()/1e3),nanos:t}}return{seconds:fs(s.seconds),nanos:fs(s.nanos)}}function fs(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Wn(s){return typeof s=="string"?Us.fromBase64String(s):Us.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $4="server_timestamp",W4="__type__",q4="__previous_value__",H4="__local_write_time__";function Jf(s){var t,r;return((r=(((t=s==null?void 0:s.mapValue)===null||t===void 0?void 0:t.fields)||{})[W4])===null||r===void 0?void 0:r.stringValue)===$4}function fm(s){const t=s.mapValue.fields[q4];return Jf(t)?fm(t):t}function Tc(s){const t=$n(s.mapValue.fields[H4].timestampValue);return new Qt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(t,r,a,i,l,o,c,d,x){this.databaseId=t,this.appId=r,this.persistenceKey=a,this.host=i,this.ssl=l,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=x}}const vx="(default)";class _c{constructor(t,r){this.projectId=t,this.database=r||vx}static empty(){return new _c("","")}get isDefaultDatabase(){return this.database===vx}isEqual(t){return t instanceof _c&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G4="__type__",K4="__max__",su={mapValue:{fields:{__type__:{stringValue:K4}}}},Q4="__vector__",jx="value";function qn(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Jf(s)?4:BD(s)?9007199254740991:VD(s)?10:11:ut()}function Pa(s,t){if(s===t)return!0;const r=qn(s);if(r!==qn(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===t.booleanValue;case 4:return Tc(s).isEqual(Tc(t));case 3:return function(i,l){if(typeof i.timestampValue=="string"&&typeof l.timestampValue=="string"&&i.timestampValue.length===l.timestampValue.length)return i.timestampValue===l.timestampValue;const o=$n(i.timestampValue),c=$n(l.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(s,t);case 5:return s.stringValue===t.stringValue;case 6:return function(i,l){return Wn(i.bytesValue).isEqual(Wn(l.bytesValue))}(s,t);case 7:return s.referenceValue===t.referenceValue;case 8:return function(i,l){return fs(i.geoPointValue.latitude)===fs(l.geoPointValue.latitude)&&fs(i.geoPointValue.longitude)===fs(l.geoPointValue.longitude)}(s,t);case 2:return function(i,l){if("integerValue"in i&&"integerValue"in l)return fs(i.integerValue)===fs(l.integerValue);if("doubleValue"in i&&"doubleValue"in l){const o=fs(i.doubleValue),c=fs(l.doubleValue);return o===c?bx(o)===bx(c):isNaN(o)&&isNaN(c)}return!1}(s,t);case 9:return Bo(s.arrayValue.values||[],t.arrayValue.values||[],Pa);case 10:case 11:return function(i,l){const o=i.mapValue.fields||{},c=l.mapValue.fields||{};if(sj(o)!==sj(c))return!1;for(const d in o)if(o.hasOwnProperty(d)&&(c[d]===void 0||!Pa(o[d],c[d])))return!1;return!0}(s,t);default:return ut()}}function Dc(s,t){return(s.values||[]).find(r=>Pa(r,t))!==void 0}function zo(s,t){if(s===t)return 0;const r=qn(s),a=qn(t);if(r!==a)return vt(r,a);switch(r){case 0:case 9007199254740991:return 0;case 1:return vt(s.booleanValue,t.booleanValue);case 2:return function(l,o){const c=fs(l.integerValue||l.doubleValue),d=fs(o.integerValue||o.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1}(s,t);case 3:return aj(s.timestampValue,t.timestampValue);case 4:return aj(Tc(s),Tc(t));case 5:return o0(s.stringValue,t.stringValue);case 6:return function(l,o){const c=Wn(l),d=Wn(o);return c.compareTo(d)}(s.bytesValue,t.bytesValue);case 7:return function(l,o){const c=l.split("/"),d=o.split("/");for(let x=0;x<c.length&&x<d.length;x++){const f=vt(c[x],d[x]);if(f!==0)return f}return vt(c.length,d.length)}(s.referenceValue,t.referenceValue);case 8:return function(l,o){const c=vt(fs(l.latitude),fs(o.latitude));return c!==0?c:vt(fs(l.longitude),fs(o.longitude))}(s.geoPointValue,t.geoPointValue);case 9:return nj(s.arrayValue,t.arrayValue);case 10:return function(l,o){var c,d,x,f;const j=l.fields||{},w=o.fields||{},S=(c=j[jx])===null||c===void 0?void 0:c.arrayValue,g=(d=w[jx])===null||d===void 0?void 0:d.arrayValue,V=vt(((x=S==null?void 0:S.values)===null||x===void 0?void 0:x.length)||0,((f=g==null?void 0:g.values)===null||f===void 0?void 0:f.length)||0);return V!==0?V:nj(S,g)}(s.mapValue,t.mapValue);case 11:return function(l,o){if(l===su.mapValue&&o===su.mapValue)return 0;if(l===su.mapValue)return 1;if(o===su.mapValue)return-1;const c=l.fields||{},d=Object.keys(c),x=o.fields||{},f=Object.keys(x);d.sort(),f.sort();for(let j=0;j<d.length&&j<f.length;++j){const w=o0(d[j],f[j]);if(w!==0)return w;const S=zo(c[d[j]],x[f[j]]);if(S!==0)return S}return vt(d.length,f.length)}(s.mapValue,t.mapValue);default:throw ut()}}function aj(s,t){if(typeof s=="string"&&typeof t=="string"&&s.length===t.length)return vt(s,t);const r=$n(s),a=$n(t),i=vt(r.seconds,a.seconds);return i!==0?i:vt(r.nanos,a.nanos)}function nj(s,t){const r=s.values||[],a=t.values||[];for(let i=0;i<r.length&&i<a.length;++i){const l=zo(r[i],a[i]);if(l)return l}return vt(r.length,a.length)}function Fo(s){return l0(s)}function l0(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(r){const a=$n(r);return`time(${a.seconds},${a.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(r){return Wn(r).toBase64()}(s.bytesValue):"referenceValue"in s?function(r){return dt.fromName(r).toString()}(s.referenceValue):"geoPointValue"in s?function(r){return`geo(${r.latitude},${r.longitude})`}(s.geoPointValue):"arrayValue"in s?function(r){let a="[",i=!0;for(const l of r.values||[])i?i=!1:a+=",",a+=l0(l);return a+"]"}(s.arrayValue):"mapValue"in s?function(r){const a=Object.keys(r.fields||{}).sort();let i="{",l=!0;for(const o of a)l?l=!1:i+=",",i+=`${o}:${l0(r.fields[o])}`;return i+"}"}(s.mapValue):ut()}function Su(s){switch(qn(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=fm(s);return t?16+Su(t):16;case 5:return 2*s.stringValue.length;case 6:return Wn(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return function(a){return(a.values||[]).reduce((i,l)=>i+Su(l),0)}(s.arrayValue);case 10:case 11:return function(a){let i=0;return ei(a.fields,(l,o)=>{i+=l.length+Su(o)}),i}(s.mapValue);default:throw ut()}}function ij(s,t){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${t.path.canonicalString()}`}}function c0(s){return!!s&&"integerValue"in s}function Zf(s){return!!s&&"arrayValue"in s}function oj(s){return!!s&&"nullValue"in s}function lj(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Eu(s){return!!s&&"mapValue"in s}function VD(s){var t,r;return((r=(((t=s==null?void 0:s.mapValue)===null||t===void 0?void 0:t.fields)||{})[G4])===null||r===void 0?void 0:r.stringValue)===Q4}function Xl(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const t={mapValue:{fields:{}}};return ei(s.mapValue.fields,(r,a)=>t.mapValue.fields[r]=Xl(a)),t}if(s.arrayValue){const t={arrayValue:{values:[]}};for(let r=0;r<(s.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=Xl(s.arrayValue.values[r]);return t}return Object.assign({},s)}function BD(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===K4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(t){this.value=t}static empty(){return new nr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let r=this.value;for(let a=0;a<t.length-1;++a)if(r=(r.mapValue.fields||{})[t.get(a)],!Eu(r))return null;return r=(r.mapValue.fields||{})[t.lastSegment()],r||null}}set(t,r){this.getFieldsMap(t.popLast())[t.lastSegment()]=Xl(r)}setAll(t){let r=Os.emptyPath(),a={},i=[];t.forEach((o,c)=>{if(!r.isImmediateParentOf(c)){const d=this.getFieldsMap(r);this.applyChanges(d,a,i),a={},i=[],r=c.popLast()}o?a[c.lastSegment()]=Xl(o):i.push(c.lastSegment())});const l=this.getFieldsMap(r);this.applyChanges(l,a,i)}delete(t){const r=this.field(t.popLast());Eu(r)&&r.mapValue.fields&&delete r.mapValue.fields[t.lastSegment()]}isEqual(t){return Pa(this.value,t.value)}getFieldsMap(t){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let a=0;a<t.length;++a){let i=r.mapValue.fields[t.get(a)];Eu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[t.get(a)]=i),r=i}return r.mapValue.fields}applyChanges(t,r,a){ei(r,(i,l)=>t[i]=l);for(const i of a)delete t[i]}clone(){return new nr(Xl(this.value))}}function Y4(s){const t=[];return ei(s.fields,(r,a)=>{const i=new Os([r]);if(Eu(a)){const l=Y4(a.mapValue).fields;if(l.length===0)t.push(i);else for(const o of l)t.push(i.child(o))}else t.push(i)}),new Pr(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(t,r,a,i,l,o,c){this.key=t,this.documentType=r,this.version=a,this.readTime=i,this.createTime=l,this.data=o,this.documentState=c}static newInvalidDocument(t){return new Cs(t,0,xt.min(),xt.min(),xt.min(),nr.empty(),0)}static newFoundDocument(t,r,a,i){return new Cs(t,1,r,xt.min(),a,i,0)}static newNoDocument(t,r){return new Cs(t,2,r,xt.min(),xt.min(),nr.empty(),0)}static newUnknownDocument(t,r){return new Cs(t,3,r,xt.min(),xt.min(),nr.empty(),2)}convertToFoundDocument(t,r){return!this.createTime.isEqual(xt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=nr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=nr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Cs&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Cs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(t,r){this.position=t,this.inclusive=r}}function cj(s,t,r){let a=0;for(let i=0;i<s.position.length;i++){const l=t[i],o=s.position[i];if(l.field.isKeyField()?a=dt.comparator(dt.fromName(o.referenceValue),r.key):a=zo(o,r.data.field(l.field)),l.dir==="desc"&&(a*=-1),a!==0)break}return a}function dj(s,t){if(s===null)return t===null;if(t===null||s.inclusive!==t.inclusive||s.position.length!==t.position.length)return!1;for(let r=0;r<s.position.length;r++)if(!Pa(s.position[r],t.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(t,r="asc"){this.field=t,this.dir=r}}function zD(s,t){return s.dir===t.dir&&s.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{}class vs extends X4{constructor(t,r,a){super(),this.field=t,this.op=r,this.value=a}static create(t,r,a){return t.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(t,r,a):new UD(t,r,a):r==="array-contains"?new qD(t,a):r==="in"?new HD(t,a):r==="not-in"?new GD(t,a):r==="array-contains-any"?new KD(t,a):new vs(t,r,a)}static createKeyFieldInFilter(t,r,a){return r==="in"?new $D(t,a):new WD(t,a)}matches(t){const r=t.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(zo(r,this.value)):r!==null&&qn(this.value)===qn(r)&&this.matchesComparison(zo(r,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return ut()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ia extends X4{constructor(t,r){super(),this.filters=t,this.op=r,this.ce=null}static create(t,r){return new ia(t,r)}matches(t){return J4(this)?this.filters.find(r=>!r.matches(t))===void 0:this.filters.find(r=>r.matches(t))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((t,r)=>t.concat(r.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function J4(s){return s.op==="and"}function Z4(s){return FD(s)&&J4(s)}function FD(s){for(const t of s.filters)if(t instanceof ia)return!1;return!0}function d0(s){if(s instanceof vs)return s.field.canonicalString()+s.op.toString()+Fo(s.value);if(Z4(s))return s.filters.map(t=>d0(t)).join(",");{const t=s.filters.map(r=>d0(r)).join(",");return`${s.op}(${t})`}}function e3(s,t){return s instanceof vs?function(a,i){return i instanceof vs&&a.op===i.op&&a.field.isEqual(i.field)&&Pa(a.value,i.value)}(s,t):s instanceof ia?function(a,i){return i instanceof ia&&a.op===i.op&&a.filters.length===i.filters.length?a.filters.reduce((l,o,c)=>l&&e3(o,i.filters[c]),!0):!1}(s,t):void ut()}function t3(s){return s instanceof vs?function(r){return`${r.field.canonicalString()} ${r.op} ${Fo(r.value)}`}(s):s instanceof ia?function(r){return r.op.toString()+" {"+r.getFilters().map(t3).join(" ,")+"}"}(s):"Filter"}class UD extends vs{constructor(t,r,a){super(t,r,a),this.key=dt.fromName(a.referenceValue)}matches(t){const r=dt.comparator(t.key,this.key);return this.matchesComparison(r)}}class $D extends vs{constructor(t,r){super(t,"in",r),this.keys=s3("in",r)}matches(t){return this.keys.some(r=>r.isEqual(t.key))}}class WD extends vs{constructor(t,r){super(t,"not-in",r),this.keys=s3("not-in",r)}matches(t){return!this.keys.some(r=>r.isEqual(t.key))}}function s3(s,t){var r;return(((r=t.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(a=>dt.fromName(a.referenceValue))}class qD extends vs{constructor(t,r){super(t,"array-contains",r)}matches(t){const r=t.data.field(this.field);return Zf(r)&&Dc(r.arrayValue,this.value)}}class HD extends vs{constructor(t,r){super(t,"in",r)}matches(t){const r=t.data.field(this.field);return r!==null&&Dc(this.value.arrayValue,r)}}class GD extends vs{constructor(t,r){super(t,"not-in",r)}matches(t){if(Dc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=t.data.field(this.field);return r!==null&&!Dc(this.value.arrayValue,r)}}class KD extends vs{constructor(t,r){super(t,"array-contains-any",r)}matches(t){const r=t.data.field(this.field);return!(!Zf(r)||!r.arrayValue.values)&&r.arrayValue.values.some(a=>Dc(this.value.arrayValue,a))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(t,r=null,a=[],i=[],l=null,o=null,c=null){this.path=t,this.collectionGroup=r,this.orderBy=a,this.filters=i,this.limit=l,this.startAt=o,this.endAt=c,this.le=null}}function uj(s,t=null,r=[],a=[],i=null,l=null,o=null){return new QD(s,t,r,a,i,l,o)}function eg(s){const t=ft(s);if(t.le===null){let r=t.path.canonicalString();t.collectionGroup!==null&&(r+="|cg:"+t.collectionGroup),r+="|f:",r+=t.filters.map(a=>d0(a)).join(","),r+="|ob:",r+=t.orderBy.map(a=>function(l){return l.field.canonicalString()+l.dir}(a)).join(","),sd(t.limit)||(r+="|l:",r+=t.limit),t.startAt&&(r+="|lb:",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(a=>Fo(a)).join(",")),t.endAt&&(r+="|ub:",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(a=>Fo(a)).join(",")),t.le=r}return t.le}function tg(s,t){if(s.limit!==t.limit||s.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<s.orderBy.length;r++)if(!zD(s.orderBy[r],t.orderBy[r]))return!1;if(s.filters.length!==t.filters.length)return!1;for(let r=0;r<s.filters.length;r++)if(!e3(s.filters[r],t.filters[r]))return!1;return s.collectionGroup===t.collectionGroup&&!!s.path.isEqual(t.path)&&!!dj(s.startAt,t.startAt)&&dj(s.endAt,t.endAt)}function u0(s){return dt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(t,r=null,a=[],i=[],l=null,o="F",c=null,d=null){this.path=t,this.collectionGroup=r,this.explicitOrderBy=a,this.filters=i,this.limit=l,this.limitType=o,this.startAt=c,this.endAt=d,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function YD(s,t,r,a,i,l,o,c){return new sl(s,t,r,a,i,l,o,c)}function gm(s){return new sl(s)}function xj(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function r3(s){return s.collectionGroup!==null}function Jl(s){const t=ft(s);if(t.he===null){t.he=[];const r=new Set;for(const l of t.explicitOrderBy)t.he.push(l),r.add(l.field.canonicalString());const a=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new ks(Os.comparator);return o.filters.forEach(d=>{d.getFlattenedFilters().forEach(x=>{x.isInequality()&&(c=c.add(x.field))})}),c})(t).forEach(l=>{r.has(l.canonicalString())||l.isKeyField()||t.he.push(new Ac(l,a))}),r.has(Os.keyField().canonicalString())||t.he.push(new Ac(Os.keyField(),a))}return t.he}function ba(s){const t=ft(s);return t.Pe||(t.Pe=XD(t,Jl(s))),t.Pe}function XD(s,t){if(s.limitType==="F")return uj(s.path,s.collectionGroup,t,s.filters,s.limit,s.startAt,s.endAt);{t=t.map(i=>{const l=i.dir==="desc"?"asc":"desc";return new Ac(i.field,l)});const r=s.endAt?new Nx(s.endAt.position,s.endAt.inclusive):null,a=s.startAt?new Nx(s.startAt.position,s.startAt.inclusive):null;return uj(s.path,s.collectionGroup,t,s.filters,s.limit,r,a)}}function x0(s,t){const r=s.filters.concat([t]);return new sl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),r,s.limit,s.limitType,s.startAt,s.endAt)}function wx(s,t,r){return new sl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),t,r,s.startAt,s.endAt)}function ym(s,t){return tg(ba(s),ba(t))&&s.limitType===t.limitType}function a3(s){return`${eg(ba(s))}|lt:${s.limitType}`}function Xi(s){return`Query(target=${function(r){let a=r.path.canonicalString();return r.collectionGroup!==null&&(a+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(a+=`, filters: [${r.filters.map(i=>t3(i)).join(", ")}]`),sd(r.limit)||(a+=", limit: "+r.limit),r.orderBy.length>0&&(a+=`, orderBy: [${r.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),r.startAt&&(a+=", startAt: ",a+=r.startAt.inclusive?"b:":"a:",a+=r.startAt.position.map(i=>Fo(i)).join(",")),r.endAt&&(a+=", endAt: ",a+=r.endAt.inclusive?"a:":"b:",a+=r.endAt.position.map(i=>Fo(i)).join(",")),`Target(${a})`}(ba(s))}; limitType=${s.limitType})`}function bm(s,t){return t.isFoundDocument()&&function(a,i){const l=i.key.path;return a.collectionGroup!==null?i.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(l):dt.isDocumentKey(a.path)?a.path.isEqual(l):a.path.isImmediateParentOf(l)}(s,t)&&function(a,i){for(const l of Jl(a))if(!l.field.isKeyField()&&i.data.field(l.field)===null)return!1;return!0}(s,t)&&function(a,i){for(const l of a.filters)if(!l.matches(i))return!1;return!0}(s,t)&&function(a,i){return!(a.startAt&&!function(o,c,d){const x=cj(o,c,d);return o.inclusive?x<=0:x<0}(a.startAt,Jl(a),i)||a.endAt&&!function(o,c,d){const x=cj(o,c,d);return o.inclusive?x>=0:x>0}(a.endAt,Jl(a),i))}(s,t)}function JD(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function n3(s){return(t,r)=>{let a=!1;for(const i of Jl(s)){const l=ZD(i,t,r);if(l!==0)return l;a=a||i.field.isKeyField()}return 0}}function ZD(s,t,r){const a=s.field.isKeyField()?dt.comparator(t.key,r.key):function(l,o,c){const d=o.data.field(l),x=c.data.field(l);return d!==null&&x!==null?zo(d,x):ut()}(s.field,t,r);switch(s.dir){case"asc":return a;case"desc":return-1*a;default:return ut()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(t,r){this.mapKeyFn=t,this.equalsFn=r,this.inner={},this.innerSize=0}get(t){const r=this.mapKeyFn(t),a=this.inner[r];if(a!==void 0){for(const[i,l]of a)if(this.equalsFn(i,t))return l}}has(t){return this.get(t)!==void 0}set(t,r){const a=this.mapKeyFn(t),i=this.inner[a];if(i===void 0)return this.inner[a]=[[t,r]],void this.innerSize++;for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],t))return void(i[l]=[t,r]);i.push([t,r]),this.innerSize++}delete(t){const r=this.mapKeyFn(t),a=this.inner[r];if(a===void 0)return!1;for(let i=0;i<a.length;i++)if(this.equalsFn(a[i][0],t))return a.length===1?delete this.inner[r]:a.splice(i,1),this.innerSize--,!0;return!1}forEach(t){ei(this.inner,(r,a)=>{for(const[i,l]of a)t(i,l)})}isEmpty(){return F4(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA=new ds(dt.comparator);function Ja(){return eA}const i3=new ds(dt.comparator);function Vl(...s){let t=i3;for(const r of s)t=t.insert(r.key,r);return t}function o3(s){let t=i3;return s.forEach((r,a)=>t=t.insert(r,a.overlayedDocument)),t}function hi(){return Zl()}function l3(){return Zl()}function Zl(){return new Bi(s=>s.toString(),(s,t)=>s.isEqual(t))}const tA=new ds(dt.comparator),sA=new ks(dt.comparator);function Ct(...s){let t=sA;for(const r of s)t=t.add(r);return t}const rA=new ks(vt);function aA(){return rA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sg(s,t){if(s.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bx(t)?"-0":t}}function c3(s){return{integerValue:""+s}}function d3(s,t){return AD(t)?c3(t):sg(s,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(){this._=void 0}}function nA(s,t,r){return s instanceof Rc?function(i,l){const o={fields:{[W4]:{stringValue:$4},[H4]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return l&&Jf(l)&&(l=fm(l)),l&&(o.fields[q4]=l),{mapValue:o}}(r,t):s instanceof Mc?x3(s,t):s instanceof Lc?m3(s,t):function(i,l){const o=u3(i,l),c=mj(o)+mj(i.Ie);return c0(o)&&c0(i.Ie)?c3(c):sg(i.serializer,c)}(s,t)}function iA(s,t,r){return s instanceof Mc?x3(s,t):s instanceof Lc?m3(s,t):r}function u3(s,t){return s instanceof Oc?function(a){return c0(a)||function(l){return!!l&&"doubleValue"in l}(a)}(t)?t:{integerValue:0}:null}class Rc extends vm{}class Mc extends vm{constructor(t){super(),this.elements=t}}function x3(s,t){const r=h3(t);for(const a of s.elements)r.some(i=>Pa(i,a))||r.push(a);return{arrayValue:{values:r}}}class Lc extends vm{constructor(t){super(),this.elements=t}}function m3(s,t){let r=h3(t);for(const a of s.elements)r=r.filter(i=>!Pa(i,a));return{arrayValue:{values:r}}}class Oc extends vm{constructor(t,r){super(),this.serializer=t,this.Ie=r}}function mj(s){return fs(s.integerValue||s.doubleValue)}function h3(s){return Zf(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{constructor(t,r){this.field=t,this.transform=r}}function oA(s,t){return s.field.isEqual(t.field)&&function(a,i){return a instanceof Mc&&i instanceof Mc||a instanceof Lc&&i instanceof Lc?Bo(a.elements,i.elements,Pa):a instanceof Oc&&i instanceof Oc?Pa(a.Ie,i.Ie):a instanceof Rc&&i instanceof Rc}(s.transform,t.transform)}class lA{constructor(t,r){this.version=t,this.transformResults=r}}class Vs{constructor(t,r){this.updateTime=t,this.exists=r}static none(){return new Vs}static exists(t){return new Vs(void 0,t)}static updateTime(t){return new Vs(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Cu(s,t){return s.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(s.updateTime):s.exists===void 0||s.exists===t.isFoundDocument()}class jm{}function f3(s,t){if(!s.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return s.isNoDocument()?new Nm(s.key,Vs.none()):new rd(s.key,s.data,Vs.none());{const r=s.data,a=nr.empty();let i=new ks(Os.comparator);for(let l of t.fields)if(!i.has(l)){let o=r.field(l);o===null&&l.length>1&&(l=l.popLast(),o=r.field(l)),o===null?a.delete(l):a.set(l,o),i=i.add(l)}return new ti(s.key,a,new Pr(i.toArray()),Vs.none())}}function cA(s,t,r){s instanceof rd?function(i,l,o){const c=i.value.clone(),d=pj(i.fieldTransforms,l,o.transformResults);c.setAll(d),l.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(s,t,r):s instanceof ti?function(i,l,o){if(!Cu(i.precondition,l))return void l.convertToUnknownDocument(o.version);const c=pj(i.fieldTransforms,l,o.transformResults),d=l.data;d.setAll(g3(i)),d.setAll(c),l.convertToFoundDocument(o.version,d).setHasCommittedMutations()}(s,t,r):function(i,l,o){l.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,r)}function ec(s,t,r,a){return s instanceof rd?function(l,o,c,d){if(!Cu(l.precondition,o))return c;const x=l.value.clone(),f=fj(l.fieldTransforms,d,o);return x.setAll(f),o.convertToFoundDocument(o.version,x).setHasLocalMutations(),null}(s,t,r,a):s instanceof ti?function(l,o,c,d){if(!Cu(l.precondition,o))return c;const x=fj(l.fieldTransforms,d,o),f=o.data;return f.setAll(g3(l)),f.setAll(x),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(j=>j.field))}(s,t,r,a):function(l,o,c){return Cu(l.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(s,t,r)}function dA(s,t){let r=null;for(const a of s.fieldTransforms){const i=t.data.field(a.field),l=u3(a.transform,i||null);l!=null&&(r===null&&(r=nr.empty()),r.set(a.field,l))}return r||null}function hj(s,t){return s.type===t.type&&!!s.key.isEqual(t.key)&&!!s.precondition.isEqual(t.precondition)&&!!function(a,i){return a===void 0&&i===void 0||!(!a||!i)&&Bo(a,i,(l,o)=>oA(l,o))}(s.fieldTransforms,t.fieldTransforms)&&(s.type===0?s.value.isEqual(t.value):s.type!==1||s.data.isEqual(t.data)&&s.fieldMask.isEqual(t.fieldMask))}class rd extends jm{constructor(t,r,a,i=[]){super(),this.key=t,this.value=r,this.precondition=a,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ti extends jm{constructor(t,r,a,i,l=[]){super(),this.key=t,this.data=r,this.fieldMask=a,this.precondition=i,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function g3(s){const t=new Map;return s.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const a=s.data.field(r);t.set(r,a)}}),t}function pj(s,t,r){const a=new Map;Rt(s.length===r.length);for(let i=0;i<r.length;i++){const l=s[i],o=l.transform,c=t.data.field(l.field);a.set(l.field,iA(o,c,r[i]))}return a}function fj(s,t,r){const a=new Map;for(const i of s){const l=i.transform,o=r.data.field(i.field);a.set(i.field,nA(l,o,t))}return a}class Nm extends jm{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class y3 extends jm{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(t,r,a,i){this.batchId=t,this.localWriteTime=r,this.baseMutations=a,this.mutations=i}applyToRemoteDocument(t,r){const a=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const l=this.mutations[i];l.key.isEqual(t.key)&&cA(l,t,a[i])}}applyToLocalView(t,r){for(const a of this.baseMutations)a.key.isEqual(t.key)&&(r=ec(a,t,r,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(t.key)&&(r=ec(a,t,r,this.localWriteTime));return r}applyToLocalDocumentSet(t,r){const a=l3();return this.mutations.forEach(i=>{const l=t.get(i.key),o=l.overlayedDocument;let c=this.applyToLocalView(o,l.mutatedFields);c=r.has(i.key)?null:c;const d=f3(o,c);d!==null&&a.set(i.key,d),o.isValidDocument()||o.convertToNoDocument(xt.min())}),a}keys(){return this.mutations.reduce((t,r)=>t.add(r.key),Ct())}isEqual(t){return this.batchId===t.batchId&&Bo(this.mutations,t.mutations,(r,a)=>hj(r,a))&&Bo(this.baseMutations,t.baseMutations,(r,a)=>hj(r,a))}}class rg{constructor(t,r,a,i){this.batch=t,this.commitVersion=r,this.mutationResults=a,this.docVersions=i}static from(t,r,a){Rt(t.mutations.length===a.length);let i=function(){return tA}();const l=t.mutations;for(let o=0;o<l.length;o++)i=i.insert(l[o].key,a[o].version);return new rg(t,r,a,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(t,r){this.largestBatchId=t,this.mutation=r}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(t,r){this.count=t,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ys,At;function b3(s){switch(s){case Ie.OK:return ut();case Ie.CANCELLED:case Ie.UNKNOWN:case Ie.DEADLINE_EXCEEDED:case Ie.RESOURCE_EXHAUSTED:case Ie.INTERNAL:case Ie.UNAVAILABLE:case Ie.UNAUTHENTICATED:return!1;case Ie.INVALID_ARGUMENT:case Ie.NOT_FOUND:case Ie.ALREADY_EXISTS:case Ie.PERMISSION_DENIED:case Ie.FAILED_PRECONDITION:case Ie.ABORTED:case Ie.OUT_OF_RANGE:case Ie.UNIMPLEMENTED:case Ie.DATA_LOSS:return!0;default:return ut()}}function v3(s){if(s===void 0)return Xa("GRPC error has no .code"),Ie.UNKNOWN;switch(s){case ys.OK:return Ie.OK;case ys.CANCELLED:return Ie.CANCELLED;case ys.UNKNOWN:return Ie.UNKNOWN;case ys.DEADLINE_EXCEEDED:return Ie.DEADLINE_EXCEEDED;case ys.RESOURCE_EXHAUSTED:return Ie.RESOURCE_EXHAUSTED;case ys.INTERNAL:return Ie.INTERNAL;case ys.UNAVAILABLE:return Ie.UNAVAILABLE;case ys.UNAUTHENTICATED:return Ie.UNAUTHENTICATED;case ys.INVALID_ARGUMENT:return Ie.INVALID_ARGUMENT;case ys.NOT_FOUND:return Ie.NOT_FOUND;case ys.ALREADY_EXISTS:return Ie.ALREADY_EXISTS;case ys.PERMISSION_DENIED:return Ie.PERMISSION_DENIED;case ys.FAILED_PRECONDITION:return Ie.FAILED_PRECONDITION;case ys.ABORTED:return Ie.ABORTED;case ys.OUT_OF_RANGE:return Ie.OUT_OF_RANGE;case ys.UNIMPLEMENTED:return Ie.UNIMPLEMENTED;case ys.DATA_LOSS:return Ie.DATA_LOSS;default:return ut()}}(At=ys||(ys={}))[At.OK=0]="OK",At[At.CANCELLED=1]="CANCELLED",At[At.UNKNOWN=2]="UNKNOWN",At[At.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",At[At.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",At[At.NOT_FOUND=5]="NOT_FOUND",At[At.ALREADY_EXISTS=6]="ALREADY_EXISTS",At[At.PERMISSION_DENIED=7]="PERMISSION_DENIED",At[At.UNAUTHENTICATED=16]="UNAUTHENTICATED",At[At.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",At[At.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",At[At.ABORTED=10]="ABORTED",At[At.OUT_OF_RANGE=11]="OUT_OF_RANGE",At[At.UNIMPLEMENTED=12]="UNIMPLEMENTED",At[At.INTERNAL=13]="INTERNAL",At[At.UNAVAILABLE=14]="UNAVAILABLE",At[At.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA=new On([4294967295,4294967295],0);function gj(s){const t=V4().encode(s),r=new _4;return r.update(t),new Uint8Array(r.digest())}function yj(s){const t=new DataView(s.buffer),r=t.getUint32(0,!0),a=t.getUint32(4,!0),i=t.getUint32(8,!0),l=t.getUint32(12,!0);return[new On([r,a],0),new On([i,l],0)]}class ag{constructor(t,r,a){if(this.bitmap=t,this.padding=r,this.hashCount=a,r<0||r>=8)throw new Bl(`Invalid padding: ${r}`);if(a<0)throw new Bl(`Invalid hash count: ${a}`);if(t.length>0&&this.hashCount===0)throw new Bl(`Invalid hash count: ${a}`);if(t.length===0&&r!==0)throw new Bl(`Invalid padding when bitmap length is 0: ${r}`);this.Ee=8*t.length-r,this.de=On.fromNumber(this.Ee)}Ae(t,r,a){let i=t.add(r.multiply(On.fromNumber(a)));return i.compare(hA)===1&&(i=new On([i.getBits(0),i.getBits(1)],0)),i.modulo(this.de).toNumber()}Re(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.Ee===0)return!1;const r=gj(t),[a,i]=yj(r);for(let l=0;l<this.hashCount;l++){const o=this.Ae(a,i,l);if(!this.Re(o))return!1}return!0}static create(t,r,a){const i=t%8==0?0:8-t%8,l=new Uint8Array(Math.ceil(t/8)),o=new ag(l,i,r);return a.forEach(c=>o.insert(c)),o}insert(t){if(this.Ee===0)return;const r=gj(t),[a,i]=yj(r);for(let l=0;l<this.hashCount;l++){const o=this.Ae(a,i,l);this.Ve(o)}}Ve(t){const r=Math.floor(t/8),a=t%8;this.bitmap[r]|=1<<a}}class Bl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(t,r,a,i,l){this.snapshotVersion=t,this.targetChanges=r,this.targetMismatches=a,this.documentUpdates=i,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(t,r,a){const i=new Map;return i.set(t,ad.createSynthesizedTargetChangeForCurrentChange(t,r,a)),new wm(xt.min(),i,new ds(vt),Ja(),Ct())}}class ad{constructor(t,r,a,i,l){this.resumeToken=t,this.current=r,this.addedDocuments=a,this.modifiedDocuments=i,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(t,r,a){return new ad(a,r,Ct(),Ct(),Ct())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(t,r,a,i){this.me=t,this.removedTargetIds=r,this.key=a,this.fe=i}}class j3{constructor(t,r){this.targetId=t,this.ge=r}}class N3{constructor(t,r,a=Us.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=r,this.resumeToken=a,this.cause=i}}class bj{constructor(){this.pe=0,this.ye=vj(),this.we=Us.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(t){t.approximateByteSize()>0&&(this.be=!0,this.we=t)}Fe(){let t=Ct(),r=Ct(),a=Ct();return this.ye.forEach((i,l)=>{switch(l){case 0:t=t.add(i);break;case 2:r=r.add(i);break;case 1:a=a.add(i);break;default:ut()}}),new ad(this.we,this.Se,t,r,a)}Me(){this.be=!1,this.ye=vj()}xe(t,r){this.be=!0,this.ye=this.ye.insert(t,r)}Oe(t){this.be=!0,this.ye=this.ye.remove(t)}Ne(){this.pe+=1}Be(){this.pe-=1,Rt(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class pA{constructor(t){this.ke=t,this.qe=new Map,this.Qe=Ja(),this.$e=ru(),this.Ue=ru(),this.Ke=new ds(vt)}We(t){for(const r of t.me)t.fe&&t.fe.isFoundDocument()?this.Ge(r,t.fe):this.ze(r,t.key,t.fe);for(const r of t.removedTargetIds)this.ze(r,t.key,t.fe)}je(t){this.forEachTarget(t,r=>{const a=this.He(r);switch(t.state){case 0:this.Je(r)&&a.Ce(t.resumeToken);break;case 1:a.Be(),a.De||a.Me(),a.Ce(t.resumeToken);break;case 2:a.Be(),a.De||this.removeTarget(r);break;case 3:this.Je(r)&&(a.Le(),a.Ce(t.resumeToken));break;case 4:this.Je(r)&&(this.Ye(r),a.Ce(t.resumeToken));break;default:ut()}})}forEachTarget(t,r){t.targetIds.length>0?t.targetIds.forEach(r):this.qe.forEach((a,i)=>{this.Je(i)&&r(i)})}Ze(t){const r=t.targetId,a=t.ge.count,i=this.Xe(r);if(i){const l=i.target;if(u0(l))if(a===0){const o=new dt(l.path);this.ze(r,o,Cs.newNoDocument(o,xt.min()))}else Rt(a===1);else{const o=this.et(r);if(o!==a){const c=this.tt(t),d=c?this.nt(c,t,o):1;if(d!==0){this.Ye(r);const x=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(r,x)}}}}}tt(t){const r=t.ge.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:a="",padding:i=0},hashCount:l=0}=r;let o,c;try{o=Wn(a).toUint8Array()}catch(d){if(d instanceof U4)return Vo("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new ag(o,i,l)}catch(d){return Vo(d instanceof Bl?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.Ee===0?null:c}nt(t,r,a){return r.ge.count===a-this.st(t,r.targetId)?0:2}st(t,r){const a=this.ke.getRemoteKeysForTarget(r);let i=0;return a.forEach(l=>{const o=this.ke.it(),c=`projects/${o.projectId}/databases/${o.database}/documents/${l.path.canonicalString()}`;t.mightContain(c)||(this.ze(r,l,null),i++)}),i}ot(t){const r=new Map;this.qe.forEach((l,o)=>{const c=this.Xe(o);if(c){if(l.current&&u0(c.target)){const d=new dt(c.target.path);this._t(d).has(o)||this.ut(o,d)||this.ze(o,d,Cs.newNoDocument(d,t))}l.ve&&(r.set(o,l.Fe()),l.Me())}});let a=Ct();this.Ue.forEach((l,o)=>{let c=!0;o.forEachWhile(d=>{const x=this.Xe(d);return!x||x.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(a=a.add(l))}),this.Qe.forEach((l,o)=>o.setReadTime(t));const i=new wm(t,r,this.Ke,this.Qe,a);return this.Qe=Ja(),this.$e=ru(),this.Ue=ru(),this.Ke=new ds(vt),i}Ge(t,r){if(!this.Je(t))return;const a=this.ut(t,r.key)?2:0;this.He(t).xe(r.key,a),this.Qe=this.Qe.insert(r.key,r),this.$e=this.$e.insert(r.key,this._t(r.key).add(t)),this.Ue=this.Ue.insert(r.key,this.ct(r.key).add(t))}ze(t,r,a){if(!this.Je(t))return;const i=this.He(t);this.ut(t,r)?i.xe(r,1):i.Oe(r),this.Ue=this.Ue.insert(r,this.ct(r).delete(t)),this.Ue=this.Ue.insert(r,this.ct(r).add(t)),a&&(this.Qe=this.Qe.insert(r,a))}removeTarget(t){this.qe.delete(t)}et(t){const r=this.He(t).Fe();return this.ke.getRemoteKeysForTarget(t).size+r.addedDocuments.size-r.removedDocuments.size}Ne(t){this.He(t).Ne()}He(t){let r=this.qe.get(t);return r||(r=new bj,this.qe.set(t,r)),r}ct(t){let r=this.Ue.get(t);return r||(r=new ks(vt),this.Ue=this.Ue.insert(t,r)),r}_t(t){let r=this.$e.get(t);return r||(r=new ks(vt),this.$e=this.$e.insert(t,r)),r}Je(t){const r=this.Xe(t)!==null;return r||Qe("WatchChangeAggregator","Detected inactive target",t),r}Xe(t){const r=this.qe.get(t);return r&&r.De?null:this.ke.lt(t)}Ye(t){this.qe.set(t,new bj),this.ke.getRemoteKeysForTarget(t).forEach(r=>{this.ze(t,r,null)})}ut(t,r){return this.ke.getRemoteKeysForTarget(t).has(r)}}function ru(){return new ds(dt.comparator)}function vj(){return new ds(dt.comparator)}const fA=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),gA=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),yA=(()=>({and:"AND",or:"OR"}))();class bA{constructor(t,r){this.databaseId=t,this.useProto3Json=r}}function m0(s,t){return s.useProto3Json||sd(t)?t:{value:t}}function kx(s,t){return s.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function w3(s,t){return s.useProto3Json?t.toBase64():t.toUint8Array()}function vA(s,t){return kx(s,t.toTimestamp())}function Er(s){return Rt(!!s),xt.fromTimestamp(function(r){const a=$n(r);return new Qt(a.seconds,a.nanos)}(s))}function ng(s,t){return h0(s,t).canonicalString()}function h0(s,t){const r=function(i){return new Gt(["projects",i.projectId,"databases",i.database])}(s).child("documents");return t===void 0?r:r.child(t)}function k3(s){const t=Gt.fromString(s);return Rt(T3(t)),t}function Ix(s,t){return ng(s.databaseId,t.path)}function tc(s,t){const r=k3(t);if(r.get(1)!==s.databaseId.projectId)throw new qe(Ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+s.databaseId.projectId);if(r.get(3)!==s.databaseId.database)throw new qe(Ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+s.databaseId.database);return new dt(P3(r))}function I3(s,t){return ng(s.databaseId,t)}function jA(s){const t=k3(s);return t.length===4?Gt.emptyPath():P3(t)}function p0(s){return new Gt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function P3(s){return Rt(s.length>4&&s.get(4)==="documents"),s.popFirst(5)}function jj(s,t,r){return{name:Ix(s,t),fields:r.value.mapValue.fields}}function NA(s,t){return"found"in t?function(a,i){Rt(!!i.found),i.found.name,i.found.updateTime;const l=tc(a,i.found.name),o=Er(i.found.updateTime),c=i.found.createTime?Er(i.found.createTime):xt.min(),d=new nr({mapValue:{fields:i.found.fields}});return Cs.newFoundDocument(l,o,c,d)}(s,t):"missing"in t?function(a,i){Rt(!!i.missing),Rt(!!i.readTime);const l=tc(a,i.missing),o=Er(i.readTime);return Cs.newNoDocument(l,o)}(s,t):ut()}function wA(s,t){let r;if("targetChange"in t){t.targetChange;const a=function(x){return x==="NO_CHANGE"?0:x==="ADD"?1:x==="REMOVE"?2:x==="CURRENT"?3:x==="RESET"?4:ut()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],l=function(x,f){return x.useProto3Json?(Rt(f===void 0||typeof f=="string"),Us.fromBase64String(f||"")):(Rt(f===void 0||f instanceof Buffer||f instanceof Uint8Array),Us.fromUint8Array(f||new Uint8Array))}(s,t.targetChange.resumeToken),o=t.targetChange.cause,c=o&&function(x){const f=x.code===void 0?Ie.UNKNOWN:v3(x.code);return new qe(f,x.message||"")}(o);r=new N3(a,i,l,c||null)}else if("documentChange"in t){t.documentChange;const a=t.documentChange;a.document,a.document.name,a.document.updateTime;const i=tc(s,a.document.name),l=Er(a.document.updateTime),o=a.document.createTime?Er(a.document.createTime):xt.min(),c=new nr({mapValue:{fields:a.document.fields}}),d=Cs.newFoundDocument(i,l,o,c),x=a.targetIds||[],f=a.removedTargetIds||[];r=new Tu(x,f,d.key,d)}else if("documentDelete"in t){t.documentDelete;const a=t.documentDelete;a.document;const i=tc(s,a.document),l=a.readTime?Er(a.readTime):xt.min(),o=Cs.newNoDocument(i,l),c=a.removedTargetIds||[];r=new Tu([],c,o.key,o)}else if("documentRemove"in t){t.documentRemove;const a=t.documentRemove;a.document;const i=tc(s,a.document),l=a.removedTargetIds||[];r=new Tu([],l,i,null)}else{if(!("filter"in t))return ut();{t.filter;const a=t.filter;a.targetId;const{count:i=0,unchangedNames:l}=a,o=new mA(i,l),c=a.targetId;r=new j3(c,o)}}return r}function S3(s,t){let r;if(t instanceof rd)r={update:jj(s,t.key,t.value)};else if(t instanceof Nm)r={delete:Ix(s,t.key)};else if(t instanceof ti)r={update:jj(s,t.key,t.data),updateMask:DA(t.fieldMask)};else{if(!(t instanceof y3))return ut();r={verify:Ix(s,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(a=>function(l,o){const c=o.transform;if(c instanceof Rc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Mc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Lc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Oc)return{fieldPath:o.field.canonicalString(),increment:c.Ie};throw ut()}(0,a))),t.precondition.isNone||(r.currentDocument=function(i,l){return l.updateTime!==void 0?{updateTime:vA(i,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:ut()}(s,t.precondition)),r}function kA(s,t){return s&&s.length>0?(Rt(t!==void 0),s.map(r=>function(i,l){let o=i.updateTime?Er(i.updateTime):Er(l);return o.isEqual(xt.min())&&(o=Er(l)),new lA(o,i.transformResults||[])}(r,t))):[]}function IA(s,t){return{documents:[I3(s,t.path)]}}function PA(s,t){const r={structuredQuery:{}},a=t.path;let i;t.collectionGroup!==null?(i=a,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=a.popLast(),r.structuredQuery.from=[{collectionId:a.lastSegment()}]),r.parent=I3(s,i);const l=function(x){if(x.length!==0)return C3(ia.create(x,"and"))}(t.filters);l&&(r.structuredQuery.where=l);const o=function(x){if(x.length!==0)return x.map(f=>function(w){return{field:Ji(w.field),direction:CA(w.dir)}}(f))}(t.orderBy);o&&(r.structuredQuery.orderBy=o);const c=m0(s,t.limit);return c!==null&&(r.structuredQuery.limit=c),t.startAt&&(r.structuredQuery.startAt=function(x){return{before:x.inclusive,values:x.position}}(t.startAt)),t.endAt&&(r.structuredQuery.endAt=function(x){return{before:!x.inclusive,values:x.position}}(t.endAt)),{ht:r,parent:i}}function SA(s){let t=jA(s.parent);const r=s.structuredQuery,a=r.from?r.from.length:0;let i=null;if(a>0){Rt(a===1);const f=r.from[0];f.allDescendants?i=f.collectionId:t=t.child(f.collectionId)}let l=[];r.where&&(l=function(j){const w=E3(j);return w instanceof ia&&Z4(w)?w.getFilters():[w]}(r.where));let o=[];r.orderBy&&(o=function(j){return j.map(w=>function(g){return new Ac(Zi(g.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(w))}(r.orderBy));let c=null;r.limit&&(c=function(j){let w;return w=typeof j=="object"?j.value:j,sd(w)?null:w}(r.limit));let d=null;r.startAt&&(d=function(j){const w=!!j.before,S=j.values||[];return new Nx(S,w)}(r.startAt));let x=null;return r.endAt&&(x=function(j){const w=!j.before,S=j.values||[];return new Nx(S,w)}(r.endAt)),YD(t,i,o,l,c,"F",d,x)}function EA(s,t){const r=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ut()}}(t.purpose);return r==null?null:{"goog-listen-tags":r}}function E3(s){return s.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const a=Zi(r.unaryFilter.field);return vs.create(a,"==",{doubleValue:NaN});case"IS_NULL":const i=Zi(r.unaryFilter.field);return vs.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Zi(r.unaryFilter.field);return vs.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Zi(r.unaryFilter.field);return vs.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ut()}}(s):s.fieldFilter!==void 0?function(r){return vs.create(Zi(r.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ut()}}(r.fieldFilter.op),r.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(r){return ia.create(r.compositeFilter.filters.map(a=>E3(a)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ut()}}(r.compositeFilter.op))}(s):ut()}function CA(s){return fA[s]}function TA(s){return gA[s]}function _A(s){return yA[s]}function Ji(s){return{fieldPath:s.canonicalString()}}function Zi(s){return Os.fromServerFormat(s.fieldPath)}function C3(s){return s instanceof vs?function(r){if(r.op==="=="){if(lj(r.value))return{unaryFilter:{field:Ji(r.field),op:"IS_NAN"}};if(oj(r.value))return{unaryFilter:{field:Ji(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(lj(r.value))return{unaryFilter:{field:Ji(r.field),op:"IS_NOT_NAN"}};if(oj(r.value))return{unaryFilter:{field:Ji(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ji(r.field),op:TA(r.op),value:r.value}}}(s):s instanceof ia?function(r){const a=r.getFilters().map(i=>C3(i));return a.length===1?a[0]:{compositeFilter:{op:_A(r.op),filters:a}}}(s):ut()}function DA(s){const t=[];return s.fields.forEach(r=>t.push(r.canonicalString())),{fieldPaths:t}}function T3(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(t,r,a,i,l=xt.min(),o=xt.min(),c=Us.EMPTY_BYTE_STRING,d=null){this.target=t,this.targetId=r,this.purpose=a,this.sequenceNumber=i,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(t){return new In(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,r){return new In(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new In(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new In(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(t){this.Tt=t}}function RA(s){const t=SA({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?wx(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(){this.Tn=new LA}addToCollectionParentIndex(t,r){return this.Tn.add(r),Ee.resolve()}getCollectionParents(t,r){return Ee.resolve(this.Tn.getEntries(r))}addFieldIndex(t,r){return Ee.resolve()}deleteFieldIndex(t,r){return Ee.resolve()}deleteAllFieldIndexes(t){return Ee.resolve()}createTargetIndexes(t,r){return Ee.resolve()}getDocumentsMatchingTarget(t,r){return Ee.resolve(null)}getIndexType(t,r){return Ee.resolve(0)}getFieldIndexes(t,r){return Ee.resolve([])}getNextCollectionGroupToUpdate(t){return Ee.resolve(null)}getMinOffset(t,r){return Ee.resolve(Un.min())}getMinOffsetFromCollectionGroup(t,r){return Ee.resolve(Un.min())}updateCollectionGroup(t,r,a){return Ee.resolve()}updateIndexEntries(t,r){return Ee.resolve()}}class LA{constructor(){this.index={}}add(t){const r=t.lastSegment(),a=t.popLast(),i=this.index[r]||new ks(Gt.comparator),l=!i.has(a);return this.index[r]=i.add(a),l}has(t){const r=t.lastSegment(),a=t.popLast(),i=this.index[r];return i&&i.has(a)}getEntries(t){return(this.index[t]||new ks(Gt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nj={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},_3=41943040;class ur{static withCacheSize(t){return new ur(t,ur.DEFAULT_COLLECTION_PERCENTILE,ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,r,a){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ur.DEFAULT_COLLECTION_PERCENTILE=10,ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ur.DEFAULT=new ur(_3,ur.DEFAULT_COLLECTION_PERCENTILE,ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ur.DISABLED=new ur(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(t){this.$n=t}next(){return this.$n+=2,this.$n}static Un(){return new Uo(0)}static Kn(){return new Uo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj="LruGarbageCollector",OA=1048576;function kj([s,t],[r,a]){const i=vt(s,r);return i===0?vt(t,a):i}class VA{constructor(t){this.Hn=t,this.buffer=new ks(kj),this.Jn=0}Yn(){return++this.Jn}Zn(t){const r=[t,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(r);else{const a=this.buffer.last();kj(r,a)<0&&(this.buffer=this.buffer.delete(a).add(r))}}get maxValue(){return this.buffer.last()[0]}}class BA{constructor(t,r,a){this.garbageCollector=t,this.asyncQueue=r,this.localStore=a,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(t){Qe(wj,`Garbage collection scheduled in ${t}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){tl(r)?Qe(wj,"Ignoring IndexedDB error during garbage collection: ",r):await el(r)}await this.er(3e5)})}}class zA{constructor(t,r){this.tr=t,this.params=r}calculateTargetCount(t,r){return this.tr.nr(t).next(a=>Math.floor(r/100*a))}nthSequenceNumber(t,r){if(r===0)return Ee.resolve(pm.ae);const a=new VA(r);return this.tr.forEachTarget(t,i=>a.Zn(i.sequenceNumber)).next(()=>this.tr.rr(t,i=>a.Zn(i))).next(()=>a.maxValue)}removeTargets(t,r,a){return this.tr.removeTargets(t,r,a)}removeOrphanedDocuments(t,r){return this.tr.removeOrphanedDocuments(t,r)}collect(t,r){return this.params.cacheSizeCollectionThreshold===-1?(Qe("LruGarbageCollector","Garbage collection skipped; disabled"),Ee.resolve(Nj)):this.getCacheSize(t).next(a=>a<this.params.cacheSizeCollectionThreshold?(Qe("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Nj):this.ir(t,r))}getCacheSize(t){return this.tr.getCacheSize(t)}ir(t,r){let a,i,l,o,c,d,x;const f=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(j=>(j>this.params.maximumSequenceNumbersToCollect?(Qe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${j}`),i=this.params.maximumSequenceNumbersToCollect):i=j,o=Date.now(),this.nthSequenceNumber(t,i))).next(j=>(a=j,c=Date.now(),this.removeTargets(t,a,r))).next(j=>(l=j,d=Date.now(),this.removeOrphanedDocuments(t,a))).next(j=>(x=Date.now(),Yi()<=Et.DEBUG&&Qe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${i} in `+(c-o)+`ms
	Removed ${l} targets in `+(d-c)+`ms
	Removed ${j} documents in `+(x-d)+`ms
Total Duration: ${x-f}ms`),Ee.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:l,documentsRemoved:j})))}}function FA(s,t){return new zA(s,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(){this.changes=new Bi(t=>t.toString(),(t,r)=>t.isEqual(r)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,r){this.assertNotApplied(),this.changes.set(t,Cs.newInvalidDocument(t).setReadTime(r))}getEntry(t,r){this.assertNotApplied();const a=this.changes.get(r);return a!==void 0?Ee.resolve(a):this.getFromCache(t,r)}getEntries(t,r){return this.getAllFromCache(t,r)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(t,r){this.overlayedDocument=t,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(t,r,a,i){this.remoteDocumentCache=t,this.mutationQueue=r,this.documentOverlayCache=a,this.indexManager=i}getDocument(t,r){let a=null;return this.documentOverlayCache.getOverlay(t,r).next(i=>(a=i,this.remoteDocumentCache.getEntry(t,r))).next(i=>(a!==null&&ec(a.mutation,i,Pr.empty(),Qt.now()),i))}getDocuments(t,r){return this.remoteDocumentCache.getEntries(t,r).next(a=>this.getLocalViewOfDocuments(t,a,Ct()).next(()=>a))}getLocalViewOfDocuments(t,r,a=Ct()){const i=hi();return this.populateOverlays(t,i,r).next(()=>this.computeViews(t,r,i,a).next(l=>{let o=Vl();return l.forEach((c,d)=>{o=o.insert(c,d.overlayedDocument)}),o}))}getOverlayedDocuments(t,r){const a=hi();return this.populateOverlays(t,a,r).next(()=>this.computeViews(t,r,a,Ct()))}populateOverlays(t,r,a){const i=[];return a.forEach(l=>{r.has(l)||i.push(l)}),this.documentOverlayCache.getOverlays(t,i).next(l=>{l.forEach((o,c)=>{r.set(o,c)})})}computeViews(t,r,a,i){let l=Ja();const o=Zl(),c=function(){return Zl()}();return r.forEach((d,x)=>{const f=a.get(x.key);i.has(x.key)&&(f===void 0||f.mutation instanceof ti)?l=l.insert(x.key,x):f!==void 0?(o.set(x.key,f.mutation.getFieldMask()),ec(f.mutation,x,f.mutation.getFieldMask(),Qt.now())):o.set(x.key,Pr.empty())}),this.recalculateAndSaveOverlays(t,l).next(d=>(d.forEach((x,f)=>o.set(x,f)),r.forEach((x,f)=>{var j;return c.set(x,new $A(f,(j=o.get(x))!==null&&j!==void 0?j:null))}),c))}recalculateAndSaveOverlays(t,r){const a=Zl();let i=new ds((o,c)=>o-c),l=Ct();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,r).next(o=>{for(const c of o)c.keys().forEach(d=>{const x=r.get(d);if(x===null)return;let f=a.get(d)||Pr.empty();f=c.applyToLocalView(x,f),a.set(d,f);const j=(i.get(c.batchId)||Ct()).add(d);i=i.insert(c.batchId,j)})}).next(()=>{const o=[],c=i.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),x=d.key,f=d.value,j=l3();f.forEach(w=>{if(!l.has(w)){const S=f3(r.get(w),a.get(w));S!==null&&j.set(w,S),l=l.add(w)}}),o.push(this.documentOverlayCache.saveOverlays(t,x,j))}return Ee.waitFor(o)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(t,r){return this.remoteDocumentCache.getEntries(t,r).next(a=>this.recalculateAndSaveOverlays(t,a))}getDocumentsMatchingQuery(t,r,a,i){return function(o){return dt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(t,r.path):r3(r)?this.getDocumentsMatchingCollectionGroupQuery(t,r,a,i):this.getDocumentsMatchingCollectionQuery(t,r,a,i)}getNextDocuments(t,r,a,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,r,a,i).next(l=>{const o=i-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,r,a.largestBatchId,i-l.size):Ee.resolve(hi());let c=Cc,d=l;return o.next(x=>Ee.forEach(x,(f,j)=>(c<j.largestBatchId&&(c=j.largestBatchId),l.get(f)?Ee.resolve():this.remoteDocumentCache.getEntry(t,f).next(w=>{d=d.insert(f,w)}))).next(()=>this.populateOverlays(t,x,l)).next(()=>this.computeViews(t,d,x,Ct())).next(f=>({batchId:c,changes:o3(f)})))})}getDocumentsMatchingDocumentQuery(t,r){return this.getDocument(t,new dt(r)).next(a=>{let i=Vl();return a.isFoundDocument()&&(i=i.insert(a.key,a)),i})}getDocumentsMatchingCollectionGroupQuery(t,r,a,i){const l=r.collectionGroup;let o=Vl();return this.indexManager.getCollectionParents(t,l).next(c=>Ee.forEach(c,d=>{const x=function(j,w){return new sl(w,null,j.explicitOrderBy.slice(),j.filters.slice(),j.limit,j.limitType,j.startAt,j.endAt)}(r,d.child(l));return this.getDocumentsMatchingCollectionQuery(t,x,a,i).next(f=>{f.forEach((j,w)=>{o=o.insert(j,w)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,r,a,i){let l;return this.documentOverlayCache.getOverlaysForCollection(t,r.path,a.largestBatchId).next(o=>(l=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,r,a,l,i))).next(o=>{l.forEach((d,x)=>{const f=x.getKey();o.get(f)===null&&(o=o.insert(f,Cs.newInvalidDocument(f)))});let c=Vl();return o.forEach((d,x)=>{const f=l.get(d);f!==void 0&&ec(f.mutation,x,Pr.empty(),Qt.now()),bm(r,x)&&(c=c.insert(d,x))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(t){this.serializer=t,this.dr=new Map,this.Ar=new Map}getBundleMetadata(t,r){return Ee.resolve(this.dr.get(r))}saveBundleMetadata(t,r){return this.dr.set(r.id,function(i){return{id:i.id,version:i.version,createTime:Er(i.createTime)}}(r)),Ee.resolve()}getNamedQuery(t,r){return Ee.resolve(this.Ar.get(r))}saveNamedQuery(t,r){return this.Ar.set(r.name,function(i){return{name:i.name,query:RA(i.bundledQuery),readTime:Er(i.readTime)}}(r)),Ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(){this.overlays=new ds(dt.comparator),this.Rr=new Map}getOverlay(t,r){return Ee.resolve(this.overlays.get(r))}getOverlays(t,r){const a=hi();return Ee.forEach(r,i=>this.getOverlay(t,i).next(l=>{l!==null&&a.set(i,l)})).next(()=>a)}saveOverlays(t,r,a){return a.forEach((i,l)=>{this.Et(t,r,l)}),Ee.resolve()}removeOverlaysForBatchId(t,r,a){const i=this.Rr.get(a);return i!==void 0&&(i.forEach(l=>this.overlays=this.overlays.remove(l)),this.Rr.delete(a)),Ee.resolve()}getOverlaysForCollection(t,r,a){const i=hi(),l=r.length+1,o=new dt(r.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const d=c.getNext().value,x=d.getKey();if(!r.isPrefixOf(x.path))break;x.path.length===l&&d.largestBatchId>a&&i.set(d.getKey(),d)}return Ee.resolve(i)}getOverlaysForCollectionGroup(t,r,a,i){let l=new ds((x,f)=>x-f);const o=this.overlays.getIterator();for(;o.hasNext();){const x=o.getNext().value;if(x.getKey().getCollectionGroup()===r&&x.largestBatchId>a){let f=l.get(x.largestBatchId);f===null&&(f=hi(),l=l.insert(x.largestBatchId,f)),f.set(x.getKey(),x)}}const c=hi(),d=l.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((x,f)=>c.set(x,f)),!(c.size()>=i)););return Ee.resolve(c)}Et(t,r,a){const i=this.overlays.get(a.key);if(i!==null){const o=this.Rr.get(i.largestBatchId).delete(a.key);this.Rr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(a.key,new xA(r,a));let l=this.Rr.get(r);l===void 0&&(l=Ct(),this.Rr.set(r,l)),this.Rr.set(r,l.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(){this.sessionToken=Us.EMPTY_BYTE_STRING}getSessionToken(t){return Ee.resolve(this.sessionToken)}setSessionToken(t,r){return this.sessionToken=r,Ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(){this.Vr=new ks(Ps.mr),this.gr=new ks(Ps.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(t,r){const a=new Ps(t,r);this.Vr=this.Vr.add(a),this.gr=this.gr.add(a)}yr(t,r){t.forEach(a=>this.addReference(a,r))}removeReference(t,r){this.wr(new Ps(t,r))}Sr(t,r){t.forEach(a=>this.removeReference(a,r))}br(t){const r=new dt(new Gt([])),a=new Ps(r,t),i=new Ps(r,t+1),l=[];return this.gr.forEachInRange([a,i],o=>{this.wr(o),l.push(o.key)}),l}Dr(){this.Vr.forEach(t=>this.wr(t))}wr(t){this.Vr=this.Vr.delete(t),this.gr=this.gr.delete(t)}vr(t){const r=new dt(new Gt([])),a=new Ps(r,t),i=new Ps(r,t+1);let l=Ct();return this.gr.forEachInRange([a,i],o=>{l=l.add(o.key)}),l}containsKey(t){const r=new Ps(t,0),a=this.Vr.firstAfterOrEqual(r);return a!==null&&t.isEqual(a.key)}}class Ps{constructor(t,r){this.key=t,this.Cr=r}static mr(t,r){return dt.comparator(t.key,r.key)||vt(t.Cr,r.Cr)}static pr(t,r){return vt(t.Cr,r.Cr)||dt.comparator(t.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(t,r){this.indexManager=t,this.referenceDelegate=r,this.mutationQueue=[],this.Fr=1,this.Mr=new ks(Ps.mr)}checkEmpty(t){return Ee.resolve(this.mutationQueue.length===0)}addMutationBatch(t,r,a,i){const l=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new uA(l,r,a,i);this.mutationQueue.push(o);for(const c of i)this.Mr=this.Mr.add(new Ps(c.key,l)),this.indexManager.addToCollectionParentIndex(t,c.key.path.popLast());return Ee.resolve(o)}lookupMutationBatch(t,r){return Ee.resolve(this.Or(r))}getNextMutationBatchAfterBatchId(t,r){const a=r+1,i=this.Nr(a),l=i<0?0:i;return Ee.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return Ee.resolve(this.mutationQueue.length===0?Xf:this.Fr-1)}getAllMutationBatches(t){return Ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,r){const a=new Ps(r,0),i=new Ps(r,Number.POSITIVE_INFINITY),l=[];return this.Mr.forEachInRange([a,i],o=>{const c=this.Or(o.Cr);l.push(c)}),Ee.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(t,r){let a=new ks(vt);return r.forEach(i=>{const l=new Ps(i,0),o=new Ps(i,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([l,o],c=>{a=a.add(c.Cr)})}),Ee.resolve(this.Br(a))}getAllMutationBatchesAffectingQuery(t,r){const a=r.path,i=a.length+1;let l=a;dt.isDocumentKey(l)||(l=l.child(""));const o=new Ps(new dt(l),0);let c=new ks(vt);return this.Mr.forEachWhile(d=>{const x=d.key.path;return!!a.isPrefixOf(x)&&(x.length===i&&(c=c.add(d.Cr)),!0)},o),Ee.resolve(this.Br(c))}Br(t){const r=[];return t.forEach(a=>{const i=this.Or(a);i!==null&&r.push(i)}),r}removeMutationBatch(t,r){Rt(this.Lr(r.batchId,"removed")===0),this.mutationQueue.shift();let a=this.Mr;return Ee.forEach(r.mutations,i=>{const l=new Ps(i.key,r.batchId);return a=a.delete(l),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.Mr=a})}qn(t){}containsKey(t,r){const a=new Ps(r,0),i=this.Mr.firstAfterOrEqual(a);return Ee.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Ee.resolve()}Lr(t,r){return this.Nr(t)}Nr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Or(t){const r=this.Nr(t);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(t){this.kr=t,this.docs=function(){return new ds(dt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,r){const a=r.key,i=this.docs.get(a),l=i?i.size:0,o=this.kr(r);return this.docs=this.docs.insert(a,{document:r.mutableCopy(),size:o}),this.size+=o-l,this.indexManager.addToCollectionParentIndex(t,a.path.popLast())}removeEntry(t){const r=this.docs.get(t);r&&(this.docs=this.docs.remove(t),this.size-=r.size)}getEntry(t,r){const a=this.docs.get(r);return Ee.resolve(a?a.document.mutableCopy():Cs.newInvalidDocument(r))}getEntries(t,r){let a=Ja();return r.forEach(i=>{const l=this.docs.get(i);a=a.insert(i,l?l.document.mutableCopy():Cs.newInvalidDocument(i))}),Ee.resolve(a)}getDocumentsMatchingQuery(t,r,a,i){let l=Ja();const o=r.path,c=new dt(o.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:x,value:{document:f}}=d.getNext();if(!o.isPrefixOf(x.path))break;x.path.length>o.length+1||CD(ED(f),a)<=0||(i.has(f.key)||bm(r,f))&&(l=l.insert(f.key,f.mutableCopy()))}return Ee.resolve(l)}getAllFromCollectionGroup(t,r,a,i){ut()}qr(t,r){return Ee.forEach(this.docs,a=>r(a))}newChangeBuffer(t){return new YA(this)}getSize(t){return Ee.resolve(this.size)}}class YA extends UA{constructor(t){super(),this.Ir=t}applyChanges(t){const r=[];return this.changes.forEach((a,i)=>{i.isValidDocument()?r.push(this.Ir.addEntry(t,i)):this.Ir.removeEntry(a)}),Ee.waitFor(r)}getFromCache(t,r){return this.Ir.getEntry(t,r)}getAllFromCache(t,r){return this.Ir.getEntries(t,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(t){this.persistence=t,this.Qr=new Bi(r=>eg(r),tg),this.lastRemoteSnapshotVersion=xt.min(),this.highestTargetId=0,this.$r=0,this.Ur=new ig,this.targetCount=0,this.Kr=Uo.Un()}forEachTarget(t,r){return this.Qr.forEach((a,i)=>r(i)),Ee.resolve()}getLastRemoteSnapshotVersion(t){return Ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Ee.resolve(this.$r)}allocateTargetId(t){return this.highestTargetId=this.Kr.next(),Ee.resolve(this.highestTargetId)}setTargetsMetadata(t,r,a){return a&&(this.lastRemoteSnapshotVersion=a),r>this.$r&&(this.$r=r),Ee.resolve()}zn(t){this.Qr.set(t.target,t);const r=t.targetId;r>this.highestTargetId&&(this.Kr=new Uo(r),this.highestTargetId=r),t.sequenceNumber>this.$r&&(this.$r=t.sequenceNumber)}addTargetData(t,r){return this.zn(r),this.targetCount+=1,Ee.resolve()}updateTargetData(t,r){return this.zn(r),Ee.resolve()}removeTargetData(t,r){return this.Qr.delete(r.target),this.Ur.br(r.targetId),this.targetCount-=1,Ee.resolve()}removeTargets(t,r,a){let i=0;const l=[];return this.Qr.forEach((o,c)=>{c.sequenceNumber<=r&&a.get(c.targetId)===null&&(this.Qr.delete(o),l.push(this.removeMatchingKeysForTargetId(t,c.targetId)),i++)}),Ee.waitFor(l).next(()=>i)}getTargetCount(t){return Ee.resolve(this.targetCount)}getTargetData(t,r){const a=this.Qr.get(r)||null;return Ee.resolve(a)}addMatchingKeys(t,r,a){return this.Ur.yr(r,a),Ee.resolve()}removeMatchingKeys(t,r,a){this.Ur.Sr(r,a);const i=this.persistence.referenceDelegate,l=[];return i&&r.forEach(o=>{l.push(i.markPotentiallyOrphaned(t,o))}),Ee.waitFor(l)}removeMatchingKeysForTargetId(t,r){return this.Ur.br(r),Ee.resolve()}getMatchingKeysForTargetId(t,r){const a=this.Ur.vr(r);return Ee.resolve(a)}containsKey(t,r){return Ee.resolve(this.Ur.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(t,r){this.Wr={},this.overlays={},this.Gr=new pm(0),this.zr=!1,this.zr=!0,this.jr=new GA,this.referenceDelegate=t(this),this.Hr=new XA(this),this.indexManager=new MA,this.remoteDocumentCache=function(i){return new QA(i)}(a=>this.referenceDelegate.Jr(a)),this.serializer=new AA(r),this.Yr=new qA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let r=this.overlays[t.toKey()];return r||(r=new HA,this.overlays[t.toKey()]=r),r}getMutationQueue(t,r){let a=this.Wr[t.toKey()];return a||(a=new KA(r,this.referenceDelegate),this.Wr[t.toKey()]=a),a}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(t,r,a){Qe("MemoryPersistence","Starting transaction:",t);const i=new JA(this.Gr.next());return this.referenceDelegate.Zr(),a(i).next(l=>this.referenceDelegate.Xr(i).next(()=>l)).toPromise().then(l=>(i.raiseOnCommittedEvent(),l))}ei(t,r){return Ee.or(Object.values(this.Wr).map(a=>()=>a.containsKey(t,r)))}}class JA extends _D{constructor(t){super(),this.currentSequenceNumber=t}}class og{constructor(t){this.persistence=t,this.ti=new ig,this.ni=null}static ri(t){return new og(t)}get ii(){if(this.ni)return this.ni;throw ut()}addReference(t,r,a){return this.ti.addReference(a,r),this.ii.delete(a.toString()),Ee.resolve()}removeReference(t,r,a){return this.ti.removeReference(a,r),this.ii.add(a.toString()),Ee.resolve()}markPotentiallyOrphaned(t,r){return this.ii.add(r.toString()),Ee.resolve()}removeTarget(t,r){this.ti.br(r.targetId).forEach(i=>this.ii.add(i.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(t,r.targetId).next(i=>{i.forEach(l=>this.ii.add(l.toString()))}).next(()=>a.removeTargetData(t,r))}Zr(){this.ni=new Set}Xr(t){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ee.forEach(this.ii,a=>{const i=dt.fromPath(a);return this.si(t,i).next(l=>{l||r.removeEntry(i,xt.min())})}).next(()=>(this.ni=null,r.apply(t)))}updateLimboDocument(t,r){return this.si(t,r).next(a=>{a?this.ii.delete(r.toString()):this.ii.add(r.toString())})}Jr(t){return 0}si(t,r){return Ee.or([()=>Ee.resolve(this.ti.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(t,r),()=>this.persistence.ei(t,r)])}}class Px{constructor(t,r){this.persistence=t,this.oi=new Bi(a=>RD(a.path),(a,i)=>a.isEqual(i)),this.garbageCollector=FA(this,r)}static ri(t,r){return new Px(t,r)}Zr(){}Xr(t){return Ee.resolve()}forEachTarget(t,r){return this.persistence.getTargetCache().forEachTarget(t,r)}nr(t){const r=this.sr(t);return this.persistence.getTargetCache().getTargetCount(t).next(a=>r.next(i=>a+i))}sr(t){let r=0;return this.rr(t,a=>{r++}).next(()=>r)}rr(t,r){return Ee.forEach(this.oi,(a,i)=>this.ar(t,a,i).next(l=>l?Ee.resolve():r(i)))}removeTargets(t,r,a){return this.persistence.getTargetCache().removeTargets(t,r,a)}removeOrphanedDocuments(t,r){let a=0;const i=this.persistence.getRemoteDocumentCache(),l=i.newChangeBuffer();return i.qr(t,o=>this.ar(t,o,r).next(c=>{c||(a++,l.removeEntry(o,xt.min()))})).next(()=>l.apply(t)).next(()=>a)}markPotentiallyOrphaned(t,r){return this.oi.set(r,t.currentSequenceNumber),Ee.resolve()}removeTarget(t,r){const a=r.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,a)}addReference(t,r,a){return this.oi.set(a,t.currentSequenceNumber),Ee.resolve()}removeReference(t,r,a){return this.oi.set(a,t.currentSequenceNumber),Ee.resolve()}updateLimboDocument(t,r){return this.oi.set(r,t.currentSequenceNumber),Ee.resolve()}Jr(t){let r=t.key.toString().length;return t.isFoundDocument()&&(r+=Su(t.data.value)),r}ar(t,r,a){return Ee.or([()=>this.persistence.ei(t,r),()=>this.persistence.getTargetCache().containsKey(t,r),()=>{const i=this.oi.get(r);return Ee.resolve(i!==void 0&&i>a)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(t,r,a,i){this.targetId=t,this.fromCache=r,this.Hi=a,this.Ji=i}static Yi(t,r){let a=Ct(),i=Ct();for(const l of r.docChanges)switch(l.type){case 0:a=a.add(l.doc.key);break;case 1:i=i.add(l.doc.key)}return new lg(t,r.fromCache,a,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e8{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return JT()?8:DD(er())>0?6:4}()}initialize(t,r){this.ns=t,this.indexManager=r,this.Zi=!0}getDocumentsMatchingQuery(t,r,a,i){const l={result:null};return this.rs(t,r).next(o=>{l.result=o}).next(()=>{if(!l.result)return this.ss(t,r,i,a).next(o=>{l.result=o})}).next(()=>{if(l.result)return;const o=new ZA;return this._s(t,r,o).next(c=>{if(l.result=c,this.Xi)return this.us(t,r,o,c.size)})}).next(()=>l.result)}us(t,r,a,i){return a.documentReadCount<this.es?(Yi()<=Et.DEBUG&&Qe("QueryEngine","SDK will not create cache indexes for query:",Xi(r),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),Ee.resolve()):(Yi()<=Et.DEBUG&&Qe("QueryEngine","Query:",Xi(r),"scans",a.documentReadCount,"local documents and returns",i,"documents as results."),a.documentReadCount>this.ts*i?(Yi()<=Et.DEBUG&&Qe("QueryEngine","The SDK decides to create cache indexes for query:",Xi(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ba(r))):Ee.resolve())}rs(t,r){if(xj(r))return Ee.resolve(null);let a=ba(r);return this.indexManager.getIndexType(t,a).next(i=>i===0?null:(r.limit!==null&&i===1&&(r=wx(r,null,"F"),a=ba(r)),this.indexManager.getDocumentsMatchingTarget(t,a).next(l=>{const o=Ct(...l);return this.ns.getDocuments(t,o).next(c=>this.indexManager.getMinOffset(t,a).next(d=>{const x=this.cs(r,c);return this.ls(r,x,o,d.readTime)?this.rs(t,wx(r,null,"F")):this.hs(t,x,r,d)}))})))}ss(t,r,a,i){return xj(r)||i.isEqual(xt.min())?Ee.resolve(null):this.ns.getDocuments(t,a).next(l=>{const o=this.cs(r,l);return this.ls(r,o,a,i)?Ee.resolve(null):(Yi()<=Et.DEBUG&&Qe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Xi(r)),this.hs(t,o,r,SD(i,Cc)).next(c=>c))})}cs(t,r){let a=new ks(n3(t));return r.forEach((i,l)=>{bm(t,l)&&(a=a.add(l))}),a}ls(t,r,a,i){if(t.limit===null)return!1;if(a.size!==r.size)return!0;const l=t.limitType==="F"?r.last():r.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(i)>0)}_s(t,r,a){return Yi()<=Et.DEBUG&&Qe("QueryEngine","Using full collection scan to execute query:",Xi(r)),this.ns.getDocumentsMatchingQuery(t,r,Un.min(),a)}hs(t,r,a,i){return this.ns.getDocumentsMatchingQuery(t,a,i).next(l=>(r.forEach(o=>{l=l.insert(o.key,o)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg="LocalStore",t8=3e8;class s8{constructor(t,r,a,i){this.persistence=t,this.Ps=r,this.serializer=i,this.Ts=new ds(vt),this.Is=new Bi(l=>eg(l),tg),this.Es=new Map,this.ds=t.getRemoteDocumentCache(),this.Hr=t.getTargetCache(),this.Yr=t.getBundleCache(),this.As(a)}As(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new WA(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>t.collect(r,this.Ts))}}function r8(s,t,r,a){return new s8(s,t,r,a)}async function A3(s,t){const r=ft(s);return await r.persistence.runTransaction("Handle user change","readonly",a=>{let i;return r.mutationQueue.getAllMutationBatches(a).next(l=>(i=l,r.As(t),r.mutationQueue.getAllMutationBatches(a))).next(l=>{const o=[],c=[];let d=Ct();for(const x of i){o.push(x.batchId);for(const f of x.mutations)d=d.add(f.key)}for(const x of l){c.push(x.batchId);for(const f of x.mutations)d=d.add(f.key)}return r.localDocuments.getDocuments(a,d).next(x=>({Rs:x,removedBatchIds:o,addedBatchIds:c}))})})}function a8(s,t){const r=ft(s);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const i=t.batch.keys(),l=r.ds.newChangeBuffer({trackRemovals:!0});return function(c,d,x,f){const j=x.batch,w=j.keys();let S=Ee.resolve();return w.forEach(g=>{S=S.next(()=>f.getEntry(d,g)).next(V=>{const E=x.docVersions.get(g);Rt(E!==null),V.version.compareTo(E)<0&&(j.applyToRemoteDocument(V,x),V.isValidDocument()&&(V.setReadTime(x.commitVersion),f.addEntry(V)))})}),S.next(()=>c.mutationQueue.removeMutationBatch(d,j))}(r,a,t,l).next(()=>l.apply(a)).next(()=>r.mutationQueue.performConsistencyCheck(a)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(a,i,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(c){let d=Ct();for(let x=0;x<c.mutationResults.length;++x)c.mutationResults[x].transformResults.length>0&&(d=d.add(c.batch.mutations[x].key));return d}(t))).next(()=>r.localDocuments.getDocuments(a,i))})}function R3(s){const t=ft(s);return t.persistence.runTransaction("Get last remote snapshot version","readonly",r=>t.Hr.getLastRemoteSnapshotVersion(r))}function n8(s,t){const r=ft(s),a=t.snapshotVersion;let i=r.Ts;return r.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const o=r.ds.newChangeBuffer({trackRemovals:!0});i=r.Ts;const c=[];t.targetChanges.forEach((f,j)=>{const w=i.get(j);if(!w)return;c.push(r.Hr.removeMatchingKeys(l,f.removedDocuments,j).next(()=>r.Hr.addMatchingKeys(l,f.addedDocuments,j)));let S=w.withSequenceNumber(l.currentSequenceNumber);t.targetMismatches.get(j)!==null?S=S.withResumeToken(Us.EMPTY_BYTE_STRING,xt.min()).withLastLimboFreeSnapshotVersion(xt.min()):f.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(f.resumeToken,a)),i=i.insert(j,S),function(V,E,_){return V.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=t8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(w,S,f)&&c.push(r.Hr.updateTargetData(l,S))});let d=Ja(),x=Ct();if(t.documentUpdates.forEach(f=>{t.resolvedLimboDocuments.has(f)&&c.push(r.persistence.referenceDelegate.updateLimboDocument(l,f))}),c.push(i8(l,o,t.documentUpdates).next(f=>{d=f.Vs,x=f.fs})),!a.isEqual(xt.min())){const f=r.Hr.getLastRemoteSnapshotVersion(l).next(j=>r.Hr.setTargetsMetadata(l,l.currentSequenceNumber,a));c.push(f)}return Ee.waitFor(c).next(()=>o.apply(l)).next(()=>r.localDocuments.getLocalViewOfDocuments(l,d,x)).next(()=>d)}).then(l=>(r.Ts=i,l))}function i8(s,t,r){let a=Ct(),i=Ct();return r.forEach(l=>a=a.add(l)),t.getEntries(s,a).next(l=>{let o=Ja();return r.forEach((c,d)=>{const x=l.get(c);d.isFoundDocument()!==x.isFoundDocument()&&(i=i.add(c)),d.isNoDocument()&&d.version.isEqual(xt.min())?(t.removeEntry(c,d.readTime),o=o.insert(c,d)):!x.isValidDocument()||d.version.compareTo(x.version)>0||d.version.compareTo(x.version)===0&&x.hasPendingWrites?(t.addEntry(d),o=o.insert(c,d)):Qe(cg,"Ignoring outdated watch update for ",c,". Current version:",x.version," Watch version:",d.version)}),{Vs:o,fs:i}})}function o8(s,t){const r=ft(s);return r.persistence.runTransaction("Get next mutation batch","readonly",a=>(t===void 0&&(t=Xf),r.mutationQueue.getNextMutationBatchAfterBatchId(a,t)))}function l8(s,t){const r=ft(s);return r.persistence.runTransaction("Allocate target","readwrite",a=>{let i;return r.Hr.getTargetData(a,t).next(l=>l?(i=l,Ee.resolve(i)):r.Hr.allocateTargetId(a).next(o=>(i=new In(t,o,"TargetPurposeListen",a.currentSequenceNumber),r.Hr.addTargetData(a,i).next(()=>i))))}).then(a=>{const i=r.Ts.get(a.targetId);return(i===null||a.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.Ts=r.Ts.insert(a.targetId,a),r.Is.set(t,a.targetId)),a})}async function f0(s,t,r){const a=ft(s),i=a.Ts.get(t),l=r?"readwrite":"readwrite-primary";try{r||await a.persistence.runTransaction("Release target",l,o=>a.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!tl(o))throw o;Qe(cg,`Failed to update sequence numbers for target ${t}: ${o}`)}a.Ts=a.Ts.remove(t),a.Is.delete(i.target)}function Ij(s,t,r){const a=ft(s);let i=xt.min(),l=Ct();return a.persistence.runTransaction("Execute query","readwrite",o=>function(d,x,f){const j=ft(d),w=j.Is.get(f);return w!==void 0?Ee.resolve(j.Ts.get(w)):j.Hr.getTargetData(x,f)}(a,o,ba(t)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,a.Hr.getMatchingKeysForTargetId(o,c.targetId).next(d=>{l=d})}).next(()=>a.Ps.getDocumentsMatchingQuery(o,t,r?i:xt.min(),r?l:Ct())).next(c=>(c8(a,JD(t),c),{documents:c,gs:l})))}function c8(s,t,r){let a=s.Es.get(t)||xt.min();r.forEach((i,l)=>{l.readTime.compareTo(a)>0&&(a=l.readTime)}),s.Es.set(t,a)}class Pj{constructor(){this.activeTargetIds=aA()}Ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}vs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}bs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class d8{constructor(){this.ho=new Pj,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,r,a){}addLocalQueryTarget(t,r=!0){return r&&this.ho.Ds(t),this.Po[t]||"not-current"}updateQueryState(t,r,a){this.Po[t]=r}removeLocalQueryTarget(t){this.ho.vs(t)}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){delete this.Po[t]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(t){return this.ho.activeTargetIds.has(t)}start(){return this.ho=new Pj,Promise.resolve()}handleUserChange(t,r,a){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u8{To(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sj="ConnectivityMonitor";class Ej{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(t){this.Vo.push(t)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){Qe(Sj,"Network connectivity changed: AVAILABLE");for(const t of this.Vo)t(0)}Ro(){Qe(Sj,"Network connectivity changed: UNAVAILABLE");for(const t of this.Vo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let au=null;function g0(){return au===null?au=function(){return 268435456+Math.round(2147483648*Math.random())}():au++,"0x"+au.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ah="RestConnection",x8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class m8{get fo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=r+"://"+t.host,this.yo=`projects/${a}/databases/${i}`,this.wo=this.databaseId.database===vx?`project_id=${a}`:`project_id=${a}&database_id=${i}`}So(t,r,a,i,l){const o=g0(),c=this.bo(t,r.toUriEncodedString());Qe(Ah,`Sending RPC '${t}' ${o}:`,c,a);const d={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(d,i,l),this.vo(t,c,d,a).then(x=>(Qe(Ah,`Received RPC '${t}' ${o}: `,x),x),x=>{throw Vo(Ah,`RPC '${t}' ${o} failed with error: `,x,"url: ",c,"request:",a),x})}Co(t,r,a,i,l,o){return this.So(t,r,a,i,l)}Do(t,r,a){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Zo}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,l)=>t[l]=i),a&&a.headers.forEach((i,l)=>t[l]=i)}bo(t,r){const a=x8[t];return`${this.po}/v1/${r}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h8{constructor(t){this.Fo=t.Fo,this.Mo=t.Mo}xo(t){this.Oo=t}No(t){this.Bo=t}Lo(t){this.ko=t}onMessage(t){this.qo=t}close(){this.Mo()}send(t){this.Fo(t)}Qo(){this.Oo()}$o(){this.Bo()}Uo(t){this.ko(t)}Ko(t){this.qo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks="WebChannelConnection";class p8 extends m8{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}vo(t,r,a,i){const l=g0();return new Promise((o,c)=>{const d=new D4;d.setWithCredentials(!0),d.listenOnce(A4.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Pu.NO_ERROR:const f=d.getResponseJson();Qe(Ks,`XHR for RPC '${t}' ${l} received:`,JSON.stringify(f)),o(f);break;case Pu.TIMEOUT:Qe(Ks,`RPC '${t}' ${l} timed out`),c(new qe(Ie.DEADLINE_EXCEEDED,"Request time out"));break;case Pu.HTTP_ERROR:const j=d.getStatus();if(Qe(Ks,`RPC '${t}' ${l} failed with status:`,j,"response text:",d.getResponseText()),j>0){let w=d.getResponseJson();Array.isArray(w)&&(w=w[0]);const S=w==null?void 0:w.error;if(S&&S.status&&S.message){const g=function(E){const _=E.toLowerCase().replace(/_/g,"-");return Object.values(Ie).indexOf(_)>=0?_:Ie.UNKNOWN}(S.status);c(new qe(g,S.message))}else c(new qe(Ie.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new qe(Ie.UNAVAILABLE,"Connection failed."));break;default:ut()}}finally{Qe(Ks,`RPC '${t}' ${l} completed.`)}});const x=JSON.stringify(i);Qe(Ks,`RPC '${t}' ${l} sending request:`,i),d.send(r,"POST",x,a,15)})}Wo(t,r,a){const i=g0(),l=[this.po,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=L4(),c=M4(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},x=this.longPollingOptions.timeoutSeconds;x!==void 0&&(d.longPollingTimeout=Math.round(1e3*x)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Do(d.initMessageHeaders,r,a),d.encodeInitMessageHeaders=!0;const f=l.join("");Qe(Ks,`Creating RPC '${t}' stream ${i}: ${f}`,d);const j=o.createWebChannel(f,d);let w=!1,S=!1;const g=new h8({Fo:E=>{S?Qe(Ks,`Not sending because RPC '${t}' stream ${i} is closed:`,E):(w||(Qe(Ks,`Opening RPC '${t}' stream ${i} transport.`),j.open(),w=!0),Qe(Ks,`RPC '${t}' stream ${i} sending:`,E),j.send(E))},Mo:()=>j.close()}),V=(E,_,M)=>{E.listen(_,R=>{try{M(R)}catch(q){setTimeout(()=>{throw q},0)}})};return V(j,Ol.EventType.OPEN,()=>{S||(Qe(Ks,`RPC '${t}' stream ${i} transport opened.`),g.Qo())}),V(j,Ol.EventType.CLOSE,()=>{S||(S=!0,Qe(Ks,`RPC '${t}' stream ${i} transport closed`),g.Uo())}),V(j,Ol.EventType.ERROR,E=>{S||(S=!0,Vo(Ks,`RPC '${t}' stream ${i} transport errored:`,E),g.Uo(new qe(Ie.UNAVAILABLE,"The operation could not be completed")))}),V(j,Ol.EventType.MESSAGE,E=>{var _;if(!S){const M=E.data[0];Rt(!!M);const R=M,q=(R==null?void 0:R.error)||((_=R[0])===null||_===void 0?void 0:_.error);if(q){Qe(Ks,`RPC '${t}' stream ${i} received error:`,q);const G=q.status;let Y=function(U){const F=ys[U];if(F!==void 0)return v3(F)}(G),O=q.message;Y===void 0&&(Y=Ie.INTERNAL,O="Unknown error status: "+G+" with message "+q.message),S=!0,g.Uo(new qe(Y,O)),j.close()}else Qe(Ks,`RPC '${t}' stream ${i} received:`,M),g.Ko(M)}}),V(c,R4.STAT_EVENT,E=>{E.stat===i0.PROXY?Qe(Ks,`RPC '${t}' stream ${i} detected buffering proxy`):E.stat===i0.NOPROXY&&Qe(Ks,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{g.$o()},0),g}}function Rh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function km(s){return new bA(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(t,r,a=1e3,i=1.5,l=6e4){this.Ti=t,this.timerId=r,this.Go=a,this.zo=i,this.jo=l,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(t){this.cancel();const r=Math.floor(this.Ho+this.e_()),a=Math.max(0,Date.now()-this.Yo),i=Math.max(0,r-a);i>0&&Qe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ho} ms, delay with jitter: ${r} ms, last attempt: ${a} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,i,()=>(this.Yo=Date.now(),t())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cj="PersistentStream";class M3{constructor(t,r,a,i,l,o,c,d){this.Ti=t,this.n_=a,this.r_=i,this.connection=l,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new dg(t,r)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(t){this.E_(),this.stream.send(t)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(t,r){this.E_(),this.d_(),this.a_.cancel(),this.i_++,t!==4?this.a_.reset():r&&r.code===Ie.RESOURCE_EXHAUSTED?(Xa(r.toString()),Xa("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):r&&r.code===Ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Lo(r)}A_(){}auth(){this.state=1;const t=this.R_(this.i_),r=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,i])=>{this.i_===r&&this.V_(a,i)},a=>{t(()=>{const i=new qe(Ie.UNKNOWN,"Fetching auth token failed: "+a.message);return this.m_(i)})})}V_(t,r){const a=this.R_(this.i_);this.stream=this.f_(t,r),this.stream.xo(()=>{a(()=>this.listener.xo())}),this.stream.No(()=>{a(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(i=>{a(()=>this.m_(i))}),this.stream.onMessage(i=>{a(()=>++this.__==1?this.g_(i):this.onNext(i))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(t){return Qe(Cj,`close with error: ${t}`),this.stream=null,this.close(4,t)}R_(t){return r=>{this.Ti.enqueueAndForget(()=>this.i_===t?r():(Qe(Cj,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class f8 extends M3{constructor(t,r,a,i,l,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,a,i,o),this.serializer=l}f_(t,r){return this.connection.Wo("Listen",t,r)}g_(t){return this.onNext(t)}onNext(t){this.a_.reset();const r=wA(this.serializer,t),a=function(l){if(!("targetChange"in l))return xt.min();const o=l.targetChange;return o.targetIds&&o.targetIds.length?xt.min():o.readTime?Er(o.readTime):xt.min()}(t);return this.listener.p_(r,a)}y_(t){const r={};r.database=p0(this.serializer),r.addTarget=function(l,o){let c;const d=o.target;if(c=u0(d)?{documents:IA(l,d)}:{query:PA(l,d).ht},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=w3(l,o.resumeToken);const x=m0(l,o.expectedCount);x!==null&&(c.expectedCount=x)}else if(o.snapshotVersion.compareTo(xt.min())>0){c.readTime=kx(l,o.snapshotVersion.toTimestamp());const x=m0(l,o.expectedCount);x!==null&&(c.expectedCount=x)}return c}(this.serializer,t);const a=EA(this.serializer,t);a&&(r.labels=a),this.I_(r)}w_(t){const r={};r.database=p0(this.serializer),r.removeTarget=t,this.I_(r)}}class g8 extends M3{constructor(t,r,a,i,l,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,a,i,o),this.serializer=l}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(t,r){return this.connection.Wo("Write",t,r)}g_(t){return Rt(!!t.streamToken),this.lastStreamToken=t.streamToken,Rt(!t.writeResults||t.writeResults.length===0),this.listener.D_()}onNext(t){Rt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.a_.reset();const r=kA(t.writeResults,t.commitTime),a=Er(t.commitTime);return this.listener.v_(a,r)}C_(){const t={};t.database=p0(this.serializer),this.I_(t)}b_(t){const r={streamToken:this.lastStreamToken,writes:t.map(a=>S3(this.serializer,a))};this.I_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y8{}class b8 extends y8{constructor(t,r,a,i){super(),this.authCredentials=t,this.appCheckCredentials=r,this.connection=a,this.serializer=i,this.F_=!1}M_(){if(this.F_)throw new qe(Ie.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,r,a,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,o])=>this.connection.So(t,h0(r,a),i,l,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===Ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new qe(Ie.UNKNOWN,l.toString())})}Co(t,r,a,i,l){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Co(t,h0(r,a),i,o,c,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new qe(Ie.UNKNOWN,o.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class v8{constructor(t,r){this.asyncQueue=t,this.onlineStateHandler=r,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(t){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.L_("Offline")))}set(t){this.Q_(),this.x_=0,t==="Online"&&(this.N_=!1),this.L_(t)}L_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}k_(t){const r=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Xa(r),this.N_=!1):Qe("OnlineStateTracker",r)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ei="RemoteStore";class j8{constructor(t,r,a,i,l){this.localStore=t,this.datastore=r,this.asyncQueue=a,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=l,this.z_.To(o=>{a.enqueueAndForget(async()=>{zi(this)&&(Qe(Ei,"Restarting streams for network reachability change."),await async function(d){const x=ft(d);x.W_.add(4),await nd(x),x.j_.set("Unknown"),x.W_.delete(4),await Im(x)}(this))})}),this.j_=new v8(a,i)}}async function Im(s){if(zi(s))for(const t of s.G_)await t(!0)}async function nd(s){for(const t of s.G_)await t(!1)}function L3(s,t){const r=ft(s);r.K_.has(t.targetId)||(r.K_.set(t.targetId,t),hg(r)?mg(r):rl(r).c_()&&xg(r,t))}function ug(s,t){const r=ft(s),a=rl(r);r.K_.delete(t),a.c_()&&O3(r,t),r.K_.size===0&&(a.c_()?a.P_():zi(r)&&r.j_.set("Unknown"))}function xg(s,t){if(s.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(xt.min())>0){const r=s.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}rl(s).y_(t)}function O3(s,t){s.H_.Ne(t),rl(s).w_(t)}function mg(s){s.H_=new pA({getRemoteKeysForTarget:t=>s.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>s.K_.get(t)||null,it:()=>s.datastore.serializer.databaseId}),rl(s).start(),s.j_.B_()}function hg(s){return zi(s)&&!rl(s).u_()&&s.K_.size>0}function zi(s){return ft(s).W_.size===0}function V3(s){s.H_=void 0}async function N8(s){s.j_.set("Online")}async function w8(s){s.K_.forEach((t,r)=>{xg(s,t)})}async function k8(s,t){V3(s),hg(s)?(s.j_.q_(t),mg(s)):s.j_.set("Unknown")}async function I8(s,t,r){if(s.j_.set("Online"),t instanceof N3&&t.state===2&&t.cause)try{await async function(i,l){const o=l.cause;for(const c of l.targetIds)i.K_.has(c)&&(await i.remoteSyncer.rejectListen(c,o),i.K_.delete(c),i.H_.removeTarget(c))}(s,t)}catch(a){Qe(Ei,"Failed to remove targets %s: %s ",t.targetIds.join(","),a),await Sx(s,a)}else if(t instanceof Tu?s.H_.We(t):t instanceof j3?s.H_.Ze(t):s.H_.je(t),!r.isEqual(xt.min()))try{const a=await R3(s.localStore);r.compareTo(a)>=0&&await function(l,o){const c=l.H_.ot(o);return c.targetChanges.forEach((d,x)=>{if(d.resumeToken.approximateByteSize()>0){const f=l.K_.get(x);f&&l.K_.set(x,f.withResumeToken(d.resumeToken,o))}}),c.targetMismatches.forEach((d,x)=>{const f=l.K_.get(d);if(!f)return;l.K_.set(d,f.withResumeToken(Us.EMPTY_BYTE_STRING,f.snapshotVersion)),O3(l,d);const j=new In(f.target,d,x,f.sequenceNumber);xg(l,j)}),l.remoteSyncer.applyRemoteEvent(c)}(s,r)}catch(a){Qe(Ei,"Failed to raise snapshot:",a),await Sx(s,a)}}async function Sx(s,t,r){if(!tl(t))throw t;s.W_.add(1),await nd(s),s.j_.set("Offline"),r||(r=()=>R3(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{Qe(Ei,"Retrying IndexedDB access"),await r(),s.W_.delete(1),await Im(s)})}function B3(s,t){return t().catch(r=>Sx(s,r,t))}async function Pm(s){const t=ft(s),r=Hn(t);let a=t.U_.length>0?t.U_[t.U_.length-1].batchId:Xf;for(;P8(t);)try{const i=await o8(t.localStore,a);if(i===null){t.U_.length===0&&r.P_();break}a=i.batchId,S8(t,i)}catch(i){await Sx(t,i)}z3(t)&&F3(t)}function P8(s){return zi(s)&&s.U_.length<10}function S8(s,t){s.U_.push(t);const r=Hn(s);r.c_()&&r.S_&&r.b_(t.mutations)}function z3(s){return zi(s)&&!Hn(s).u_()&&s.U_.length>0}function F3(s){Hn(s).start()}async function E8(s){Hn(s).C_()}async function C8(s){const t=Hn(s);for(const r of s.U_)t.b_(r.mutations)}async function T8(s,t,r){const a=s.U_.shift(),i=rg.from(a,t,r);await B3(s,()=>s.remoteSyncer.applySuccessfulWrite(i)),await Pm(s)}async function _8(s,t){t&&Hn(s).S_&&await async function(a,i){if(function(o){return b3(o)&&o!==Ie.ABORTED}(i.code)){const l=a.U_.shift();Hn(a).h_(),await B3(a,()=>a.remoteSyncer.rejectFailedWrite(l.batchId,i)),await Pm(a)}}(s,t),z3(s)&&F3(s)}async function Tj(s,t){const r=ft(s);r.asyncQueue.verifyOperationInProgress(),Qe(Ei,"RemoteStore received new credentials");const a=zi(r);r.W_.add(3),await nd(r),a&&r.j_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(t),r.W_.delete(3),await Im(r)}async function D8(s,t){const r=ft(s);t?(r.W_.delete(2),await Im(r)):t||(r.W_.add(2),await nd(r),r.j_.set("Unknown"))}function rl(s){return s.J_||(s.J_=function(r,a,i){const l=ft(r);return l.M_(),new f8(a,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,i)}(s.datastore,s.asyncQueue,{xo:N8.bind(null,s),No:w8.bind(null,s),Lo:k8.bind(null,s),p_:I8.bind(null,s)}),s.G_.push(async t=>{t?(s.J_.h_(),hg(s)?mg(s):s.j_.set("Unknown")):(await s.J_.stop(),V3(s))})),s.J_}function Hn(s){return s.Y_||(s.Y_=function(r,a,i){const l=ft(r);return l.M_(),new g8(a,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,i)}(s.datastore,s.asyncQueue,{xo:()=>Promise.resolve(),No:E8.bind(null,s),Lo:_8.bind(null,s),D_:C8.bind(null,s),v_:T8.bind(null,s)}),s.G_.push(async t=>{t?(s.Y_.h_(),await Pm(s)):(await s.Y_.stop(),s.U_.length>0&&(Qe(Ei,`Stopping write stream with ${s.U_.length} pending writes`),s.U_=[]))})),s.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(t,r,a,i,l){this.asyncQueue=t,this.timerId=r,this.targetTimeMs=a,this.op=i,this.removalCallback=l,this.deferred=new ya,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,r,a,i,l){const o=Date.now()+a,c=new pg(t,r,o,i,l);return c.start(a),c}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new qe(Ie.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fg(s,t){if(Xa("AsyncQueue",`${t}: ${s}`),tl(s))return new qe(Ie.UNAVAILABLE,`${t}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{static emptySet(t){return new Po(t.comparator)}constructor(t){this.comparator=t?(r,a)=>t(r,a)||dt.comparator(r.key,a.key):(r,a)=>dt.comparator(r.key,a.key),this.keyedMap=Vl(),this.sortedSet=new ds(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const r=this.keyedMap.get(t);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((r,a)=>(t(r),!1))}add(t){const r=this.delete(t.key);return r.copy(r.keyedMap.insert(t.key,t),r.sortedSet.insert(t,null))}delete(t){const r=this.get(t);return r?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(r)):this}isEqual(t){if(!(t instanceof Po)||this.size!==t.size)return!1;const r=this.sortedSet.getIterator(),a=t.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,l=a.getNext().key;if(!i.isEqual(l))return!1}return!0}toString(){const t=[];return this.forEach(r=>{t.push(r.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,r){const a=new Po;return a.comparator=this.comparator,a.keyedMap=t,a.sortedSet=r,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(){this.Z_=new ds(dt.comparator)}track(t){const r=t.doc.key,a=this.Z_.get(r);a?t.type!==0&&a.type===3?this.Z_=this.Z_.insert(r,t):t.type===3&&a.type!==1?this.Z_=this.Z_.insert(r,{type:a.type,doc:t.doc}):t.type===2&&a.type===2?this.Z_=this.Z_.insert(r,{type:2,doc:t.doc}):t.type===2&&a.type===0?this.Z_=this.Z_.insert(r,{type:0,doc:t.doc}):t.type===1&&a.type===0?this.Z_=this.Z_.remove(r):t.type===1&&a.type===2?this.Z_=this.Z_.insert(r,{type:1,doc:a.doc}):t.type===0&&a.type===1?this.Z_=this.Z_.insert(r,{type:2,doc:t.doc}):ut():this.Z_=this.Z_.insert(r,t)}X_(){const t=[];return this.Z_.inorderTraversal((r,a)=>{t.push(a)}),t}}class $o{constructor(t,r,a,i,l,o,c,d,x){this.query=t,this.docs=r,this.oldDocs=a,this.docChanges=i,this.mutatedKeys=l,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=x}static fromInitialDocuments(t,r,a,i,l){const o=[];return r.forEach(c=>{o.push({type:0,doc:c})}),new $o(t,r,Po.emptySet(r),o,a,i,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ym(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const r=this.docChanges,a=t.docChanges;if(r.length!==a.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==a[i].type||!r[i].doc.isEqual(a[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A8{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(t=>t.ra())}}class R8{constructor(){this.queries=Dj(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(r,a){const i=ft(r),l=i.queries;i.queries=Dj(),l.forEach((o,c)=>{for(const d of c.ta)d.onError(a)})})(this,new qe(Ie.ABORTED,"Firestore shutting down"))}}function Dj(){return new Bi(s=>a3(s),ym)}async function gg(s,t){const r=ft(s);let a=3;const i=t.query;let l=r.queries.get(i);l?!l.na()&&t.ra()&&(a=2):(l=new A8,a=t.ra()?0:1);try{switch(a){case 0:l.ea=await r.onListen(i,!0);break;case 1:l.ea=await r.onListen(i,!1);break;case 2:await r.onFirstRemoteStoreListen(i)}}catch(o){const c=fg(o,`Initialization of query '${Xi(t.query)}' failed`);return void t.onError(c)}r.queries.set(i,l),l.ta.push(t),t.sa(r.onlineState),l.ea&&t.oa(l.ea)&&bg(r)}async function yg(s,t){const r=ft(s),a=t.query;let i=3;const l=r.queries.get(a);if(l){const o=l.ta.indexOf(t);o>=0&&(l.ta.splice(o,1),l.ta.length===0?i=t.ra()?0:1:!l.na()&&t.ra()&&(i=2))}switch(i){case 0:return r.queries.delete(a),r.onUnlisten(a,!0);case 1:return r.queries.delete(a),r.onUnlisten(a,!1);case 2:return r.onLastRemoteStoreUnlisten(a);default:return}}function M8(s,t){const r=ft(s);let a=!1;for(const i of t){const l=i.query,o=r.queries.get(l);if(o){for(const c of o.ta)c.oa(i)&&(a=!0);o.ea=i}}a&&bg(r)}function L8(s,t,r){const a=ft(s),i=a.queries.get(t);if(i)for(const l of i.ta)l.onError(r);a.queries.delete(t)}function bg(s){s.ia.forEach(t=>{t.next()})}var y0,Aj;(Aj=y0||(y0={}))._a="default",Aj.Cache="cache";class vg{constructor(t,r,a){this.query=t,this.aa=r,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=a||{}}oa(t){if(!this.options.includeMetadataChanges){const a=[];for(const i of t.docChanges)i.type!==3&&a.push(i);t=new $o(t.query,t.docs,t.oldDocs,a,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let r=!1;return this.ua?this.la(t)&&(this.aa.next(t),r=!0):this.ha(t,this.onlineState)&&(this.Pa(t),r=!0),this.ca=t,r}onError(t){this.aa.error(t)}sa(t){this.onlineState=t;let r=!1;return this.ca&&!this.ua&&this.ha(this.ca,t)&&(this.Pa(this.ca),r=!0),r}ha(t,r){if(!t.fromCache||!this.ra())return!0;const a=r!=="Offline";return(!this.options.Ta||!a)&&(!t.docs.isEmpty()||t.hasCachedResults||r==="Offline")}la(t){if(t.docChanges.length>0)return!0;const r=this.ca&&this.ca.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}Pa(t){t=$o.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ua=!0,this.aa.next(t)}ra(){return this.options.source!==y0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(t){this.key=t}}class $3{constructor(t){this.key=t}}class O8{constructor(t,r){this.query=t,this.fa=r,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Ct(),this.mutatedKeys=Ct(),this.ya=n3(t),this.wa=new Po(this.ya)}get Sa(){return this.fa}ba(t,r){const a=r?r.Da:new _j,i=r?r.wa:this.wa;let l=r?r.mutatedKeys:this.mutatedKeys,o=i,c=!1;const d=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,x=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((f,j)=>{const w=i.get(f),S=bm(this.query,j)?j:null,g=!!w&&this.mutatedKeys.has(w.key),V=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let E=!1;w&&S?w.data.isEqual(S.data)?g!==V&&(a.track({type:3,doc:S}),E=!0):this.va(w,S)||(a.track({type:2,doc:S}),E=!0,(d&&this.ya(S,d)>0||x&&this.ya(S,x)<0)&&(c=!0)):!w&&S?(a.track({type:0,doc:S}),E=!0):w&&!S&&(a.track({type:1,doc:w}),E=!0,(d||x)&&(c=!0)),E&&(S?(o=o.add(S),l=V?l.add(f):l.delete(f)):(o=o.delete(f),l=l.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),l=l.delete(f.key),a.track({type:1,doc:f})}return{wa:o,Da:a,ls:c,mutatedKeys:l}}va(t,r){return t.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(t,r,a,i){const l=this.wa;this.wa=t.wa,this.mutatedKeys=t.mutatedKeys;const o=t.Da.X_();o.sort((f,j)=>function(S,g){const V=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ut()}};return V(S)-V(g)}(f.type,j.type)||this.ya(f.doc,j.doc)),this.Ca(a),i=i!=null&&i;const c=r&&!i?this.Fa():[],d=this.pa.size===0&&this.current&&!i?1:0,x=d!==this.ga;return this.ga=d,o.length!==0||x?{snapshot:new $o(this.query,t.wa,l,o,t.mutatedKeys,d===0,x,!1,!!a&&a.resumeToken.approximateByteSize()>0),Ma:c}:{Ma:c}}sa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new _j,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(t){return!this.fa.has(t)&&!!this.wa.has(t)&&!this.wa.get(t).hasLocalMutations}Ca(t){t&&(t.addedDocuments.forEach(r=>this.fa=this.fa.add(r)),t.modifiedDocuments.forEach(r=>{}),t.removedDocuments.forEach(r=>this.fa=this.fa.delete(r)),this.current=t.current)}Fa(){if(!this.current)return[];const t=this.pa;this.pa=Ct(),this.wa.forEach(a=>{this.xa(a.key)&&(this.pa=this.pa.add(a.key))});const r=[];return t.forEach(a=>{this.pa.has(a)||r.push(new $3(a))}),this.pa.forEach(a=>{t.has(a)||r.push(new U3(a))}),r}Oa(t){this.fa=t.gs,this.pa=Ct();const r=this.ba(t.documents);return this.applyChanges(r,!0)}Na(){return $o.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const jg="SyncEngine";class V8{constructor(t,r,a){this.query=t,this.targetId=r,this.view=a}}class B8{constructor(t){this.key=t,this.Ba=!1}}class z8{constructor(t,r,a,i,l,o){this.localStore=t,this.remoteStore=r,this.eventManager=a,this.sharedClientState=i,this.currentUser=l,this.maxConcurrentLimboResolutions=o,this.La={},this.ka=new Bi(c=>a3(c),ym),this.qa=new Map,this.Qa=new Set,this.$a=new ds(dt.comparator),this.Ua=new Map,this.Ka=new ig,this.Wa={},this.Ga=new Map,this.za=Uo.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function F8(s,t,r=!0){const a=Q3(s);let i;const l=a.ka.get(t);return l?(a.sharedClientState.addLocalQueryTarget(l.targetId),i=l.view.Na()):i=await W3(a,t,r,!0),i}async function U8(s,t){const r=Q3(s);await W3(r,t,!0,!1)}async function W3(s,t,r,a){const i=await l8(s.localStore,ba(t)),l=i.targetId,o=s.sharedClientState.addLocalQueryTarget(l,r);let c;return a&&(c=await $8(s,t,l,o==="current",i.resumeToken)),s.isPrimaryClient&&r&&L3(s.remoteStore,i),c}async function $8(s,t,r,a,i){s.Ha=(j,w,S)=>async function(V,E,_,M){let R=E.view.ba(_);R.ls&&(R=await Ij(V.localStore,E.query,!1).then(({documents:O})=>E.view.ba(O,R)));const q=M&&M.targetChanges.get(E.targetId),G=M&&M.targetMismatches.get(E.targetId)!=null,Y=E.view.applyChanges(R,V.isPrimaryClient,q,G);return Mj(V,E.targetId,Y.Ma),Y.snapshot}(s,j,w,S);const l=await Ij(s.localStore,t,!0),o=new O8(t,l.gs),c=o.ba(l.documents),d=ad.createSynthesizedTargetChangeForCurrentChange(r,a&&s.onlineState!=="Offline",i),x=o.applyChanges(c,s.isPrimaryClient,d);Mj(s,r,x.Ma);const f=new V8(t,r,o);return s.ka.set(t,f),s.qa.has(r)?s.qa.get(r).push(t):s.qa.set(r,[t]),x.snapshot}async function W8(s,t,r){const a=ft(s),i=a.ka.get(t),l=a.qa.get(i.targetId);if(l.length>1)return a.qa.set(i.targetId,l.filter(o=>!ym(o,t))),void a.ka.delete(t);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(i.targetId),a.sharedClientState.isActiveQueryTarget(i.targetId)||await f0(a.localStore,i.targetId,!1).then(()=>{a.sharedClientState.clearQueryState(i.targetId),r&&ug(a.remoteStore,i.targetId),b0(a,i.targetId)}).catch(el)):(b0(a,i.targetId),await f0(a.localStore,i.targetId,!0))}async function q8(s,t){const r=ft(s),a=r.ka.get(t),i=r.qa.get(a.targetId);r.isPrimaryClient&&i.length===1&&(r.sharedClientState.removeLocalQueryTarget(a.targetId),ug(r.remoteStore,a.targetId))}async function H8(s,t,r){const a=Z8(s);try{const i=await function(o,c){const d=ft(o),x=Qt.now(),f=c.reduce((S,g)=>S.add(g.key),Ct());let j,w;return d.persistence.runTransaction("Locally write mutations","readwrite",S=>{let g=Ja(),V=Ct();return d.ds.getEntries(S,f).next(E=>{g=E,g.forEach((_,M)=>{M.isValidDocument()||(V=V.add(_))})}).next(()=>d.localDocuments.getOverlayedDocuments(S,g)).next(E=>{j=E;const _=[];for(const M of c){const R=dA(M,j.get(M.key).overlayedDocument);R!=null&&_.push(new ti(M.key,R,Y4(R.value.mapValue),Vs.exists(!0)))}return d.mutationQueue.addMutationBatch(S,x,_,c)}).next(E=>{w=E;const _=E.applyToLocalDocumentSet(j,V);return d.documentOverlayCache.saveOverlays(S,E.batchId,_)})}).then(()=>({batchId:w.batchId,changes:o3(j)}))}(a.localStore,t);a.sharedClientState.addPendingMutation(i.batchId),function(o,c,d){let x=o.Wa[o.currentUser.toKey()];x||(x=new ds(vt)),x=x.insert(c,d),o.Wa[o.currentUser.toKey()]=x}(a,i.batchId,r),await id(a,i.changes),await Pm(a.remoteStore)}catch(i){const l=fg(i,"Failed to persist write");r.reject(l)}}async function q3(s,t){const r=ft(s);try{const a=await n8(r.localStore,t);t.targetChanges.forEach((i,l)=>{const o=r.Ua.get(l);o&&(Rt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ba=!0:i.modifiedDocuments.size>0?Rt(o.Ba):i.removedDocuments.size>0&&(Rt(o.Ba),o.Ba=!1))}),await id(r,a,t)}catch(a){await el(a)}}function Rj(s,t,r){const a=ft(s);if(a.isPrimaryClient&&r===0||!a.isPrimaryClient&&r===1){const i=[];a.ka.forEach((l,o)=>{const c=o.view.sa(t);c.snapshot&&i.push(c.snapshot)}),function(o,c){const d=ft(o);d.onlineState=c;let x=!1;d.queries.forEach((f,j)=>{for(const w of j.ta)w.sa(c)&&(x=!0)}),x&&bg(d)}(a.eventManager,t),i.length&&a.La.p_(i),a.onlineState=t,a.isPrimaryClient&&a.sharedClientState.setOnlineState(t)}}async function G8(s,t,r){const a=ft(s);a.sharedClientState.updateQueryState(t,"rejected",r);const i=a.Ua.get(t),l=i&&i.key;if(l){let o=new ds(dt.comparator);o=o.insert(l,Cs.newNoDocument(l,xt.min()));const c=Ct().add(l),d=new wm(xt.min(),new Map,new ds(vt),o,c);await q3(a,d),a.$a=a.$a.remove(l),a.Ua.delete(t),Ng(a)}else await f0(a.localStore,t,!1).then(()=>b0(a,t,r)).catch(el)}async function K8(s,t){const r=ft(s),a=t.batch.batchId;try{const i=await a8(r.localStore,t);G3(r,a,null),H3(r,a),r.sharedClientState.updateMutationState(a,"acknowledged"),await id(r,i)}catch(i){await el(i)}}async function Q8(s,t,r){const a=ft(s);try{const i=await function(o,c){const d=ft(o);return d.persistence.runTransaction("Reject batch","readwrite-primary",x=>{let f;return d.mutationQueue.lookupMutationBatch(x,c).next(j=>(Rt(j!==null),f=j.keys(),d.mutationQueue.removeMutationBatch(x,j))).next(()=>d.mutationQueue.performConsistencyCheck(x)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(x,f,c)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(x,f)).next(()=>d.localDocuments.getDocuments(x,f))})}(a.localStore,t);G3(a,t,r),H3(a,t),a.sharedClientState.updateMutationState(t,"rejected",r),await id(a,i)}catch(i){await el(i)}}function H3(s,t){(s.Ga.get(t)||[]).forEach(r=>{r.resolve()}),s.Ga.delete(t)}function G3(s,t,r){const a=ft(s);let i=a.Wa[a.currentUser.toKey()];if(i){const l=i.get(t);l&&(r?l.reject(r):l.resolve(),i=i.remove(t)),a.Wa[a.currentUser.toKey()]=i}}function b0(s,t,r=null){s.sharedClientState.removeLocalQueryTarget(t);for(const a of s.qa.get(t))s.ka.delete(a),r&&s.La.Ja(a,r);s.qa.delete(t),s.isPrimaryClient&&s.Ka.br(t).forEach(a=>{s.Ka.containsKey(a)||K3(s,a)})}function K3(s,t){s.Qa.delete(t.path.canonicalString());const r=s.$a.get(t);r!==null&&(ug(s.remoteStore,r),s.$a=s.$a.remove(t),s.Ua.delete(r),Ng(s))}function Mj(s,t,r){for(const a of r)a instanceof U3?(s.Ka.addReference(a.key,t),Y8(s,a)):a instanceof $3?(Qe(jg,"Document no longer in limbo: "+a.key),s.Ka.removeReference(a.key,t),s.Ka.containsKey(a.key)||K3(s,a.key)):ut()}function Y8(s,t){const r=t.key,a=r.path.canonicalString();s.$a.get(r)||s.Qa.has(a)||(Qe(jg,"New document in limbo: "+r),s.Qa.add(a),Ng(s))}function Ng(s){for(;s.Qa.size>0&&s.$a.size<s.maxConcurrentLimboResolutions;){const t=s.Qa.values().next().value;s.Qa.delete(t);const r=new dt(Gt.fromString(t)),a=s.za.next();s.Ua.set(a,new B8(r)),s.$a=s.$a.insert(r,a),L3(s.remoteStore,new In(ba(gm(r.path)),a,"TargetPurposeLimboResolution",pm.ae))}}async function id(s,t,r){const a=ft(s),i=[],l=[],o=[];a.ka.isEmpty()||(a.ka.forEach((c,d)=>{o.push(a.Ha(d,t,r).then(x=>{var f;if((x||r)&&a.isPrimaryClient){const j=x?!x.fromCache:(f=r==null?void 0:r.targetChanges.get(d.targetId))===null||f===void 0?void 0:f.current;a.sharedClientState.updateQueryState(d.targetId,j?"current":"not-current")}if(x){i.push(x);const j=lg.Yi(d.targetId,x);l.push(j)}}))}),await Promise.all(o),a.La.p_(i),await async function(d,x){const f=ft(d);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",j=>Ee.forEach(x,w=>Ee.forEach(w.Hi,S=>f.persistence.referenceDelegate.addReference(j,w.targetId,S)).next(()=>Ee.forEach(w.Ji,S=>f.persistence.referenceDelegate.removeReference(j,w.targetId,S)))))}catch(j){if(!tl(j))throw j;Qe(cg,"Failed to update sequence numbers: "+j)}for(const j of x){const w=j.targetId;if(!j.fromCache){const S=f.Ts.get(w),g=S.snapshotVersion,V=S.withLastLimboFreeSnapshotVersion(g);f.Ts=f.Ts.insert(w,V)}}}(a.localStore,l))}async function X8(s,t){const r=ft(s);if(!r.currentUser.isEqual(t)){Qe(jg,"User change. New user:",t.toKey());const a=await A3(r.localStore,t);r.currentUser=t,function(l,o){l.Ga.forEach(c=>{c.forEach(d=>{d.reject(new qe(Ie.CANCELLED,o))})}),l.Ga.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(t,a.removedBatchIds,a.addedBatchIds),await id(r,a.Rs)}}function J8(s,t){const r=ft(s),a=r.Ua.get(t);if(a&&a.Ba)return Ct().add(a.key);{let i=Ct();const l=r.qa.get(t);if(!l)return i;for(const o of l){const c=r.ka.get(o);i=i.unionWith(c.view.Sa)}return i}}function Q3(s){const t=ft(s);return t.remoteStore.remoteSyncer.applyRemoteEvent=q3.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=J8.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=G8.bind(null,t),t.La.p_=M8.bind(null,t.eventManager),t.La.Ja=L8.bind(null,t.eventManager),t}function Z8(s){const t=ft(s);return t.remoteStore.remoteSyncer.applySuccessfulWrite=K8.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Q8.bind(null,t),t}class Ex{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=km(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),await this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)}tu(t,r){return null}nu(t,r){return null}eu(t){return r8(this.persistence,new e8,t.initialUser,this.serializer)}Xa(t){return new D3(og.ri,this.serializer)}Za(t){return new d8}async terminate(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ex.provider={build:()=>new Ex};class e6 extends Ex{constructor(t){super(),this.cacheSizeBytes=t}tu(t,r){Rt(this.persistence.referenceDelegate instanceof Px);const a=this.persistence.referenceDelegate.garbageCollector;return new BA(a,t.asyncQueue,r)}Xa(t){const r=this.cacheSizeBytes!==void 0?ur.withCacheSize(this.cacheSizeBytes):ur.DEFAULT;return new D3(a=>Px.ri(a,r),this.serializer)}}class v0{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>Rj(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=X8.bind(null,this.syncEngine),await D8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new R8}()}createDatastore(t){const r=km(t.databaseInfo.databaseId),a=function(l){return new p8(l)}(t.databaseInfo);return function(l,o,c,d){return new b8(l,o,c,d)}(t.authCredentials,t.appCheckCredentials,a,r)}createRemoteStore(t){return function(a,i,l,o,c){return new j8(a,i,l,o,c)}(this.localStore,this.datastore,t.asyncQueue,r=>Rj(this.syncEngine,r,0),function(){return Ej.D()?new Ej:new u8}())}createSyncEngine(t,r){return function(i,l,o,c,d,x,f){const j=new z8(i,l,o,c,d,x);return f&&(j.ja=!0),j}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await async function(i){const l=ft(i);Qe(Ei,"RemoteStore shutting down."),l.W_.add(5),await nd(l),l.z_.shutdown(),l.j_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}v0.provider={build:()=>new v0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.iu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.iu(this.observer.error,t):Xa("Uncaught Error in snapshot listener:",t.toString()))}su(){this.muted=!0}iu(t,r){setTimeout(()=>{this.muted||t(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new qe(Ie.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await async function(i,l){const o=ft(i),c={documents:l.map(j=>Ix(o.serializer,j))},d=await o.Co("BatchGetDocuments",o.serializer.databaseId,Gt.emptyPath(),c,l.length),x=new Map;d.forEach(j=>{const w=NA(o.serializer,j);x.set(w.key.toString(),w)});const f=[];return l.forEach(j=>{const w=x.get(j.toString());Rt(!!w),f.push(w)}),f}(this.datastore,t);return r.forEach(a=>this.recordVersion(a)),r}set(t,r){this.write(r.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,r){try{this.write(r.toMutation(t,this.preconditionForUpdate(t)))}catch(a){this.lastTransactionError=a}this.writtenDocs.add(t.toString())}delete(t){this.write(new Nm(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,a)=>{const i=dt.fromPath(a);this.mutations.push(new y3(i,this.precondition(i)))}),await async function(a,i){const l=ft(a),o={writes:i.map(c=>S3(l.serializer,c))};await l.So("Commit",l.serializer.databaseId,Gt.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let r;if(t.isFoundDocument())r=t.version;else{if(!t.isNoDocument())throw ut();r=xt.min()}const a=this.readVersions.get(t.key.toString());if(a){if(!r.isEqual(a))throw new qe(Ie.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),r)}precondition(t){const r=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&r?r.isEqual(xt.min())?Vs.exists(!1):Vs.updateTime(r):Vs.none()}preconditionForUpdate(t){const r=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&r){if(r.isEqual(xt.min()))throw new qe(Ie.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Vs.updateTime(r)}return Vs.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6{constructor(t,r,a,i,l){this.asyncQueue=t,this.datastore=r,this.options=a,this.updateFunction=i,this.deferred=l,this.Tu=a.maxAttempts,this.a_=new dg(this.asyncQueue,"transaction_retry")}Iu(){this.Tu-=1,this.Eu()}Eu(){this.a_.Xo(async()=>{const t=new t6(this.datastore),r=this.du(t);r&&r.then(a=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(a)}).catch(i=>{this.Au(i)}))}).catch(a=>{this.Au(a)})})}du(t){try{const r=this.updateFunction(t);return!sd(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}Au(t){this.Tu>0&&this.Ru(t)?(this.Tu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Eu(),Promise.resolve()))):this.deferred.reject(t)}Ru(t){if(t.name==="FirebaseError"){const r=t.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!b3(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gn="FirestoreClient";class r6{constructor(t,r,a,i,l){this.authCredentials=t,this.appCheckCredentials=r,this.asyncQueue=a,this.databaseInfo=i,this.user=Ys.UNAUTHENTICATED,this.clientId=B4.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(a,async o=>{Qe(Gn,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(a,o=>(Qe(Gn,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ya;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(r){const a=fg(r,"Failed to shutdown persistence");t.reject(a)}}),t.promise}}async function Mh(s,t){s.asyncQueue.verifyOperationInProgress(),Qe(Gn,"Initializing OfflineComponentProvider");const r=s.configuration;await t.initialize(r);let a=r.initialUser;s.setCredentialChangeListener(async i=>{a.isEqual(i)||(await A3(t.localStore,i),a=i)}),t.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=t}async function Lj(s,t){s.asyncQueue.verifyOperationInProgress();const r=await a6(s);Qe(Gn,"Initializing OnlineComponentProvider"),await t.initialize(r,s.configuration),s.setCredentialChangeListener(a=>Tj(t.remoteStore,a)),s.setAppCheckTokenChangeListener((a,i)=>Tj(t.remoteStore,i)),s._onlineComponents=t}async function a6(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){Qe(Gn,"Using user provided OfflineComponentProvider");try{await Mh(s,s._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!function(i){return i.name==="FirebaseError"?i.code===Ie.FAILED_PRECONDITION||i.code===Ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(r))throw r;Vo("Error using user provided cache. Falling back to memory cache: "+r),await Mh(s,new Ex)}}else Qe(Gn,"Using default OfflineComponentProvider"),await Mh(s,new e6(void 0));return s._offlineComponents}async function kg(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(Qe(Gn,"Using user provided OnlineComponentProvider"),await Lj(s,s._uninitializedComponentsProvider._online)):(Qe(Gn,"Using default OnlineComponentProvider"),await Lj(s,new v0))),s._onlineComponents}function n6(s){return kg(s).then(t=>t.syncEngine)}function i6(s){return kg(s).then(t=>t.datastore)}async function Cx(s){const t=await kg(s),r=t.eventManager;return r.onListen=F8.bind(null,t.syncEngine),r.onUnlisten=W8.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=U8.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=q8.bind(null,t.syncEngine),r}function o6(s,t,r={}){const a=new ya;return s.asyncQueue.enqueueAndForget(async()=>function(l,o,c,d,x){const f=new wg({next:w=>{f.su(),o.enqueueAndForget(()=>yg(l,j));const S=w.docs.has(c);!S&&w.fromCache?x.reject(new qe(Ie.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&w.fromCache&&d&&d.source==="server"?x.reject(new qe(Ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):x.resolve(w)},error:w=>x.reject(w)}),j=new vg(gm(c.path),f,{includeMetadataChanges:!0,Ta:!0});return gg(l,j)}(await Cx(s),s.asyncQueue,t,r,a)),a.promise}function l6(s,t,r={}){const a=new ya;return s.asyncQueue.enqueueAndForget(async()=>function(l,o,c,d,x){const f=new wg({next:w=>{f.su(),o.enqueueAndForget(()=>yg(l,j)),w.fromCache&&d.source==="server"?x.reject(new qe(Ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):x.resolve(w)},error:w=>x.reject(w)}),j=new vg(c,f,{includeMetadataChanges:!0,Ta:!0});return gg(l,j)}(await Cx(s),s.asyncQueue,t,r,a)),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y3(s){const t={};return s.timeoutSeconds!==void 0&&(t.timeoutSeconds=s.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oj=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X3(s,t,r){if(!r)throw new qe(Ie.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${t}.`)}function c6(s,t,r,a){if(t===!0&&a===!0)throw new qe(Ie.INVALID_ARGUMENT,`${s} and ${r} cannot be used together.`)}function Vj(s){if(!dt.isDocumentKey(s))throw new qe(Ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Bj(s){if(dt.isDocumentKey(s))throw new qe(Ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Sm(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const t=function(a){return a.constructor?a.constructor.name:null}(s);return t?`a custom ${t} object`:"an object"}}return typeof s=="function"?"a function":ut()}function lr(s,t){if("_delegate"in s&&(s=s._delegate),!(s instanceof t)){if(t.name===s.constructor.name)throw new qe(Ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Sm(s);throw new qe(Ie.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return s}function d6(s,t){if(t<=0)throw new qe(Ie.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J3="firestore.googleapis.com",zj=!0;class Fj{constructor(t){var r,a;if(t.host===void 0){if(t.ssl!==void 0)throw new qe(Ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=J3,this.ssl=zj}else this.host=t.host,this.ssl=(r=t.ssl)!==null&&r!==void 0?r:zj;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=_3;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<OA)throw new qe(Ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}c6("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Y3((a=t.experimentalLongPollingOptions)!==null&&a!==void 0?a:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new qe(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new qe(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new qe(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(a,i){return a.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Em{constructor(t,r,a,i){this._authCredentials=t,this._appCheckCredentials=r,this._databaseId=a,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Fj({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new qe(Ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new qe(Ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Fj(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(a){if(!a)return new yD;switch(a.type){case"firstParty":return new ND(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new qe(Ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const a=Oj.get(r);a&&(Qe("ComponentProvider","Removing Datastore"),Oj.delete(r),a.terminate())}(this),Promise.resolve()}}function u6(s,t,r,a={}){var i;const l=(s=lr(s,Em))._getSettings(),o=Object.assign(Object.assign({},l),{emulatorOptions:s._getEmulatorOptions()}),c=`${t}:${r}`;l.host!==J3&&l.host!==c&&Vo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},l),{host:c,ssl:!1,emulatorOptions:a});if(!Fn(d,o)&&(s._setSettings(d),a.mockUserToken)){let x,f;if(typeof a.mockUserToken=="string")x=a.mockUserToken,f=Ys.MOCK_USER;else{x=j4(a.mockUserToken,(i=s._app)===null||i===void 0?void 0:i.options.projectId);const j=a.mockUserToken.sub||a.mockUserToken.user_id;if(!j)throw new qe(Ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Ys(j)}s._authCredentials=new bD(new O4(x,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(t,r,a){this.converter=r,this._query=a,this.type="query",this.firestore=t}withConverter(t){return new an(this.firestore,t,this._query)}}class zs{constructor(t,r,a){this.converter=r,this._key=a,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vn(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new zs(this.firestore,t,this._key)}}class Vn extends an{constructor(t,r,a){super(t,r,gm(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new zs(this.firestore,null,new dt(t))}withConverter(t){return new Vn(this.firestore,t,this._path)}}function Z(s,t,...r){if(s=Yt(s),X3("collection","path",t),s instanceof Em){const a=Gt.fromString(t,...r);return Bj(a),new Vn(s,null,a)}{if(!(s instanceof zs||s instanceof Vn))throw new qe(Ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(Gt.fromString(t,...r));return Bj(a),new Vn(s.firestore,null,a)}}function B(s,t,...r){if(s=Yt(s),arguments.length===1&&(t=B4.newId()),X3("doc","path",t),s instanceof Em){const a=Gt.fromString(t,...r);return Vj(a),new zs(s,null,new dt(a))}{if(!(s instanceof zs||s instanceof Vn))throw new qe(Ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(Gt.fromString(t,...r));return Vj(a),new zs(s.firestore,s instanceof Vn?s.converter:null,new dt(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uj="AsyncQueue";class $j{constructor(t=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new dg(this,"async_queue_retry"),this.Su=()=>{const a=Rh();a&&Qe(Uj,"Visibility state changed to "+a.visibilityState),this.a_.t_()},this.bu=t;const r=Rh();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Du(),this.vu(t)}enterRestrictedMode(t){if(!this.mu){this.mu=!0,this.yu=t||!1;const r=Rh();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Su)}}enqueue(t){if(this.Du(),this.mu)return new Promise(()=>{});const r=new ya;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Vu.push(t),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(t){if(!tl(t))throw t;Qe(Uj,"Operation failed with retryable error: "+t)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(t){const r=this.bu.then(()=>(this.pu=!0,t().catch(a=>{this.gu=a,this.pu=!1;const i=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(a);throw Xa("INTERNAL UNHANDLED ERROR: ",i),a}).then(a=>(this.pu=!1,a))));return this.bu=r,r}enqueueAfterDelay(t,r,a){this.Du(),this.wu.indexOf(t)>-1&&(r=0);const i=pg.createAndSchedule(this,t,r,a,l=>this.Fu(l));return this.fu.push(i),i}Du(){this.gu&&ut()}verifyOperationInProgress(){}async Mu(){let t;do t=this.bu,await t;while(t!==this.bu)}xu(t){for(const r of this.fu)if(r.timerId===t)return!0;return!1}Ou(t){return this.Mu().then(()=>{this.fu.sort((r,a)=>r.targetTimeMs-a.targetTimeMs);for(const r of this.fu)if(r.skipDelay(),t!=="all"&&r.timerId===t)break;return this.Mu()})}Nu(t){this.wu.push(t)}Fu(t){const r=this.fu.indexOf(t);this.fu.splice(r,1)}}function Wj(s){return function(r,a){if(typeof r!="object"||r===null)return!1;const i=r;for(const l of a)if(l in i&&typeof i[l]=="function")return!0;return!1}(s,["next","error","complete"])}class Sa extends Em{constructor(t,r,a,i){super(t,r,a,i),this.type="firestore",this._queue=new $j,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new $j(t),this._firestoreClient=void 0,await t}}}function x6(s,t){const r=typeof s=="object"?s:hm(),a=typeof s=="string"?s:t||vx,i=Zn(r,"firestore").getImmediate({identifier:a});if(!i._initialized){const l=y4("firestore");l&&u6(i,...l)}return i}function od(s){if(s._terminated)throw new qe(Ie.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||m6(s),s._firestoreClient}function m6(s){var t,r,a;const i=s._freezeSettings(),l=function(c,d,x,f){return new OD(c,d,x,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,Y3(f.experimentalLongPollingOptions),f.useFetchStreams)}(s._databaseId,((t=s._app)===null||t===void 0?void 0:t.options.appId)||"",s._persistenceKey,i);s._componentsProvider||!((r=i.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((a=i.localCache)===null||a===void 0)&&a._onlineComponentProvider)&&(s._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),s._firestoreClient=new r6(s._authCredentials,s._appCheckCredentials,s._queue,l,s._componentsProvider&&function(c){const d=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(d),_online:d}}(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ci(Us.fromBase64String(t))}catch(r){throw new qe(Ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(t){return new Ci(Us.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(...t){for(let r=0;r<t.length;++r)if(t[r].length===0)throw new qe(Ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Os(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(t,r){if(!isFinite(t)||t<-90||t>90)throw new qe(Ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(r)||r<-180||r>180)throw new qe(Ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=t,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return vt(this._lat,t._lat)||vt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(t){this._values=(t||[]).map(r=>r)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(a,i){if(a.length!==i.length)return!1;for(let l=0;l<a.length;++l)if(a[l]!==i[l])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h6=/^__.*__$/;class p6{constructor(t,r,a){this.data=t,this.fieldMask=r,this.fieldTransforms=a}toMutation(t,r){return this.fieldMask!==null?new ti(t,this.data,this.fieldMask,r,this.fieldTransforms):new rd(t,this.data,r,this.fieldTransforms)}}class Z3{constructor(t,r,a){this.data=t,this.fieldMask=r,this.fieldTransforms=a}toMutation(t,r){return new ti(t,this.data,this.fieldMask,r,this.fieldTransforms)}}function ek(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ut()}}class Sg{constructor(t,r,a,i,l,o){this.settings=t,this.databaseId=r,this.serializer=a,this.ignoreUndefinedProperties=i,l===void 0&&this.Bu(),this.fieldTransforms=l||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(t){return new Sg(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(t){var r;const a=(r=this.path)===null||r===void 0?void 0:r.child(t),i=this.ku({path:a,Qu:!1});return i.$u(t),i}Uu(t){var r;const a=(r=this.path)===null||r===void 0?void 0:r.child(t),i=this.ku({path:a,Qu:!1});return i.Bu(),i}Ku(t){return this.ku({path:void 0,Qu:!0})}Wu(t){return Tx(t,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(t){return this.fieldMask.find(r=>t.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>t.isPrefixOf(r.field))!==void 0}Bu(){if(this.path)for(let t=0;t<this.path.length;t++)this.$u(this.path.get(t))}$u(t){if(t.length===0)throw this.Wu("Document fields must not be empty");if(ek(this.Lu)&&h6.test(t))throw this.Wu('Document fields cannot begin and end with "__"')}}class f6{constructor(t,r,a){this.databaseId=t,this.ignoreUndefinedProperties=r,this.serializer=a||km(t)}ju(t,r,a,i=!1){return new Sg({Lu:t,methodName:r,zu:a,path:Os.emptyPath(),Qu:!1,Gu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function dd(s){const t=s._freezeSettings(),r=km(s._databaseId);return new f6(s._databaseId,!!t.ignoreUndefinedProperties,r)}function Eg(s,t,r,a,i,l={}){const o=s.ju(l.merge||l.mergeFields?2:0,t,r,i);_g("Data must be an object, but it was:",o,a);const c=rk(a,o);let d,x;if(l.merge)d=new Pr(o.fieldMask),x=o.fieldTransforms;else if(l.mergeFields){const f=[];for(const j of l.mergeFields){const w=j0(t,j,r);if(!o.contains(w))throw new qe(Ie.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);nk(f,w)||f.push(w)}d=new Pr(f),x=o.fieldTransforms.filter(j=>d.covers(j.field))}else d=null,x=o.fieldTransforms;return new p6(new nr(c),d,x)}class Cm extends cd{_toFieldTransform(t){if(t.Lu!==2)throw t.Lu===1?t.Wu(`${this._methodName}() can only appear at the top level of your update data`):t.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Cm}}class Cg extends cd{_toFieldTransform(t){return new p3(t.path,new Rc)}isEqual(t){return t instanceof Cg}}class Tg extends cd{constructor(t,r){super(t),this.Ju=r}_toFieldTransform(t){const r=new Oc(t.serializer,d3(t.serializer,this.Ju));return new p3(t.path,r)}isEqual(t){return t instanceof Tg&&this.Ju===t.Ju}}function tk(s,t,r,a){const i=s.ju(1,t,r);_g("Data must be an object, but it was:",i,a);const l=[],o=nr.empty();ei(a,(d,x)=>{const f=Dg(t,d,r);x=Yt(x);const j=i.Uu(f);if(x instanceof Cm)l.push(f);else{const w=ud(x,j);w!=null&&(l.push(f),o.set(f,w))}});const c=new Pr(l);return new Z3(o,c,i.fieldTransforms)}function sk(s,t,r,a,i,l){const o=s.ju(1,t,r),c=[j0(t,a,r)],d=[i];if(l.length%2!=0)throw new qe(Ie.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<l.length;w+=2)c.push(j0(t,l[w])),d.push(l[w+1]);const x=[],f=nr.empty();for(let w=c.length-1;w>=0;--w)if(!nk(x,c[w])){const S=c[w];let g=d[w];g=Yt(g);const V=o.Uu(S);if(g instanceof Cm)x.push(S);else{const E=ud(g,V);E!=null&&(x.push(S),f.set(S,E))}}const j=new Pr(x);return new Z3(f,j,o.fieldTransforms)}function g6(s,t,r,a=!1){return ud(r,s.ju(a?4:3,t))}function ud(s,t){if(ak(s=Yt(s)))return _g("Unsupported field value:",t,s),rk(s,t);if(s instanceof cd)return function(a,i){if(!ek(i.Lu))throw i.Wu(`${a._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Wu(`${a._methodName}() is not currently supported inside arrays`);const l=a._toFieldTransform(i);l&&i.fieldTransforms.push(l)}(s,t),null;if(s===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),s instanceof Array){if(t.settings.Qu&&t.Lu!==4)throw t.Wu("Nested arrays are not supported");return function(a,i){const l=[];let o=0;for(const c of a){let d=ud(c,i.Ku(o));d==null&&(d={nullValue:"NULL_VALUE"}),l.push(d),o++}return{arrayValue:{values:l}}}(s,t)}return function(a,i){if((a=Yt(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return d3(i.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const l=Qt.fromDate(a);return{timestampValue:kx(i.serializer,l)}}if(a instanceof Qt){const l=new Qt(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:kx(i.serializer,l)}}if(a instanceof Ig)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof Ci)return{bytesValue:w3(i.serializer,a._byteString)};if(a instanceof zs){const l=i.databaseId,o=a.firestore._databaseId;if(!o.isEqual(l))throw i.Wu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:ng(a.firestore._databaseId||i.databaseId,a._key.path)}}if(a instanceof Pg)return function(o,c){return{mapValue:{fields:{[G4]:{stringValue:Q4},[jx]:{arrayValue:{values:o.toArray().map(x=>{if(typeof x!="number")throw c.Wu("VectorValues must only contain numeric values.");return sg(c.serializer,x)})}}}}}}(a,i);throw i.Wu(`Unsupported field value: ${Sm(a)}`)}(s,t)}function rk(s,t){const r={};return F4(s)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ei(s,(a,i)=>{const l=ud(i,t.qu(a));l!=null&&(r[a]=l)}),{mapValue:{fields:r}}}function ak(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Qt||s instanceof Ig||s instanceof Ci||s instanceof zs||s instanceof cd||s instanceof Pg)}function _g(s,t,r){if(!ak(r)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(r)){const a=Sm(r);throw a==="an object"?t.Wu(s+" a custom object"):t.Wu(s+" "+a)}}function j0(s,t,r){if((t=Yt(t))instanceof ld)return t._internalPath;if(typeof t=="string")return Dg(s,t);throw Tx("Field path arguments must be of type string or ",s,!1,void 0,r)}const y6=new RegExp("[~\\*/\\[\\]]");function Dg(s,t,r){if(t.search(y6)>=0)throw Tx(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,r);try{return new ld(...t.split("."))._internalPath}catch{throw Tx(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,r)}}function Tx(s,t,r,a,i){const l=a&&!a.isEmpty(),o=i!==void 0;let c=`Function ${t}() called with invalid data`;r&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(l||o)&&(d+=" (found",l&&(d+=` in field ${a}`),o&&(d+=` in document ${i}`),d+=")"),new qe(Ie.INVALID_ARGUMENT,c+s+d)}function nk(s,t){return s.some(r=>r.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(t,r,a,i,l){this._firestore=t,this._userDataWriter=r,this._key=a,this._document=i,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new zs(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new b6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const r=this._document.data.field(Tm("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r)}}}class b6 extends _x{data(){return super.data()}}function Tm(s,t){return typeof t=="string"?Dg(s,t):t instanceof ld?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ik(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new qe(Ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ag{}class Rg extends Ag{}function ye(s,t,...r){let a=[];t instanceof Ag&&a.push(t),a=a.concat(r),function(l){const o=l.filter(d=>d instanceof Mg).length,c=l.filter(d=>d instanceof _m).length;if(o>1||o>0&&c>0)throw new qe(Ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(a);for(const i of a)s=i._apply(s);return s}class _m extends Rg{constructor(t,r,a){super(),this._field=t,this._op=r,this._value=a,this.type="where"}static _create(t,r,a){return new _m(t,r,a)}_apply(t){const r=this._parse(t);return ok(t._query,r),new an(t.firestore,t.converter,x0(t._query,r))}_parse(t){const r=dd(t.firestore);return function(l,o,c,d,x,f,j){let w;if(x.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new qe(Ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Hj(j,f);const g=[];for(const V of j)g.push(qj(d,l,V));w={arrayValue:{values:g}}}else w=qj(d,l,j)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Hj(j,f),w=g6(c,o,j,f==="in"||f==="not-in");return vs.create(x,f,w)}(t._query,"where",r,t.firestore._databaseId,this._field,this._op,this._value)}}function je(s,t,r){const a=t,i=Tm("where",s);return _m._create(i,a,r)}class Mg extends Ag{constructor(t,r){super(),this.type=t,this._queryConstraints=r}static _create(t,r){return new Mg(t,r)}_parse(t){const r=this._queryConstraints.map(a=>a._parse(t)).filter(a=>a.getFilters().length>0);return r.length===1?r[0]:ia.create(r,this._getOperator())}_apply(t){const r=this._parse(t);return r.getFilters().length===0?t:(function(i,l){let o=i;const c=l.getFlattenedFilters();for(const d of c)ok(o,d),o=x0(o,d)}(t._query,r),new an(t.firestore,t.converter,x0(t._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Lg extends Rg{constructor(t,r){super(),this._field=t,this._direction=r,this.type="orderBy"}static _create(t,r){return new Lg(t,r)}_apply(t){const r=function(i,l,o){if(i.startAt!==null)throw new qe(Ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new qe(Ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ac(l,o)}(t._query,this._field,this._direction);return new an(t.firestore,t.converter,function(i,l){const o=i.explicitOrderBy.concat([l]);return new sl(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,r))}}function N0(s,t="asc"){const r=t,a=Tm("orderBy",s);return Lg._create(a,r)}class Og extends Rg{constructor(t,r,a){super(),this.type=t,this._limit=r,this._limitType=a}static _create(t,r,a){return new Og(t,r,a)}_apply(t){return new an(t.firestore,t.converter,wx(t._query,this._limit,this._limitType))}}function zt(s){return d6("limit",s),Og._create("limit",s,"F")}function qj(s,t,r){if(typeof(r=Yt(r))=="string"){if(r==="")throw new qe(Ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!r3(t)&&r.indexOf("/")!==-1)throw new qe(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const a=t.path.child(Gt.fromString(r));if(!dt.isDocumentKey(a))throw new qe(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return ij(s,new dt(a))}if(r instanceof zs)return ij(s,r._key);throw new qe(Ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sm(r)}.`)}function Hj(s,t){if(!Array.isArray(s)||s.length===0)throw new qe(Ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function ok(s,t){const r=function(i,l){for(const o of i)for(const c of o.getFlattenedFilters())if(l.indexOf(c.op)>=0)return c.op;return null}(s.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(r!==null)throw r===t.op?new qe(Ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new qe(Ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}class lk{convertValue(t,r="none"){switch(qn(t)){case 0:return null;case 1:return t.booleanValue;case 2:return fs(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,r);case 5:return t.stringValue;case 6:return this.convertBytes(Wn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,r);case 11:return this.convertObject(t.mapValue,r);case 10:return this.convertVectorValue(t.mapValue);default:throw ut()}}convertObject(t,r){return this.convertObjectMap(t.fields,r)}convertObjectMap(t,r="none"){const a={};return ei(t,(i,l)=>{a[i]=this.convertValue(l,r)}),a}convertVectorValue(t){var r,a,i;const l=(i=(a=(r=t.fields)===null||r===void 0?void 0:r[jx].arrayValue)===null||a===void 0?void 0:a.values)===null||i===void 0?void 0:i.map(o=>fs(o.doubleValue));return new Pg(l)}convertGeoPoint(t){return new Ig(fs(t.latitude),fs(t.longitude))}convertArray(t,r){return(t.values||[]).map(a=>this.convertValue(a,r))}convertServerTimestamp(t,r){switch(r){case"previous":const a=fm(t);return a==null?null:this.convertValue(a,r);case"estimate":return this.convertTimestamp(Tc(t));default:return null}}convertTimestamp(t){const r=$n(t);return new Qt(r.seconds,r.nanos)}convertDocumentKey(t,r){const a=Gt.fromString(t);Rt(T3(a));const i=new _c(a.get(1),a.get(3)),l=new dt(a.popFirst(5));return i.isEqual(r)||Xa(`Document ${l} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vg(s,t,r){let a;return a=s?r&&(r.merge||r.mergeFields)?s.toFirestore(t,r):s.toFirestore(t):t,a}class v6 extends lk{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ci(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new zs(this.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(t,r){this.hasPendingWrites=t,this.fromCache=r}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Bg extends _x{constructor(t,r,a,i,l,o){super(t,r,a,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=l}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const r=new _u(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,r={}){if(this._document){const a=this._document.data.field(Tm("DocumentSnapshot.get",t));if(a!==null)return this._userDataWriter.convertValue(a,r.serverTimestamps)}}}class _u extends Bg{data(t={}){return super.data(t)}}class ck{constructor(t,r,a,i){this._firestore=t,this._userDataWriter=r,this._snapshot=i,this.metadata=new mo(i.hasPendingWrites,i.fromCache),this.query=a}get docs(){const t=[];return this.forEach(r=>t.push(r)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,r){this._snapshot.docs.forEach(a=>{t.call(r,new _u(this._firestore,this._userDataWriter,a.key,a,new mo(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const r=!!t.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new qe(Ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(i,l){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(c=>{const d=new _u(i._firestore,i._userDataWriter,c.doc.key,c.doc,new mo(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>l||c.type!==3).map(c=>{const d=new _u(i._firestore,i._userDataWriter,c.doc.key,c.doc,new mo(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let x=-1,f=-1;return c.type!==0&&(x=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:j6(c.type),doc:d,oldIndex:x,newIndex:f}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function j6(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ut()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ye(s){s=lr(s,zs);const t=lr(s.firestore,Sa);return o6(od(t),s._key).then(r=>dk(t,s,r))}class Dm extends lk{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ci(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new zs(this.firestore,null,r)}}function gt(s){s=lr(s,an);const t=lr(s.firestore,Sa),r=od(t),a=new Dm(t);return ik(s._query),l6(r,s._query).then(i=>new ck(t,a,s,i))}function Vr(s,t,r){s=lr(s,zs);const a=lr(s.firestore,Sa),i=Vg(s.converter,t,r);return Am(a,[Eg(dd(a),"setDoc",s._key,i,s.converter!==null,r).toMutation(s._key,Vs.none())])}function rs(s,t,r,...a){s=lr(s,zs);const i=lr(s.firestore,Sa),l=dd(i);let o;return o=typeof(t=Yt(t))=="string"||t instanceof ld?sk(l,"updateDoc",s._key,t,r,a):tk(l,"updateDoc",s._key,t),Am(i,[o.toMutation(s._key,Vs.exists(!0))])}function N6(s){return Am(lr(s.firestore,Sa),[new Nm(s._key,Vs.none())])}function So(s,t){const r=lr(s.firestore,Sa),a=B(s),i=Vg(s.converter,t);return Am(r,[Eg(dd(s.firestore),"addDoc",a._key,i,s.converter!==null,{}).toMutation(a._key,Vs.exists(!1))]).then(()=>a)}function Ce(s,...t){var r,a,i;s=Yt(s);let l={includeMetadataChanges:!1,source:"default"},o=0;typeof t[o]!="object"||Wj(t[o])||(l=t[o],o++);const c={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(Wj(t[o])){const j=t[o];t[o]=(r=j.next)===null||r===void 0?void 0:r.bind(j),t[o+1]=(a=j.error)===null||a===void 0?void 0:a.bind(j),t[o+2]=(i=j.complete)===null||i===void 0?void 0:i.bind(j)}let d,x,f;if(s instanceof zs)x=lr(s.firestore,Sa),f=gm(s._key.path),d={next:j=>{t[o]&&t[o](dk(x,s,j))},error:t[o+1],complete:t[o+2]};else{const j=lr(s,an);x=lr(j.firestore,Sa),f=j._query;const w=new Dm(x);d={next:S=>{t[o]&&t[o](new ck(x,w,j,S))},error:t[o+1],complete:t[o+2]},ik(s._query)}return function(w,S,g,V){const E=new wg(V),_=new vg(S,E,g);return w.asyncQueue.enqueueAndForget(async()=>gg(await Cx(w),_)),()=>{E.su(),w.asyncQueue.enqueueAndForget(async()=>yg(await Cx(w),_))}}(od(x),f,c,d)}function Am(s,t){return function(a,i){const l=new ya;return a.asyncQueue.enqueueAndForget(async()=>H8(await n6(a),i,l)),l.promise}(od(s),t)}function dk(s,t,r){const a=r.docs.get(t._key),i=new Dm(s);return new Bg(s,i,t._key,a,new mo(r.hasPendingWrites,r.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w6={maxAttempts:5};function zl(s,t){if((s=Yt(s)).firestore!==t)throw new qe(Ie.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k6{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=dd(t)}get(t){const r=zl(t,this._firestore),a=new v6(this._firestore);return this._transaction.lookup([r._key]).then(i=>{if(!i||i.length!==1)return ut();const l=i[0];if(l.isFoundDocument())return new _x(this._firestore,a,l.key,l,r.converter);if(l.isNoDocument())return new _x(this._firestore,a,r._key,null,r.converter);throw ut()})}set(t,r,a){const i=zl(t,this._firestore),l=Vg(i.converter,r,a),o=Eg(this._dataReader,"Transaction.set",i._key,l,i.converter!==null,a);return this._transaction.set(i._key,o),this}update(t,r,a,...i){const l=zl(t,this._firestore);let o;return o=typeof(r=Yt(r))=="string"||r instanceof ld?sk(this._dataReader,"Transaction.update",l._key,r,a,i):tk(this._dataReader,"Transaction.update",l._key,r),this._transaction.update(l._key,o),this}delete(t){const r=zl(t,this._firestore);return this._transaction.delete(r._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I6 extends k6{constructor(t,r){super(t,r),this._firestore=t}get(t){const r=zl(t,this._firestore),a=new Dm(this._firestore);return super.get(t).then(i=>new Bg(this._firestore,a,r._key,i._document,new mo(!1,!1),r.converter))}}function at(s,t,r){s=lr(s,Sa);const a=Object.assign(Object.assign({},w6),r);return function(l){if(l.maxAttempts<1)throw new qe(Ie.INVALID_ARGUMENT,"Max attempts must be at least 1")}(a),function(l,o,c){const d=new ya;return l.asyncQueue.enqueueAndForget(async()=>{const x=await i6(l);new s6(l.asyncQueue,x,c,o,d).Iu()}),d.promise}(od(s),i=>t(new I6(s,i)),a)}function he(){return new Cg("serverTimestamp")}function tt(s){return new Tg("increment",s)}(function(t,r=!0){(function(i){Zo=i})(Vi),na(new Wr("firestore",(a,{instanceIdentifier:i,options:l})=>{const o=a.getProvider("app").getImmediate(),c=new Sa(new vD(a.getProvider("auth-internal")),new wD(o,a.getProvider("app-check-internal")),function(x,f){if(!Object.prototype.hasOwnProperty.apply(x.options,["projectId"]))throw new qe(Ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _c(x.options.projectId,f)}(o,i),o);return l=Object.assign({useFetchStreams:r},l),c._setSettings(l),c},"PUBLIC").setMultipleInstances(!0)),yr(Kv,Qv,t),yr(Kv,Qv,"esm2017")})();var P6="firebase",S6="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yr(P6,S6,"app");const uk="@firebase/installations",zg="0.6.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk=1e4,mk=`w:${zg}`,hk="FIS_v2",E6="https://firebaseinstallations.googleapis.com/v1",C6=60*60*1e3,T6="installations",_6="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D6={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ti=new Oi(T6,_6,D6);function pk(s){return s instanceof qr&&s.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fk({projectId:s}){return`${E6}/projects/${s}/installations`}function gk(s){return{token:s.token,requestStatus:2,expiresIn:R6(s.expiresIn),creationTime:Date.now()}}async function yk(s,t){const a=(await t.json()).error;return Ti.create("request-failed",{requestName:s,serverCode:a.code,serverMessage:a.message,serverStatus:a.status})}function bk({apiKey:s}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":s})}function A6(s,{refreshToken:t}){const r=bk(s);return r.append("Authorization",M6(t)),r}async function vk(s){const t=await s();return t.status>=500&&t.status<600?s():t}function R6(s){return Number(s.replace("s","000"))}function M6(s){return`${hk} ${s}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L6({appConfig:s,heartbeatServiceProvider:t},{fid:r}){const a=fk(s),i=bk(s),l=t.getImmediate({optional:!0});if(l){const x=await l.getHeartbeatsHeader();x&&i.append("x-firebase-client",x)}const o={fid:r,authVersion:hk,appId:s.appId,sdkVersion:mk},c={method:"POST",headers:i,body:JSON.stringify(o)},d=await vk(()=>fetch(a,c));if(d.ok){const x=await d.json();return{fid:x.fid||r,registrationStatus:2,refreshToken:x.refreshToken,authToken:gk(x.authToken)}}else throw await yk("Create Installation",d)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jk(s){return new Promise(t=>{setTimeout(t,s)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O6(s){return btoa(String.fromCharCode(...s)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V6=/^[cdef][\w-]{21}$/,w0="";function B6(){try{const s=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(s),s[0]=112+s[0]%16;const r=z6(s);return V6.test(r)?r:w0}catch{return w0}}function z6(s){return O6(s).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rm(s){return`${s.appName}!${s.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nk=new Map;function wk(s,t){const r=Rm(s);kk(r,t),F6(r,t)}function kk(s,t){const r=Nk.get(s);if(r)for(const a of r)a(t)}function F6(s,t){const r=U6();r&&r.postMessage({key:s,fid:t}),$6()}let pi=null;function U6(){return!pi&&"BroadcastChannel"in self&&(pi=new BroadcastChannel("[Firebase] FID Change"),pi.onmessage=s=>{kk(s.data.key,s.data.fid)}),pi}function $6(){Nk.size===0&&pi&&(pi.close(),pi=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W6="firebase-installations-database",q6=1,_i="firebase-installations-store";let Lh=null;function Fg(){return Lh||(Lh=S4(W6,q6,{upgrade:(s,t)=>{switch(t){case 0:s.createObjectStore(_i)}}})),Lh}async function Dx(s,t){const r=Rm(s),i=(await Fg()).transaction(_i,"readwrite"),l=i.objectStore(_i),o=await l.get(r);return await l.put(t,r),await i.done,(!o||o.fid!==t.fid)&&wk(s,t.fid),t}async function Ik(s){const t=Rm(s),a=(await Fg()).transaction(_i,"readwrite");await a.objectStore(_i).delete(t),await a.done}async function Mm(s,t){const r=Rm(s),i=(await Fg()).transaction(_i,"readwrite"),l=i.objectStore(_i),o=await l.get(r),c=t(o);return c===void 0?await l.delete(r):await l.put(c,r),await i.done,c&&(!o||o.fid!==c.fid)&&wk(s,c.fid),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ug(s){let t;const r=await Mm(s.appConfig,a=>{const i=H6(a),l=G6(s,i);return t=l.registrationPromise,l.installationEntry});return r.fid===w0?{installationEntry:await t}:{installationEntry:r,registrationPromise:t}}function H6(s){const t=s||{fid:B6(),registrationStatus:0};return Pk(t)}function G6(s,t){if(t.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Ti.create("app-offline"));return{installationEntry:t,registrationPromise:i}}const r={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},a=K6(s,r);return{installationEntry:r,registrationPromise:a}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:Q6(s)}:{installationEntry:t}}async function K6(s,t){try{const r=await L6(s,t);return Dx(s.appConfig,r)}catch(r){throw pk(r)&&r.customData.serverCode===409?await Ik(s.appConfig):await Dx(s.appConfig,{fid:t.fid,registrationStatus:0}),r}}async function Q6(s){let t=await Gj(s.appConfig);for(;t.registrationStatus===1;)await jk(100),t=await Gj(s.appConfig);if(t.registrationStatus===0){const{installationEntry:r,registrationPromise:a}=await Ug(s);return a||r}return t}function Gj(s){return Mm(s,t=>{if(!t)throw Ti.create("installation-not-found");return Pk(t)})}function Pk(s){return Y6(s)?{fid:s.fid,registrationStatus:0}:s}function Y6(s){return s.registrationStatus===1&&s.registrationTime+xk<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X6({appConfig:s,heartbeatServiceProvider:t},r){const a=J6(s,r),i=A6(s,r),l=t.getImmediate({optional:!0});if(l){const x=await l.getHeartbeatsHeader();x&&i.append("x-firebase-client",x)}const o={installation:{sdkVersion:mk,appId:s.appId}},c={method:"POST",headers:i,body:JSON.stringify(o)},d=await vk(()=>fetch(a,c));if(d.ok){const x=await d.json();return gk(x)}else throw await yk("Generate Auth Token",d)}function J6(s,{fid:t}){return`${fk(s)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $g(s,t=!1){let r;const a=await Mm(s.appConfig,l=>{if(!Sk(l))throw Ti.create("not-registered");const o=l.authToken;if(!t&&tR(o))return l;if(o.requestStatus===1)return r=Z6(s,t),l;{if(!navigator.onLine)throw Ti.create("app-offline");const c=rR(l);return r=eR(s,c),c}});return r?await r:a.authToken}async function Z6(s,t){let r=await Kj(s.appConfig);for(;r.authToken.requestStatus===1;)await jk(100),r=await Kj(s.appConfig);const a=r.authToken;return a.requestStatus===0?$g(s,t):a}function Kj(s){return Mm(s,t=>{if(!Sk(t))throw Ti.create("not-registered");const r=t.authToken;return aR(r)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}async function eR(s,t){try{const r=await X6(s,t),a=Object.assign(Object.assign({},t),{authToken:r});return await Dx(s.appConfig,a),r}catch(r){if(pk(r)&&(r.customData.serverCode===401||r.customData.serverCode===404))await Ik(s.appConfig);else{const a=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await Dx(s.appConfig,a)}throw r}}function Sk(s){return s!==void 0&&s.registrationStatus===2}function tR(s){return s.requestStatus===2&&!sR(s)}function sR(s){const t=Date.now();return t<s.creationTime||s.creationTime+s.expiresIn<t+C6}function rR(s){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},s),{authToken:t})}function aR(s){return s.requestStatus===1&&s.requestTime+xk<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nR(s){const t=s,{installationEntry:r,registrationPromise:a}=await Ug(t);return a?a.catch(console.error):$g(t).catch(console.error),r.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iR(s,t=!1){const r=s;return await oR(r),(await $g(r,t)).token}async function oR(s){const{registrationPromise:t}=await Ug(s);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lR(s){if(!s||!s.options)throw Oh("App Configuration");if(!s.name)throw Oh("App Name");const t=["projectId","apiKey","appId"];for(const r of t)if(!s.options[r])throw Oh(r);return{appName:s.name,projectId:s.options.projectId,apiKey:s.options.apiKey,appId:s.options.appId}}function Oh(s){return Ti.create("missing-app-config-values",{valueName:s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ek="installations",cR="installations-internal",dR=s=>{const t=s.getProvider("app").getImmediate(),r=lR(t),a=Zn(t,"heartbeat");return{app:t,appConfig:r,heartbeatServiceProvider:a,_delete:()=>Promise.resolve()}},uR=s=>{const t=s.getProvider("app").getImmediate(),r=Zn(t,Ek).getImmediate();return{getId:()=>nR(r),getToken:i=>iR(r,i)}};function xR(){na(new Wr(Ek,dR,"PUBLIC")),na(new Wr(cR,uR,"PRIVATE"))}xR();yr(uk,zg);yr(uk,zg,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax="analytics",mR="firebase_id",hR="origin",pR=60*1e3,fR="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Wg="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br=new mm("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Cr=new Oi("analytics","Analytics",gR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yR(s){if(!s.startsWith(Wg)){const t=Cr.create("invalid-gtag-resource",{gtagURL:s});return br.warn(t.message),""}return s}function Ck(s){return Promise.all(s.map(t=>t.catch(r=>r)))}function bR(s,t){let r;return window.trustedTypes&&(r=window.trustedTypes.createPolicy(s,t)),r}function vR(s,t){const r=bR("firebase-js-sdk-policy",{createScriptURL:yR}),a=document.createElement("script"),i=`${Wg}?l=${s}&id=${t}`;a.src=r?r==null?void 0:r.createScriptURL(i):i,a.async=!0,document.head.appendChild(a)}function jR(s){let t=[];return Array.isArray(window[s])?t=window[s]:window[s]=t,t}async function NR(s,t,r,a,i,l){const o=a[i];try{if(o)await t[o];else{const d=(await Ck(r)).find(x=>x.measurementId===i);d&&await t[d.appId]}}catch(c){br.error(c)}s("config",i,l)}async function wR(s,t,r,a,i){try{let l=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const c=await Ck(r);for(const d of o){const x=c.find(j=>j.measurementId===d),f=x&&t[x.appId];if(f)l.push(f);else{l=[];break}}}l.length===0&&(l=Object.values(t)),await Promise.all(l),s("event",a,i||{})}catch(l){br.error(l)}}function kR(s,t,r,a){async function i(l,...o){try{if(l==="event"){const[c,d]=o;await wR(s,t,r,c,d)}else if(l==="config"){const[c,d]=o;await NR(s,t,r,a,c,d)}else if(l==="consent"){const[c,d]=o;s("consent",c,d)}else if(l==="get"){const[c,d,x]=o;s("get",c,d,x)}else if(l==="set"){const[c]=o;s("set",c)}else s(l,...o)}catch(c){br.error(c)}}return i}function IR(s,t,r,a,i){let l=function(...o){window[a].push(arguments)};return window[i]&&typeof window[i]=="function"&&(l=window[i]),window[i]=kR(l,s,t,r),{gtagCore:l,wrappedGtag:window[i]}}function PR(s){const t=window.document.getElementsByTagName("script");for(const r of Object.values(t))if(r.src&&r.src.includes(Wg)&&r.src.includes(s))return r;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR=30,ER=1e3;class CR{constructor(t={},r=ER){this.throttleMetadata=t,this.intervalMillis=r}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,r){this.throttleMetadata[t]=r}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const Tk=new CR;function TR(s){return new Headers({Accept:"application/json","x-goog-api-key":s})}async function _R(s){var t;const{appId:r,apiKey:a}=s,i={method:"GET",headers:TR(a)},l=fR.replace("{app-id}",r),o=await fetch(l,i);if(o.status!==200&&o.status!==304){let c="";try{const d=await o.json();!((t=d.error)===null||t===void 0)&&t.message&&(c=d.error.message)}catch{}throw Cr.create("config-fetch-failed",{httpStatus:o.status,responseMessage:c})}return o.json()}async function DR(s,t=Tk,r){const{appId:a,apiKey:i,measurementId:l}=s.options;if(!a)throw Cr.create("no-app-id");if(!i){if(l)return{measurementId:l,appId:a};throw Cr.create("no-api-key")}const o=t.getThrottleMetadata(a)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new MR;return setTimeout(async()=>{c.abort()},r!==void 0?r:pR),_k({appId:a,apiKey:i,measurementId:l},o,c,t)}async function _k(s,{throttleEndTimeMillis:t,backoffCount:r},a,i=Tk){var l;const{appId:o,measurementId:c}=s;try{await AR(a,t)}catch(d){if(c)return br.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:o,measurementId:c};throw d}try{const d=await _R(s);return i.deleteThrottleMetadata(o),d}catch(d){const x=d;if(!RR(x)){if(i.deleteThrottleMetadata(o),c)return br.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${x==null?void 0:x.message}]`),{appId:o,measurementId:c};throw d}const f=Number((l=x==null?void 0:x.customData)===null||l===void 0?void 0:l.httpStatus)===503?Vv(r,i.intervalMillis,SR):Vv(r,i.intervalMillis),j={throttleEndTimeMillis:Date.now()+f,backoffCount:r+1};return i.setThrottleMetadata(o,j),br.debug(`Calling attemptFetch again in ${f} millis`),_k(s,j,a,i)}}function AR(s,t){return new Promise((r,a)=>{const i=Math.max(t-Date.now(),0),l=setTimeout(r,i);s.addEventListener(()=>{clearTimeout(l),a(Cr.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function RR(s){if(!(s instanceof qr)||!s.customData)return!1;const t=Number(s.customData.httpStatus);return t===429||t===500||t===503||t===504}class MR{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function LR(s,t,r,a,i){if(i&&i.global){s("event",r,a);return}else{const l=await t,o=Object.assign(Object.assign({},a),{send_to:l});s("event",r,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OR(){if(w4())try{await k4()}catch(s){return br.warn(Cr.create("indexeddb-unavailable",{errorInfo:s==null?void 0:s.toString()}).message),!1}else return br.warn(Cr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function VR(s,t,r,a,i,l,o){var c;const d=DR(s);d.then(S=>{r[S.measurementId]=S.appId,s.options.measurementId&&S.measurementId!==s.options.measurementId&&br.warn(`The measurement ID in the local Firebase config (${s.options.measurementId}) does not match the measurement ID fetched from the server (${S.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(S=>br.error(S)),t.push(d);const x=OR().then(S=>{if(S)return a.getId()}),[f,j]=await Promise.all([d,x]);PR(l)||vR(l,f.measurementId),i("js",new Date);const w=(c=o==null?void 0:o.config)!==null&&c!==void 0?c:{};return w[hR]="firebase",w.update=!0,j!=null&&(w[mR]=j),i("config",f.measurementId,w),f.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(t){this.app=t}_delete(){return delete sc[this.app.options.appId],Promise.resolve()}}let sc={},Qj=[];const Yj={};let Vh="dataLayer",zR="gtag",Xj,Dk,Jj=!1;function FR(){const s=[];if(N4()&&s.push("This is a browser extension environment."),ZT()||s.push("Cookies are not available."),s.length>0){const t=s.map((a,i)=>`(${i+1}) ${a}`).join(" "),r=Cr.create("invalid-analytics-context",{errorInfo:t});br.warn(r.message)}}function UR(s,t,r){FR();const a=s.options.appId;if(!a)throw Cr.create("no-app-id");if(!s.options.apiKey)if(s.options.measurementId)br.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${s.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Cr.create("no-api-key");if(sc[a]!=null)throw Cr.create("already-exists",{id:a});if(!Jj){jR(Vh);const{wrappedGtag:l,gtagCore:o}=IR(sc,Qj,Yj,Vh,zR);Dk=l,Xj=o,Jj=!0}return sc[a]=VR(s,Qj,Yj,t,Xj,Vh,r),new BR(s)}function $R(s=hm()){s=Yt(s);const t=Zn(s,Ax);return t.isInitialized()?t.getImmediate():WR(s)}function WR(s,t={}){const r=Zn(s,Ax);if(r.isInitialized()){const i=r.getImmediate();if(Fn(t,r.getOptions()))return i;throw Cr.create("already-initialized")}return r.initialize({options:t})}function qR(s,t,r,a){s=Yt(s),LR(Dk,sc[s.app.options.appId],t,r,a).catch(i=>br.error(i))}const Zj="@firebase/analytics",eN="0.10.12";function HR(){na(new Wr(Ax,(t,{options:r})=>{const a=t.getProvider("app").getImmediate(),i=t.getProvider("installations-internal").getImmediate();return UR(a,i,r)},"PUBLIC")),na(new Wr("analytics-internal",s,"PRIVATE")),yr(Zj,eN),yr(Zj,eN,"esm2017");function s(t){try{const r=t.getProvider(Ax).getImmediate();return{logEvent:(a,i,l)=>qR(r,a,i,l)}}catch(r){throw Cr.create("interop-component-reg-failed",{reason:r})}}}HR();function qg(s,t){var r={};for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&t.indexOf(a)<0&&(r[a]=s[a]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(s);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(s,a[i])&&(r[a[i]]=s[a[i]]);return r}function Ak(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const GR=Ak,Rk=new Oi("auth","Firebase",Ak());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx=new mm("@firebase/auth");function KR(s,...t){Rx.logLevel<=Et.WARN&&Rx.warn(`Auth (${Vi}): ${s}`,...t)}function Du(s,...t){Rx.logLevel<=Et.ERROR&&Rx.error(`Auth (${Vi}): ${s}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oa(s,...t){throw Hg(s,...t)}function va(s,...t){return Hg(s,...t)}function Mk(s,t,r){const a=Object.assign(Object.assign({},GR()),{[t]:r});return new Oi("auth","Firebase",a).create(t,{appName:s.name})}function Wa(s){return Mk(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Hg(s,...t){if(typeof s!="string"){const r=t[0],a=[...t.slice(1)];return a[0]&&(a[0].appName=s.name),s._errorFactory.create(r,...a)}return Rk.create(s,...t)}function mt(s,t,...r){if(!s)throw Hg(t,...r)}function za(s){const t="INTERNAL ASSERTION FAILED: "+s;throw Du(t),new Error(t)}function Za(s,t){s||za(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mx(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.href)||""}function Lk(){return tN()==="http:"||tN()==="https:"}function tN(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Lk()||N4()||"connection"in navigator)?navigator.onLine:!0}function YR(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(t,r){this.shortDelay=t,this.longDelay=r,Za(r>t,"Short delay should be less than long delay!"),this.isMobile=GT()||YT()}get(){return QR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gg(s,t){Za(s.emulator,"Emulator should always be set here");const{url:r}=s.emulator;return t?`${r}${t.startsWith("/")?t.slice(1):t}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{static initialize(t,r,a){this.fetchImpl=t,r&&(this.headersImpl=r),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;za("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;za("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;za("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ZR=new xd(3e4,6e4);function nn(s,t){return s.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:s.tenantId}):t}async function Ta(s,t,r,a,i={}){return Vk(s,i,async()=>{let l={},o={};a&&(t==="GET"?o=a:l={body:JSON.stringify(a)});const c=td(Object.assign({key:s.config.apiKey},o)).slice(1),d=await s._getAdditionalHeaders();d["Content-Type"]="application/json",s.languageCode&&(d["X-Firebase-Locale"]=s.languageCode);const x=Object.assign({method:t,headers:d},l);return QT()||(x.referrerPolicy="no-referrer"),Ok.fetch()(await Bk(s,s.config.apiHost,r,c),x)})}async function Vk(s,t,r){s._canInitEmulator=!1;const a=Object.assign(Object.assign({},XR),t);try{const i=new tM(s),l=await Promise.race([r(),i.promise]);i.clearNetworkTimeout();const o=await l.json();if("needConfirmation"in o)throw nu(s,"account-exists-with-different-credential",o);if(l.ok&&!("errorMessage"in o))return o;{const c=l.ok?o.errorMessage:o.error.message,[d,x]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw nu(s,"credential-already-in-use",o);if(d==="EMAIL_EXISTS")throw nu(s,"email-already-in-use",o);if(d==="USER_DISABLED")throw nu(s,"user-disabled",o);const f=a[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(x)throw Mk(s,f,x);oa(s,f)}}catch(i){if(i instanceof qr)throw i;oa(s,"network-request-failed",{message:String(i)})}}async function md(s,t,r,a,i={}){const l=await Ta(s,t,r,a,i);return"mfaPendingCredential"in l&&oa(s,"multi-factor-auth-required",{_serverResponse:l}),l}async function Bk(s,t,r,a){const i=`${t}${r}?${a}`,l=s,o=l.config.emulator?Gg(s.config,i):`${s.config.apiScheme}://${i}`;return JR.includes(r)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(o).toString():o}function eM(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class tM{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((r,a)=>{this.timer=setTimeout(()=>a(va(this.auth,"network-request-failed")),ZR.get())})}}function nu(s,t,r){const a={appName:s.name};r.email&&(a.email=r.email),r.phoneNumber&&(a.phoneNumber=r.phoneNumber);const i=va(s,t,a);return i.customData._tokenResponse=r,i}function sN(s){return s!==void 0&&s.enterprise!==void 0}class sM{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===t)return eM(r.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function rM(s,t){return Ta(s,"GET","/v2/recaptchaConfig",nn(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aM(s,t){return Ta(s,"POST","/v1/accounts:delete",t)}async function Lx(s,t){return Ta(s,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rc(s){if(s)try{const t=new Date(Number(s));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function nM(s,t=!1){const r=Yt(s),a=await r.getIdToken(t),i=Kg(a);mt(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");const l=typeof i.firebase=="object"?i.firebase:void 0,o=l==null?void 0:l.sign_in_provider;return{claims:i,token:a,authTime:rc(Bh(i.auth_time)),issuedAtTime:rc(Bh(i.iat)),expirationTime:rc(Bh(i.exp)),signInProvider:o||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Bh(s){return Number(s)*1e3}function Kg(s){const[t,r,a]=s.split(".");if(t===void 0||r===void 0||a===void 0)return Du("JWT malformed, contained fewer than 3 sections"),null;try{const i=f4(r);return i?JSON.parse(i):(Du("Failed to decode base64 JWT payload"),null)}catch(i){return Du("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function rN(s){const t=Kg(s);return mt(t,"internal-error"),mt(typeof t.exp<"u","internal-error"),mt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wo(s,t,r=!1){if(r)return t;try{return await t}catch(a){throw a instanceof qr&&iM(a)&&s.auth.currentUser===s&&await s.auth.signOut(),a}}function iM({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var r;if(t){const a=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),a}else{this.errorBackoff=3e4;const i=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const r=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(t,r){this.createdAt=t,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=rc(this.lastLoginAt),this.creationTime=rc(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ox(s){var t;const r=s.auth,a=await s.getIdToken(),i=await Wo(s,Lx(r,{idToken:a}));mt(i==null?void 0:i.users.length,r,"internal-error");const l=i.users[0];s._notifyReloadListener(l);const o=!((t=l.providerUserInfo)===null||t===void 0)&&t.length?zk(l.providerUserInfo):[],c=cM(s.providerData,o),d=s.isAnonymous,x=!(s.email&&l.passwordHash)&&!(c!=null&&c.length),f=d?x:!1,j={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new k0(l.createdAt,l.lastLoginAt),isAnonymous:f};Object.assign(s,j)}async function lM(s){const t=Yt(s);await Ox(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function cM(s,t){return[...s.filter(a=>!t.some(i=>i.providerId===a.providerId)),...t]}function zk(s){return s.map(t=>{var{providerId:r}=t,a=qg(t,["providerId"]);return{providerId:r,uid:a.rawId||"",displayName:a.displayName||null,email:a.email||null,phoneNumber:a.phoneNumber||null,photoURL:a.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dM(s,t){const r=await Vk(s,{},async()=>{const a=td({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:l}=s.config,o=await Bk(s,i,"/v1/token",`key=${l}`),c=await s._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Ok.fetch()(o,{method:"POST",headers:c,body:a})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function uM(s,t){return Ta(s,"POST","/v2/accounts:revokeToken",nn(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){mt(t.idToken,"internal-error"),mt(typeof t.idToken<"u","internal-error"),mt(typeof t.refreshToken<"u","internal-error");const r="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):rN(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,r)}updateFromIdToken(t){mt(t.length!==0,"internal-error");const r=rN(t);this.updateTokensAndExpiration(t,null,r)}async getToken(t,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(mt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,r){const{accessToken:a,refreshToken:i,expiresIn:l}=await dM(t,r);this.updateTokensAndExpiration(a,i,Number(l))}updateTokensAndExpiration(t,r,a){this.refreshToken=r||null,this.accessToken=t||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(t,r){const{refreshToken:a,accessToken:i,expirationTime:l}=r,o=new Eo;return a&&(mt(typeof a=="string","internal-error",{appName:t}),o.refreshToken=a),i&&(mt(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),l&&(mt(typeof l=="number","internal-error",{appName:t}),o.expirationTime=l),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Eo,this.toJSON())}_performRefresh(){return za("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(s,t){mt(typeof s=="string"||typeof s>"u","internal-error",{appName:t})}class ea{constructor(t){var{uid:r,auth:a,stsTokenManager:i}=t,l=qg(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new oM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=a,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new k0(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const r=await Wo(this,this.stsTokenManager.getToken(this.auth,t));return mt(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(t){return nM(this,t)}reload(){return lM(this)}_assign(t){this!==t&&(mt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(r=>Object.assign({},r)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const r=new ea(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(t){mt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,r=!1){let a=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),a=!0),r&&await Ox(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(kr(this.auth.app))return Promise.reject(Wa(this.auth));const t=await this.getIdToken();return await Wo(this,aM(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,r){var a,i,l,o,c,d,x,f;const j=(a=r.displayName)!==null&&a!==void 0?a:void 0,w=(i=r.email)!==null&&i!==void 0?i:void 0,S=(l=r.phoneNumber)!==null&&l!==void 0?l:void 0,g=(o=r.photoURL)!==null&&o!==void 0?o:void 0,V=(c=r.tenantId)!==null&&c!==void 0?c:void 0,E=(d=r._redirectEventId)!==null&&d!==void 0?d:void 0,_=(x=r.createdAt)!==null&&x!==void 0?x:void 0,M=(f=r.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:R,emailVerified:q,isAnonymous:G,providerData:Y,stsTokenManager:O}=r;mt(R&&O,t,"internal-error");const u=Eo.fromJSON(this.name,O);mt(typeof R=="string",t,"internal-error"),mn(j,t.name),mn(w,t.name),mt(typeof q=="boolean",t,"internal-error"),mt(typeof G=="boolean",t,"internal-error"),mn(S,t.name),mn(g,t.name),mn(V,t.name),mn(E,t.name),mn(_,t.name),mn(M,t.name);const U=new ea({uid:R,auth:t,email:w,emailVerified:q,displayName:j,isAnonymous:G,photoURL:g,phoneNumber:S,tenantId:V,stsTokenManager:u,createdAt:_,lastLoginAt:M});return Y&&Array.isArray(Y)&&(U.providerData=Y.map(F=>Object.assign({},F))),E&&(U._redirectEventId=E),U}static async _fromIdTokenResponse(t,r,a=!1){const i=new Eo;i.updateFromServerResponse(r);const l=new ea({uid:r.localId,auth:t,stsTokenManager:i,isAnonymous:a});return await Ox(l),l}static async _fromGetAccountInfoResponse(t,r,a){const i=r.users[0];mt(i.localId!==void 0,"internal-error");const l=i.providerUserInfo!==void 0?zk(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(l!=null&&l.length),c=new Eo;c.updateFromIdToken(a);const d=new ea({uid:i.localId,auth:t,stsTokenManager:c,isAnonymous:o}),x={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new k0(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(l!=null&&l.length)};return Object.assign(d,x),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN=new Map;function Fa(s){Za(s instanceof Function,"Expected a class definition");let t=aN.get(s);return t?(Za(t instanceof s,"Instance stored in cache mismatched with class"),t):(t=new s,aN.set(s,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){const r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}Fk.type="NONE";const nN=Fk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(s,t,r){return`firebase:${s}:${t}:${r}`}class Co{constructor(t,r,a){this.persistence=t,this.auth=r,this.userKey=a;const{config:i,name:l}=this.auth;this.fullUserKey=Au(this.userKey,i.apiKey,l),this.fullPersistenceKey=Au("persistence",i.apiKey,l),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const r=await Lx(this.auth,{idToken:t}).catch(()=>{});return r?ea._fromGetAccountInfoResponse(this.auth,r,t):null}return ea._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,r,a="authUser"){if(!r.length)return new Co(Fa(nN),t,a);const i=(await Promise.all(r.map(async x=>{if(await x._isAvailable())return x}))).filter(x=>x);let l=i[0]||Fa(nN);const o=Au(a,t.config.apiKey,t.name);let c=null;for(const x of r)try{const f=await x._get(o);if(f){let j;if(typeof f=="string"){const w=await Lx(t,{idToken:f}).catch(()=>{});if(!w)break;j=await ea._fromGetAccountInfoResponse(t,w,f)}else j=ea._fromJSON(t,f);x!==l&&(c=j),l=x;break}}catch{}const d=i.filter(x=>x._shouldAllowMigration);return!l._shouldAllowMigration||!d.length?new Co(l,t,a):(l=d[0],c&&await l._set(o,c.toJSON()),await Promise.all(r.map(async x=>{if(x!==l)try{await x._remove(o)}catch{}})),new Co(l,t,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iN(s){const t=s.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(qk(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Uk(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Gk(t))return"Blackberry";if(Kk(t))return"Webos";if($k(t))return"Safari";if((t.includes("chrome/")||Wk(t))&&!t.includes("edge/"))return"Chrome";if(Hk(t))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=s.match(r);if((a==null?void 0:a.length)===2)return a[1]}return"Other"}function Uk(s=er()){return/firefox\//i.test(s)}function $k(s=er()){const t=s.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Wk(s=er()){return/crios\//i.test(s)}function qk(s=er()){return/iemobile/i.test(s)}function Hk(s=er()){return/android/i.test(s)}function Gk(s=er()){return/blackberry/i.test(s)}function Kk(s=er()){return/webos/i.test(s)}function Qg(s=er()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function xM(s=er()){var t;return Qg(s)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function mM(){return XT()&&document.documentMode===10}function Qk(s=er()){return Qg(s)||Hk(s)||Kk(s)||Gk(s)||/windows phone/i.test(s)||qk(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yk(s,t=[]){let r;switch(s){case"Browser":r=iN(er());break;case"Worker":r=`${iN(er())}-${s}`;break;default:r=s}const a=t.length?t.join(","):"FirebaseCore-web";return`${r}/JsCore/${Vi}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,r){const a=l=>new Promise((o,c)=>{try{const d=t(l);o(d)}catch(d){c(d)}});a.onAbort=r,this.queue.push(a);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const r=[];try{for(const a of this.queue)await a(t),a.onAbort&&r.push(a.onAbort)}catch(a){r.reverse();for(const i of r)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a==null?void 0:a.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pM(s,t={}){return Ta(s,"GET","/v2/passwordPolicy",nn(s,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fM=6;class gM{constructor(t){var r,a,i,l;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=o.minPasswordLength)!==null&&r!==void 0?r:fM,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(a=t.allowedNonAlphanumericCharacters)===null||a===void 0?void 0:a.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(l=t.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var r,a,i,l,o,c;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,d),this.validatePasswordCharacterOptions(t,d),d.isValid&&(d.isValid=(r=d.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(a=d.meetsMaxPasswordLength)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(i=d.containsLowercaseLetter)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(l=d.containsUppercaseLetter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(o=d.containsNumericCharacter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(t,r){const a=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;a&&(r.meetsMinPasswordLength=t.length>=a),i&&(r.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let a;for(let i=0;i<t.length;i++)a=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(r,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(t,r,a,i,l){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{constructor(t,r,a,i){this.app=t,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=a,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new oN(this),this.idTokenSubscription=new oN(this),this.beforeStateQueue=new hM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Rk,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(t,r){return r&&(this._popupRedirectResolver=Fa(r)),this._initializationPromise=this.queue(async()=>{var a,i,l;if(!this._deleted&&(this.persistenceManager=await Co.create(this,t),(a=this._resolvePersistenceManagerAvailable)===null||a===void 0||a.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const r=await Lx(this,{idToken:t}),a=await ea._fromGetAccountInfoResponse(this,r,t);await this.directlySetCurrentUser(a)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var r;if(kr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const a=await this.assertedPersistence.getCurrentUser();let i=a,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,c=i==null?void 0:i._redirectEventId,d=await this.tryRedirectSignIn(t);(!o||o===c)&&(d!=null&&d.user)&&(i=d.user,l=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=a,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return mt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(t){try{await Ox(t)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=YR()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(kr(this.app))return Promise.reject(Wa(this));const r=t?Yt(t):null;return r&&mt(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(t,r=!1){if(!this._deleted)return t&&mt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return kr(this.app)?Promise.reject(Wa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return kr(this.app)?Promise.reject(Wa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fa(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await pM(this),r=new gM(t);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Oi("auth","Firebase",t())}onAuthStateChanged(t,r,a){return this.registerStateListener(this.authStateSubscription,t,r,a)}beforeAuthStateChanged(t,r){return this.beforeStateQueue.pushCallback(t,r)}onIdTokenChanged(t,r,a){return this.registerStateListener(this.idTokenSubscription,t,r,a)}authStateReady(){return new Promise((t,r)=>{if(this.currentUser)t();else{const a=this.onAuthStateChanged(()=>{a(),t()},r)}})}async revokeAccessToken(t){if(this.currentUser){const r=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:r};this.tenantId!=null&&(a.tenantId=this.tenantId),await uM(this,a)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,r){const a=await this.getOrInitRedirectPersistenceManager(r);return t===null?a.removeCurrentUser():a.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const r=t&&Fa(t)||this._popupRedirectResolver;mt(r,this,"argument-error"),this.redirectPersistenceManager=await Co.create(this,[Fa(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var r,a;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===t?this._currentUser:((a=this.redirectUser)===null||a===void 0?void 0:a._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const a=(r=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==a&&(this.lastNotifiedUid=a,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,r,a,i){if(this._deleted)return()=>{};const l=typeof r=="function"?r:r.next.bind(r);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(mt(c,this,"internal-error"),c.then(()=>{o||l(this.currentUser)}),typeof r=="function"){const d=t.addObserver(r,a,i);return()=>{o=!0,d()}}else{const d=t.addObserver(r);return()=>{o=!0,d()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return mt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=Yk(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const a=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());a&&(r["X-Firebase-Client"]=a);const i=await this._getAppCheckToken();return i&&(r["X-Firebase-AppCheck"]=i),r}async _getAppCheckToken(){var t;if(kr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const r=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return r!=null&&r.error&&KR(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Ui(s){return Yt(s)}class oN{constructor(t){this.auth=t,this.observer=null,this.addObserver=a_(r=>this.observer=r)}get next(){return mt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bM(s){Lm=s}function Xk(s){return Lm.loadJS(s)}function vM(){return Lm.recaptchaEnterpriseScript}function jM(){return Lm.gapiScript}function NM(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class wM{constructor(){this.enterprise=new kM}ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}class kM{ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}const IM="recaptcha-enterprise",Jk="NO_RECAPTCHA";class PM{constructor(t){this.type=IM,this.auth=Ui(t)}async verify(t="verify",r=!1){async function a(l){if(!r){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(o,c)=>{rM(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const x=new sM(d);return l.tenantId==null?l._agentRecaptchaConfig=x:l._tenantRecaptchaConfigs[l.tenantId]=x,o(x.siteKey)}}).catch(d=>{c(d)})})}function i(l,o,c){const d=window.grecaptcha;sN(d)?d.enterprise.ready(()=>{d.enterprise.execute(l,{action:t}).then(x=>{o(x)}).catch(()=>{o(Jk)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new wM().execute("siteKey",{action:"verify"}):new Promise((l,o)=>{a(this.auth).then(c=>{if(!r&&sN(window.grecaptcha))i(c,l,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let d=vM();d.length!==0&&(d+=c),Xk(d).then(()=>{i(c,l,o)}).catch(x=>{o(x)})}}).catch(c=>{o(c)})})}}async function Cl(s,t,r,a=!1,i=!1){const l=new PM(s);let o;if(i)o=Jk;else try{o=await l.verify(r)}catch{o=await l.verify(r,!0)}const c=Object.assign({},t);if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const d=c.phoneEnrollmentInfo.phoneNumber,x=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:x,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const d=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return a?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function I0(s,t,r,a,i){var l,o;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((l=s._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Cl(s,t,r,r==="getOobCode");return a(s,c)}else return a(s,t).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await Cl(s,t,r,r==="getOobCode");return a(s,d)}else return Promise.reject(c)});else if(i==="PHONE_PROVIDER")if(!((o=s._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("PHONE_PROVIDER")){const c=await Cl(s,t,r);return a(s,c).catch(async d=>{var x;if(((x=s._getRecaptchaConfig())===null||x===void 0?void 0:x.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(d.code==="auth/missing-recaptcha-token"||d.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${r} flow.`);const f=await Cl(s,t,r,!1,!0);return a(s,f)}return Promise.reject(d)})}else{const c=await Cl(s,t,r,!1,!0);return a(s,c)}else return Promise.reject(i+" provider is not supported.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SM(s,t){const r=Zn(s,"auth");if(r.isInitialized()){const i=r.getImmediate(),l=r.getOptions();if(Fn(l,t??{}))return i;oa(i,"already-initialized")}return r.initialize({options:t})}function EM(s,t){const r=(t==null?void 0:t.persistence)||[],a=(Array.isArray(r)?r:[r]).map(Fa);t!=null&&t.errorMap&&s._updateErrorMap(t.errorMap),s._initializeWithPersistence(a,t==null?void 0:t.popupRedirectResolver)}function CM(s,t,r){const a=Ui(s);mt(/^https?:\/\//.test(t),a,"invalid-emulator-scheme");const i=!!(r!=null&&r.disableWarnings),l=Zk(t),{host:o,port:c}=TM(t),d=c===null?"":`:${c}`,x={url:`${l}//${o}${d}/`},f=Object.freeze({host:o,port:c,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!a._canInitEmulator){mt(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),mt(Fn(x,a.config.emulator)&&Fn(f,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=x,a.emulatorConfig=f,a.settings.appVerificationDisabledForTesting=!0,i||_M()}function Zk(s){const t=s.indexOf(":");return t<0?"":s.substr(0,t+1)}function TM(s){const t=Zk(s),r=/(\/\/)?([^?#/]+)/.exec(s.substr(t.length));if(!r)return{host:"",port:null};const a=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(a);if(i){const l=i[1];return{host:l,port:lN(a.substr(l.length+1))}}else{const[l,o]=a.split(":");return{host:l,port:lN(o)}}}function lN(s){if(!s)return null;const t=Number(s);return isNaN(t)?null:t}function _M(){function s(){const t=document.createElement("p"),r=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(t,r){this.providerId=t,this.signInMethod=r}toJSON(){return za("not implemented")}_getIdTokenResponse(t){return za("not implemented")}_linkToIdToken(t,r){return za("not implemented")}_getReauthenticationResolver(t){return za("not implemented")}}async function DM(s,t){return Ta(s,"POST","/v1/accounts:update",t)}async function AM(s,t){return Ta(s,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RM(s,t){return md(s,"POST","/v1/accounts:signInWithPassword",nn(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MM(s,t){return md(s,"POST","/v1/accounts:signInWithEmailLink",nn(s,t))}async function LM(s,t){return md(s,"POST","/v1/accounts:signInWithEmailLink",nn(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc extends Yg{constructor(t,r,a,i=null){super("password",a),this._email=t,this._password=r,this._tenantId=i}static _fromEmailAndPassword(t,r){return new Vc(t,r,"password")}static _fromEmailAndCode(t,r,a=null){return new Vc(t,r,"emailLink",a)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return I0(t,r,"signInWithPassword",RM,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return MM(t,{email:this._email,oobCode:this._password});default:oa(t,"internal-error")}}async _linkToIdToken(t,r){switch(this.signInMethod){case"password":const a={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return I0(t,a,"signUpPassword",AM,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return LM(t,{idToken:r,email:this._email,oobCode:this._password});default:oa(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function To(s,t){return md(s,"POST","/v1/accounts:signInWithIdp",nn(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OM="http://localhost";class Di extends Yg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const r=new Di(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(r.idToken=t.idToken),t.accessToken&&(r.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(r.nonce=t.nonce),t.pendingToken&&(r.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(r.accessToken=t.oauthToken,r.secret=t.oauthTokenSecret):oa("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t,{providerId:a,signInMethod:i}=r,l=qg(r,["providerId","signInMethod"]);if(!a||!i)return null;const o=new Di(a,i);return o.idToken=l.idToken||void 0,o.accessToken=l.accessToken||void 0,o.secret=l.secret,o.nonce=l.nonce,o.pendingToken=l.pendingToken||null,o}_getIdTokenResponse(t){const r=this.buildRequest();return To(t,r)}_linkToIdToken(t,r){const a=this.buildRequest();return a.idToken=r,To(t,a)}_getReauthenticationResolver(t){const r=this.buildRequest();return r.autoCreate=!1,To(t,r)}buildRequest(){const t={requestUri:OM,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),t.postBody=td(r)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VM(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function BM(s){const t=Ml(Ll(s)).link,r=t?Ml(Ll(t)).deep_link_id:null,a=Ml(Ll(s)).deep_link_id;return(a?Ml(Ll(a)).link:null)||a||r||t||s}class Xg{constructor(t){var r,a,i,l,o,c;const d=Ml(Ll(t)),x=(r=d.apiKey)!==null&&r!==void 0?r:null,f=(a=d.oobCode)!==null&&a!==void 0?a:null,j=VM((i=d.mode)!==null&&i!==void 0?i:null);mt(x&&f&&j,"argument-error"),this.apiKey=x,this.operation=j,this.code=f,this.continueUrl=(l=d.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(o=d.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(c=d.tenantId)!==null&&c!==void 0?c:null}static parseLink(t){const r=BM(t);try{return new Xg(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(){this.providerId=al.PROVIDER_ID}static credential(t,r){return Vc._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){const a=Xg.parseLink(r);return mt(a,"argument-error"),Vc._fromEmailAndCode(t,a.code,a.tenantId)}}al.PROVIDER_ID="password";al.EMAIL_PASSWORD_SIGN_IN_METHOD="password";al.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd extends e1{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn extends hd{constructor(){super("facebook.com")}static credential(t){return Di._fromParams({providerId:bn.PROVIDER_ID,signInMethod:bn.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return bn.credentialFromTaggedObject(t)}static credentialFromError(t){return bn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return bn.credential(t.oauthAccessToken)}catch{return null}}}bn.FACEBOOK_SIGN_IN_METHOD="facebook.com";bn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn extends hd{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return Di._fromParams({providerId:vn.PROVIDER_ID,signInMethod:vn.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return vn.credentialFromTaggedObject(t)}static credentialFromError(t){return vn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:a}=t;if(!r&&!a)return null;try{return vn.credential(r,a)}catch{return null}}}vn.GOOGLE_SIGN_IN_METHOD="google.com";vn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn extends hd{constructor(){super("github.com")}static credential(t){return Di._fromParams({providerId:jn.PROVIDER_ID,signInMethod:jn.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return jn.credentialFromTaggedObject(t)}static credentialFromError(t){return jn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return jn.credential(t.oauthAccessToken)}catch{return null}}}jn.GITHUB_SIGN_IN_METHOD="github.com";jn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn extends hd{constructor(){super("twitter.com")}static credential(t,r){return Di._fromParams({providerId:Nn.PROVIDER_ID,signInMethod:Nn.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:r})}static credentialFromResult(t){return Nn.credentialFromTaggedObject(t)}static credentialFromError(t){return Nn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:r,oauthTokenSecret:a}=t;if(!r||!a)return null;try{return Nn.credential(r,a)}catch{return null}}}Nn.TWITTER_SIGN_IN_METHOD="twitter.com";Nn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zM(s,t){return md(s,"POST","/v1/accounts:signUp",nn(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,r,a,i=!1){const l=await ea._fromIdTokenResponse(t,a,i),o=cN(a);return new Ai({user:l,providerId:o,_tokenResponse:a,operationType:r})}static async _forOperation(t,r,a){await t._updateTokensIfNecessary(a,!0);const i=cN(a);return new Ai({user:t,providerId:i,_tokenResponse:a,operationType:r})}}function cN(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx extends qr{constructor(t,r,a,i){var l;super(r.code,r.message),this.operationType=a,this.user=i,Object.setPrototypeOf(this,Vx.prototype),this.customData={appName:t.name,tenantId:(l=t.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:r.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(t,r,a,i){return new Vx(t,r,a,i)}}function t1(s,t,r,a){return(t==="reauthenticate"?r._getReauthenticationResolver(s):r._getIdTokenResponse(s)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Vx._fromErrorAndOperation(s,l,t,a):l})}async function FM(s,t,r=!1){const a=await Wo(s,t._linkToIdToken(s.auth,await s.getIdToken()),r);return Ai._forOperation(s,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UM(s,t,r=!1){const{auth:a}=s;if(kr(a.app))return Promise.reject(Wa(a));const i="reauthenticate";try{const l=await Wo(s,t1(a,i,t,s),r);mt(l.idToken,a,"internal-error");const o=Kg(l.idToken);mt(o,a,"internal-error");const{sub:c}=o;return mt(s.uid===c,a,"user-mismatch"),Ai._forOperation(s,i,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&oa(a,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s1(s,t,r=!1){if(kr(s.app))return Promise.reject(Wa(s));const a="signIn",i=await t1(s,a,t),l=await Ai._fromIdTokenResponse(s,a,i);return r||await s._updateCurrentUser(l.user),l}async function $M(s,t){return s1(Ui(s),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r1(s){const t=Ui(s);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function WM(s,t,r){if(kr(s.app))return Promise.reject(Wa(s));const a=Ui(s),o=await I0(a,{returnSecureToken:!0,email:t,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",zM,"EMAIL_PASSWORD_PROVIDER").catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&r1(s),d}),c=await Ai._fromIdTokenResponse(a,"signIn",o);return await a._updateCurrentUser(c.user),c}function qM(s,t,r){return kr(s.app)?Promise.reject(Wa(s)):$M(Yt(s),al.credential(t,r)).catch(async a=>{throw a.code==="auth/password-does-not-meet-requirements"&&r1(s),a})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HM(s,t){return Ta(s,"POST","/v1/accounts:createAuthUri",nn(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GM(s,t){const r=Lk()?Mx():"http://localhost",a={identifier:t,continueUri:r},{signinMethods:i}=await HM(Yt(s),a);return i||[]}function Jg(s,t){return KM(Yt(s),null,t)}async function KM(s,t,r){const{auth:a}=s,l={idToken:await s.getIdToken(),returnSecureToken:!0};t&&(l.email=t),r&&(l.password=r);const o=await Wo(s,DM(a,l));await s._updateTokensIfNecessary(o,!0)}function QM(s,t,r,a){return Yt(s).onIdTokenChanged(t,r,a)}function YM(s,t,r){return Yt(s).beforeAuthStateChanged(t,r)}function Dt(s,t,r,a){return Yt(s).onAuthStateChanged(t,r,a)}function Bc(s){return Yt(s).signOut()}const Bx="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(t,r){this.storageRetriever=t,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Bx,"1"),this.storage.removeItem(Bx),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,r){return this.storage.setItem(t,JSON.stringify(r)),Promise.resolve()}_get(t){const r=this.storage.getItem(t);return Promise.resolve(r?JSON.parse(r):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XM=1e3,JM=10;class n1 extends a1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Qk(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const a=this.storage.getItem(r),i=this.localCache[r];a!==i&&t(r,i,a)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((o,c,d)=>{this.notifyListeners(o,d)});return}const a=t.key;r?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(a);!r&&this.localCache[a]===o||this.notifyListeners(a,o)},l=this.storage.getItem(a);mM()&&l!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,JM):i()}notifyListeners(t,r){this.localCache[t]=r;const a=this.listeners[t];if(a)for(const i of Array.from(a))i(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:a}),!0)})},XM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){const r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}n1.type="LOCAL";const ZM=n1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1 extends a1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}i1.type="SESSION";const o1=i1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e7(s){return Promise.all(s.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(i=>i.isListeningto(t));if(r)return r;const a=new Om(t);return this.receivers.push(a),a}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const r=t,{eventId:a,eventType:i,data:l}=r.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:a,eventType:i});const c=Array.from(o).map(async x=>x(r.origin,l)),d=await e7(c);r.ports[0].postMessage({status:"done",eventId:a,eventType:i,response:d})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Om.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zg(s="",t=10){let r="";for(let a=0;a<t;a++)r+=Math.floor(Math.random()*10);return s+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t7{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,r,a=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let l,o;return new Promise((c,d)=>{const x=Zg("",20);i.port1.start();const f=setTimeout(()=>{d(new Error("unsupported_event"))},a);o={messageChannel:i,onMessage(j){const w=j;if(w.data.eventId===x)switch(w.data.status){case"ack":clearTimeout(f),l=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),c(w.data.response);break;default:clearTimeout(f),clearTimeout(l),d(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:x,data:r},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ja(){return window}function s7(s){ja().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l1(){return typeof ja().WorkerGlobalScope<"u"&&typeof ja().importScripts=="function"}async function r7(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function a7(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)===null||s===void 0?void 0:s.controller)||null}function n7(){return l1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1="firebaseLocalStorageDb",i7=1,zx="firebaseLocalStorage",d1="fbase_key";class pd{constructor(t){this.request=t}toPromise(){return new Promise((t,r)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Vm(s,t){return s.transaction([zx],t?"readwrite":"readonly").objectStore(zx)}function o7(){const s=indexedDB.deleteDatabase(c1);return new pd(s).toPromise()}function P0(){const s=indexedDB.open(c1,i7);return new Promise((t,r)=>{s.addEventListener("error",()=>{r(s.error)}),s.addEventListener("upgradeneeded",()=>{const a=s.result;try{a.createObjectStore(zx,{keyPath:d1})}catch(i){r(i)}}),s.addEventListener("success",async()=>{const a=s.result;a.objectStoreNames.contains(zx)?t(a):(a.close(),await o7(),t(await P0()))})})}async function dN(s,t,r){const a=Vm(s,!0).put({[d1]:t,value:r});return new pd(a).toPromise()}async function l7(s,t){const r=Vm(s,!1).get(t),a=await new pd(r).toPromise();return a===void 0?null:a.value}function uN(s,t){const r=Vm(s,!0).delete(t);return new pd(r).toPromise()}const c7=800,d7=3;class u1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await P0(),this.db)}async _withRetries(t){let r=0;for(;;)try{const a=await this._openDb();return await t(a)}catch(a){if(r++>d7)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return l1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Om._getInstance(n7()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await r7(),!this.activeServiceWorker)return;this.sender=new t7(this.activeServiceWorker);const a=await this.sender._send("ping",{},800);a&&!((t=a[0])===null||t===void 0)&&t.fulfilled&&!((r=a[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||a7()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await P0();return await dN(t,Bx,"1"),await uN(t,Bx),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(a=>dN(a,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){const r=await this._withRetries(a=>l7(a,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>uN(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const l=Vm(i,!1).getAll();return new pd(l).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const r=[],a=new Set;if(t.length!==0)for(const{fbase_key:i,value:l}of t)a.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(l)&&(this.notifyListeners(i,l),r.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!a.has(i)&&(this.notifyListeners(i,null),r.push(i));return r}notifyListeners(t,r){this.localCache[t]=r;const a=this.listeners[t];if(a)for(const i of Array.from(a))i(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),c7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}u1.type="LOCAL";const u7=u1;new xd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x7(s,t){return t?Fa(t):(mt(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey extends Yg{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return To(t,this._buildIdpRequest())}_linkToIdToken(t,r){return To(t,this._buildIdpRequest(r))}_getReauthenticationResolver(t){return To(t,this._buildIdpRequest())}_buildIdpRequest(t){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(r.idToken=t),r}}function m7(s){return s1(s.auth,new ey(s),s.bypassAuthState)}function h7(s){const{auth:t,user:r}=s;return mt(r,t,"internal-error"),UM(r,new ey(s),s.bypassAuthState)}async function p7(s){const{auth:t,user:r}=s;return mt(r,t,"internal-error"),FM(r,new ey(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(t,r,a,i,l=!1){this.auth=t,this.resolver=a,this.user=i,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(t,r)=>{this.pendingPromise={resolve:t,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(t){const{urlResponse:r,sessionId:a,postBody:i,tenantId:l,error:o,type:c}=t;if(o){this.reject(o);return}const d={auth:this.auth,requestUri:r,sessionId:a,tenantId:l||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(x){this.reject(x)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return m7;case"linkViaPopup":case"linkViaRedirect":return p7;case"reauthViaPopup":case"reauthViaRedirect":return h7;default:oa(this.auth,"internal-error")}}resolve(t){Za(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Za(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f7=new xd(2e3,1e4);class ho extends x1{constructor(t,r,a,i,l){super(t,r,i,l),this.provider=a,this.authWindow=null,this.pollId=null,ho.currentPopupAction&&ho.currentPopupAction.cancel(),ho.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return mt(t,this.auth,"internal-error"),t}async onExecution(){Za(this.filter.length===1,"Popup operations only handle one event");const t=Zg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(va(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(va(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ho.currentPopupAction=null}pollUserCancellation(){const t=()=>{var r,a;if(!((a=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||a===void 0)&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(va(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,f7.get())};t()}}ho.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g7="pendingRedirect",Ru=new Map;class y7 extends x1{constructor(t,r,a=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a),this.eventId=null}async execute(){let t=Ru.get(this.auth._key());if(!t){try{const a=await b7(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(a)}catch(r){t=()=>Promise.reject(r)}Ru.set(this.auth._key(),t)}return this.bypassAuthState||Ru.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const r=await this.auth._redirectUserForId(t.eventId);if(r)return this.user=r,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function b7(s,t){const r=N7(t),a=j7(s);if(!await a._isAvailable())return!1;const i=await a._get(r)==="true";return await a._remove(r),i}function v7(s,t){Ru.set(s._key(),t)}function j7(s){return Fa(s._redirectPersistence)}function N7(s){return Au(g7,s.config.apiKey,s.name)}async function w7(s,t,r=!1){if(kr(s.app))return Promise.reject(Wa(s));const a=Ui(s),i=x7(a,t),o=await new y7(a,i,r).execute();return o&&!r&&(delete o.user._redirectEventId,await a._persistUserIfCurrent(o.user),await a._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k7=10*60*1e3;class I7{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let r=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(t,a)&&(r=!0,this.sendToConsumer(t,a),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!P7(t)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=t,r=!0)),r}sendToConsumer(t,r){var a;if(t.error&&!m1(t)){const i=((a=t.error.code)===null||a===void 0?void 0:a.split("auth/")[1])||"internal-error";r.onError(va(this.auth,i))}else r.onAuthEvent(t)}isEventForConsumer(t,r){const a=r.eventId===null||!!t.eventId&&t.eventId===r.eventId;return r.filter.includes(t.type)&&a}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=k7&&this.cachedEventUids.clear(),this.cachedEventUids.has(xN(t))}saveEventToCache(t){this.cachedEventUids.add(xN(t)),this.lastProcessedEventTime=Date.now()}}function xN(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(t=>t).join("-")}function m1({type:s,error:t}){return s==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function P7(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return m1(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S7(s,t={}){return Ta(s,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E7=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,C7=/^https?/;async function T7(s){if(s.config.emulator)return;const{authorizedDomains:t}=await S7(s);for(const r of t)try{if(_7(r))return}catch{}oa(s,"unauthorized-domain")}function _7(s){const t=Mx(),{protocol:r,hostname:a}=new URL(t);if(s.startsWith("chrome-extension://")){const o=new URL(s);return o.hostname===""&&a===""?r==="chrome-extension:"&&s.replace("chrome-extension://","")===t.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===a}if(!C7.test(r))return!1;if(E7.test(s))return a===s;const i=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D7=new xd(3e4,6e4);function mN(){const s=ja().___jsl;if(s!=null&&s.H){for(const t of Object.keys(s.H))if(s.H[t].r=s.H[t].r||[],s.H[t].L=s.H[t].L||[],s.H[t].r=[...s.H[t].L],s.CP)for(let r=0;r<s.CP.length;r++)s.CP[r]=null}}function A7(s){return new Promise((t,r)=>{var a,i,l;function o(){mN(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{mN(),r(va(s,"network-request-failed"))},timeout:D7.get()})}if(!((i=(a=ja().gapi)===null||a===void 0?void 0:a.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((l=ja().gapi)===null||l===void 0)&&l.load)o();else{const c=NM("iframefcb");return ja()[c]=()=>{gapi.load?o():r(va(s,"network-request-failed"))},Xk(`${jM()}?onload=${c}`).catch(d=>r(d))}}).catch(t=>{throw Mu=null,t})}let Mu=null;function R7(s){return Mu=Mu||A7(s),Mu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M7=new xd(5e3,15e3),L7="__/auth/iframe",O7="emulator/auth/iframe",V7={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},B7=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function z7(s){const t=s.config;mt(t.authDomain,s,"auth-domain-config-required");const r=t.emulator?Gg(t,O7):`https://${s.config.authDomain}/${L7}`,a={apiKey:t.apiKey,appName:s.name,v:Vi},i=B7.get(s.config.apiHost);i&&(a.eid=i);const l=s._getFrameworks();return l.length&&(a.fw=l.join(",")),`${r}?${td(a).slice(1)}`}async function F7(s){const t=await R7(s),r=ja().gapi;return mt(r,s,"internal-error"),t.open({where:document.body,url:z7(s),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:V7,dontclear:!0},a=>new Promise(async(i,l)=>{await a.restyle({setHideOnLeave:!1});const o=va(s,"network-request-failed"),c=ja().setTimeout(()=>{l(o)},M7.get());function d(){ja().clearTimeout(c),i(a)}a.ping(d).then(d,()=>{l(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U7={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$7=500,W7=600,q7="_blank",H7="http://localhost";class hN{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function G7(s,t,r,a=$7,i=W7){const l=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-a)/2,0).toString();let c="";const d=Object.assign(Object.assign({},U7),{width:a.toString(),height:i.toString(),top:l,left:o}),x=er().toLowerCase();r&&(c=Wk(x)?q7:r),Uk(x)&&(t=t||H7,d.scrollbars="yes");const f=Object.entries(d).reduce((w,[S,g])=>`${w}${S}=${g},`,"");if(xM(x)&&c!=="_self")return K7(t||"",c),new hN(null);const j=window.open(t||"",c,f);mt(j,s,"popup-blocked");try{j.focus()}catch{}return new hN(j)}function K7(s,t){const r=document.createElement("a");r.href=s,r.target=t;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q7="__/auth/handler",Y7="emulator/auth/handler",X7=encodeURIComponent("fac");async function pN(s,t,r,a,i,l){mt(s.config.authDomain,s,"auth-domain-config-required"),mt(s.config.apiKey,s,"invalid-api-key");const o={apiKey:s.config.apiKey,appName:s.name,authType:r,redirectUrl:a,v:Vi,eventId:i};if(t instanceof e1){t.setDefaultLanguage(s.languageCode),o.providerId=t.providerId||"",r_(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[f,j]of Object.entries(l||{}))o[f]=j}if(t instanceof hd){const f=t.getScopes().filter(j=>j!=="");f.length>0&&(o.scopes=f.join(","))}s.tenantId&&(o.tid=s.tenantId);const c=o;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const d=await s._getAppCheckToken(),x=d?`#${X7}=${encodeURIComponent(d)}`:"";return`${J7(s)}?${td(c).slice(1)}${x}`}function J7({config:s}){return s.emulator?Gg(s,Y7):`https://${s.authDomain}/${Q7}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zh="webStorageSupport";class Z7{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=o1,this._completeRedirectFn=w7,this._overrideRedirectResult=v7}async _openPopup(t,r,a,i){var l;Za((l=this.eventManagers[t._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const o=await pN(t,r,a,Mx(),i);return G7(t,o,Zg())}async _openRedirect(t,r,a,i){await this._originValidation(t);const l=await pN(t,r,a,Mx(),i);return s7(l),new Promise(()=>{})}_initialize(t){const r=t._key();if(this.eventManagers[r]){const{manager:i,promise:l}=this.eventManagers[r];return i?Promise.resolve(i):(Za(l,"If manager is not set, promise should be"),l)}const a=this.initAndGetManager(t);return this.eventManagers[r]={promise:a},a.catch(()=>{delete this.eventManagers[r]}),a}async initAndGetManager(t){const r=await F7(t),a=new I7(t);return r.register("authEvent",i=>(mt(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:a.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:a},this.iframes[t._key()]=r,a}_isIframeWebStorageSupported(t,r){this.iframes[t._key()].send(zh,{type:zh},i=>{var l;const o=(l=i==null?void 0:i[0])===null||l===void 0?void 0:l[zh];o!==void 0&&r(!!o),oa(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const r=t._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=T7(t)),this.originValidationPromises[r]}get _shouldInitProactively(){return Qk()||$k()||Qg()}}const eL=Z7;var fN="@firebase/auth",gN="1.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const r=this.auth.onIdTokenChanged(a=>{t((a==null?void 0:a.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,r),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const r=this.internalListeners.get(t);r&&(this.internalListeners.delete(t),r(),this.updateProactiveRefresh())}assertAuthConfigured(){mt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sL(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function rL(s){na(new Wr("auth",(t,{options:r})=>{const a=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),l=t.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=a.options;mt(o&&!o.includes(":"),"invalid-api-key",{appName:a.name});const d={apiKey:o,authDomain:c,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Yk(s)},x=new yM(a,i,l,d);return EM(x,r),x},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,r,a)=>{t.getProvider("auth-internal").initialize()})),na(new Wr("auth-internal",t=>{const r=Ui(t.getProvider("auth").getImmediate());return(a=>new tL(a))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),yr(fN,gN,sL(s)),yr(fN,gN,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aL=5*60,nL=v4("authIdTokenMaxAge")||aL;let yN=null;const iL=s=>async t=>{const r=t&&await t.getIdTokenResult(),a=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(a&&a>nL)return;const i=r==null?void 0:r.token;yN!==i&&(yN=i,await fetch(s,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function ty(s=hm()){const t=Zn(s,"auth");if(t.isInitialized())return t.getImmediate();const r=SM(s,{popupRedirectResolver:eL,persistence:[u7,ZM,o1]}),a=v4("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(a,location.origin);if(location.origin===l.origin){const o=iL(l.toString());YM(r,o,()=>o(r.currentUser)),QM(r,c=>o(c))}}const i=g4("auth");return i&&CM(r,`http://${i}`),r}function oL(){var s,t;return(t=(s=document.getElementsByTagName("head"))===null||s===void 0?void 0:s[0])!==null&&t!==void 0?t:document}bM({loadJS(s){return new Promise((t,r)=>{const a=document.createElement("script");a.setAttribute("src",s),a.onload=t,a.onerror=i=>{const l=va("internal-error");l.customData=i,r(l)},a.type="text/javascript",a.charset="UTF-8",oL().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});rL("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1="firebasestorage.googleapis.com",lL="storageBucket",cL=2*60*1e3,dL=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a extends qr{constructor(t,r,a=0){super(Fh(t),`Firebase Storage: ${r} (${Fh(t)})`),this.status_=a,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,_a.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return Fh(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ea;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ea||(Ea={}));function Fh(s){return"storage/"+s}function uL(){const s="An unknown error occurred, please check the error payload for server response.";return new _a(Ea.UNKNOWN,s)}function xL(){return new _a(Ea.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function mL(){return new _a(Ea.CANCELED,"User canceled the upload/download.")}function hL(s){return new _a(Ea.INVALID_URL,"Invalid URL '"+s+"'.")}function pL(s){return new _a(Ea.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function bN(s){return new _a(Ea.INVALID_ARGUMENT,s)}function p1(){return new _a(Ea.APP_DELETED,"The Firebase app was deleted.")}function fL(s){return new _a(Ea.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(t,r){this.bucket=t,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,r){let a;try{a=ta.makeFromUrl(t,r)}catch{return new ta(t,"")}if(a.path==="")return a;throw pL(t)}static makeFromUrl(t,r){let a=null;const i="([A-Za-z0-9.\\-_]+)";function l(q){q.path.charAt(q.path.length-1)==="/"&&(q.path_=q.path_.slice(0,-1))}const o="(/(.*))?$",c=new RegExp("^gs://"+i+o,"i"),d={bucket:1,path:3};function x(q){q.path_=decodeURIComponent(q.path)}const f="v[A-Za-z0-9_]+",j=r.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",S=new RegExp(`^https?://${j}/${f}/b/${i}/o${w}`,"i"),g={bucket:1,path:3},V=r===h1?"(?:storage.googleapis.com|storage.cloud.google.com)":r,E="([^?#]*)",_=new RegExp(`^https?://${V}/${i}/${E}`,"i"),R=[{regex:c,indices:d,postModify:l},{regex:S,indices:g,postModify:x},{regex:_,indices:{bucket:1,path:2},postModify:x}];for(let q=0;q<R.length;q++){const G=R[q],Y=G.regex.exec(t);if(Y){const O=Y[G.indices.bucket];let u=Y[G.indices.path];u||(u=""),a=new ta(O,u),G.postModify(a);break}}if(a==null)throw hL(t);return a}}class gL{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yL(s,t,r){let a=1,i=null,l=null,o=!1,c=0;function d(){return c===2}let x=!1;function f(...E){x||(x=!0,t.apply(null,E))}function j(E){i=setTimeout(()=>{i=null,s(S,d())},E)}function w(){l&&clearTimeout(l)}function S(E,..._){if(x){w();return}if(E){w(),f.call(null,E,..._);return}if(d()||o){w(),f.call(null,E,..._);return}a<64&&(a*=2);let R;c===1?(c=2,R=0):R=(a+Math.random())*1e3,j(R)}let g=!1;function V(E){g||(g=!0,w(),!x&&(i!==null?(E||(c=2),clearTimeout(i),j(0)):E||(c=1)))}return j(0),l=setTimeout(()=>{o=!0,V(!0)},r),V}function bL(s){s(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vL(s){return s!==void 0}function vN(s,t,r,a){if(a<t)throw bN(`Invalid value for '${s}'. Expected ${t} or greater.`);if(a>r)throw bN(`Invalid value for '${s}'. Expected ${r} or less.`)}function jL(s){const t=encodeURIComponent;let r="?";for(const a in s)if(s.hasOwnProperty(a)){const i=t(a)+"="+t(s[a]);r=r+i+"&"}return r=r.slice(0,-1),r}var Fx;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(Fx||(Fx={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NL(s,t){const r=s>=500&&s<600,i=[408,429].indexOf(s)!==-1,l=t.indexOf(s)!==-1;return r||i||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wL{constructor(t,r,a,i,l,o,c,d,x,f,j,w=!0){this.url_=t,this.method_=r,this.headers_=a,this.body_=i,this.successCodes_=l,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=d,this.timeout_=x,this.progressCallback_=f,this.connectionFactory_=j,this.retry=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((S,g)=>{this.resolve_=S,this.reject_=g,this.start_()})}start_(){const t=(a,i)=>{if(i){a(!1,new iu(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const o=c=>{const d=c.loaded,x=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,x)};this.progressCallback_!==null&&l.addUploadProgressListener(o),l.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(o),this.pendingConnection_=null;const c=l.getErrorCode()===Fx.NO_ERROR,d=l.getStatus();if(!c||NL(d,this.additionalRetryCodes_)&&this.retry){const f=l.getErrorCode()===Fx.ABORT;a(!1,new iu(!1,null,f));return}const x=this.successCodes_.indexOf(d)!==-1;a(!0,new iu(x,l))})},r=(a,i)=>{const l=this.resolve_,o=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());vL(d)?l(d):l()}catch(d){o(d)}else if(c!==null){const d=uL();d.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,d)):o(d)}else if(i.canceled){const d=this.appDelete_?p1():mL();o(d)}else{const d=xL();o(d)}};this.canceled_?r(!1,new iu(!1,null,!0)):this.backoffId_=yL(t,r,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&bL(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class iu{constructor(t,r,a){this.wasSuccessCode=t,this.connection=r,this.canceled=!!a}}function kL(s,t){t!==null&&t.length>0&&(s.Authorization="Firebase "+t)}function IL(s,t){s["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function PL(s,t){t&&(s["X-Firebase-GMPID"]=t)}function SL(s,t){t!==null&&(s["X-Firebase-AppCheck"]=t)}function EL(s,t,r,a,i,l,o=!0){const c=jL(s.urlParams),d=s.url+c,x=Object.assign({},s.headers);return PL(x,t),kL(x,r),IL(x,l),SL(x,a),new wL(d,s.method,x,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CL(s){if(s.length===0)return null;const t=s.lastIndexOf("/");return t===-1?"":s.slice(0,t)}function TL(s){const t=s.lastIndexOf("/",s.length-2);return t===-1?s:s.slice(t+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(t,r){this._service=t,r instanceof ta?this._location=r:this._location=ta.makeFromUrl(r,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,r){return new Ux(t,r)}get root(){const t=new ta(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return TL(this._location.path)}get storage(){return this._service}get parent(){const t=CL(this._location.path);if(t===null)return null;const r=new ta(this._location.bucket,t);return new Ux(this._service,r)}_throwIfRoot(t){if(this._location.path==="")throw fL(t)}}function jN(s,t){const r=t==null?void 0:t[lL];return r==null?null:ta.makeFromBucketSpec(r,s)}function _L(s,t,r,a={}){s.host=`${t}:${r}`,s._protocol="http";const{mockUserToken:i}=a;i&&(s._overrideAuthToken=typeof i=="string"?i:j4(i,s.app.options.projectId))}class DL{constructor(t,r,a,i,l){this.app=t,this._authProvider=r,this._appCheckProvider=a,this._url=i,this._firebaseVersion=l,this._bucket=null,this._host=h1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=cL,this._maxUploadRetryTime=dL,this._requests=new Set,i!=null?this._bucket=ta.makeFromBucketSpec(i,this._host):this._bucket=jN(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=ta.makeFromBucketSpec(this._url,t):this._bucket=jN(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){vN("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){vN("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const r=await t.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(kr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Ux(this,t)}_makeRequest(t,r,a,i,l=!0){if(this._deleted)return new gL(p1());{const o=EL(t,this._appId,a,i,r,this._firebaseVersion,l);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,r){const[a,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,r,a,i).getPromise()}}const NN="@firebase/storage",wN="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1="storage";function AL(s=hm(),t){s=Yt(s);const a=Zn(s,f1).getImmediate({identifier:t}),i=y4("storage");return i&&RL(a,...i),a}function RL(s,t,r,a={}){_L(s,t,r,a)}function ML(s,{instanceIdentifier:t}){const r=s.getProvider("app").getImmediate(),a=s.getProvider("auth-internal"),i=s.getProvider("app-check-internal");return new DL(r,a,i,t,Vi)}function LL(){na(new Wr(f1,ML,"PUBLIC").setMultipleInstances(!0)),yr(NN,wN,""),yr(NN,wN,"esm2017")}LL();const OL={apiKey:"AIzaSyDYacL_WIzZUSP-Tjl3794P_jHocMDqN9g",authDomain:"blackkstreaming-55f0e.firebaseapp.com",projectId:"blackkstreaming-55f0e",storageBucket:"blackkstreaming-55f0e.firebasestorage.app",messagingSenderId:"998157647233",appId:"1:998157647233:web:3e5b8128a0275ae4553c80",measurementId:"G-GFM50WNMSP"},fd=E4(OL);$R(fd);const I=x6(fd);AL(fd);const We=ty(fd),sy=b.createContext({});function ry(s){const t=b.useRef(null);return t.current===null&&(t.current=s()),t.current}const ay=typeof window<"u",g1=ay?b.useLayoutEffect:b.useEffect,Bm=b.createContext(null);function ny(s,t){s.indexOf(t)===-1&&s.push(t)}function iy(s,t){const r=s.indexOf(t);r>-1&&s.splice(r,1)}const en=(s,t,r)=>r>t?t:r<s?s:r;let oy=()=>{};const tn={},y1=s=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(s);function b1(s){return typeof s=="object"&&s!==null}const v1=s=>/^0[^.\s]+$/u.test(s);function ly(s){let t;return()=>(t===void 0&&(t=s()),t)}const Fr=s=>s,VL=(s,t)=>r=>t(s(r)),gd=(...s)=>s.reduce(VL),zc=(s,t,r)=>{const a=t-s;return a===0?1:(r-s)/a};class cy{constructor(){this.subscriptions=[]}add(t){return ny(this.subscriptions,t),()=>iy(this.subscriptions,t)}notify(t,r,a){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,r,a);else for(let l=0;l<i;l++){const o=this.subscriptions[l];o&&o(t,r,a)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Na=s=>s*1e3,wa=s=>s/1e3;function j1(s,t){return t?s*(1e3/t):0}const N1=(s,t,r)=>(((1-3*r+3*t)*s+(3*r-6*t))*s+3*t)*s,BL=1e-7,zL=12;function FL(s,t,r,a,i){let l,o,c=0;do o=t+(r-t)/2,l=N1(o,a,i)-s,l>0?r=o:t=o;while(Math.abs(l)>BL&&++c<zL);return o}function yd(s,t,r,a){if(s===t&&r===a)return Fr;const i=l=>FL(l,0,1,s,r);return l=>l===0||l===1?l:N1(i(l),t,a)}const w1=s=>t=>t<=.5?s(2*t)/2:(2-s(2*(1-t)))/2,k1=s=>t=>1-s(1-t),I1=yd(.33,1.53,.69,.99),dy=k1(I1),P1=w1(dy),S1=s=>(s*=2)<1?.5*dy(s):.5*(2-Math.pow(2,-10*(s-1))),uy=s=>1-Math.sin(Math.acos(s)),E1=k1(uy),C1=w1(uy),UL=yd(.42,0,1,1),$L=yd(0,0,.58,1),T1=yd(.42,0,.58,1),WL=s=>Array.isArray(s)&&typeof s[0]!="number",_1=s=>Array.isArray(s)&&typeof s[0]=="number",qL={linear:Fr,easeIn:UL,easeInOut:T1,easeOut:$L,circIn:uy,circInOut:C1,circOut:E1,backIn:dy,backInOut:P1,backOut:I1,anticipate:S1},HL=s=>typeof s=="string",kN=s=>{if(_1(s)){oy(s.length===4);const[t,r,a,i]=s;return yd(t,r,a,i)}else if(HL(s))return qL[s];return s},ou=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],IN={value:null,addProjectionMetrics:null};function GL(s,t){let r=new Set,a=new Set,i=!1,l=!1;const o=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1},d=0;function x(j){o.has(j)&&(f.schedule(j),s()),d++,j(c)}const f={schedule:(j,w=!1,S=!1)=>{const V=S&&i?r:a;return w&&o.add(j),V.has(j)||V.add(j),j},cancel:j=>{a.delete(j),o.delete(j)},process:j=>{if(c=j,i){l=!0;return}i=!0,[r,a]=[a,r],r.forEach(x),t&&IN.value&&IN.value.frameloop[t].push(d),d=0,r.clear(),i=!1,l&&(l=!1,f.process(j))}};return f}const KL=40;function D1(s,t){let r=!1,a=!0;const i={delta:0,timestamp:0,isProcessing:!1},l=()=>r=!0,o=ou.reduce((R,q)=>(R[q]=GL(l,t?q:void 0),R),{}),{setup:c,read:d,resolveKeyframes:x,preUpdate:f,update:j,preRender:w,render:S,postRender:g}=o,V=()=>{const R=tn.useManualTiming?i.timestamp:performance.now();r=!1,tn.useManualTiming||(i.delta=a?1e3/60:Math.max(Math.min(R-i.timestamp,KL),1)),i.timestamp=R,i.isProcessing=!0,c.process(i),d.process(i),x.process(i),f.process(i),j.process(i),w.process(i),S.process(i),g.process(i),i.isProcessing=!1,r&&t&&(a=!1,s(V))},E=()=>{r=!0,a=!0,i.isProcessing||s(V)};return{schedule:ou.reduce((R,q)=>{const G=o[q];return R[q]=(Y,O=!1,u=!1)=>(r||E(),G.schedule(Y,O,u)),R},{}),cancel:R=>{for(let q=0;q<ou.length;q++)o[ou[q]].cancel(R)},state:i,steps:o}}const{schedule:ls,cancel:Kn,state:Ms,steps:Uh}=D1(typeof requestAnimationFrame<"u"?requestAnimationFrame:Fr,!0);let Lu;function QL(){Lu=void 0}const hr={now:()=>(Lu===void 0&&hr.set(Ms.isProcessing||tn.useManualTiming?Ms.timestamp:performance.now()),Lu),set:s=>{Lu=s,queueMicrotask(QL)}},A1=s=>t=>typeof t=="string"&&t.startsWith(s),xy=A1("--"),YL=A1("var(--"),my=s=>YL(s)?XL.test(s.split("/*")[0].trim()):!1,XL=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,nl={test:s=>typeof s=="number",parse:parseFloat,transform:s=>s},Fc={...nl,transform:s=>en(0,1,s)},lu={...nl,default:1},ac=s=>Math.round(s*1e5)/1e5,hy=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function JL(s){return s==null}const ZL=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,py=(s,t)=>r=>!!(typeof r=="string"&&ZL.test(r)&&r.startsWith(s)||t&&!JL(r)&&Object.prototype.hasOwnProperty.call(r,t)),R1=(s,t,r)=>a=>{if(typeof a!="string")return a;const[i,l,o,c]=a.match(hy);return{[s]:parseFloat(i),[t]:parseFloat(l),[r]:parseFloat(o),alpha:c!==void 0?parseFloat(c):1}},e9=s=>en(0,255,s),$h={...nl,transform:s=>Math.round(e9(s))},fi={test:py("rgb","red"),parse:R1("red","green","blue"),transform:({red:s,green:t,blue:r,alpha:a=1})=>"rgba("+$h.transform(s)+", "+$h.transform(t)+", "+$h.transform(r)+", "+ac(Fc.transform(a))+")"};function t9(s){let t="",r="",a="",i="";return s.length>5?(t=s.substring(1,3),r=s.substring(3,5),a=s.substring(5,7),i=s.substring(7,9)):(t=s.substring(1,2),r=s.substring(2,3),a=s.substring(3,4),i=s.substring(4,5),t+=t,r+=r,a+=a,i+=i),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(a,16),alpha:i?parseInt(i,16)/255:1}}const S0={test:py("#"),parse:t9,transform:fi.transform},bd=s=>({test:t=>typeof t=="string"&&t.endsWith(s)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${s}`}),hn=bd("deg"),ka=bd("%"),ht=bd("px"),s9=bd("vh"),r9=bd("vw"),PN=(()=>({...ka,parse:s=>ka.parse(s)/100,transform:s=>ka.transform(s*100)}))(),po={test:py("hsl","hue"),parse:R1("hue","saturation","lightness"),transform:({hue:s,saturation:t,lightness:r,alpha:a=1})=>"hsla("+Math.round(s)+", "+ka.transform(ac(t))+", "+ka.transform(ac(r))+", "+ac(Fc.transform(a))+")"},Qs={test:s=>fi.test(s)||S0.test(s)||po.test(s),parse:s=>fi.test(s)?fi.parse(s):po.test(s)?po.parse(s):S0.parse(s),transform:s=>typeof s=="string"?s:s.hasOwnProperty("red")?fi.transform(s):po.transform(s)},a9=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function n9(s){var t,r;return isNaN(s)&&typeof s=="string"&&(((t=s.match(hy))==null?void 0:t.length)||0)+(((r=s.match(a9))==null?void 0:r.length)||0)>0}const M1="number",L1="color",i9="var",o9="var(",SN="${}",l9=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Uc(s){const t=s.toString(),r=[],a={color:[],number:[],var:[]},i=[];let l=0;const c=t.replace(l9,d=>(Qs.test(d)?(a.color.push(l),i.push(L1),r.push(Qs.parse(d))):d.startsWith(o9)?(a.var.push(l),i.push(i9),r.push(d)):(a.number.push(l),i.push(M1),r.push(parseFloat(d))),++l,SN)).split(SN);return{values:r,split:c,indexes:a,types:i}}function O1(s){return Uc(s).values}function V1(s){const{split:t,types:r}=Uc(s),a=t.length;return i=>{let l="";for(let o=0;o<a;o++)if(l+=t[o],i[o]!==void 0){const c=r[o];c===M1?l+=ac(i[o]):c===L1?l+=Qs.transform(i[o]):l+=i[o]}return l}}const c9=s=>typeof s=="number"?0:s;function d9(s){const t=O1(s);return V1(s)(t.map(c9))}const Qn={test:n9,parse:O1,createTransformer:V1,getAnimatableNone:d9};function Wh(s,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?s+(t-s)*6*r:r<1/2?t:r<2/3?s+(t-s)*(2/3-r)*6:s}function u9({hue:s,saturation:t,lightness:r,alpha:a}){s/=360,t/=100,r/=100;let i=0,l=0,o=0;if(!t)i=l=o=r;else{const c=r<.5?r*(1+t):r+t-r*t,d=2*r-c;i=Wh(d,c,s+1/3),l=Wh(d,c,s),o=Wh(d,c,s-1/3)}return{red:Math.round(i*255),green:Math.round(l*255),blue:Math.round(o*255),alpha:a}}function $x(s,t){return r=>r>0?t:s}const ns=(s,t,r)=>s+(t-s)*r,qh=(s,t,r)=>{const a=s*s,i=r*(t*t-a)+a;return i<0?0:Math.sqrt(i)},x9=[S0,fi,po],m9=s=>x9.find(t=>t.test(s));function EN(s){const t=m9(s);if(!t)return!1;let r=t.parse(s);return t===po&&(r=u9(r)),r}const CN=(s,t)=>{const r=EN(s),a=EN(t);if(!r||!a)return $x(s,t);const i={...r};return l=>(i.red=qh(r.red,a.red,l),i.green=qh(r.green,a.green,l),i.blue=qh(r.blue,a.blue,l),i.alpha=ns(r.alpha,a.alpha,l),fi.transform(i))},E0=new Set(["none","hidden"]);function h9(s,t){return E0.has(s)?r=>r<=0?s:t:r=>r>=1?t:s}function p9(s,t){return r=>ns(s,t,r)}function fy(s){return typeof s=="number"?p9:typeof s=="string"?my(s)?$x:Qs.test(s)?CN:y9:Array.isArray(s)?B1:typeof s=="object"?Qs.test(s)?CN:f9:$x}function B1(s,t){const r=[...s],a=r.length,i=s.map((l,o)=>fy(l)(l,t[o]));return l=>{for(let o=0;o<a;o++)r[o]=i[o](l);return r}}function f9(s,t){const r={...s,...t},a={};for(const i in r)s[i]!==void 0&&t[i]!==void 0&&(a[i]=fy(s[i])(s[i],t[i]));return i=>{for(const l in a)r[l]=a[l](i);return r}}function g9(s,t){const r=[],a={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const l=t.types[i],o=s.indexes[l][a[l]],c=s.values[o]??0;r[i]=c,a[l]++}return r}const y9=(s,t)=>{const r=Qn.createTransformer(t),a=Uc(s),i=Uc(t);return a.indexes.var.length===i.indexes.var.length&&a.indexes.color.length===i.indexes.color.length&&a.indexes.number.length>=i.indexes.number.length?E0.has(s)&&!i.values.length||E0.has(t)&&!a.values.length?h9(s,t):gd(B1(g9(a,i),i.values),r):$x(s,t)};function z1(s,t,r){return typeof s=="number"&&typeof t=="number"&&typeof r=="number"?ns(s,t,r):fy(s)(s,t)}const b9=s=>{const t=({timestamp:r})=>s(r);return{start:(r=!0)=>ls.update(t,r),stop:()=>Kn(t),now:()=>Ms.isProcessing?Ms.timestamp:hr.now()}},F1=(s,t,r=10)=>{let a="";const i=Math.max(Math.round(t/r),2);for(let l=0;l<i;l++)a+=s(l/(i-1))+", ";return`linear(${a.substring(0,a.length-2)})`},Wx=2e4;function gy(s){let t=0;const r=50;let a=s.next(t);for(;!a.done&&t<Wx;)t+=r,a=s.next(t);return t>=Wx?1/0:t}function v9(s,t=100,r){const a=r({...s,keyframes:[0,t]}),i=Math.min(gy(a),Wx);return{type:"keyframes",ease:l=>a.next(i*l).value/t,duration:wa(i)}}const j9=5;function U1(s,t,r){const a=Math.max(t-j9,0);return j1(r-s(a),t-a)}const ms={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Hh=.001;function N9({duration:s=ms.duration,bounce:t=ms.bounce,velocity:r=ms.velocity,mass:a=ms.mass}){let i,l,o=1-t;o=en(ms.minDamping,ms.maxDamping,o),s=en(ms.minDuration,ms.maxDuration,wa(s)),o<1?(i=x=>{const f=x*o,j=f*s,w=f-r,S=C0(x,o),g=Math.exp(-j);return Hh-w/S*g},l=x=>{const j=x*o*s,w=j*r+r,S=Math.pow(o,2)*Math.pow(x,2)*s,g=Math.exp(-j),V=C0(Math.pow(x,2),o);return(-i(x)+Hh>0?-1:1)*((w-S)*g)/V}):(i=x=>{const f=Math.exp(-x*s),j=(x-r)*s+1;return-Hh+f*j},l=x=>{const f=Math.exp(-x*s),j=(r-x)*(s*s);return f*j});const c=5/s,d=k9(i,l,c);if(s=Na(s),isNaN(d))return{stiffness:ms.stiffness,damping:ms.damping,duration:s};{const x=Math.pow(d,2)*a;return{stiffness:x,damping:o*2*Math.sqrt(a*x),duration:s}}}const w9=12;function k9(s,t,r){let a=r;for(let i=1;i<w9;i++)a=a-s(a)/t(a);return a}function C0(s,t){return s*Math.sqrt(1-t*t)}const I9=["duration","bounce"],P9=["stiffness","damping","mass"];function TN(s,t){return t.some(r=>s[r]!==void 0)}function S9(s){let t={velocity:ms.velocity,stiffness:ms.stiffness,damping:ms.damping,mass:ms.mass,isResolvedFromDuration:!1,...s};if(!TN(s,P9)&&TN(s,I9))if(s.visualDuration){const r=s.visualDuration,a=2*Math.PI/(r*1.2),i=a*a,l=2*en(.05,1,1-(s.bounce||0))*Math.sqrt(i);t={...t,mass:ms.mass,stiffness:i,damping:l}}else{const r=N9(s);t={...t,...r,mass:ms.mass},t.isResolvedFromDuration=!0}return t}function qx(s=ms.visualDuration,t=ms.bounce){const r=typeof s!="object"?{visualDuration:s,keyframes:[0,1],bounce:t}:s;let{restSpeed:a,restDelta:i}=r;const l=r.keyframes[0],o=r.keyframes[r.keyframes.length-1],c={done:!1,value:l},{stiffness:d,damping:x,mass:f,duration:j,velocity:w,isResolvedFromDuration:S}=S9({...r,velocity:-wa(r.velocity||0)}),g=w||0,V=x/(2*Math.sqrt(d*f)),E=o-l,_=wa(Math.sqrt(d/f)),M=Math.abs(E)<5;a||(a=M?ms.restSpeed.granular:ms.restSpeed.default),i||(i=M?ms.restDelta.granular:ms.restDelta.default);let R;if(V<1){const G=C0(_,V);R=Y=>{const O=Math.exp(-V*_*Y);return o-O*((g+V*_*E)/G*Math.sin(G*Y)+E*Math.cos(G*Y))}}else if(V===1)R=G=>o-Math.exp(-_*G)*(E+(g+_*E)*G);else{const G=_*Math.sqrt(V*V-1);R=Y=>{const O=Math.exp(-V*_*Y),u=Math.min(G*Y,300);return o-O*((g+V*_*E)*Math.sinh(u)+G*E*Math.cosh(u))/G}}const q={calculatedDuration:S&&j||null,next:G=>{const Y=R(G);if(S)c.done=G>=j;else{let O=G===0?g:0;V<1&&(O=G===0?Na(g):U1(R,G,Y));const u=Math.abs(O)<=a,U=Math.abs(o-Y)<=i;c.done=u&&U}return c.value=c.done?o:Y,c},toString:()=>{const G=Math.min(gy(q),Wx),Y=F1(O=>q.next(G*O).value,G,30);return G+"ms "+Y},toTransition:()=>{}};return q}qx.applyToOptions=s=>{const t=v9(s,100,qx);return s.ease=t.ease,s.duration=Na(t.duration),s.type="keyframes",s};function T0({keyframes:s,velocity:t=0,power:r=.8,timeConstant:a=325,bounceDamping:i=10,bounceStiffness:l=500,modifyTarget:o,min:c,max:d,restDelta:x=.5,restSpeed:f}){const j=s[0],w={done:!1,value:j},S=u=>c!==void 0&&u<c||d!==void 0&&u>d,g=u=>c===void 0?d:d===void 0||Math.abs(c-u)<Math.abs(d-u)?c:d;let V=r*t;const E=j+V,_=o===void 0?E:o(E);_!==E&&(V=_-j);const M=u=>-V*Math.exp(-u/a),R=u=>_+M(u),q=u=>{const U=M(u),F=R(u);w.done=Math.abs(U)<=x,w.value=w.done?_:F};let G,Y;const O=u=>{S(w.value)&&(G=u,Y=qx({keyframes:[w.value,g(w.value)],velocity:U1(R,u,w.value),damping:i,stiffness:l,restDelta:x,restSpeed:f}))};return O(0),{calculatedDuration:null,next:u=>{let U=!1;return!Y&&G===void 0&&(U=!0,q(u),O(u)),G!==void 0&&u>=G?Y.next(u-G):(!U&&q(u),w)}}}function E9(s,t,r){const a=[],i=r||tn.mix||z1,l=s.length-1;for(let o=0;o<l;o++){let c=i(s[o],s[o+1]);if(t){const d=Array.isArray(t)?t[o]||Fr:t;c=gd(d,c)}a.push(c)}return a}function C9(s,t,{clamp:r=!0,ease:a,mixer:i}={}){const l=s.length;if(oy(l===t.length),l===1)return()=>t[0];if(l===2&&t[0]===t[1])return()=>t[1];const o=s[0]===s[1];s[0]>s[l-1]&&(s=[...s].reverse(),t=[...t].reverse());const c=E9(t,a,i),d=c.length,x=f=>{if(o&&f<s[0])return t[0];let j=0;if(d>1)for(;j<s.length-2&&!(f<s[j+1]);j++);const w=zc(s[j],s[j+1],f);return c[j](w)};return r?f=>x(en(s[0],s[l-1],f)):x}function T9(s,t){const r=s[s.length-1];for(let a=1;a<=t;a++){const i=zc(0,t,a);s.push(ns(r,1,i))}}function _9(s){const t=[0];return T9(t,s.length-1),t}function D9(s,t){return s.map(r=>r*t)}function A9(s,t){return s.map(()=>t||T1).splice(0,s.length-1)}function nc({duration:s=300,keyframes:t,times:r,ease:a="easeInOut"}){const i=WL(a)?a.map(kN):kN(a),l={done:!1,value:t[0]},o=D9(r&&r.length===t.length?r:_9(t),s),c=C9(o,t,{ease:Array.isArray(i)?i:A9(t,i)});return{calculatedDuration:s,next:d=>(l.value=c(d),l.done=d>=s,l)}}const R9=s=>s!==null;function yy(s,{repeat:t,repeatType:r="loop"},a,i=1){const l=s.filter(R9),c=i<0||t&&r!=="loop"&&t%2===1?0:l.length-1;return!c||a===void 0?l[c]:a}const M9={decay:T0,inertia:T0,tween:nc,keyframes:nc,spring:qx};function $1(s){typeof s.type=="string"&&(s.type=M9[s.type])}class by{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,r){return this.finished.then(t,r)}}const L9=s=>s/100;class vy extends by{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=(r=!0)=>{var a,i;if(r){const{motionValue:l}=this.options;l&&l.updatedAt!==hr.now()&&this.tick(hr.now())}this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(a=this.options).onStop)==null||i.call(a))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;$1(t);const{type:r=nc,repeat:a=0,repeatDelay:i=0,repeatType:l,velocity:o=0}=t;let{keyframes:c}=t;const d=r||nc;d!==nc&&typeof c[0]!="number"&&(this.mixKeyframes=gd(L9,z1(c[0],c[1])),c=[0,100]);const x=d({...t,keyframes:c});l==="mirror"&&(this.mirroredGenerator=d({...t,keyframes:[...c].reverse(),velocity:-o})),x.calculatedDuration===null&&(x.calculatedDuration=gy(x));const{calculatedDuration:f}=x;this.calculatedDuration=f,this.resolvedDuration=f+i,this.totalDuration=this.resolvedDuration*(a+1)-i,this.generator=x}updateTime(t){const r=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(t,r=!1){const{generator:a,totalDuration:i,mixKeyframes:l,mirroredGenerator:o,resolvedDuration:c,calculatedDuration:d}=this;if(this.startTime===null)return a.next(0);const{delay:x=0,keyframes:f,repeat:j,repeatType:w,repeatDelay:S,type:g,onUpdate:V,finalKeyframe:E}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-i/this.speed,this.startTime)),r?this.currentTime=t:this.updateTime(t);const _=this.currentTime-x*(this.playbackSpeed>=0?1:-1),M=this.playbackSpeed>=0?_<0:_>i;this.currentTime=Math.max(_,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let R=this.currentTime,q=a;if(j){const u=Math.min(this.currentTime,i)/c;let U=Math.floor(u),F=u%1;!F&&u>=1&&(F=1),F===1&&U--,U=Math.min(U,j+1),!!(U%2)&&(w==="reverse"?(F=1-F,S&&(F-=S/c)):w==="mirror"&&(q=o)),R=en(0,1,F)*c}const G=M?{done:!1,value:f[0]}:q.next(R);l&&(G.value=l(G.value));let{done:Y}=G;!M&&d!==null&&(Y=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const O=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Y);return O&&g!==T0&&(G.value=yy(f,this.options,E,this.speed)),V&&V(G.value),O&&this.finish(),G}then(t,r){return this.finished.then(t,r)}get duration(){return wa(this.calculatedDuration)}get time(){return wa(this.currentTime)}set time(t){var r;t=Na(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(r=this.driver)==null||r.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(hr.now());const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=wa(this.currentTime))}play(){var i,l;if(this.isStopped)return;const{driver:t=b9,startTime:r}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),(l=(i=this.options).onPlay)==null||l.call(i);const a=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=a):this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime||(this.startTime=r??a),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(hr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,r;this.notifyFinished(),this.teardown(),this.state="finished",(r=(t=this.options).onComplete)==null||r.call(t)}cancel(){var t,r;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(r=(t=this.options).onCancel)==null||r.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var r;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(r=this.driver)==null||r.stop(),t.observe(this)}}function O9(s){for(let t=1;t<s.length;t++)s[t]??(s[t]=s[t-1])}const gi=s=>s*180/Math.PI,_0=s=>{const t=gi(Math.atan2(s[1],s[0]));return D0(t)},V9={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:s=>(Math.abs(s[0])+Math.abs(s[3]))/2,rotate:_0,rotateZ:_0,skewX:s=>gi(Math.atan(s[1])),skewY:s=>gi(Math.atan(s[2])),skew:s=>(Math.abs(s[1])+Math.abs(s[2]))/2},D0=s=>(s=s%360,s<0&&(s+=360),s),_N=_0,DN=s=>Math.sqrt(s[0]*s[0]+s[1]*s[1]),AN=s=>Math.sqrt(s[4]*s[4]+s[5]*s[5]),B9={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:DN,scaleY:AN,scale:s=>(DN(s)+AN(s))/2,rotateX:s=>D0(gi(Math.atan2(s[6],s[5]))),rotateY:s=>D0(gi(Math.atan2(-s[2],s[0]))),rotateZ:_N,rotate:_N,skewX:s=>gi(Math.atan(s[4])),skewY:s=>gi(Math.atan(s[1])),skew:s=>(Math.abs(s[1])+Math.abs(s[4]))/2};function A0(s){return s.includes("scale")?1:0}function R0(s,t){if(!s||s==="none")return A0(t);const r=s.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let a,i;if(r)a=B9,i=r;else{const c=s.match(/^matrix\(([-\d.e\s,]+)\)$/u);a=V9,i=c}if(!i)return A0(t);const l=a[t],o=i[1].split(",").map(F9);return typeof l=="function"?l(o):o[l]}const z9=(s,t)=>{const{transform:r="none"}=getComputedStyle(s);return R0(r,t)};function F9(s){return parseFloat(s.trim())}const il=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ol=(()=>new Set(il))(),RN=s=>s===nl||s===ht,U9=new Set(["x","y","z"]),$9=il.filter(s=>!U9.has(s));function W9(s){const t=[];return $9.forEach(r=>{const a=s.getValue(r);a!==void 0&&(t.push([r,a.get()]),a.set(r.startsWith("scale")?1:0))}),t}const vi={width:({x:s},{paddingLeft:t="0",paddingRight:r="0"})=>s.max-s.min-parseFloat(t)-parseFloat(r),height:({y:s},{paddingTop:t="0",paddingBottom:r="0"})=>s.max-s.min-parseFloat(t)-parseFloat(r),top:(s,{top:t})=>parseFloat(t),left:(s,{left:t})=>parseFloat(t),bottom:({y:s},{top:t})=>parseFloat(t)+(s.max-s.min),right:({x:s},{left:t})=>parseFloat(t)+(s.max-s.min),x:(s,{transform:t})=>R0(t,"x"),y:(s,{transform:t})=>R0(t,"y")};vi.translateX=vi.x;vi.translateY=vi.y;const ji=new Set;let M0=!1,L0=!1,O0=!1;function W1(){if(L0){const s=Array.from(ji).filter(a=>a.needsMeasurement),t=new Set(s.map(a=>a.element)),r=new Map;t.forEach(a=>{const i=W9(a);i.length&&(r.set(a,i),a.render())}),s.forEach(a=>a.measureInitialState()),t.forEach(a=>{a.render();const i=r.get(a);i&&i.forEach(([l,o])=>{var c;(c=a.getValue(l))==null||c.set(o)})}),s.forEach(a=>a.measureEndState()),s.forEach(a=>{a.suspendedScrollY!==void 0&&window.scrollTo(0,a.suspendedScrollY)})}L0=!1,M0=!1,ji.forEach(s=>s.complete(O0)),ji.clear()}function q1(){ji.forEach(s=>{s.readKeyframes(),s.needsMeasurement&&(L0=!0)})}function q9(){O0=!0,q1(),W1(),O0=!1}class jy{constructor(t,r,a,i,l,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=a,this.motionValue=i,this.element=l,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(ji.add(this),M0||(M0=!0,ls.read(q1),ls.resolveKeyframes(W1))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:a,motionValue:i}=this;if(t[0]===null){const l=i==null?void 0:i.get(),o=t[t.length-1];if(l!==void 0)t[0]=l;else if(a&&r){const c=a.readValue(r,o);c!=null&&(t[0]=c)}t[0]===void 0&&(t[0]=o),i&&l===void 0&&i.set(t[0])}O9(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),ji.delete(this)}cancel(){this.state==="scheduled"&&(ji.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const H9=s=>s.startsWith("--");function G9(s,t,r){H9(t)?s.style.setProperty(t,r):s.style[t]=r}const K9=ly(()=>window.ScrollTimeline!==void 0),Q9={};function Y9(s,t){const r=ly(s);return()=>Q9[t]??r()}const H1=Y9(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Fl=([s,t,r,a])=>`cubic-bezier(${s}, ${t}, ${r}, ${a})`,MN={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Fl([0,.65,.55,1]),circOut:Fl([.55,0,1,.45]),backIn:Fl([.31,.01,.66,-.59]),backOut:Fl([.33,1.53,.69,.99])};function G1(s,t){if(s)return typeof s=="function"?H1()?F1(s,t):"ease-out":_1(s)?Fl(s):Array.isArray(s)?s.map(r=>G1(r,t)||MN.easeOut):MN[s]}function X9(s,t,r,{delay:a=0,duration:i=300,repeat:l=0,repeatType:o="loop",ease:c="easeOut",times:d}={},x=void 0){const f={[t]:r};d&&(f.offset=d);const j=G1(c,i);Array.isArray(j)&&(f.easing=j);const w={delay:a,duration:i,easing:Array.isArray(j)?"linear":j,fill:"both",iterations:l+1,direction:o==="reverse"?"alternate":"normal"};return x&&(w.pseudoElement=x),s.animate(f,w)}function K1(s){return typeof s=="function"&&"applyToOptions"in s}function J9({type:s,...t}){return K1(s)&&H1()?s.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class Z9 extends by{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:r,name:a,keyframes:i,pseudoElement:l,allowFlatten:o=!1,finalKeyframe:c,onComplete:d}=t;this.isPseudoElement=!!l,this.allowFlatten=o,this.options=t,oy(typeof t.type!="string");const x=J9(t);this.animation=X9(r,a,i,x,l),x.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!l){const f=yy(i,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(f):G9(r,a,f),this.animation.cancel()}d==null||d(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,r;(r=(t=this.animation).finish)==null||r.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,r;this.isPseudoElement||(r=(t=this.animation).commitStyles)==null||r.call(t)}get duration(){var r,a;const t=((a=(r=this.animation.effect)==null?void 0:r.getComputedTiming)==null?void 0:a.call(r).duration)||0;return wa(Number(t))}get time(){return wa(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Na(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:r}){var a;return this.allowFlatten&&((a=this.animation.effect)==null||a.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&K9()?(this.animation.timeline=t,Fr):r(this)}}const Q1={anticipate:S1,backInOut:P1,circInOut:C1};function eO(s){return s in Q1}function tO(s){typeof s.ease=="string"&&eO(s.ease)&&(s.ease=Q1[s.ease])}const LN=10;class sO extends Z9{constructor(t){tO(t),$1(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:r,onUpdate:a,onComplete:i,element:l,...o}=this.options;if(!r)return;if(t!==void 0){r.set(t);return}const c=new vy({...o,autoplay:!1}),d=Na(this.finishedTime??this.time);r.setWithVelocity(c.sample(d-LN).value,c.sample(d).value,LN),c.stop()}}const ON=(s,t)=>t==="zIndex"?!1:!!(typeof s=="number"||Array.isArray(s)||typeof s=="string"&&(Qn.test(s)||s==="0")&&!s.startsWith("url("));function rO(s){const t=s[0];if(s.length===1)return!0;for(let r=0;r<s.length;r++)if(s[r]!==t)return!0}function aO(s,t,r,a){const i=s[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const l=s[s.length-1],o=ON(i,t),c=ON(l,t);return!o||!c?!1:rO(s)||(r==="spring"||K1(r))&&a}function Ny(s){return b1(s)&&"offsetHeight"in s}const nO=new Set(["opacity","clipPath","filter","transform"]),iO=ly(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function oO(s){var x;const{motionValue:t,name:r,repeatDelay:a,repeatType:i,damping:l,type:o}=s;if(!Ny((x=t==null?void 0:t.owner)==null?void 0:x.current))return!1;const{onUpdate:c,transformTemplate:d}=t.owner.getProps();return iO()&&r&&nO.has(r)&&(r!=="transform"||!d)&&!c&&!a&&i!=="mirror"&&l!==0&&o!=="inertia"}const lO=40;class cO extends by{constructor({autoplay:t=!0,delay:r=0,type:a="keyframes",repeat:i=0,repeatDelay:l=0,repeatType:o="loop",keyframes:c,name:d,motionValue:x,element:f,...j}){var g;super(),this.stop=()=>{var V,E;this._animation&&(this._animation.stop(),(V=this.stopTimeline)==null||V.call(this)),(E=this.keyframeResolver)==null||E.cancel()},this.createdAt=hr.now();const w={autoplay:t,delay:r,type:a,repeat:i,repeatDelay:l,repeatType:o,name:d,motionValue:x,element:f,...j},S=(f==null?void 0:f.KeyframeResolver)||jy;this.keyframeResolver=new S(c,(V,E,_)=>this.onKeyframesResolved(V,E,w,!_),d,x,f),(g=this.keyframeResolver)==null||g.scheduleResolve()}onKeyframesResolved(t,r,a,i){this.keyframeResolver=void 0;const{name:l,type:o,velocity:c,delay:d,isHandoff:x,onUpdate:f}=a;this.resolvedAt=hr.now(),aO(t,l,o,c)||((tn.instantAnimations||!d)&&(f==null||f(yy(t,a,r))),t[0]=t[t.length-1],a.duration=0,a.repeat=0);const w={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>lO?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...a,keyframes:t},S=!x&&oO(w)?new sO({...w,element:w.motionValue.owner.current}):new vy(w);S.finished.then(()=>this.notifyFinished()).catch(Fr),this.pendingTimeline&&(this.stopTimeline=S.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=S}get finished(){return this._animation?this.animation.finished:this._finished}then(t,r){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),q9()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const dO=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function uO(s){const t=dO.exec(s);if(!t)return[,];const[,r,a,i]=t;return[`--${r??a}`,i]}function Y1(s,t,r=1){const[a,i]=uO(s);if(!a)return;const l=window.getComputedStyle(t).getPropertyValue(a);if(l){const o=l.trim();return y1(o)?parseFloat(o):o}return my(i)?Y1(i,t,r+1):i}function wy(s,t){return(s==null?void 0:s[t])??(s==null?void 0:s.default)??s}const X1=new Set(["width","height","top","left","right","bottom",...il]),xO={test:s=>s==="auto",parse:s=>s},J1=s=>t=>t.test(s),Z1=[nl,ht,ka,hn,r9,s9,xO],VN=s=>Z1.find(J1(s));function mO(s){return typeof s=="number"?s===0:s!==null?s==="none"||s==="0"||v1(s):!0}const hO=new Set(["brightness","contrast","saturate","opacity"]);function pO(s){const[t,r]=s.slice(0,-1).split("(");if(t==="drop-shadow")return s;const[a]=r.match(hy)||[];if(!a)return s;const i=r.replace(a,"");let l=hO.has(t)?1:0;return a!==r&&(l*=100),t+"("+l+i+")"}const fO=/\b([a-z-]*)\(.*?\)/gu,V0={...Qn,getAnimatableNone:s=>{const t=s.match(fO);return t?t.map(pO).join(" "):s}},BN={...nl,transform:Math.round},gO={rotate:hn,rotateX:hn,rotateY:hn,rotateZ:hn,scale:lu,scaleX:lu,scaleY:lu,scaleZ:lu,skew:hn,skewX:hn,skewY:hn,distance:ht,translateX:ht,translateY:ht,translateZ:ht,x:ht,y:ht,z:ht,perspective:ht,transformPerspective:ht,opacity:Fc,originX:PN,originY:PN,originZ:ht},ky={borderWidth:ht,borderTopWidth:ht,borderRightWidth:ht,borderBottomWidth:ht,borderLeftWidth:ht,borderRadius:ht,radius:ht,borderTopLeftRadius:ht,borderTopRightRadius:ht,borderBottomRightRadius:ht,borderBottomLeftRadius:ht,width:ht,maxWidth:ht,height:ht,maxHeight:ht,top:ht,right:ht,bottom:ht,left:ht,padding:ht,paddingTop:ht,paddingRight:ht,paddingBottom:ht,paddingLeft:ht,margin:ht,marginTop:ht,marginRight:ht,marginBottom:ht,marginLeft:ht,backgroundPositionX:ht,backgroundPositionY:ht,...gO,zIndex:BN,fillOpacity:Fc,strokeOpacity:Fc,numOctaves:BN},yO={...ky,color:Qs,backgroundColor:Qs,outlineColor:Qs,fill:Qs,stroke:Qs,borderColor:Qs,borderTopColor:Qs,borderRightColor:Qs,borderBottomColor:Qs,borderLeftColor:Qs,filter:V0,WebkitFilter:V0},eI=s=>yO[s];function tI(s,t){let r=eI(s);return r!==V0&&(r=Qn),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const bO=new Set(["auto","none","0"]);function vO(s,t,r){let a=0,i;for(;a<s.length&&!i;){const l=s[a];typeof l=="string"&&!bO.has(l)&&Uc(l).values.length&&(i=s[a]),a++}if(i&&r)for(const l of t)s[l]=tI(r,i)}class jO extends jy{constructor(t,r,a,i,l){super(t,r,a,i,l,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:a}=this;if(!r||!r.current)return;super.readKeyframes();for(let d=0;d<t.length;d++){let x=t[d];if(typeof x=="string"&&(x=x.trim(),my(x))){const f=Y1(x,r.current);f!==void 0&&(t[d]=f),d===t.length-1&&(this.finalKeyframe=x)}}if(this.resolveNoneKeyframes(),!X1.has(a)||t.length!==2)return;const[i,l]=t,o=VN(i),c=VN(l);if(o!==c)if(RN(o)&&RN(c))for(let d=0;d<t.length;d++){const x=t[d];typeof x=="string"&&(t[d]=parseFloat(x))}else vi[a]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,a=[];for(let i=0;i<t.length;i++)(t[i]===null||mO(t[i]))&&a.push(i);a.length&&vO(t,a,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:a}=this;if(!t||!t.current)return;a==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=vi[a](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const i=r[r.length-1];i!==void 0&&t.getValue(a,i).jump(i,!1)}measureEndState(){var c;const{element:t,name:r,unresolvedKeyframes:a}=this;if(!t||!t.current)return;const i=t.getValue(r);i&&i.jump(this.measuredOrigin,!1);const l=a.length-1,o=a[l];a[l]=vi[r](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(c=this.removedTransforms)!=null&&c.length&&this.removedTransforms.forEach(([d,x])=>{t.getValue(d).set(x)}),this.resolveNoneKeyframes()}}function NO(s,t,r){if(s instanceof EventTarget)return[s];if(typeof s=="string"){let a=document;t&&(a=t.current);const i=(r==null?void 0:r[s])??a.querySelectorAll(s);return i?Array.from(i):[]}return Array.from(s)}const zN=30,wO=s=>!isNaN(parseFloat(s));class kO{constructor(t,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(a,i=!0)=>{var o,c;const l=hr.now();if(this.updatedAt!==l&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(a),this.current!==this.prev&&((o=this.events.change)==null||o.notify(this.current),this.dependents))for(const d of this.dependents)d.dirty();i&&((c=this.events.renderRequest)==null||c.notify(this.current))},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=hr.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=wO(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new cy);const a=this.events[t].add(r);return t==="change"?()=>{a(),ls.read(()=>{this.events.change.getSize()||this.stop()})}:a}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t,r=!0){!r||!this.passiveEffect?this.updateAndNotify(t,r):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,r,a){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-a}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=hr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>zN)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,zN);return j1(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,r;(t=this.dependents)==null||t.clear(),(r=this.events.destroy)==null||r.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function qo(s,t){return new kO(s,t)}const sI=(s,t)=>t&&typeof s=="number"?t.transform(s):s,{schedule:Iy,cancel:lU}=D1(queueMicrotask,!1),Qr={x:!1,y:!1};function rI(){return Qr.x||Qr.y}function IO(s){return s==="x"||s==="y"?Qr[s]?null:(Qr[s]=!0,()=>{Qr[s]=!1}):Qr.x||Qr.y?null:(Qr.x=Qr.y=!0,()=>{Qr.x=Qr.y=!1})}function aI(s,t){const r=NO(s),a=new AbortController,i={passive:!0,...t,signal:a.signal};return[r,i,()=>a.abort()]}function FN(s){return!(s.pointerType==="touch"||rI())}function PO(s,t,r={}){const[a,i,l]=aI(s,r),o=c=>{if(!FN(c))return;const{target:d}=c,x=t(d,c);if(typeof x!="function"||!d)return;const f=j=>{FN(j)&&(x(j),d.removeEventListener("pointerleave",f))};d.addEventListener("pointerleave",f,i)};return a.forEach(c=>{c.addEventListener("pointerenter",o,i)}),l}const nI=(s,t)=>t?s===t?!0:nI(s,t.parentElement):!1,Py=s=>s.pointerType==="mouse"?typeof s.button!="number"||s.button<=0:s.isPrimary!==!1,SO=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function EO(s){return SO.has(s.tagName)||s.tabIndex!==-1}const Ou=new WeakSet;function UN(s){return t=>{t.key==="Enter"&&s(t)}}function Gh(s,t){s.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const CO=(s,t)=>{const r=s.currentTarget;if(!r)return;const a=UN(()=>{if(Ou.has(r))return;Gh(r,"down");const i=UN(()=>{Gh(r,"up")}),l=()=>Gh(r,"cancel");r.addEventListener("keyup",i,t),r.addEventListener("blur",l,t)});r.addEventListener("keydown",a,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",a),t)};function $N(s){return Py(s)&&!rI()}function TO(s,t,r={}){const[a,i,l]=aI(s,r),o=c=>{const d=c.currentTarget;if(!$N(c))return;Ou.add(d);const x=t(d,c),f=(S,g)=>{window.removeEventListener("pointerup",j),window.removeEventListener("pointercancel",w),Ou.has(d)&&Ou.delete(d),$N(S)&&typeof x=="function"&&x(S,{success:g})},j=S=>{f(S,d===window||d===document||r.useGlobalTarget||nI(d,S.target))},w=S=>{f(S,!1)};window.addEventListener("pointerup",j,i),window.addEventListener("pointercancel",w,i)};return a.forEach(c=>{(r.useGlobalTarget?window:c).addEventListener("pointerdown",o,i),Ny(c)&&(c.addEventListener("focus",x=>CO(x,i)),!EO(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),l}function iI(s){return b1(s)&&"ownerSVGElement"in s}function _O(s){return iI(s)&&s.tagName==="svg"}const Js=s=>!!(s&&s.getVelocity),DO=[...Z1,Qs,Qn],AO=s=>DO.find(J1(s)),Sy=b.createContext({transformPagePoint:s=>s,isStatic:!1,reducedMotion:"never"});class RO extends b.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const a=r.offsetParent,i=Ny(a)&&a.offsetWidth||0,l=this.props.sizeRef.current;l.height=r.offsetHeight||0,l.width=r.offsetWidth||0,l.top=r.offsetTop,l.left=r.offsetLeft,l.right=i-l.width-l.left}return null}componentDidUpdate(){}render(){return this.props.children}}function MO({children:s,isPresent:t,anchorX:r}){const a=b.useId(),i=b.useRef(null),l=b.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=b.useContext(Sy);return b.useInsertionEffect(()=>{const{width:c,height:d,top:x,left:f,right:j}=l.current;if(t||!i.current||!c||!d)return;const w=r==="left"?`left: ${f}`:`right: ${j}`;i.current.dataset.motionPopId=a;const S=document.createElement("style");return o&&(S.nonce=o),document.head.appendChild(S),S.sheet&&S.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${d}px !important;
            ${w}px !important;
            top: ${x}px !important;
          }
        `),()=>{document.head.contains(S)&&document.head.removeChild(S)}},[t]),e.jsx(RO,{isPresent:t,childRef:i,sizeRef:l,children:b.cloneElement(s,{ref:i})})}const LO=({children:s,initial:t,isPresent:r,onExitComplete:a,custom:i,presenceAffectsLayout:l,mode:o,anchorX:c})=>{const d=ry(OO),x=b.useId();let f=!0,j=b.useMemo(()=>(f=!1,{id:x,initial:t,isPresent:r,custom:i,onExitComplete:w=>{d.set(w,!0);for(const S of d.values())if(!S)return;a&&a()},register:w=>(d.set(w,!1),()=>d.delete(w))}),[r,d,a]);return l&&f&&(j={...j}),b.useMemo(()=>{d.forEach((w,S)=>d.set(S,!1))},[r]),b.useEffect(()=>{!r&&!d.size&&a&&a()},[r]),o==="popLayout"&&(s=e.jsx(MO,{isPresent:r,anchorX:c,children:s})),e.jsx(Bm.Provider,{value:j,children:s})};function OO(){return new Map}function oI(s=!0){const t=b.useContext(Bm);if(t===null)return[!0,null];const{isPresent:r,onExitComplete:a,register:i}=t,l=b.useId();b.useEffect(()=>{if(s)return i(l)},[s]);const o=b.useCallback(()=>s&&a&&a(l),[l,a,s]);return!r&&a?[!1,o]:[!0]}const cu=s=>s.key||"";function WN(s){const t=[];return b.Children.forEach(s,r=>{b.isValidElement(r)&&t.push(r)}),t}const lI=({children:s,custom:t,initial:r=!0,onExitComplete:a,presenceAffectsLayout:i=!0,mode:l="sync",propagate:o=!1,anchorX:c="left"})=>{const[d,x]=oI(o),f=b.useMemo(()=>WN(s),[s]),j=o&&!d?[]:f.map(cu),w=b.useRef(!0),S=b.useRef(f),g=ry(()=>new Map),[V,E]=b.useState(f),[_,M]=b.useState(f);g1(()=>{w.current=!1,S.current=f;for(let G=0;G<_.length;G++){const Y=cu(_[G]);j.includes(Y)?g.delete(Y):g.get(Y)!==!0&&g.set(Y,!1)}},[_,j.length,j.join("-")]);const R=[];if(f!==V){let G=[...f];for(let Y=0;Y<_.length;Y++){const O=_[Y],u=cu(O);j.includes(u)||(G.splice(Y,0,O),R.push(O))}return l==="wait"&&R.length&&(G=R),M(WN(G)),E(f),null}const{forceRender:q}=b.useContext(sy);return e.jsx(e.Fragment,{children:_.map(G=>{const Y=cu(G),O=o&&!d?!1:f===_||j.includes(Y),u=()=>{if(g.has(Y))g.set(Y,!0);else return;let U=!0;g.forEach(F=>{F||(U=!1)}),U&&(q==null||q(),M(S.current),o&&(x==null||x()),a&&a())};return e.jsx(LO,{isPresent:O,initial:!w.current||r?void 0:!1,custom:t,presenceAffectsLayout:i,mode:l,onExitComplete:O?void 0:u,anchorX:c,children:G},Y)})})},cI=b.createContext({strict:!1}),qN={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ho={};for(const s in qN)Ho[s]={isEnabled:t=>qN[s].some(r=>!!t[r])};function VO(s){for(const t in s)Ho[t]={...Ho[t],...s[t]}}const BO=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Hx(s){return s.startsWith("while")||s.startsWith("drag")&&s!=="draggable"||s.startsWith("layout")||s.startsWith("onTap")||s.startsWith("onPan")||s.startsWith("onLayout")||BO.has(s)}let dI=s=>!Hx(s);function zO(s){s&&(dI=t=>t.startsWith("on")?!Hx(t):s(t))}try{zO(require("@emotion/is-prop-valid").default)}catch{}function FO(s,t,r){const a={};for(const i in s)i==="values"&&typeof s.values=="object"||(dI(i)||r===!0&&Hx(i)||!t&&!Hx(i)||s.draggable&&i.startsWith("onDrag"))&&(a[i]=s[i]);return a}function UO(s){if(typeof Proxy>"u")return s;const t=new Map,r=(...a)=>s(...a);return new Proxy(r,{get:(a,i)=>i==="create"?s:(t.has(i)||t.set(i,s(i)),t.get(i))})}const zm=b.createContext({});function Fm(s){return s!==null&&typeof s=="object"&&typeof s.start=="function"}function $c(s){return typeof s=="string"||Array.isArray(s)}const Ey=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Cy=["initial",...Ey];function Um(s){return Fm(s.animate)||Cy.some(t=>$c(s[t]))}function uI(s){return!!(Um(s)||s.variants)}function $O(s,t){if(Um(s)){const{initial:r,animate:a}=s;return{initial:r===!1||$c(r)?r:void 0,animate:$c(a)?a:void 0}}return s.inherit!==!1?t:{}}function WO(s){const{initial:t,animate:r}=$O(s,b.useContext(zm));return b.useMemo(()=>({initial:t,animate:r}),[HN(t),HN(r)])}function HN(s){return Array.isArray(s)?s.join(" "):s}const qO=Symbol.for("motionComponentSymbol");function fo(s){return s&&typeof s=="object"&&Object.prototype.hasOwnProperty.call(s,"current")}function HO(s,t,r){return b.useCallback(a=>{a&&s.onMount&&s.onMount(a),t&&(a?t.mount(a):t.unmount()),r&&(typeof r=="function"?r(a):fo(r)&&(r.current=a))},[t])}const Ty=s=>s.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),GO="framerAppearId",xI="data-"+Ty(GO),mI=b.createContext({});function KO(s,t,r,a,i){var V,E;const{visualElement:l}=b.useContext(zm),o=b.useContext(cI),c=b.useContext(Bm),d=b.useContext(Sy).reducedMotion,x=b.useRef(null);a=a||o.renderer,!x.current&&a&&(x.current=a(s,{visualState:t,parent:l,props:r,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:d}));const f=x.current,j=b.useContext(mI);f&&!f.projection&&i&&(f.type==="html"||f.type==="svg")&&QO(x.current,r,i,j);const w=b.useRef(!1);b.useInsertionEffect(()=>{f&&w.current&&f.update(r,c)});const S=r[xI],g=b.useRef(!!S&&!((V=window.MotionHandoffIsComplete)!=null&&V.call(window,S))&&((E=window.MotionHasOptimisedAnimation)==null?void 0:E.call(window,S)));return g1(()=>{f&&(w.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),Iy.render(f.render),g.current&&f.animationState&&f.animationState.animateChanges())}),b.useEffect(()=>{f&&(!g.current&&f.animationState&&f.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{var _;(_=window.MotionHandoffMarkAsComplete)==null||_.call(window,S)}),g.current=!1))}),f}function QO(s,t,r,a){const{layoutId:i,layout:l,drag:o,dragConstraints:c,layoutScroll:d,layoutRoot:x,layoutCrossfade:f}=t;s.projection=new r(s.latestValues,t["data-framer-portal-id"]?void 0:hI(s.parent)),s.projection.setOptions({layoutId:i,layout:l,alwaysMeasureLayout:!!o||c&&fo(c),visualElement:s,animationType:typeof l=="string"?l:"both",initialPromotionConfig:a,crossfade:f,layoutScroll:d,layoutRoot:x})}function hI(s){if(s)return s.options.allowProjection!==!1?s.projection:hI(s.parent)}function YO({preloadedFeatures:s,createVisualElement:t,useRender:r,useVisualState:a,Component:i}){s&&VO(s);function l(c,d){let x;const f={...b.useContext(Sy),...c,layoutId:XO(c)},{isStatic:j}=f,w=WO(c),S=a(c,j);if(!j&&ay){JO();const g=ZO(f);x=g.MeasureLayout,w.visualElement=KO(i,S,f,t,g.ProjectionNode)}return e.jsxs(zm.Provider,{value:w,children:[x&&w.visualElement?e.jsx(x,{visualElement:w.visualElement,...f}):null,r(i,c,HO(S,w.visualElement,d),S,j,w.visualElement)]})}l.displayName=`motion.${typeof i=="string"?i:`create(${i.displayName??i.name??""})`}`;const o=b.forwardRef(l);return o[qO]=i,o}function XO({layoutId:s}){const t=b.useContext(sy).id;return t&&s!==void 0?t+"-"+s:s}function JO(s,t){b.useContext(cI).strict}function ZO(s){const{drag:t,layout:r}=Ho;if(!t&&!r)return{};const a={...t,...r};return{MeasureLayout:t!=null&&t.isEnabled(s)||r!=null&&r.isEnabled(s)?a.MeasureLayout:void 0,ProjectionNode:a.ProjectionNode}}const Wc={};function eV(s){for(const t in s)Wc[t]=s[t],xy(t)&&(Wc[t].isCSSVariable=!0)}function pI(s,{layout:t,layoutId:r}){return ol.has(s)||s.startsWith("origin")||(t||r!==void 0)&&(!!Wc[s]||s==="opacity")}const tV={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},sV=il.length;function rV(s,t,r){let a="",i=!0;for(let l=0;l<sV;l++){const o=il[l],c=s[o];if(c===void 0)continue;let d=!0;if(typeof c=="number"?d=c===(o.startsWith("scale")?1:0):d=parseFloat(c)===0,!d||r){const x=sI(c,ky[o]);if(!d){i=!1;const f=tV[o]||o;a+=`${f}(${x}) `}r&&(t[o]=x)}}return a=a.trim(),r?a=r(t,i?"":a):i&&(a="none"),a}function _y(s,t,r){const{style:a,vars:i,transformOrigin:l}=s;let o=!1,c=!1;for(const d in t){const x=t[d];if(ol.has(d)){o=!0;continue}else if(xy(d)){i[d]=x;continue}else{const f=sI(x,ky[d]);d.startsWith("origin")?(c=!0,l[d]=f):a[d]=f}}if(t.transform||(o||r?a.transform=rV(t,s.transform,r):a.transform&&(a.transform="none")),c){const{originX:d="50%",originY:x="50%",originZ:f=0}=l;a.transformOrigin=`${d} ${x} ${f}`}}const Dy=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function fI(s,t,r){for(const a in t)!Js(t[a])&&!pI(a,r)&&(s[a]=t[a])}function aV({transformTemplate:s},t){return b.useMemo(()=>{const r=Dy();return _y(r,t,s),Object.assign({},r.vars,r.style)},[t])}function nV(s,t){const r=s.style||{},a={};return fI(a,r,s),Object.assign(a,aV(s,t)),a}function iV(s,t){const r={},a=nV(s,t);return s.drag&&s.dragListener!==!1&&(r.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=s.drag===!0?"none":`pan-${s.drag==="x"?"y":"x"}`),s.tabIndex===void 0&&(s.onTap||s.onTapStart||s.whileTap)&&(r.tabIndex=0),r.style=a,r}const oV={offset:"stroke-dashoffset",array:"stroke-dasharray"},lV={offset:"strokeDashoffset",array:"strokeDasharray"};function cV(s,t,r=1,a=0,i=!0){s.pathLength=1;const l=i?oV:lV;s[l.offset]=ht.transform(-a);const o=ht.transform(t),c=ht.transform(r);s[l.array]=`${o} ${c}`}function gI(s,{attrX:t,attrY:r,attrScale:a,pathLength:i,pathSpacing:l=1,pathOffset:o=0,...c},d,x,f){if(_y(s,c,x),d){s.style.viewBox&&(s.attrs.viewBox=s.style.viewBox);return}s.attrs=s.style,s.style={};const{attrs:j,style:w}=s;j.transform&&(w.transform=j.transform,delete j.transform),(w.transform||j.transformOrigin)&&(w.transformOrigin=j.transformOrigin??"50% 50%",delete j.transformOrigin),w.transform&&(w.transformBox=(f==null?void 0:f.transformBox)??"fill-box",delete j.transformBox),t!==void 0&&(j.x=t),r!==void 0&&(j.y=r),a!==void 0&&(j.scale=a),i!==void 0&&cV(j,i,l,o,!1)}const yI=()=>({...Dy(),attrs:{}}),bI=s=>typeof s=="string"&&s.toLowerCase()==="svg";function dV(s,t,r,a){const i=b.useMemo(()=>{const l=yI();return gI(l,t,bI(a),s.transformTemplate,s.style),{...l.attrs,style:{...l.style}}},[t]);if(s.style){const l={};fI(l,s.style,s),i.style={...l,...i.style}}return i}const uV=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Ay(s){return typeof s!="string"||s.includes("-")?!1:!!(uV.indexOf(s)>-1||/[A-Z]/u.test(s))}function xV(s=!1){return(r,a,i,{latestValues:l},o)=>{const d=(Ay(r)?dV:iV)(a,l,o,r),x=FO(a,typeof r=="string",s),f=r!==b.Fragment?{...x,...d,ref:i}:{},{children:j}=a,w=b.useMemo(()=>Js(j)?j.get():j,[j]);return b.createElement(r,{...f,children:w})}}function GN(s){const t=[{},{}];return s==null||s.values.forEach((r,a)=>{t[0][a]=r.get(),t[1][a]=r.getVelocity()}),t}function Ry(s,t,r,a){if(typeof t=="function"){const[i,l]=GN(a);t=t(r!==void 0?r:s.custom,i,l)}if(typeof t=="string"&&(t=s.variants&&s.variants[t]),typeof t=="function"){const[i,l]=GN(a);t=t(r!==void 0?r:s.custom,i,l)}return t}function Vu(s){return Js(s)?s.get():s}function mV({scrapeMotionValuesFromProps:s,createRenderState:t},r,a,i){return{latestValues:hV(r,a,i,s),renderState:t()}}const vI=s=>(t,r)=>{const a=b.useContext(zm),i=b.useContext(Bm),l=()=>mV(s,t,a,i);return r?l():ry(l)};function hV(s,t,r,a){const i={},l=a(s,{});for(const w in l)i[w]=Vu(l[w]);let{initial:o,animate:c}=s;const d=Um(s),x=uI(s);t&&x&&!d&&s.inherit!==!1&&(o===void 0&&(o=t.initial),c===void 0&&(c=t.animate));let f=r?r.initial===!1:!1;f=f||o===!1;const j=f?c:o;if(j&&typeof j!="boolean"&&!Fm(j)){const w=Array.isArray(j)?j:[j];for(let S=0;S<w.length;S++){const g=Ry(s,w[S]);if(g){const{transitionEnd:V,transition:E,..._}=g;for(const M in _){let R=_[M];if(Array.isArray(R)){const q=f?R.length-1:0;R=R[q]}R!==null&&(i[M]=R)}for(const M in V)i[M]=V[M]}}}return i}function My(s,t,r){var l;const{style:a}=s,i={};for(const o in a)(Js(a[o])||t.style&&Js(t.style[o])||pI(o,s)||((l=r==null?void 0:r.getValue(o))==null?void 0:l.liveStyle)!==void 0)&&(i[o]=a[o]);return i}const pV={useVisualState:vI({scrapeMotionValuesFromProps:My,createRenderState:Dy})};function jI(s,t,r){const a=My(s,t,r);for(const i in s)if(Js(s[i])||Js(t[i])){const l=il.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;a[l]=s[i]}return a}const fV={useVisualState:vI({scrapeMotionValuesFromProps:jI,createRenderState:yI})};function gV(s,t){return function(a,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...Ay(a)?fV:pV,preloadedFeatures:s,useRender:xV(i),createVisualElement:t,Component:a};return YO(o)}}function qc(s,t,r){const a=s.getProps();return Ry(a,t,r!==void 0?r:a.custom,s)}const B0=s=>Array.isArray(s);function yV(s,t,r){s.hasValue(t)?s.getValue(t).set(r):s.addValue(t,qo(r))}function bV(s){return B0(s)?s[s.length-1]||0:s}function vV(s,t){const r=qc(s,t);let{transitionEnd:a={},transition:i={},...l}=r||{};l={...l,...a};for(const o in l){const c=bV(l[o]);yV(s,o,c)}}function jV(s){return!!(Js(s)&&s.add)}function z0(s,t){const r=s.getValue("willChange");if(jV(r))return r.add(t);if(!r&&tn.WillChange){const a=new tn.WillChange("auto");s.addValue("willChange",a),a.add(t)}}function NI(s){return s.props[xI]}const NV=s=>s!==null;function wV(s,{repeat:t,repeatType:r="loop"},a){const i=s.filter(NV),l=t&&r!=="loop"&&t%2===1?0:i.length-1;return!l||a===void 0?i[l]:a}const kV={type:"spring",stiffness:500,damping:25,restSpeed:10},IV=s=>({type:"spring",stiffness:550,damping:s===0?2*Math.sqrt(550):30,restSpeed:10}),PV={type:"keyframes",duration:.8},SV={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},EV=(s,{keyframes:t})=>t.length>2?PV:ol.has(s)?s.startsWith("scale")?IV(t[1]):kV:SV;function CV({when:s,delay:t,delayChildren:r,staggerChildren:a,staggerDirection:i,repeat:l,repeatType:o,repeatDelay:c,from:d,elapsed:x,...f}){return!!Object.keys(f).length}const Ly=(s,t,r,a={},i,l)=>o=>{const c=wy(a,s)||{},d=c.delay||a.delay||0;let{elapsed:x=0}=a;x=x-Na(d);const f={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...c,delay:-x,onUpdate:w=>{t.set(w),c.onUpdate&&c.onUpdate(w)},onComplete:()=>{o(),c.onComplete&&c.onComplete()},name:s,motionValue:t,element:l?void 0:i};CV(c)||Object.assign(f,EV(s,f)),f.duration&&(f.duration=Na(f.duration)),f.repeatDelay&&(f.repeatDelay=Na(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let j=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(f.duration=0,f.delay===0&&(j=!0)),(tn.instantAnimations||tn.skipAnimations)&&(j=!0,f.duration=0,f.delay=0),f.allowFlatten=!c.type&&!c.ease,j&&!l&&t.get()!==void 0){const w=wV(f.keyframes,c);if(w!==void 0){ls.update(()=>{f.onUpdate(w),f.onComplete()});return}}return c.isSync?new vy(f):new cO(f)};function TV({protectedKeys:s,needsAnimating:t},r){const a=s.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,a}function wI(s,t,{delay:r=0,transitionOverride:a,type:i}={}){let{transition:l=s.getDefaultTransition(),transitionEnd:o,...c}=t;a&&(l=a);const d=[],x=i&&s.animationState&&s.animationState.getState()[i];for(const f in c){const j=s.getValue(f,s.latestValues[f]??null),w=c[f];if(w===void 0||x&&TV(x,f))continue;const S={delay:r,...wy(l||{},f)},g=j.get();if(g!==void 0&&!j.isAnimating&&!Array.isArray(w)&&w===g&&!S.velocity)continue;let V=!1;if(window.MotionHandoffAnimation){const _=NI(s);if(_){const M=window.MotionHandoffAnimation(_,f,ls);M!==null&&(S.startTime=M,V=!0)}}z0(s,f),j.start(Ly(f,j,w,s.shouldReduceMotion&&X1.has(f)?{type:!1}:S,s,V));const E=j.animation;E&&d.push(E)}return o&&Promise.all(d).then(()=>{ls.update(()=>{o&&vV(s,o)})}),d}function F0(s,t,r={}){var d;const a=qc(s,t,r.type==="exit"?(d=s.presenceContext)==null?void 0:d.custom:void 0);let{transition:i=s.getDefaultTransition()||{}}=a||{};r.transitionOverride&&(i=r.transitionOverride);const l=a?()=>Promise.all(wI(s,a,r)):()=>Promise.resolve(),o=s.variantChildren&&s.variantChildren.size?(x=0)=>{const{delayChildren:f=0,staggerChildren:j,staggerDirection:w}=i;return _V(s,t,f+x,j,w,r)}:()=>Promise.resolve(),{when:c}=i;if(c){const[x,f]=c==="beforeChildren"?[l,o]:[o,l];return x().then(()=>f())}else return Promise.all([l(),o(r.delay)])}function _V(s,t,r=0,a=0,i=1,l){const o=[],c=(s.variantChildren.size-1)*a,d=i===1?(x=0)=>x*a:(x=0)=>c-x*a;return Array.from(s.variantChildren).sort(DV).forEach((x,f)=>{x.notify("AnimationStart",t),o.push(F0(x,t,{...l,delay:r+d(f)}).then(()=>x.notify("AnimationComplete",t)))}),Promise.all(o)}function DV(s,t){return s.sortNodePosition(t)}function AV(s,t,r={}){s.notify("AnimationStart",t);let a;if(Array.isArray(t)){const i=t.map(l=>F0(s,l,r));a=Promise.all(i)}else if(typeof t=="string")a=F0(s,t,r);else{const i=typeof t=="function"?qc(s,t,r.custom):t;a=Promise.all(wI(s,i,r))}return a.then(()=>{s.notify("AnimationComplete",t)})}function kI(s,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==s.length)return!1;for(let a=0;a<r;a++)if(t[a]!==s[a])return!1;return!0}const RV=Cy.length;function II(s){if(!s)return;if(!s.isControllingVariants){const r=s.parent?II(s.parent)||{}:{};return s.props.initial!==void 0&&(r.initial=s.props.initial),r}const t={};for(let r=0;r<RV;r++){const a=Cy[r],i=s.props[a];($c(i)||i===!1)&&(t[a]=i)}return t}const MV=[...Ey].reverse(),LV=Ey.length;function OV(s){return t=>Promise.all(t.map(({animation:r,options:a})=>AV(s,r,a)))}function VV(s){let t=OV(s),r=KN(),a=!0;const i=d=>(x,f)=>{var w;const j=qc(s,f,d==="exit"?(w=s.presenceContext)==null?void 0:w.custom:void 0);if(j){const{transition:S,transitionEnd:g,...V}=j;x={...x,...V,...g}}return x};function l(d){t=d(s)}function o(d){const{props:x}=s,f=II(s.parent)||{},j=[],w=new Set;let S={},g=1/0;for(let E=0;E<LV;E++){const _=MV[E],M=r[_],R=x[_]!==void 0?x[_]:f[_],q=$c(R),G=_===d?M.isActive:null;G===!1&&(g=E);let Y=R===f[_]&&R!==x[_]&&q;if(Y&&a&&s.manuallyAnimateOnMount&&(Y=!1),M.protectedKeys={...S},!M.isActive&&G===null||!R&&!M.prevProp||Fm(R)||typeof R=="boolean")continue;const O=BV(M.prevProp,R);let u=O||_===d&&M.isActive&&!Y&&q||E>g&&q,U=!1;const F=Array.isArray(R)?R:[R];let Q=F.reduce(i(_),{});G===!1&&(Q={});const{prevResolvedValues:T={}}=M,W={...T,...Q},Ae=be=>{u=!0,w.has(be)&&(U=!0,w.delete(be)),M.needsAnimating[be]=!0;const ue=s.getValue(be);ue&&(ue.liveStyle=!1)};for(const be in W){const ue=Q[be],me=T[be];if(S.hasOwnProperty(be))continue;let pe=!1;B0(ue)&&B0(me)?pe=!kI(ue,me):pe=ue!==me,pe?ue!=null?Ae(be):w.add(be):ue!==void 0&&w.has(be)?Ae(be):M.protectedKeys[be]=!0}M.prevProp=R,M.prevResolvedValues=Q,M.isActive&&(S={...S,...Q}),a&&s.blockInitialAnimation&&(u=!1),u&&(!(Y&&O)||U)&&j.push(...F.map(be=>({animation:be,options:{type:_}})))}if(w.size){const E={};if(typeof x.initial!="boolean"){const _=qc(s,Array.isArray(x.initial)?x.initial[0]:x.initial);_&&_.transition&&(E.transition=_.transition)}w.forEach(_=>{const M=s.getBaseTarget(_),R=s.getValue(_);R&&(R.liveStyle=!0),E[_]=M??null}),j.push({animation:E})}let V=!!j.length;return a&&(x.initial===!1||x.initial===x.animate)&&!s.manuallyAnimateOnMount&&(V=!1),a=!1,V?t(j):Promise.resolve()}function c(d,x){var j;if(r[d].isActive===x)return Promise.resolve();(j=s.variantChildren)==null||j.forEach(w=>{var S;return(S=w.animationState)==null?void 0:S.setActive(d,x)}),r[d].isActive=x;const f=o(d);for(const w in r)r[w].protectedKeys={};return f}return{animateChanges:o,setActive:c,setAnimateFunction:l,getState:()=>r,reset:()=>{r=KN(),a=!0}}}function BV(s,t){return typeof t=="string"?t!==s:Array.isArray(t)?!kI(t,s):!1}function ii(s=!1){return{isActive:s,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function KN(){return{animate:ii(!0),whileInView:ii(),whileHover:ii(),whileTap:ii(),whileDrag:ii(),whileFocus:ii(),exit:ii()}}class si{constructor(t){this.isMounted=!1,this.node=t}update(){}}class zV extends si{constructor(t){super(t),t.animationState||(t.animationState=VV(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Fm(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let FV=0;class UV extends si{constructor(){super(...arguments),this.id=FV++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===a)return;const i=this.node.animationState.setActive("exit",!t);r&&!t&&i.then(()=>{r(this.id)})}mount(){const{register:t,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const $V={animation:{Feature:zV},exit:{Feature:UV}};function Hc(s,t,r,a={passive:!0}){return s.addEventListener(t,r,a),()=>s.removeEventListener(t,r)}function vd(s){return{point:{x:s.pageX,y:s.pageY}}}const WV=s=>t=>Py(t)&&s(t,vd(t));function ic(s,t,r,a){return Hc(s,t,WV(r),a)}function PI({top:s,left:t,right:r,bottom:a}){return{x:{min:t,max:r},y:{min:s,max:a}}}function qV({x:s,y:t}){return{top:t.min,right:s.max,bottom:t.max,left:s.min}}function HV(s,t){if(!t)return s;const r=t({x:s.left,y:s.top}),a=t({x:s.right,y:s.bottom});return{top:r.y,left:r.x,bottom:a.y,right:a.x}}const SI=1e-4,GV=1-SI,KV=1+SI,EI=.01,QV=0-EI,YV=0+EI;function ir(s){return s.max-s.min}function XV(s,t,r){return Math.abs(s-t)<=r}function QN(s,t,r,a=.5){s.origin=a,s.originPoint=ns(t.min,t.max,s.origin),s.scale=ir(r)/ir(t),s.translate=ns(r.min,r.max,s.origin)-s.originPoint,(s.scale>=GV&&s.scale<=KV||isNaN(s.scale))&&(s.scale=1),(s.translate>=QV&&s.translate<=YV||isNaN(s.translate))&&(s.translate=0)}function oc(s,t,r,a){QN(s.x,t.x,r.x,a?a.originX:void 0),QN(s.y,t.y,r.y,a?a.originY:void 0)}function YN(s,t,r){s.min=r.min+t.min,s.max=s.min+ir(t)}function JV(s,t,r){YN(s.x,t.x,r.x),YN(s.y,t.y,r.y)}function XN(s,t,r){s.min=t.min-r.min,s.max=s.min+ir(t)}function lc(s,t,r){XN(s.x,t.x,r.x),XN(s.y,t.y,r.y)}const JN=()=>({translate:0,scale:1,origin:0,originPoint:0}),go=()=>({x:JN(),y:JN()}),ZN=()=>({min:0,max:0}),ps=()=>({x:ZN(),y:ZN()});function Mr(s){return[s("x"),s("y")]}function Kh(s){return s===void 0||s===1}function U0({scale:s,scaleX:t,scaleY:r}){return!Kh(s)||!Kh(t)||!Kh(r)}function di(s){return U0(s)||CI(s)||s.z||s.rotate||s.rotateX||s.rotateY||s.skewX||s.skewY}function CI(s){return ew(s.x)||ew(s.y)}function ew(s){return s&&s!=="0%"}function Gx(s,t,r){const a=s-r,i=t*a;return r+i}function tw(s,t,r,a,i){return i!==void 0&&(s=Gx(s,i,a)),Gx(s,r,a)+t}function $0(s,t=0,r=1,a,i){s.min=tw(s.min,t,r,a,i),s.max=tw(s.max,t,r,a,i)}function TI(s,{x:t,y:r}){$0(s.x,t.translate,t.scale,t.originPoint),$0(s.y,r.translate,r.scale,r.originPoint)}const sw=.999999999999,rw=1.0000000000001;function ZV(s,t,r,a=!1){const i=r.length;if(!i)return;t.x=t.y=1;let l,o;for(let c=0;c<i;c++){l=r[c],o=l.projectionDelta;const{visualElement:d}=l.options;d&&d.props.style&&d.props.style.display==="contents"||(a&&l.options.layoutScroll&&l.scroll&&l!==l.root&&bo(s,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,TI(s,o)),a&&di(l.latestValues)&&bo(s,l.latestValues))}t.x<rw&&t.x>sw&&(t.x=1),t.y<rw&&t.y>sw&&(t.y=1)}function yo(s,t){s.min=s.min+t,s.max=s.max+t}function aw(s,t,r,a,i=.5){const l=ns(s.min,s.max,i);$0(s,t,r,l,a)}function bo(s,t){aw(s.x,t.x,t.scaleX,t.scale,t.originX),aw(s.y,t.y,t.scaleY,t.scale,t.originY)}function _I(s,t){return PI(HV(s.getBoundingClientRect(),t))}function eB(s,t,r){const a=_I(s,r),{scroll:i}=t;return i&&(yo(a.x,i.offset.x),yo(a.y,i.offset.y)),a}const DI=({current:s})=>s?s.ownerDocument.defaultView:null,nw=(s,t)=>Math.abs(s-t);function tB(s,t){const r=nw(s.x,t.x),a=nw(s.y,t.y);return Math.sqrt(r**2+a**2)}class AI{constructor(t,r,{transformPagePoint:a,contextWindow:i,dragSnapToOrigin:l=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const j=Yh(this.lastMoveEventInfo,this.history),w=this.startEvent!==null,S=tB(j.offset,{x:0,y:0})>=3;if(!w&&!S)return;const{point:g}=j,{timestamp:V}=Ms;this.history.push({...g,timestamp:V});const{onStart:E,onMove:_}=this.handlers;w||(E&&E(this.lastMoveEvent,j),this.startEvent=this.lastMoveEvent),_&&_(this.lastMoveEvent,j)},this.handlePointerMove=(j,w)=>{this.lastMoveEvent=j,this.lastMoveEventInfo=Qh(w,this.transformPagePoint),ls.update(this.updatePoint,!0)},this.handlePointerUp=(j,w)=>{this.end();const{onEnd:S,onSessionEnd:g,resumeAnimation:V}=this.handlers;if(this.dragSnapToOrigin&&V&&V(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=Yh(j.type==="pointercancel"?this.lastMoveEventInfo:Qh(w,this.transformPagePoint),this.history);this.startEvent&&S&&S(j,E),g&&g(j,E)},!Py(t))return;this.dragSnapToOrigin=l,this.handlers=r,this.transformPagePoint=a,this.contextWindow=i||window;const o=vd(t),c=Qh(o,this.transformPagePoint),{point:d}=c,{timestamp:x}=Ms;this.history=[{...d,timestamp:x}];const{onSessionStart:f}=r;f&&f(t,Yh(c,this.history)),this.removeListeners=gd(ic(this.contextWindow,"pointermove",this.handlePointerMove),ic(this.contextWindow,"pointerup",this.handlePointerUp),ic(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Kn(this.updatePoint)}}function Qh(s,t){return t?{point:t(s.point)}:s}function iw(s,t){return{x:s.x-t.x,y:s.y-t.y}}function Yh({point:s},t){return{point:s,delta:iw(s,RI(t)),offset:iw(s,sB(t)),velocity:rB(t,.1)}}function sB(s){return s[0]}function RI(s){return s[s.length-1]}function rB(s,t){if(s.length<2)return{x:0,y:0};let r=s.length-1,a=null;const i=RI(s);for(;r>=0&&(a=s[r],!(i.timestamp-a.timestamp>Na(t)));)r--;if(!a)return{x:0,y:0};const l=wa(i.timestamp-a.timestamp);if(l===0)return{x:0,y:0};const o={x:(i.x-a.x)/l,y:(i.y-a.y)/l};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function aB(s,{min:t,max:r},a){return t!==void 0&&s<t?s=a?ns(t,s,a.min):Math.max(s,t):r!==void 0&&s>r&&(s=a?ns(r,s,a.max):Math.min(s,r)),s}function ow(s,t,r){return{min:t!==void 0?s.min+t:void 0,max:r!==void 0?s.max+r-(s.max-s.min):void 0}}function nB(s,{top:t,left:r,bottom:a,right:i}){return{x:ow(s.x,r,i),y:ow(s.y,t,a)}}function lw(s,t){let r=t.min-s.min,a=t.max-s.max;return t.max-t.min<s.max-s.min&&([r,a]=[a,r]),{min:r,max:a}}function iB(s,t){return{x:lw(s.x,t.x),y:lw(s.y,t.y)}}function oB(s,t){let r=.5;const a=ir(s),i=ir(t);return i>a?r=zc(t.min,t.max-a,s.min):a>i&&(r=zc(s.min,s.max-i,t.min)),en(0,1,r)}function lB(s,t){const r={};return t.min!==void 0&&(r.min=t.min-s.min),t.max!==void 0&&(r.max=t.max-s.min),r}const W0=.35;function cB(s=W0){return s===!1?s=0:s===!0&&(s=W0),{x:cw(s,"left","right"),y:cw(s,"top","bottom")}}function cw(s,t,r){return{min:dw(s,t),max:dw(s,r)}}function dw(s,t){return typeof s=="number"?s:s[t]||0}const dB=new WeakMap;class uB{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ps(),this.visualElement=t}start(t,{snapToCursor:r=!1}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const i=f=>{const{dragSnapToOrigin:j}=this.getProps();j?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(vd(f).point)},l=(f,j)=>{const{drag:w,dragPropagation:S,onDragStart:g}=this.getProps();if(w&&!S&&(this.openDragLock&&this.openDragLock(),this.openDragLock=IO(w),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Mr(E=>{let _=this.getAxisMotionValue(E).get()||0;if(ka.test(_)){const{projection:M}=this.visualElement;if(M&&M.layout){const R=M.layout.layoutBox[E];R&&(_=ir(R)*(parseFloat(_)/100))}}this.originPoint[E]=_}),g&&ls.postRender(()=>g(f,j)),z0(this.visualElement,"transform");const{animationState:V}=this.visualElement;V&&V.setActive("whileDrag",!0)},o=(f,j)=>{const{dragPropagation:w,dragDirectionLock:S,onDirectionLock:g,onDrag:V}=this.getProps();if(!w&&!this.openDragLock)return;const{offset:E}=j;if(S&&this.currentDirection===null){this.currentDirection=xB(E),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",j.point,E),this.updateAxis("y",j.point,E),this.visualElement.render(),V&&V(f,j)},c=(f,j)=>this.stop(f,j),d=()=>Mr(f=>{var j;return this.getAnimationState(f)==="paused"&&((j=this.getAxisMotionValue(f).animation)==null?void 0:j.play())}),{dragSnapToOrigin:x}=this.getProps();this.panSession=new AI(t,{onSessionStart:i,onStart:l,onMove:o,onSessionEnd:c,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:x,contextWindow:DI(this.visualElement)})}stop(t,r){const a=this.isDragging;if(this.cancel(),!a)return;const{velocity:i}=r;this.startAnimation(i);const{onDragEnd:l}=this.getProps();l&&ls.postRender(()=>l(t,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:a}=this.getProps();!a&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,a){const{drag:i}=this.getProps();if(!a||!du(t,i,this.currentDirection))return;const l=this.getAxisMotionValue(t);let o=this.originPoint[t]+a[t];this.constraints&&this.constraints[t]&&(o=aB(o,this.constraints[t],this.elastic[t])),l.set(o)}resolveConstraints(){var l;const{dragConstraints:t,dragElastic:r}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(l=this.visualElement.projection)==null?void 0:l.layout,i=this.constraints;t&&fo(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&a?this.constraints=nB(a.layoutBox,t):this.constraints=!1,this.elastic=cB(r),i!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&Mr(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=lB(a.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!fo(t))return!1;const a=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const l=eB(a,i.root,this.visualElement.getTransformPagePoint());let o=iB(i.layout.layoutBox,l);if(r){const c=r(qV(o));this.hasMutatedConstraints=!!c,c&&(o=PI(c))}return o}startAnimation(t){const{drag:r,dragMomentum:a,dragElastic:i,dragTransition:l,dragSnapToOrigin:o,onDragTransitionEnd:c}=this.getProps(),d=this.constraints||{},x=Mr(f=>{if(!du(f,r,this.currentDirection))return;let j=d&&d[f]||{};o&&(j={min:0,max:0});const w=i?200:1e6,S=i?40:1e7,g={type:"inertia",velocity:a?t[f]:0,bounceStiffness:w,bounceDamping:S,timeConstant:750,restDelta:1,restSpeed:10,...l,...j};return this.startAxisValueAnimation(f,g)});return Promise.all(x).then(c)}startAxisValueAnimation(t,r){const a=this.getAxisMotionValue(t);return z0(this.visualElement,t),a.start(Ly(t,a,0,r,this.visualElement,!1))}stopAnimation(){Mr(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Mr(t=>{var r;return(r=this.getAxisMotionValue(t).animation)==null?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)==null?void 0:r.state}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,a=this.visualElement.getProps(),i=a[r];return i||this.visualElement.getValue(t,(a.initial?a.initial[t]:void 0)||0)}snapToCursor(t){Mr(r=>{const{drag:a}=this.getProps();if(!du(r,a,this.currentDirection))return;const{projection:i}=this.visualElement,l=this.getAxisMotionValue(r);if(i&&i.layout){const{min:o,max:c}=i.layout.layoutBox[r];l.set(t[r]-ns(o,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:a}=this.visualElement;if(!fo(r)||!a||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Mr(o=>{const c=this.getAxisMotionValue(o);if(c&&this.constraints!==!1){const d=c.get();i[o]=oB({min:d,max:d},this.constraints[o])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",a.root&&a.root.updateScroll(),a.updateLayout(),this.resolveConstraints(),Mr(o=>{if(!du(o,t,null))return;const c=this.getAxisMotionValue(o),{min:d,max:x}=this.constraints[o];c.set(ns(d,x,i[o]))})}addListeners(){if(!this.visualElement.current)return;dB.set(this.visualElement,this);const t=this.visualElement.current,r=ic(t,"pointerdown",d=>{const{drag:x,dragListener:f=!0}=this.getProps();x&&f&&this.start(d)}),a=()=>{const{dragConstraints:d}=this.getProps();fo(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,l=i.addEventListener("measure",a);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),ls.read(a);const o=Hc(window,"resize",()=>this.scalePositionWithinConstraints()),c=i.addEventListener("didUpdate",({delta:d,hasLayoutChanged:x})=>{this.isDragging&&x&&(Mr(f=>{const j=this.getAxisMotionValue(f);j&&(this.originPoint[f]+=d[f].translate,j.set(j.get()+d[f].translate))}),this.visualElement.render())});return()=>{o(),r(),l(),c&&c()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:a=!1,dragPropagation:i=!1,dragConstraints:l=!1,dragElastic:o=W0,dragMomentum:c=!0}=t;return{...t,drag:r,dragDirectionLock:a,dragPropagation:i,dragConstraints:l,dragElastic:o,dragMomentum:c}}}function du(s,t,r){return(t===!0||t===s)&&(r===null||r===s)}function xB(s,t=10){let r=null;return Math.abs(s.y)>t?r="y":Math.abs(s.x)>t&&(r="x"),r}class mB extends si{constructor(t){super(t),this.removeGroupControls=Fr,this.removeListeners=Fr,this.controls=new uB(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Fr}unmount(){this.removeGroupControls(),this.removeListeners()}}const uw=s=>(t,r)=>{s&&ls.postRender(()=>s(t,r))};class hB extends si{constructor(){super(...arguments),this.removePointerDownListener=Fr}onPointerDown(t){this.session=new AI(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:DI(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:a,onPanEnd:i}=this.node.getProps();return{onSessionStart:uw(t),onStart:uw(r),onMove:a,onEnd:(l,o)=>{delete this.session,i&&ls.postRender(()=>i(l,o))}}}mount(){this.removePointerDownListener=ic(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Bu={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function xw(s,t){return t.max===t.min?0:s/(t.max-t.min)*100}const Tl={correct:(s,t)=>{if(!t.target)return s;if(typeof s=="string")if(ht.test(s))s=parseFloat(s);else return s;const r=xw(s,t.target.x),a=xw(s,t.target.y);return`${r}% ${a}%`}},pB={correct:(s,{treeScale:t,projectionDelta:r})=>{const a=s,i=Qn.parse(s);if(i.length>5)return a;const l=Qn.createTransformer(s),o=typeof i[0]!="number"?1:0,c=r.x.scale*t.x,d=r.y.scale*t.y;i[0+o]/=c,i[1+o]/=d;const x=ns(c,d,.5);return typeof i[2+o]=="number"&&(i[2+o]/=x),typeof i[3+o]=="number"&&(i[3+o]/=x),l(i)}};class fB extends b.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:a,layoutId:i}=this.props,{projection:l}=t;eV(gB),l&&(r.group&&r.group.add(l),a&&a.register&&i&&a.register(l),l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),Bu.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:a,drag:i,isPresent:l}=this.props,{projection:o}=a;return o&&(o.isPresent=l,i||t.layoutDependency!==r||r===void 0||t.isPresent!==l?o.willUpdate():this.safeToRemove(),t.isPresent!==l&&(l?o.promote():o.relegate()||ls.postRender(()=>{const c=o.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Iy.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:a}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(i),a&&a.deregister&&a.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function MI(s){const[t,r]=oI(),a=b.useContext(sy);return e.jsx(fB,{...s,layoutGroup:a,switchLayoutGroup:b.useContext(mI),isPresent:t,safeToRemove:r})}const gB={borderRadius:{...Tl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Tl,borderTopRightRadius:Tl,borderBottomLeftRadius:Tl,borderBottomRightRadius:Tl,boxShadow:pB};function yB(s,t,r){const a=Js(s)?s:qo(s);return a.start(Ly("",a,t,r)),a.animation}const bB=(s,t)=>s.depth-t.depth;class vB{constructor(){this.children=[],this.isDirty=!1}add(t){ny(this.children,t),this.isDirty=!0}remove(t){iy(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(bB),this.isDirty=!1,this.children.forEach(t)}}function jB(s,t){const r=hr.now(),a=({timestamp:i})=>{const l=i-r;l>=t&&(Kn(a),s(l-t))};return ls.setup(a,!0),()=>Kn(a)}const LI=["TopLeft","TopRight","BottomLeft","BottomRight"],NB=LI.length,mw=s=>typeof s=="string"?parseFloat(s):s,hw=s=>typeof s=="number"||ht.test(s);function wB(s,t,r,a,i,l){i?(s.opacity=ns(0,r.opacity??1,kB(a)),s.opacityExit=ns(t.opacity??1,0,IB(a))):l&&(s.opacity=ns(t.opacity??1,r.opacity??1,a));for(let o=0;o<NB;o++){const c=`border${LI[o]}Radius`;let d=pw(t,c),x=pw(r,c);if(d===void 0&&x===void 0)continue;d||(d=0),x||(x=0),d===0||x===0||hw(d)===hw(x)?(s[c]=Math.max(ns(mw(d),mw(x),a),0),(ka.test(x)||ka.test(d))&&(s[c]+="%")):s[c]=x}(t.rotate||r.rotate)&&(s.rotate=ns(t.rotate||0,r.rotate||0,a))}function pw(s,t){return s[t]!==void 0?s[t]:s.borderRadius}const kB=OI(0,.5,E1),IB=OI(.5,.95,Fr);function OI(s,t,r){return a=>a<s?0:a>t?1:r(zc(s,t,a))}function fw(s,t){s.min=t.min,s.max=t.max}function Rr(s,t){fw(s.x,t.x),fw(s.y,t.y)}function gw(s,t){s.translate=t.translate,s.scale=t.scale,s.originPoint=t.originPoint,s.origin=t.origin}function yw(s,t,r,a,i){return s-=t,s=Gx(s,1/r,a),i!==void 0&&(s=Gx(s,1/i,a)),s}function PB(s,t=0,r=1,a=.5,i,l=s,o=s){if(ka.test(t)&&(t=parseFloat(t),t=ns(o.min,o.max,t/100)-o.min),typeof t!="number")return;let c=ns(l.min,l.max,a);s===l&&(c-=t),s.min=yw(s.min,t,r,c,i),s.max=yw(s.max,t,r,c,i)}function bw(s,t,[r,a,i],l,o){PB(s,t[r],t[a],t[i],t.scale,l,o)}const SB=["x","scaleX","originX"],EB=["y","scaleY","originY"];function vw(s,t,r,a){bw(s.x,t,SB,r?r.x:void 0,a?a.x:void 0),bw(s.y,t,EB,r?r.y:void 0,a?a.y:void 0)}function jw(s){return s.translate===0&&s.scale===1}function VI(s){return jw(s.x)&&jw(s.y)}function Nw(s,t){return s.min===t.min&&s.max===t.max}function CB(s,t){return Nw(s.x,t.x)&&Nw(s.y,t.y)}function ww(s,t){return Math.round(s.min)===Math.round(t.min)&&Math.round(s.max)===Math.round(t.max)}function BI(s,t){return ww(s.x,t.x)&&ww(s.y,t.y)}function kw(s){return ir(s.x)/ir(s.y)}function Iw(s,t){return s.translate===t.translate&&s.scale===t.scale&&s.originPoint===t.originPoint}class TB{constructor(){this.members=[]}add(t){ny(this.members,t),t.scheduleRender()}remove(t){if(iy(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(i=>t===i);if(r===0)return!1;let a;for(let i=r;i>=0;i--){const l=this.members[i];if(l.isPresent!==!1){a=l;break}}return a?(this.promote(a),!0):!1}promote(t,r){const a=this.lead;if(t!==a&&(this.prevLead=a,this.lead=t,t.show(),a)){a.instance&&a.scheduleRender(),t.scheduleRender(),t.resumeFrom=a,r&&(t.resumeFrom.preserveOpacity=!0),a.snapshot&&(t.snapshot=a.snapshot,t.snapshot.latestValues=a.animationValues||a.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&a.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:a}=t;r.onExitComplete&&r.onExitComplete(),a&&a.options.onExitComplete&&a.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function _B(s,t,r){let a="";const i=s.x.translate/t.x,l=s.y.translate/t.y,o=(r==null?void 0:r.z)||0;if((i||l||o)&&(a=`translate3d(${i}px, ${l}px, ${o}px) `),(t.x!==1||t.y!==1)&&(a+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:x,rotate:f,rotateX:j,rotateY:w,skewX:S,skewY:g}=r;x&&(a=`perspective(${x}px) ${a}`),f&&(a+=`rotate(${f}deg) `),j&&(a+=`rotateX(${j}deg) `),w&&(a+=`rotateY(${w}deg) `),S&&(a+=`skewX(${S}deg) `),g&&(a+=`skewY(${g}deg) `)}const c=s.x.scale*t.x,d=s.y.scale*t.y;return(c!==1||d!==1)&&(a+=`scale(${c}, ${d})`),a||"none"}const Xh=["","X","Y","Z"],DB={visibility:"hidden"},AB=1e3;let RB=0;function Jh(s,t,r,a){const{latestValues:i}=t;i[s]&&(r[s]=i[s],t.setStaticValue(s,0),a&&(a[s]=0))}function zI(s){if(s.hasCheckedOptimisedAppear=!0,s.root===s)return;const{visualElement:t}=s.options;if(!t)return;const r=NI(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:i,layoutId:l}=s.options;window.MotionCancelOptimisedAnimation(r,"transform",ls,!(i||l))}const{parent:a}=s;a&&!a.hasCheckedOptimisedAppear&&zI(a)}function FI({attachResizeListener:s,defaultParent:t,measureScroll:r,checkIsScrollRoot:a,resetTransform:i}){return class{constructor(o={},c=t==null?void 0:t()){this.id=RB++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(OB),this.nodes.forEach(UB),this.nodes.forEach($B),this.nodes.forEach(VB)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new vB)}addEventListener(o,c){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new cy),this.eventHandlers.get(o).add(c)}notifyListeners(o,...c){const d=this.eventHandlers.get(o);d&&d.notify(...c)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=iI(o)&&!_O(o),this.instance=o;const{layoutId:c,layout:d,visualElement:x}=this.options;if(x&&!x.current&&x.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||c)&&(this.isLayoutDirty=!0),s){let f;const j=()=>this.root.updateBlockedByResize=!1;s(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=jB(j,250),Bu.hasAnimatedSinceResize&&(Bu.hasAnimatedSinceResize=!1,this.nodes.forEach(Sw))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&x&&(c||d)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:j,hasRelativeLayoutChanged:w,layout:S})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||x.getDefaultTransition()||KB,{onLayoutAnimationStart:V,onLayoutAnimationComplete:E}=x.getProps(),_=!this.targetLayout||!BI(this.targetLayout,S),M=!j&&w;if(this.options.layoutRoot||this.resumeFrom||M||j&&(_||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,M);const R={...wy(g,"layout"),onPlay:V,onComplete:E};(x.shouldReduceMotion||this.options.layoutRoot)&&(R.delay=0,R.type=!1),this.startAnimation(R)}else j||Sw(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=S})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Kn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(WB),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&zI(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const j=this.path[f];j.shouldResetTransform=!0,j.updateScroll("snapshot"),j.options.layoutRoot&&j.willUpdate(!1)}const{layoutId:c,layout:d}=this.options;if(c===void 0&&!d)return;const x=this.getTransformTemplate();this.prevTransformTemplateValue=x?x(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Pw);return}this.isUpdating||this.nodes.forEach(zB),this.isUpdating=!1,this.nodes.forEach(FB),this.nodes.forEach(MB),this.nodes.forEach(LB),this.clearAllSnapshots();const c=hr.now();Ms.delta=en(0,1e3/60,c-Ms.timestamp),Ms.timestamp=c,Ms.isProcessing=!0,Uh.update.process(Ms),Uh.preRender.process(Ms),Uh.render.process(Ms),Ms.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Iy.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(BB),this.sharedNodes.forEach(qB)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ls.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ls.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ir(this.snapshot.measuredBox.x)&&!ir(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ps(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(c=!1),c&&this.instance){const d=a(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:d,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!VI(this.projectionDelta),d=this.getTransformTemplate(),x=d?d(this.latestValues,""):void 0,f=x!==this.prevTransformTemplateValue;o&&this.instance&&(c||di(this.latestValues)||f)&&(i(this.instance,x),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const c=this.measurePageBox();let d=this.removeElementScroll(c);return o&&(d=this.removeTransform(d)),QB(d),{animationId:this.root.animationId,measuredBox:c,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var x;const{visualElement:o}=this.options;if(!o)return ps();const c=o.measureViewportBox();if(!(((x=this.scroll)==null?void 0:x.wasRoot)||this.path.some(YB))){const{scroll:f}=this.root;f&&(yo(c.x,f.offset.x),yo(c.y,f.offset.y))}return c}removeElementScroll(o){var d;const c=ps();if(Rr(c,o),(d=this.scroll)!=null&&d.wasRoot)return c;for(let x=0;x<this.path.length;x++){const f=this.path[x],{scroll:j,options:w}=f;f!==this.root&&j&&w.layoutScroll&&(j.wasRoot&&Rr(c,o),yo(c.x,j.offset.x),yo(c.y,j.offset.y))}return c}applyTransform(o,c=!1){const d=ps();Rr(d,o);for(let x=0;x<this.path.length;x++){const f=this.path[x];!c&&f.options.layoutScroll&&f.scroll&&f!==f.root&&bo(d,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),di(f.latestValues)&&bo(d,f.latestValues)}return di(this.latestValues)&&bo(d,this.latestValues),d}removeTransform(o){const c=ps();Rr(c,o);for(let d=0;d<this.path.length;d++){const x=this.path[d];if(!x.instance||!di(x.latestValues))continue;U0(x.latestValues)&&x.updateSnapshot();const f=ps(),j=x.measurePageBox();Rr(f,j),vw(c,x.latestValues,x.snapshot?x.snapshot.layoutBox:void 0,f)}return di(this.latestValues)&&vw(c,this.latestValues),c}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ms.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var w;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(o||d&&this.isSharedProjectionDirty||this.isProjectionDirty||(w=this.parent)!=null&&w.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:j}=this.options;if(!(!this.layout||!(f||j))){if(this.resolvedRelativeTargetAt=Ms.timestamp,!this.targetDelta&&!this.relativeTarget){const S=this.getClosestProjectingParent();S&&S.layout&&this.animationProgress!==1?(this.relativeParent=S,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ps(),this.relativeTargetOrigin=ps(),lc(this.relativeTargetOrigin,this.layout.layoutBox,S.layout.layoutBox),Rr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ps(),this.targetWithTransforms=ps()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),JV(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Rr(this.target,this.layout.layoutBox),TI(this.target,this.targetDelta)):Rr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const S=this.getClosestProjectingParent();S&&!!S.resumingFrom==!!this.resumingFrom&&!S.options.layoutScroll&&S.target&&this.animationProgress!==1?(this.relativeParent=S,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ps(),this.relativeTargetOrigin=ps(),lc(this.relativeTargetOrigin,this.target,S.target),Rr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||U0(this.parent.latestValues)||CI(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var g;const o=this.getLead(),c=!!this.resumingFrom||this!==o;let d=!0;if((this.isProjectionDirty||(g=this.parent)!=null&&g.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===Ms.timestamp&&(d=!1),d)return;const{layout:x,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(x||f))return;Rr(this.layoutCorrected,this.layout.layoutBox);const j=this.treeScale.x,w=this.treeScale.y;ZV(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=ps());const{target:S}=o;if(!S){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(gw(this.prevProjectionDelta.x,this.projectionDelta.x),gw(this.prevProjectionDelta.y,this.projectionDelta.y)),oc(this.projectionDelta,this.layoutCorrected,S,this.latestValues),(this.treeScale.x!==j||this.treeScale.y!==w||!Iw(this.projectionDelta.x,this.prevProjectionDelta.x)||!Iw(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",S))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var c;if((c=this.options.visualElement)==null||c.scheduleRender(),o){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=go(),this.projectionDelta=go(),this.projectionDeltaWithTransform=go()}setAnimationOrigin(o,c=!1){const d=this.snapshot,x=d?d.latestValues:{},f={...this.latestValues},j=go();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const w=ps(),S=d?d.source:void 0,g=this.layout?this.layout.source:void 0,V=S!==g,E=this.getStack(),_=!E||E.members.length<=1,M=!!(V&&!_&&this.options.crossfade===!0&&!this.path.some(GB));this.animationProgress=0;let R;this.mixTargetDelta=q=>{const G=q/1e3;Ew(j.x,o.x,G),Ew(j.y,o.y,G),this.setTargetDelta(j),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(lc(w,this.layout.layoutBox,this.relativeParent.layout.layoutBox),HB(this.relativeTarget,this.relativeTargetOrigin,w,G),R&&CB(this.relativeTarget,R)&&(this.isProjectionDirty=!1),R||(R=ps()),Rr(R,this.relativeTarget)),V&&(this.animationValues=f,wB(f,x,this.latestValues,G,M,_)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=G},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var c,d,x;this.notifyListeners("animationStart"),(c=this.currentAnimation)==null||c.stop(!1),(x=(d=this.resumingFrom)==null?void 0:d.currentAnimation)==null||x.stop(!1),this.pendingAnimation&&(Kn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ls.update(()=>{Bu.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=qo(0)),this.currentAnimation=yB(this.motionValue,[0,1e3],{...o,isSync:!0,onUpdate:f=>{this.mixTargetDelta(f),o.onUpdate&&o.onUpdate(f)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(AB),this.currentAnimation.stop(!1)),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:c,target:d,layout:x,latestValues:f}=o;if(!(!c||!d||!x)){if(this!==o&&this.layout&&x&&UI(this.options.animationType,this.layout.layoutBox,x.layoutBox)){d=this.target||ps();const j=ir(this.layout.layoutBox.x);d.x.min=o.target.x.min,d.x.max=d.x.min+j;const w=ir(this.layout.layoutBox.y);d.y.min=o.target.y.min,d.y.max=d.y.min+w}Rr(c,d),bo(c,f),oc(this.projectionDeltaWithTransform,this.layoutCorrected,c,f)}}registerSharedNode(o,c){this.sharedNodes.has(o)||this.sharedNodes.set(o,new TB),this.sharedNodes.get(o).add(c);const x=c.options.initialPromotionConfig;c.promote({transition:x?x.transition:void 0,preserveFollowOpacity:x&&x.shouldPreserveFollowOpacity?x.shouldPreserveFollowOpacity(c):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var c;const{layoutId:o}=this.options;return o?((c=this.getStack())==null?void 0:c.lead)||this:this}getPrevLead(){var c;const{layoutId:o}=this.options;return o?(c=this.getStack())==null?void 0:c.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:c,preserveFollowOpacity:d}={}){const x=this.getStack();x&&x.promote(this,d),o&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let c=!1;const{latestValues:d}=o;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(c=!0),!c)return;const x={};d.z&&Jh("z",o,x,this.animationValues);for(let f=0;f<Xh.length;f++)Jh(`rotate${Xh[f]}`,o,x,this.animationValues),Jh(`skew${Xh[f]}`,o,x,this.animationValues);o.render();for(const f in x)o.setStaticValue(f,x[f]),this.animationValues&&(this.animationValues[f]=x[f]);o.scheduleRender()}getProjectionStyles(o){if(!this.instance||this.isSVG)return;if(!this.isVisible)return DB;const c={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Vu(o==null?void 0:o.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none",c;const x=this.getLead();if(!this.projectionDelta||!this.layout||!x.target){const S={};return this.options.layoutId&&(S.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,S.pointerEvents=Vu(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!di(this.latestValues)&&(S.transform=d?d({},""):"none",this.hasProjected=!1),S}const f=x.animationValues||x.latestValues;this.applyTransformsToTarget(),c.transform=_B(this.projectionDeltaWithTransform,this.treeScale,f),d&&(c.transform=d(f,c.transform));const{x:j,y:w}=this.projectionDelta;c.transformOrigin=`${j.origin*100}% ${w.origin*100}% 0`,x.animationValues?c.opacity=x===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:c.opacity=x===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const S in Wc){if(f[S]===void 0)continue;const{correct:g,applyTo:V,isCSSVariable:E}=Wc[S],_=c.transform==="none"?f[S]:g(f[S],x);if(V){const M=V.length;for(let R=0;R<M;R++)c[V[R]]=_}else E?this.options.visualElement.renderState.vars[S]=_:c[S]=_}return this.options.layoutId&&(c.pointerEvents=x===this?Vu(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var c;return(c=o.currentAnimation)==null?void 0:c.stop(!1)}),this.root.nodes.forEach(Pw),this.root.sharedNodes.clear()}}}function MB(s){s.updateLayout()}function LB(s){var r;const t=((r=s.resumeFrom)==null?void 0:r.snapshot)||s.snapshot;if(s.isLead()&&s.layout&&t&&s.hasListeners("didUpdate")){const{layoutBox:a,measuredBox:i}=s.layout,{animationType:l}=s.options,o=t.source!==s.layout.source;l==="size"?Mr(j=>{const w=o?t.measuredBox[j]:t.layoutBox[j],S=ir(w);w.min=a[j].min,w.max=w.min+S}):UI(l,t.layoutBox,a)&&Mr(j=>{const w=o?t.measuredBox[j]:t.layoutBox[j],S=ir(a[j]);w.max=w.min+S,s.relativeTarget&&!s.currentAnimation&&(s.isProjectionDirty=!0,s.relativeTarget[j].max=s.relativeTarget[j].min+S)});const c=go();oc(c,a,t.layoutBox);const d=go();o?oc(d,s.applyTransform(i,!0),t.measuredBox):oc(d,a,t.layoutBox);const x=!VI(c);let f=!1;if(!s.resumeFrom){const j=s.getClosestProjectingParent();if(j&&!j.resumeFrom){const{snapshot:w,layout:S}=j;if(w&&S){const g=ps();lc(g,t.layoutBox,w.layoutBox);const V=ps();lc(V,a,S.layoutBox),BI(g,V)||(f=!0),j.options.layoutRoot&&(s.relativeTarget=V,s.relativeTargetOrigin=g,s.relativeParent=j)}}}s.notifyListeners("didUpdate",{layout:a,snapshot:t,delta:d,layoutDelta:c,hasLayoutChanged:x,hasRelativeLayoutChanged:f})}else if(s.isLead()){const{onExitComplete:a}=s.options;a&&a()}s.options.transition=void 0}function OB(s){s.parent&&(s.isProjecting()||(s.isProjectionDirty=s.parent.isProjectionDirty),s.isSharedProjectionDirty||(s.isSharedProjectionDirty=!!(s.isProjectionDirty||s.parent.isProjectionDirty||s.parent.isSharedProjectionDirty)),s.isTransformDirty||(s.isTransformDirty=s.parent.isTransformDirty))}function VB(s){s.isProjectionDirty=s.isSharedProjectionDirty=s.isTransformDirty=!1}function BB(s){s.clearSnapshot()}function Pw(s){s.clearMeasurements()}function zB(s){s.isLayoutDirty=!1}function FB(s){const{visualElement:t}=s.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),s.resetTransform()}function Sw(s){s.finishAnimation(),s.targetDelta=s.relativeTarget=s.target=void 0,s.isProjectionDirty=!0}function UB(s){s.resolveTargetDelta()}function $B(s){s.calcProjection()}function WB(s){s.resetSkewAndRotation()}function qB(s){s.removeLeadSnapshot()}function Ew(s,t,r){s.translate=ns(t.translate,0,r),s.scale=ns(t.scale,1,r),s.origin=t.origin,s.originPoint=t.originPoint}function Cw(s,t,r,a){s.min=ns(t.min,r.min,a),s.max=ns(t.max,r.max,a)}function HB(s,t,r,a){Cw(s.x,t.x,r.x,a),Cw(s.y,t.y,r.y,a)}function GB(s){return s.animationValues&&s.animationValues.opacityExit!==void 0}const KB={duration:.45,ease:[.4,0,.1,1]},Tw=s=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(s),_w=Tw("applewebkit/")&&!Tw("chrome/")?Math.round:Fr;function Dw(s){s.min=_w(s.min),s.max=_w(s.max)}function QB(s){Dw(s.x),Dw(s.y)}function UI(s,t,r){return s==="position"||s==="preserve-aspect"&&!XV(kw(t),kw(r),.2)}function YB(s){var t;return s!==s.root&&((t=s.scroll)==null?void 0:t.wasRoot)}const XB=FI({attachResizeListener:(s,t)=>Hc(s,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Zh={current:void 0},$I=FI({measureScroll:s=>({x:s.scrollLeft,y:s.scrollTop}),defaultParent:()=>{if(!Zh.current){const s=new XB({});s.mount(window),s.setOptions({layoutScroll:!0}),Zh.current=s}return Zh.current},resetTransform:(s,t)=>{s.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:s=>window.getComputedStyle(s).position==="fixed"}),JB={pan:{Feature:hB},drag:{Feature:mB,ProjectionNode:$I,MeasureLayout:MI}};function Aw(s,t,r){const{props:a}=s;s.animationState&&a.whileHover&&s.animationState.setActive("whileHover",r==="Start");const i="onHover"+r,l=a[i];l&&ls.postRender(()=>l(t,vd(t)))}class ZB extends si{mount(){const{current:t}=this.node;t&&(this.unmount=PO(t,(r,a)=>(Aw(this.node,a,"Start"),i=>Aw(this.node,i,"End"))))}unmount(){}}class ez extends si{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=gd(Hc(this.node.current,"focus",()=>this.onFocus()),Hc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Rw(s,t,r){const{props:a}=s;if(s.current instanceof HTMLButtonElement&&s.current.disabled)return;s.animationState&&a.whileTap&&s.animationState.setActive("whileTap",r==="Start");const i="onTap"+(r==="End"?"":r),l=a[i];l&&ls.postRender(()=>l(t,vd(t)))}class tz extends si{mount(){const{current:t}=this.node;t&&(this.unmount=TO(t,(r,a)=>(Rw(this.node,a,"Start"),(i,{success:l})=>Rw(this.node,i,l?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const q0=new WeakMap,ep=new WeakMap,sz=s=>{const t=q0.get(s.target);t&&t(s)},rz=s=>{s.forEach(sz)};function az({root:s,...t}){const r=s||document;ep.has(r)||ep.set(r,{});const a=ep.get(r),i=JSON.stringify(t);return a[i]||(a[i]=new IntersectionObserver(rz,{root:s,...t})),a[i]}function nz(s,t,r){const a=az(t);return q0.set(s,r),a.observe(s),()=>{q0.delete(s),a.unobserve(s)}}const iz={some:0,all:1};class oz extends si{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:a,amount:i="some",once:l}=t,o={root:r?r.current:void 0,rootMargin:a,threshold:typeof i=="number"?i:iz[i]},c=d=>{const{isIntersecting:x}=d;if(this.isInView===x||(this.isInView=x,l&&!x&&this.hasEnteredView))return;x&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",x);const{onViewportEnter:f,onViewportLeave:j}=this.node.getProps(),w=x?f:j;w&&w(d)};return nz(this.node.current,o,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(lz(t,r))&&this.startObserver()}unmount(){}}function lz({viewport:s={}},{viewport:t={}}={}){return r=>s[r]!==t[r]}const cz={inView:{Feature:oz},tap:{Feature:tz},focus:{Feature:ez},hover:{Feature:ZB}},dz={layout:{ProjectionNode:$I,MeasureLayout:MI}},H0={current:null},WI={current:!1};function uz(){if(WI.current=!0,!!ay)if(window.matchMedia){const s=window.matchMedia("(prefers-reduced-motion)"),t=()=>H0.current=s.matches;s.addListener(t),t()}else H0.current=!1}const xz=new WeakMap;function mz(s,t,r){for(const a in t){const i=t[a],l=r[a];if(Js(i))s.addValue(a,i);else if(Js(l))s.addValue(a,qo(i,{owner:s}));else if(l!==i)if(s.hasValue(a)){const o=s.getValue(a);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=s.getStaticValue(a);s.addValue(a,qo(o!==void 0?o:i,{owner:s}))}}for(const a in r)t[a]===void 0&&s.removeValue(a);return t}const Mw=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class hz{scrapeMotionValuesFromProps(t,r,a){return{}}constructor({parent:t,props:r,presenceContext:a,reducedMotionConfig:i,blockInitialAnimation:l,visualState:o},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=jy,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const w=hr.now();this.renderScheduledAt<w&&(this.renderScheduledAt=w,ls.render(this.render,!1,!0))};const{latestValues:d,renderState:x}=o;this.latestValues=d,this.baseTarget={...d},this.initialValues=r.initial?{...d}:{},this.renderState=x,this.parent=t,this.props=r,this.presenceContext=a,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=c,this.blockInitialAnimation=!!l,this.isControllingVariants=Um(r),this.isVariantNode=uI(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:f,...j}=this.scrapeMotionValuesFromProps(r,{},this);for(const w in j){const S=j[w];d[w]!==void 0&&Js(S)&&S.set(d[w],!1)}}mount(t){this.current=t,xz.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,a)=>this.bindToMotionValue(a,r)),WI.current||uz(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:H0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Kn(this.notifyUpdate),Kn(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}bindToMotionValue(t,r){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const a=ol.has(t);a&&this.onBindTransform&&this.onBindTransform();const i=r.on("change",c=>{this.latestValues[t]=c,this.props.onUpdate&&ls.preRender(this.notifyUpdate),a&&this.projection&&(this.projection.isTransformDirty=!0)}),l=r.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{i(),l(),o&&o(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Ho){const r=Ho[t];if(!r)continue;const{isEnabled:a,Feature:i}=r;if(!this.features[t]&&i&&a(this.props)&&(this.features[t]=new i(this)),this.features[t]){const l=this.features[t];l.isMounted?l.update():(l.mount(),l.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ps()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let a=0;a<Mw.length;a++){const i=Mw[a];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const l="on"+i,o=t[l];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=mz(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const a=this.values.get(t);r!==a&&(a&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let a=this.values.get(t);return a===void 0&&r!==void 0&&(a=qo(r===null?void 0:r,{owner:this}),this.addValue(t,a)),a}readValue(t,r){let a=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return a!=null&&(typeof a=="string"&&(y1(a)||v1(a))?a=parseFloat(a):!AO(a)&&Qn.test(r)&&(a=tI(t,r)),this.setBaseTarget(t,Js(a)?a.get():a)),Js(a)?a.get():a}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var l;const{initial:r}=this.props;let a;if(typeof r=="string"||typeof r=="object"){const o=Ry(this.props,r,(l=this.presenceContext)==null?void 0:l.custom);o&&(a=o[t])}if(r&&a!==void 0)return a;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!Js(i)?i:this.initialValues[t]!==void 0&&a===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new cy),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}}class qI extends hz{constructor(){super(...arguments),this.KeyframeResolver=jO}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:a}){delete r[t],delete a[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Js(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function HI(s,{style:t,vars:r},a,i){Object.assign(s.style,t,i&&i.getProjectionStyles(a));for(const l in r)s.style.setProperty(l,r[l])}function pz(s){return window.getComputedStyle(s)}class fz extends qI{constructor(){super(...arguments),this.type="html",this.renderInstance=HI}readValueFromInstance(t,r){var a;if(ol.has(r))return(a=this.projection)!=null&&a.isProjecting?A0(r):z9(t,r);{const i=pz(t),l=(xy(r)?i.getPropertyValue(r):i[r])||0;return typeof l=="string"?l.trim():l}}measureInstanceViewportBox(t,{transformPagePoint:r}){return _I(t,r)}build(t,r,a){_y(t,r,a.transformTemplate)}scrapeMotionValuesFromProps(t,r,a){return My(t,r,a)}}const GI=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function gz(s,t,r,a){HI(s,t,void 0,a);for(const i in t.attrs)s.setAttribute(GI.has(i)?i:Ty(i),t.attrs[i])}class yz extends qI{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ps}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(ol.has(r)){const a=eI(r);return a&&a.default||0}return r=GI.has(r)?r:Ty(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,a){return jI(t,r,a)}build(t,r,a){gI(t,r,this.isSVGTag,a.transformTemplate,a.style)}renderInstance(t,r,a,i){gz(t,r,a,i)}mount(t){this.isSVGTag=bI(t.tagName),super.mount(t)}}const bz=(s,t)=>Ay(s)?new yz(t):new fz(t,{allowProjection:s!==b.Fragment}),vz=gV({...$V,...cz,...JB,...dz},bz),rt=UO(vz),jt="/assets/logo-e43e9960.png",jz="/assets/brooklyn99-7c1a6c47.png",Nz="/assets/stranger-things-31a579dc.png",wz="/assets/breaking-bad-482f4098.png",kz="/assets/naruto-54b60bd0.png",Iz="/assets/alice-5ff5523e.png",Pz="/assets/netflix-e3c8e0d2.png",Sz="/assets/spotify-d09996b4.png",Ez="/assets/disney-0c4f0934.png",Cz="/assets/max-c00a4c65.png",Tz="/assets/prime-video-72b85c51.png",_z="/assets/vix-ee8ed6dc.png",Dz="/assets/Canva-e7a7d520.png",Az="/assets/ChatGPT-b8d712b1.png",Rz="/assets/crunchyroll-562435fc.png",Mz="/assets/redessociales-65298696.png",Lz="/assets/dgo-7ac16535.png",Oz="/assets/ligamax-7ac6606f.png",Vz="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAAB4CAYAAADblO/uAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAACnFJREFUeNrsnd912zYbh+Gc3FedoPQEVSYINUHUm+bS0gS2JlA8ga0JrF7qyvYElieIMkHYCapvAn+EQEb2sUgR1AsSIJ/nHKU9jkOKIH54/+AFcPby8qIAoNucIXQAhA4ACB0AEDoAIHQAQOgAgNABAKEDAEIHQOgAgNABAKEDAEIHAIQOAAgdABA6ACB0AIQOAAgdABA6AHRX6GdnZ7RiVVZJlP45Tj+D9PM5++k2/fxIPxv1NXqgkeA1UoYYoTcj8En652X6GR75TS36Rfq5TUW/peEAoYchcG29b9JPZPkvk/QzTcW+phEROkL3V+DaNb/L3PRT0GJf0qAIHaH7KfKnCm46YgeEjsjf8CkV+4YGRugIvbsiz2P2TyToEHpdPtCUYtw4ErkmSj9XNDGEadHNvLL+xK9+qq3WJqiMs8mu3zdwp/O0XRK6LRbdf6EbF1dbpwt1fNpJF5AsvBa9eZ6fyhTBuGaZtsWU7o/Q/Rb6KvmmTOGIrSi04KdexqjmmeYN3vF3YnWE7qfQZRJV2mX9y6vsc7PWPGeWtsEtEkDofgl9lQwzkUuIQVuykTdiXyU6BLlp+K5J+vznne7dxks6FLYkCN1HobuxeP6IfZX8VPblrRJ0e159lRzqlKM+lgRLCf2j4+/5pOTdWhMGrJJ2xW4WqkQt3V0nMjeOnitWb2dB6rDeDcgU+XjDR4dCcDmvrMV+n96jzSKSixbf23gXq7tBi/zU5OI86wPbTPSPlPG2ywdHItedxXWBR6SambsuyjvELb63KKtB8J1BNijdpd/3v8wLgs4IvbnpprggceOaSw/e3TiwvjbIBH+f5W4gaKHLxHh2g4qxsE1Z84EnIvscaJ9rqooQHMfo8xaeQ6/9/tTQvSaq2Xnzsli6Scqz3vty5igbhMYl7WQ8sa/RNyQYokVvL3YdZsm/vrjtxhX2KU7Xc9x6INBJN1Omq+f6b0vbERc+WNe9zUz0VRY2uHTbY9XelNrhAc5X9GzI10jPDExLYnZW5AUq9EnLz+Paql949v6G3vcwM61WtLvtFyQYmtCNtRu03vFdZeGNmznx7P2FkpC7LnlfuO+BWXRfRmdXWfiJh+8vDJGYCrkkWK+kA0hm3WOPnku78CPha156+P5CEokWetToYPU2ZzPI2stsbJJ/p54slPko1KADzzpdvKvCkiq79C8J9/q7RYF01ucCYzAsieFt39GX7HrDygNI3TLdw/UiSe0+V3Q9vWrPI4vuo2W5SRvvQagWXjoJpzvWIvtvXoAzr2ndohK3uE9okdTJ4uftP077i34Hs4pHY8Xqfc3I+gRhSl/PSYwee/ji80MUTreYsvG57kijXWcyU1BJtpHEuXK1Ig1sBs37lsqqnSIldF+zv2OBhRSSIp8W7g5jPI86K9LiQPpaUR/xcXCbZxt+EqMfGAl9Rbvwm1pro401nwuKvNwN05Vlq2QdkHhtPaxDSC4zXqv96bTbkkEkP812XNJ373bvoiP78/VB6KdsVCG1+GJpkaR57JzQy5O1Mhbdvm7+YedBFW8Hlsfuyy68gg8CLzGETpmLfVy5Y66SOyWTZEwsXfIuxulXhW3TtsU0oVTR++lM5V6fTmrJd6W5K63GMgPXk2Bsfm3ZmW07vt/VcaatL0usavsYsScH/qYzxTwSrntojTHZffTUm5nbzS1orPbzsHIxo+28qg4vVkmXXPayfQP/8ejbPhzwPCKE/tZShshYud9A4lr1kf3mHDcl/WPt2eaR/3b5lXxU4IpNx7YnvqiQj/kt84iO/Z4OT6bevS+EDjVYdOx5JoLXmnJYZH+Ens9z+lYnL/NsbG9cbMmrlZhKhxPHvIwhQpdHi2D2KxttXsJ9wPH+oeer2yG72uHevnO3otb5gc8VwwgsuiOSd0f/moowvaz0qSNiP8Vtt31+n2PLtTIFQA+NuOqm3FlXMkZIu32hHxaBmVbShQt3gbfppuH4838N3WdmMag0u87bZPlvlJ+bg/RW6MWdRce1q0TPZYe8oODUJJyvHo3Pswh3Fn1mXdLuQ4Qux7EYbZbFVaG68KcmmobC7dltjLs+LjEqi2yQ2hy5TpyFjghdKEYs75ja5VslC9XOQRCni7z52u2+r2GfFxqMoiXBPUSi1t22Y0dHf8OsREoCbM9HgWv8SbesbM2HBf1picjlhe5KkLMA21NiftguZOlW9Z0tRS77NdKWFrp9djWueF0tmnVQIpdx222EvqULi/RJKaLuCt1gI0gb1zQkq/4odB2bZBx7zPlF54WeOOnIJlO67JHb7kvYBPXzBlGXhf7DatSza4xZAC7qpqWdUn70XFbbArGNG3nnh5l0Wei2LmRc+TeNgHxfCdbWBgp9d92LQsY6U7ORUNtfWq9XMAPTF/+Fbp/5/WJ5/W+eu6ltuO3bnmfcy85004c33h/1HM3egHq3oe/KtvTaJPwOiT3fn/Bb4ZZl5r7jbFuzn8os6HJalSdZGbe2sNRxjevPlNyurNJueyIq4GqZ9wcFmusCkeanrzxkIc7m1yBgNsiIBcS1KLj3IPMq5rutxt+GGNWPi/LQdbd1IwfWu8f6O90m/Z0eKg4GzBWbfrE88g7y467us4/+/ysRC3r83rmw41efVkq7JYX+7NR931v1rsfni0rtwA4tr/lLIF+xqeklSdx7qxznW+SEbr9ryLjGPXybbkvENzg01yvbT23K7jXv2kznKz5lXs62hsCn2b9/rnVvc0T3bc3BRb9rfe7eo8smkl69ZhOnR7vspL1QZtkg4cPqtoWjjquX62qLfaH22WCzEsu9JS9yR5vM8I9q3V8nbVeJFtxEmR1mDrnKufV8VO93ol3Wes783DyzGOv1vd8bBnP953f3drzF99nLy8tpFzg7U6++bNHxNmUuqP1IaH8fF2x3I3FHzuaCljEnuL47Nvnl7z9GvsXoqkaMU+/ccTM4tD2HvEDkEAqyQi+eWyxiWHo8Ujlt7gu+rRmTARTxRzhCN9hmoeuVK5r4pq0pphnWHISJQhO6rfte/5BAUzHXdOHIkqw3NCT0xF+h27vv8Yl3nDYYr29UmBtigM+YUt1DQv/XX6EbbKadTnNZ9vOY6wZEPsJlBwdMCn4u1qdlp9f2I5ROsOli/aqJtpHIAo1Voqfcrhy8iNv0+2HJwYU11yWy3w/8jS4C+v1Ufbq16MbqNR/HGjGOBGObdTYIIXKQFvggmzt/EvCKW7Lo+7jje0Wrfi5e8WX2+76okQPQg5RO8P3T+2WgUNerzBfMHCqprXK09K9iLCmL7k7o5qGrVLDpevFzx4kO3ah/quIVS89Z467Fa9ehj0I/JXzcZl7krh+GIXTz4E9HRi822ocuCV2743MJkUsK/UMDj66X8RUJ+RaRQ8eoG4IuM3fdiUfp3qK/d6GjX3Ewa6qhexZd9+/LLEyMVPH08UbtV7IVngngjesOAP6D0AEQOgAgdABA6ACA0AEAoQMAQgcAhA4ACB0AoQMAQgcAhA4ACB0AEDoAIHQAQOgAgNABEDoAIHQAQOgAgNABAKEDAEIHAIQOAAgdAKEjdIDu838BBgAP9Pzi++BqOAAAAABJRU5ErkJggg==",Bz="/assets/youtube-49ca55e1.png",zz="/assets/deezer-17be4fc1.png",Fz="/assets/tidal-d3f361cb.png",Uz="/assets/vpn-62bcb4e7.png",$z="/assets/wintv-4112ccf1.png",Wz="/assets/applemusic-67f0cc24.png",qz="/assets/appletv-e2fd6c55.png",Hz="/assets/iptv-a55016d0.png",Gz="/assets/flujotv-4d1c58b0.png",Kz="/assets/vikirakuten-116faf85.png",Qz="/assets/pornhub-46f32d0d.png",Yz="/assets/paramount-5ab87b8f.png",Xz="/assets/licencias-80ba80ab.png",Jz="/assets/capcut-bc65a6c0.png",Zz="/assets/duolingo-4d803f89.png",eF="/assets/buscapersonas-88e00efa.png",KI=b.createContext({theme:"dark",toggleTheme:()=>{}}),tF=({children:s})=>{const[t,r]=b.useState(()=>localStorage.getItem("theme")||"dark"),a=()=>{r(i=>{const l=i==="dark"?"light":"dark";return localStorage.setItem("theme",l),l})};return b.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(KI.Provider,{value:{theme:t,toggleTheme:a},children:e.jsx("div",{className:`min-h-screen font-inter transition-colors duration-300 ${t==="dark"?"bg-gradient-to-br from-gray-900 via-blue-950 to-gray-900 text-gray-100":"bg-gradient-to-br from-gray-100 via-blue-50 to-gray-100 text-gray-900"}`,children:s})})},Nr=[{src:jz,title:"Brooklyn Nine-Nine",description:"Comedia policial hilarante"},{src:Nz,title:"Stranger Things",description:"Misterio y nostalgia ochentera"},{src:wz,title:"Breaking Bad",description:"A chemistry teacher's descent into the world of crime"},{src:kz,title:"Naruto",description:"Aventuras ninja épicas"},{src:Iz,title:"Alice in Borderland",description:"Juego de supervivencia intenso"}],sF=[{name:"Netflix",logo:Pz,route:"/netflix",color:"#E50914"},{name:"Spotify",logo:Sz,route:"/spotify",color:"#1DB954"},{name:"Disney+",logo:Ez,route:"/disney",color:"#1C4ED8"},{name:"Max",logo:Cz,route:"/max",color:"#B5179E"},{name:"Prime Video",logo:Tz,route:"/primevideo",color:"#00A8E1"},{name:"Vix",logo:_z,route:"/vix",color:"#FF5733"},{name:"Canva",logo:Dz,route:"/canva",color:"#00C4B4"},{name:"ChatGPT",logo:Az,route:"/chatgpt",color:"#10A37F"},{name:"Crunchyroll",logo:Rz,route:"/crunchyroll",color:"#F47521"},{name:"Redes Sociales",logo:Mz,route:"/redessociales",color:"#3B5998"},{name:"Dgo",logo:Lz,route:"/dgo",color:"#4CAF50"},{name:"Liga Max",logo:Oz,route:"/ligamax",color:"#FFD700"},{name:"Movistar Play",logo:Vz,route:"/movistarplay",color:"#00ADEF"},{name:"Youtube",logo:Bz,route:"/youtube",color:"#FF0000"},{name:"Deezer",logo:zz,route:"/deezer",color:"#FEAA2D"},{name:"Tidal",logo:Fz,route:"/tidal",color:"#00C7B7"},{name:"Vpn",logo:Uz,route:"/vpn",color:"#4B0082"},{name:"Win Tv",logo:$z,route:"/wintv",color:"#4682B4"},{name:"Apple Music",logo:Wz,route:"/applemusic",color:"#FA2C43"},{name:"Apple Tv",logo:qz,route:"/appletv",color:"#A3AAAE"},{name:"Iptv",logo:Hz,route:"/iptv",color:"#8B008B"},{name:"Flujo Tv",logo:Gz,route:"/flujotv",color:"#20B2AA"},{name:"Viki Rakuten",logo:Kz,route:"/vikirakuten",color:"#D81B60"},{name:"Pornhub",logo:Qz,route:"/pornhub",color:"#FFA500"},{name:"Paramount",logo:Yz,route:"/paramount",color:"#0064D2"},{name:"Licencias",logo:Xz,route:"/licencias",color:"#708090"},{name:"Capcut",logo:Jz,route:"/capcut",color:"#00CED1"},{name:"Duolingo",logo:Zz,route:"/duolingo",color:"#58CC02"},{name:"Busca Personas",logo:eF,route:"/buscapersonas",color:"#6A5ACD"}],rF=({isOpen:s,onClose:t,message:r})=>e.jsx(lI,{children:s&&e.jsx(rt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center",children:e.jsxs(rt.div,{initial:{scale:.8,y:50},animate:{scale:1,y:0},exit:{scale:.8,y:50},className:"bg-white dark:bg-gray-900 rounded-2xl p-6 max-w-md w-full mx-4 shadow-2xl border dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(Zp,{className:"text-blue-500 dark:text-cyan-400 text-2xl"}),e.jsx("h3",{className:"text-xl font-bold dark:text-white text-gray-900",children:"Notificación"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:r}),e.jsx("button",{onClick:t,className:"w-full py-2 rounded-lg bg-blue-600 dark:bg-cyan-600 text-white hover:bg-blue-700 dark:hover:bg-cyan-700 transition-colors focus:outline-none focus:ring-2 focus:ring-cyan-500",children:"Cerrar"})]})})}),aF=()=>{const[s,t]=b.useState(0),[r,a]=b.useState(null),[i,l]=b.useState(0),[o,c]=b.useState("user"),[d,x]=b.useState(""),[f,j]=b.useState([]),[w,S]=b.useState({isOpen:!1,message:""}),[g,V]=b.useState(!1),[E,_]=b.useState(!1),M=Nt(),{theme:R,toggleTheme:q}=b.useContext(KI);b.useEffect(()=>{const Q=setInterval(()=>{t(T=>(T+1)%Nr.length)},5e3);return()=>clearInterval(Q)},[]),b.useEffect(()=>(document.body.style.overflow=E?"hidden":"auto",()=>{document.body.style.overflow="auto"}),[E]),b.useEffect(()=>{(async()=>{if(We.currentUser)try{const T=Z(I,"users"),W=ye(T,je("email","==",We.currentUser.email)),Ae=await gt(W);if(!Ae.empty){const _e=Ae.docs[0].data();a({name:_e.username||"Usuario",email:We.currentUser.email}),l(_e.balance||0),c(_e.role||"user")}const Ue=await Ye(B(I,"notifications","adminMessage"));if(Ue.exists()){const _e=Ue.data();S({isOpen:!0,message:_e.message||"Mensaje del administrador no disponible."})}}catch(T){console.error("Error al cargar datos:",T),S({isOpen:!0,message:"Hubo un error al cargar los datos. Por favor, intenta de nuevo."})}})()},[]);const G=async()=>{try{const Q=await Ye(B(I,"notifications","adminMessage"));if(Q.exists()){const T=Q.data();S({isOpen:!0,message:T.message||"Mensaje del administrador no disponible."})}else S({isOpen:!0,message:"No hay notificaciones del administrador en este momento."})}catch(Q){console.error("Error al cargar notificación:",Q),S({isOpen:!0,message:"Error al cargar la notificación. Por favor, intenta de nuevo."})}},Y=async()=>{try{await We.signOut(),a(null),M("/login")}catch(Q){console.error("Error al cerrar sesión:",Q),S({isOpen:!0,message:"Error al cerrar sesión. Por favor, intenta de nuevo."})}},O=()=>{M({user:"/dashboard/user",affiliate:"/dashboard/affiliate",provider:"/dashboard/provider",admin:"/dashboard/admin"}[o]||"/dashboard/user")},u=async Q=>{if(Q.preventDefault(),!d.trim()){j([]);return}try{const T=Z(I,"products"),W=ye(T,je("name",">=",d.toLowerCase()),je("name","<=",d.toLowerCase()+"")),Ue=(await gt(W)).docs.map(_e=>({id:_e.id,..._e.data()}));j(Ue)}catch(T){console.error("Error al buscar productos:",T),S({isOpen:!0,message:"Error al realizar la búsqueda. Por favor, intenta de nuevo."}),j([])}},U=()=>{V(Q=>!Q)},F=()=>{_(Q=>!Q)};return e.jsxs("div",{className:"flex flex-col min-h-screen",children:[e.jsx(rF,{isOpen:w.isOpen,onClose:()=>S({...w,isOpen:!1}),message:w.message}),e.jsxs(rt.header,{initial:{y:-100},animate:{y:0},transition:{type:"spring",stiffness:120},className:`fixed top-0 left-0 right-0 z-50 border-b dark:border-gray-800 border-gray-200 shadow-lg ${R==="dark"?"bg-gray-900":"bg-white"}`,children:[e.jsxs("div",{className:"container mx-auto px-6 py-4 flex items-center justify-between",children:[e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx(rt.img,{whileHover:{scale:1.1},src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:`text-xl font-bold ${R==="dark"?"text-cyan-300":"text-blue-600"}`,children:"BlackStreaming"})]}),e.jsx("div",{className:"hidden lg:flex justify-center flex-1",children:e.jsxs(rt.div,{className:"relative max-w-lg w-full",initial:{scale:.9},animate:{scale:1},children:[e.jsx("input",{type:"text",placeholder:"Buscar productos...",className:"w-full py-3 px-5 pr-12 rounded-full bg-gray-100 dark:bg-gray-800 dark:text-gray-100 text-gray-900 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 dark:focus:ring-cyan-500 focus:outline-none shadow-sm transition-all",value:d,onChange:Q=>x(Q.target.value)}),e.jsx(rt.button,{whileHover:{scale:1.1},onClick:u,className:"absolute right-3 top-1/2 -translate-y-1/2 dark:text-cyan-400 text-blue-600","aria-label":"Buscar",children:e.jsx(e0,{size:20})})]})}),e.jsx(rt.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:F,className:"lg:hidden p-2 rounded-full dark:text-cyan-300 text-blue-600 dark:hover:bg-gray-800 hover:bg-gray-100","aria-label":"Toggle menu",children:E?e.jsx(Lv,{size:22}):e.jsx(MT,{size:22})}),e.jsxs("div",{className:"hidden lg:flex items-center space-x-3",children:[e.jsx(rt.button,{whileHover:{rotate:180},whileTap:{scale:.9},onClick:q,className:"p-2 rounded-full dark:text-cyan-300 text-blue-600 dark:hover:bg-gray-800 hover:bg-gray-100","aria-label":"Cambiar tema",children:R==="dark"?e.jsx(fx,{size:22}):e.jsx(hx,{size:22})}),r?e.jsxs(e.Fragment,{children:[e.jsx(rt.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:G,className:"p-2 rounded-full dark:bg-gray-800 bg-gray-100 dark:hover:bg-gray-700 hover:bg-gray-200","aria-label":"Ver notificaciones",children:e.jsx(Zp,{className:"dark:text-cyan-400 text-blue-600",size:22})}),e.jsx(rt.span,{className:"text-base font-medium dark:text-cyan-300 text-blue-700",initial:{opacity:0},animate:{opacity:1},children:r.name}),e.jsxs(rt.span,{className:"text-base font-medium dark:bg-gray-800 bg-gray-100 dark:text-cyan-200 text-blue-800 px-4 py-1.5 rounded-full",whileHover:{scale:1.05},children:["S/ ",i.toFixed(2)]}),e.jsx(rt.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:O,className:"p-2 rounded-full dark:bg-gray-800 bg-gray-100 dark:hover:bg-gray-700 hover:bg-gray-200","aria-label":"Panel de control",children:e.jsx(Rv,{className:"dark:text-cyan-400 text-blue-600",size:22})}),e.jsx(rt.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:U,className:`p-2 rounded-full ${g?"bg-red-600 dark:bg-red-500 hover:bg-red-700 dark:hover:bg-red-600":"dark:bg-gray-800 bg-gray-100 dark:hover:bg-gray-700 hover:bg-gray-200"}`,"aria-label":g?"Desactivar modo live":"Activar modo live",children:e.jsx(Av,{className:g?"text-white":"dark:text-cyan-400 text-blue-600",size:22})}),e.jsxs(rt.button,{whileHover:{scale:1.05},whileTap:{scale:.9},onClick:Y,className:"inline-flex items-center space-x-2 px-4 py-2 rounded-full text-base font-semibold text-white bg-gradient-to-r from-red-600 to-red-700 shadow-md hover:from-red-700 hover:to-red-800 transition-all duration-300",children:[e.jsx(Mv,{size:18}),e.jsx("span",{children:"Salir"})]})]}):e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(rt.button,{whileHover:{scale:1.05},whileTap:{scale:.9},onClick:()=>M("/login"),className:`inline-flex items-center space-x-2 px-4 py-2 rounded-full text-base font-semibold text-white shadow-md transition-all duration-300 ${R==="dark"?"bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-700 hover:to-blue-700":"bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600"}`,"aria-label":"Ingresar",children:[e.jsx(px,{size:18}),e.jsx("span",{children:"Ingresar"})]}),e.jsx(rt.button,{whileHover:{scale:1.05},whileTap:{scale:.9},onClick:()=>M("/register"),className:`inline-flex items-center space-x-2 px-4 py-2 rounded-full text-base font-semibold text-white shadow-md transition-all duration-300 ${R==="dark"?"bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600":"bg-gradient-to-r from-blue-400 to-indigo-400 hover:from-blue-500 hover:to-indigo-500"}`,"aria-label":"Registrarse",children:e.jsx("span",{children:"Registrarse"})})]})]})]}),e.jsx(lI,{children:E&&e.jsx(rt.div,{initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{type:"spring",stiffness:300,damping:30},className:"lg:hidden fixed top-0 left-0 h-full w-64 bg-white dark:bg-gray-900 z-50 shadow-2xl border-r dark:border-gray-700 border-gray-200",children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b dark:border-gray-700 border-gray-200",children:[e.jsx("span",{className:"text-xl font-bold dark:text-cyan-300 text-blue-600",children:"Menú"}),e.jsx(rt.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:F,className:"p-2 rounded-full dark:text-cyan-300 text-blue-600 dark:hover:bg-gray-800 hover:bg-gray-100","aria-label":"Cerrar menú",children:e.jsx(Lv,{size:22})})]}),e.jsxs("div",{className:"flex flex-col p-4 space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar productos...",className:"w-full py-3 px-5 pr-12 rounded-full bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-cyan-500 focus:outline-none",value:d,onChange:Q=>x(Q.target.value)}),e.jsx(rt.button,{whileHover:{scale:1.1},onClick:u,className:"absolute right-3 top-1/2 -translate-y-1/2 dark:text-cyan-400 text-blue-600","aria-label":"Buscar",children:e.jsx(e0,{size:20})})]}),r?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-base font-medium dark:text-cyan-300 text-blue-600",children:r.name}),e.jsxs("span",{className:"text-base font-medium bg-gray-100 dark:bg-gray-800 dark:text-cyan-200 text-blue-800 px-4 py-1.5 rounded-full",children:["S/ ",i.toFixed(2)]})]}),e.jsxs(rt.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{G(),F()},className:"flex items-center space-x-2 text-base text-left dark:text-gray-200 text-gray-700 hover:dark:text-cyan-300 hover:text-blue-600",children:[e.jsx(Zp,{size:18}),e.jsx("span",{children:"Notificaciones"})]}),e.jsxs(rt.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{O(),F()},className:"flex items-center space-x-2 text-base text-left dark:text-gray-200 text-gray-700 hover:dark:text-cyan-300 hover:text-blue-600",children:[e.jsx(Rv,{size:18}),e.jsx("span",{children:"Panel de control"})]}),e.jsxs(rt.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{U(),F()},className:`flex items-center space-x-2 text-base text-left ${g?"text-red-500 dark:text-red-400":"dark:text-gray-200 text-gray-700 hover:dark:text-cyan-300 hover:text-blue-600"}`,children:[e.jsx(Av,{size:18}),e.jsx("span",{children:g?"Desactivar modo live":"Activar modo live"})]}),e.jsxs(rt.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Y(),F()},className:"flex items-center space-x-2 text-base text-left text-red-500 dark:text-red-400 hover:text-red-600 dark:hover:text-red-300",children:[e.jsx(Mv,{size:18}),e.jsx("span",{children:"Salir"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(rt.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{M("/login"),F()},className:"flex items-center space-x-2 text-base text-left dark:text-gray-200 text-gray-700 hover:dark:text-cyan-300 hover:text-blue-600",children:[e.jsx(px,{size:18}),e.jsx("span",{children:"Ingresar"})]}),e.jsx(rt.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{M("/register"),F()},className:"flex items-center space-x-2 text-base text-left dark:text-gray-200 text-gray-700 hover:dark:text-cyan-300 hover:text-blue-600",children:e.jsx("span",{children:"Registrarse"})})]}),e.jsxs(rt.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{q(),F()},className:"flex items-center space-x-2 text-base text-left dark:text-gray-200 text-gray-700 hover:dark:text-cyan-300 hover:text-blue-600",children:[R==="dark"?e.jsx(fx,{size:18}):e.jsx(hx,{size:18}),e.jsx("span",{children:"Cambiar tema"})]})]})]})})})]}),e.jsxs("main",{className:"flex-grow pt-24",children:[f.length>0&&e.jsxs(rt.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"py-12 px-6 container mx-auto",children:[e.jsx("h2",{className:`text-3xl font-bold mb-6 ${R==="dark"?"text-white":"text-gray-900"}`,children:"Resultados de búsqueda"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:f.map(Q=>{var T;return e.jsxs(rt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},whileHover:{scale:1.05,boxShadow:"0 10px 20px rgba(0,0,0,0.1)"},className:`p-6 rounded-lg shadow-md border-2 ${R==="dark"?"bg-gradient-to-br from-gray-800 to-gray-900 border-gray-700":"bg-gradient-to-br from-white to-gray-100 border-gray-200"}`,children:[e.jsx("h3",{className:`text-lg font-semibold mb-2 ${R==="dark"?"text-cyan-300":"text-blue-600"}`,children:Q.name}),e.jsx("p",{className:`text-base line-clamp-2 mb-2 ${R==="dark"?"text-gray-300":"text-gray-600"}`,children:Q.description}),e.jsxs("p",{className:`text-base font-medium mb-1 ${R==="dark"?"text-gray-200":"text-gray-700"}`,children:["Plataforma: ",Q.platform]}),e.jsxs("p",{className:`text-base font-bold ${R==="dark"?"text-cyan-400":"text-blue-700"}`,children:["Precio: S/ ",(T=Q.price)==null?void 0:T.toFixed(2)]})]},Q.id)})})]}),d.trim()&&f.length===0&&e.jsx(rt.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"py-12 px-6 container mx-auto text-center",children:e.jsxs("p",{className:`text-lg ${R==="dark"?"text-gray-300":"text-gray-600"}`,children:['No se encontraron productos para "',d,'".']})}),e.jsxs(rt.section,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8},className:"py-8 px-6 text-center",children:[e.jsx("h1",{className:`text-4xl sm:text-5xl md:text-6xl font-extrabold tracking-tight ${R==="dark"?"text-white":"text-gray-900"} bg-clip-text bg-gradient-to-r dark:from-cyan-400 dark:to-blue-500 from-blue-600 to-indigo-600`,children:"Tus plataformas favoritas al instante"}),e.jsx("p",{className:`mt-4 text-lg sm:text-xl ${R==="dark"?"text-gray-300":"text-gray-600"} max-w-3xl mx-auto`,children:"Accede a todo tu entretenimiento y herramientas con BlackStreaming."})]}),e.jsxs("section",{className:"relative py-6 px-6 sm:px-8",children:[e.jsxs(rt.div,{className:"flex justify-center items-center space-x-4 perspective-1000",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:[e.jsx(rt.div,{className:"hidden lg:block w-48 h-64 rounded-2xl overflow-hidden shadow-xl transform -rotate-y-15",initial:{x:-100,opacity:0},animate:{x:0,opacity:.8},transition:{duration:.5},children:e.jsx("img",{src:Nr[(s-1+Nr.length)%Nr.length].src,alt:"Programa anterior",className:"w-full h-full object-cover scale-110"})}),e.jsxs(rt.div,{className:"relative rounded-2xl overflow-hidden shadow-2xl dark:border-cyan-500/20 border-blue-200/20 border",initial:{scale:.9},animate:{scale:1},transition:{type:"spring",stiffness:100},children:[e.jsx("img",{src:Nr[s].src,alt:"Programa destacado",className:"w-72 h-96 sm:w-96 sm:h-[28rem] object-cover"}),e.jsx("div",{className:`absolute inset-0 ${R==="dark"?"bg-gradient-to-t from-gray-900/80 to-transparent":"bg-gradient-to-t from-gray-900/50 to-transparent"}`}),e.jsxs(rt.div,{className:"absolute bottom-0 w-full p-6",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${R==="dark"?"text-white":"text-gray-100"} drop-shadow-lg`,children:Nr[s].title}),e.jsx("p",{className:`text-sm ${R==="dark"?"text-gray-300":"text-gray-200"}`,children:Nr[s].description})]})]}),e.jsx(rt.div,{className:"hidden lg:block w-48 h-64 rounded-2xl overflow-hidden shadow-xl transform rotate-y-15",initial:{x:100,opacity:0},animate:{x:0,opacity:.8},transition:{duration:.5},children:e.jsx("img",{src:Nr[(s+1)%Nr.length].src,alt:"Próximo programa",className:"w-full h-full object-cover scale-110"})}),e.jsx(rt.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>t(Q=>(Q-1+Nr.length)%Nr.length),className:"absolute left-4 top-1/2 -translate-y-1/2 dark:bg-gray-900/60 bg-white/60 dark:hover:bg-cyan-500/60 hover:bg-blue-200/60 dark:border-cyan-500/20 border-blue-200/20 backdrop-blur-md p-3 rounded-full border","aria-label":"Programa anterior",children:e.jsx(LT,{className:"dark:text-cyan-300 text-blue-600 text-xl"})}),e.jsx(rt.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>t(Q=>(Q+1)%Nr.length),className:"absolute right-4 top-1/2 -translate-y-1/2 dark:bg-gray-900/60 bg-white/60 dark:hover:bg-cyan-500/60 hover:bg-blue-200/60 dark:border-cyan-500/20 border-blue-200/20 backdrop-blur-md p-3 rounded-full border","aria-label":"Próximo programa",children:e.jsx(OT,{className:"dark:text-cyan-300 text-blue-600 text-xl"})})]}),e.jsx("div",{className:"flex justify-center space-x-2 mt-6",children:Nr.map((Q,T)=>e.jsx(rt.div,{whileHover:{scale:1.2},className:`w-2 h-2 rounded-full transition-colors ${T===s?"dark:bg-cyan-400 bg-blue-600":"dark:bg-gray-600 bg-gray-300"}`,"aria-label":`Ir a ${T+1}`},T))})]}),e.jsxs(rt.section,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8},className:"py-16 container mx-auto px-6",children:[e.jsxs("div",{className:"mb-10 text-center",children:[e.jsx(rt.h2,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:`text-3xl md:text-4xl font-bold ${R==="dark"?"text-white":"text-gray-900"} mb-2`,children:"Plataformas de Streaming"}),e.jsx(rt.p,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},className:`${R==="dark"?"text-gray-300":"text-gray-600"} max-w-2xl mx-auto`,children:"Acceso a todas tus plataformas favoritas en un solo lugar."})]}),e.jsx(rt.div,{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-6",initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},children:sF.map(Q=>e.jsx(rt.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},whileHover:{scale:1.05,boxShadow:"0 10px 20px rgba(0,0,0,0.2)"},className:"w-full h-32",children:e.jsxs(y,{to:Q.route,className:`group relative flex items-center justify-center h-full rounded-lg shadow-lg transition-all duration-300 ${R==="dark"?"bg-gradient-to-br from-gray-800 to-gray-900":"bg-gradient-to-br from-white to-gray-100"} border-2`,style:{borderImage:`linear-gradient(to right, ${Q.color}, transparent) 1`},"aria-label":`Ir a ${Q.name}`,children:[e.jsxs("div",{className:"flex items-center space-x-4 p-4",children:[e.jsx(rt.img,{whileHover:{scale:1.1},src:Q.logo,alt:Q.name,className:"w-20 h-20 object-contain",style:{transform:g?"scaleX(-1)":"scaleX(1)"}}),e.jsx("span",{className:`font-semibold text-center text-base ${R==="dark"?"text-gray-100":"text-gray-800"}`,children:Q.name})]}),e.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-10 transition-opacity duration-300",style:{backgroundColor:Q.color}})]})},Q.name))})]}),!r&&e.jsx(rt.section,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8},className:"py-16 dark:bg-gradient-to-r dark:from-gray-900 dark:to-blue-950 bg-gradient-to-r from-blue-50 to-gray-100",children:e.jsxs("div",{className:"container mx-auto px-6 text-center",children:[e.jsx(rt.h2,{initial:{scale:.9},animate:{scale:1},className:`text-2xl md:text-3xl font-bold ${R==="dark"?"text-white":"text-gray-900"} mb-4`,children:"¿Listo para adquirir?"}),e.jsx("p",{className:`${R==="dark"?"text-gray-300":"text-gray-600"} max-w-2xl mx-auto mb-6`,children:"Únete a miles de usuarios satisfechos accediendo a todas tus plataformas favoritas en un solo lugar."}),e.jsx(rt.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>M("/register"),className:`inline-flex items-center space-x-2 px-6 py-3 rounded-full text-base font-semibold text-white shadow-md transition-all duration-300 ${R==="dark"?"bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600":"bg-gradient-to-r from-blue-400 to-indigo-400 hover:from-blue-500 hover:to-indigo-500"}`,children:e.jsx("span",{children:"Regístrate"})})]})})]}),e.jsx("footer",{className:"bg-gray-900 dark:bg-gray-900 bg-white dark:bg-gray-900 border-t dark:border-gray-800 border-gray-200 py-12",children:e.jsx("div",{className:"container mx-auto px-6",children:e.jsxs("div",{className:"flex flex-col items-center space-y-6 md:flex-row md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:`text-base font-semibold ${R==="dark"?"text-cyan-300":"text-blue-600"}`,children:"BlackStreaming"})]}),e.jsxs("div",{className:`text-base ${R==="dark"?"text-gray-400":"text-gray-600"} text-center`,children:["© ",new Date().getFullYear()," BlackStreaming. Todos los derechos reservados."]}),e.jsx("div",{className:`text-base ${R==="dark"?"text-gray-400":"text-gray-600"} text-center`,children:"Desarrollado por Saiph"})]})})})]})},nF=()=>e.jsx(tF,{children:e.jsx(aF,{})});function Ut(s){return et({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"},child:[]}]})(s)}function He(s){return et({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(s)}function QI(s){return et({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(s)}function Go(s){return et({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"},child:[]},{tag:"path",attr:{d:"M13.73 21a2 2 0 0 1-3.46 0"},child:[]}]})(s)}function nt(s){return et({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"},child:[]},{tag:"path",attr:{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"},child:[]}]})(s)}function uu(s){return et({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"},child:[]},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"},child:[]},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"},child:[]}]})(s)}function $m(s){return et({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},child:[]},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"},child:[]}]})(s)}function zu(s){return et({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(s)}function Ot(s){return et({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(s)}function iF(s){return et({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"},child:[]}]})(s)}function tp(s){return et({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"1",y1:"10",x2:"23",y2:"10"},child:[]}]})(s)}function Es(s){return et({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"},child:[]},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"},child:[]}]})(s)}function sp(s){return et({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"},child:[]}]})(s)}function Oy(s){return et({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},child:[]},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},child:[]}]})(s)}function YI(s){return et({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"},child:[]},{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"},child:[]}]})(s)}function XI(s){return et({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(s)}function Pe(s){return et({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"},child:[]},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"},child:[]},{tag:"polyline",attr:{points:"10 9 9 9 8 9"},child:[]}]})(s)}function Be(s){return et({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"2",width:"20",height:"20",rx:"2.18",ry:"2.18"},child:[]},{tag:"line",attr:{x1:"7",y1:"2",x2:"7",y2:"22"},child:[]},{tag:"line",attr:{x1:"17",y1:"2",x2:"17",y2:"22"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"line",attr:{x1:"2",y1:"7",x2:"7",y2:"7"},child:[]},{tag:"line",attr:{x1:"2",y1:"17",x2:"7",y2:"17"},child:[]},{tag:"line",attr:{x1:"17",y1:"17",x2:"22",y2:"17"},child:[]},{tag:"line",attr:{x1:"17",y1:"7",x2:"22",y2:"7"},child:[]}]})(s)}function it(s){return et({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"path",attr:{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"},child:[]}]})(s)}function Wm(s){return et({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(s)}function Fe(s){return et({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"},child:[]}]})(s)}function ot(s){return et({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"2",x2:"12",y2:"6"},child:[]},{tag:"line",attr:{x1:"12",y1:"18",x2:"12",y2:"22"},child:[]},{tag:"line",attr:{x1:"4.93",y1:"4.93",x2:"7.76",y2:"7.76"},child:[]},{tag:"line",attr:{x1:"16.24",y1:"16.24",x2:"19.07",y2:"19.07"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"6",y2:"12"},child:[]},{tag:"line",attr:{x1:"18",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"line",attr:{x1:"4.93",y1:"19.07",x2:"7.76",y2:"16.24"},child:[]},{tag:"line",attr:{x1:"16.24",y1:"7.76",x2:"19.07",y2:"4.93"},child:[]}]})(s)}function JI(s){return et({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"},child:[]}]})(s)}function It(s){return et({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},child:[]},{tag:"polyline",attr:{points:"16 17 21 12 16 7"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"},child:[]}]})(s)}function oF(s){return et({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(s)}function Vt(s){return et({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"},child:[]}]})(s)}function Zr(s){return et({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"},child:[]}]})(s)}function $t(s){return et({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"},child:[]}]})(s)}function Se(s){return et({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 18V5l12-2v13"},child:[]},{tag:"circle",attr:{cx:"6",cy:"18",r:"3"},child:[]},{tag:"circle",attr:{cx:"18",cy:"16",r:"3"},child:[]}]})(s)}function lt(s){return et({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 19l7-7 3 3-7 7-3-3z"},child:[]},{tag:"path",attr:{d:"M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"},child:[]},{tag:"path",attr:{d:"M2 2l7.586 7.586"},child:[]},{tag:"circle",attr:{cx:"11",cy:"11",r:"2"},child:[]}]})(s)}function ZI(s){return et({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(s)}function ct(s){return et({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polygon",attr:{points:"10 8 16 12 10 16 10 8"},child:[]}]})(s)}function Lw(s){return et({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(s)}function eP(s){return et({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"},child:[]},{tag:"polyline",attr:{points:"1 20 1 14 7 14"},child:[]},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"},child:[]}]})(s)}function Ze(s){return et({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(s)}function qm(s){return et({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(s)}function Xe(s){return et({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"9",cy:"21",r:"1"},child:[]},{tag:"circle",attr:{cx:"20",cy:"21",r:"1"},child:[]},{tag:"path",attr:{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"},child:[]}]})(s)}function Wt(s){return et({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"},child:[]},{tag:"line",attr:{x1:"7",y1:"7",x2:"7.01",y2:"7"},child:[]}]})(s)}function rp(s){return et({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"},child:[]}]})(s)}function lF(s){return et({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(s)}function G0(s){return et({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"},child:[]},{tag:"polyline",attr:{points:"17 6 23 6 23 12"},child:[]}]})(s)}function te(s){return et({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"7",width:"20",height:"15",rx:"2",ry:"2"},child:[]},{tag:"polyline",attr:{points:"17 2 12 7 7 2"},child:[]}]})(s)}function cF(s){return et({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"17 8 12 3 7 8"},child:[]},{tag:"line",attr:{x1:"12",y1:"3",x2:"12",y2:"15"},child:[]}]})(s)}function qt(s){return et({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"polyline",attr:{points:"17 11 19 13 23 9"},child:[]}]})(s)}function Ge(s){return et({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(s)}function cc(s){return et({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(s)}function ze(s){return et({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"23 7 16 12 23 17 23 7"},child:[]},{tag:"rect",attr:{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"},child:[]}]})(s)}function pt(s){return et({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(s)}const tP=b.createContext({theme:"dark",toggleTheme:()=>{}}),dF=({children:s})=>{const[t,r]=b.useState(()=>localStorage.getItem("theme")||"dark"),a=()=>{console.log("Toggling theme from",t);const i=t==="dark"?"light":"dark";r(i),localStorage.setItem("theme",i),console.log("Theme set to",i)};return b.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(tP.Provider,{value:{theme:t,toggleTheme:a},children:s})},uF=()=>{const[s,t]=b.useState(""),[r,a]=b.useState(""),[i,l]=b.useState(null),[o,c]=b.useState(!1),d=Nt(),{theme:x,toggleTheme:f}=b.useContext(tP),j=async S=>{S.preventDefault(),l(null);try{const g=Z(I,"users"),V=ye(g,je("username","==",s)),E=await gt(V);if(E.empty){l("Nombre de usuario no encontrado.");return}const R=E.docs[0].data().email,G=(await qM(We,R,r)).user;d("/")}catch{l("Usuario o contraseña incorrectos.")}},w=()=>{l(null)};return e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${x==="dark"?"bg-gradient-to-b from-gray-900 via-blue-950 to-gray-900 text-gray-200":"bg-gradient-to-b from-gray-100 via-blue-50 to-gray-100 text-gray-900"} flex flex-col`,children:[e.jsx("header",{className:`sticky top-0 z-50 backdrop-blur-md border-b ${x==="dark"?"border-gray-800/50 bg-gray-900/80":"border-gray-300/50 bg-gray-100/80"}`,children:e.jsxs("div",{className:"container mx-auto px-6 py-4 flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsx("div",{className:"flex items-center justify-center lg:justify-start",children:e.jsxs(y,{to:"/",className:"flex items-center space-x-3",children:[e.jsx(rt.img,{whileHover:{scale:1.1},src:jt,alt:"BlackStreaming",className:"h-12 w-auto transition-transform"}),e.jsx("span",{className:`text-2xl font-bold bg-gradient-to-r ${x==="dark"?"from-cyan-400/50 to-blue-600/50 text-cyan-400":"from-blue-500/50 to-indigo-500/50 text-blue-600"} bg-clip-text`,children:"BlackStreaming"})]})}),e.jsx(rt.div,{animate:{scale:[1,1.02,1]},transition:{duration:2,repeat:1/0,repeatType:"loop"},className:"text-xs font-semibold text-white bg-cyan-500/20 rounded-full px-3 py-1",children:"V 2.0"}),e.jsxs("div",{className:"flex items-center justify-center lg:justify-end space-x-3",children:[e.jsx(rt.button,{whileHover:{rotate:180},whileTap:{scale:.9},onClick:f,className:`p-2 rounded-full ${x==="dark"?"text-cyan-400 hover:bg-gray-700/50":"text-blue-600 hover:bg-gray-200/50"} transition-all`,"aria-label":"Cambiar tema",children:x==="dark"?e.jsx(fx,{size:22}):e.jsx(hx,{size:22})}),e.jsxs(y,{to:"/login",className:"inline-flex items-center space-x-2 px-4 py-2 rounded-full text-base font-semibold text-white shadow-md transition-all duration-300 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-700 hover:to-blue-700",children:[e.jsx(px,{size:18}),e.jsx("span",{children:"Ingresar"})]}),e.jsxs(y,{to:"/register",className:"inline-flex items-center space-x-2 px-4 py-2 rounded-full text-base font-semibold text-white shadow-md transition-all duration-300 bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600",children:[e.jsx(m4,{size:18}),e.jsx("span",{children:"Registrarse"})]})]})]})}),e.jsx("main",{className:"flex-grow flex items-center justify-center p-6",children:e.jsxs("div",{className:`backdrop-blur-md rounded-2xl shadow-2xl p-12 w-full max-w-lg border-2 ${x==="dark"?"bg-gradient-to-br from-gray-800/60 to-gray-900/60 border-cyan-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-blue-500/20"}`,children:[e.jsx(rt.div,{className:"flex justify-center mb-6",children:e.jsx(rt.img,{whileHover:{scale:1.05},src:jt,alt:"BlackStreaming",className:"h-24 sm:h-32 w-auto transition-transform"})}),e.jsxs("h1",{className:`text-3xl font-bold mb-10 text-center ${x==="dark"?"text-white":"text-gray-900"}`,children:["Black",e.jsx("span",{className:x==="dark"?"text-cyan-400":"text-blue-600",children:"Streaming"})]}),e.jsx("p",{className:`text-sm text-center mb-10 ${x==="dark"?"text-gray-400":"text-gray-600"}`,children:"Bienvenido de nuevo. Inicia sesión para continuar."}),i&&e.jsxs("div",{className:"mb-6 p-3 bg-gradient-to-r from-red-900/80 to-red-800/80 border-l-4 border-red-500 rounded-xl flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(He,{className:"mr-2 text-red-400"}),e.jsx("span",{className:"text-red-300",children:i})]}),e.jsx("button",{onClick:w,className:"text-red-400 hover:text-red-300",children:e.jsx(pt,{size:18})})]}),e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 text-lg ${x==="dark"?"text-gray-100":"text-gray-900"}`,children:"Nombre de Usuario"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ge,{className:`absolute top-3 left-3 ${x==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx("input",{type:"text",placeholder:"Tu nombre de usuario",value:s,onChange:S=>t(S.target.value),className:`w-full pl-10 pr-4 py-2.5 rounded-xl bg-transparent ${x==="dark"?"text-white":"text-gray-900"} border ${x==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-cyan-400/50 focus:border-cyan-400 shadow-md backdrop-blur-sm transition-all ${x==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 text-lg ${x==="dark"?"text-gray-100":"text-gray-900"}`,children:"Contraseña"}),e.jsxs("div",{className:"relative",children:[e.jsx(JI,{className:`absolute top-3 left-3 ${x==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx("input",{type:o?"text":"password",placeholder:"••••••••",value:r,onChange:S=>a(S.target.value),className:`w-full pl-10 pr-4 py-2.5 rounded-xl bg-transparent ${x==="dark"?"text-white":"text-gray-900"} border ${x==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-cyan-400/50 focus:border-cyan-400 shadow-md backdrop-blur-sm transition-all ${x==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,required:!0}),e.jsx("button",{type:"button",onClick:()=>c(!o),className:`absolute top-3 right-3 ${x==="dark"?"text-gray-400 hover:text-cyan-400":"text-gray-600 hover:text-blue-600"} transition-colors`,"aria-label":o?"Ocultar contraseña":"Mostrar contraseña",children:o?e.jsx(YI,{size:18}):e.jsx(XI,{size:18})})]})]}),e.jsx(rt.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"submit",className:"w-full py-3 bg-gradient-to-r from-cyan-400 to-blue-600 hover:from-cyan-500 hover:to-blue-700 text-white font-medium rounded-xl shadow-lg transition-all duration-300",children:"Iniciar Sesión"})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs(y,{to:"/register",className:`flex items-center justify-center transition-all text-lg ${x==="dark"?"text-gray-400 hover:text-cyan-400":"text-gray-600 hover:text-blue-600"}`,children:[e.jsx(QI,{className:"mr-1"})," ¿No tienes una cuenta? Regístrate"]})})]})}),e.jsx("footer",{className:`backdrop-blur-md border-t py-6 ${x==="dark"?"border-gray-800/50":"border-gray-300/50"}`,children:e.jsx("div",{className:"container mx-auto px-6",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4 md:flex-row md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-8 w-auto"}),e.jsx("span",{className:`text-sm font-semibold ${x==="dark"?"text-cyan-400":"text-blue-600"}`,children:"BlackStreaming"})]}),e.jsxs("div",{className:`text-sm text-center ${x==="dark"?"text-gray-400":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Todos los derechos reservados."]}),e.jsx("div",{className:`text-sm text-center ${x==="dark"?"text-gray-400":"text-gray-600"}`,children:"Desarrollado por Saiph"})]})})})]})},xF=()=>e.jsx(dF,{children:e.jsx(uF,{})}),mF=[{code:"+93",name:"Afghanistan",flag:"🇦🇫"},{code:"+355",name:"Albania",flag:"🇦🇱"},{code:"+213",name:"Algeria",flag:"🇩🇿"},{code:"+376",name:"Andorra",flag:"🇦🇩"},{code:"+244",name:"Angola",flag:"🇦🇴"},{code:"+1",name:"Antigua and Barbuda",flag:"🇦🇬"},{code:"+54",name:"Argentina",flag:"🇦🇷"},{code:"+374",name:"Armenia",flag:"🇦🇲"},{code:"+61",name:"Australia",flag:"🇦🇺"},{code:"+43",name:"Austria",flag:"🇦🇹"},{code:"+994",name:"Azerbaijan",flag:"🇦🇿"},{code:"+1",name:"Bahamas",flag:"🇧🇸"},{code:"+973",name:"Bahrain",flag:"🇧🇭"},{code:"+880",name:"Bangladesh",flag:"🇧🇩"},{code:"+1",name:"Barbados",flag:"🇧🇧"},{code:"+375",name:"Belarus",flag:"🇧🇾"},{code:"+32",name:"Belgium",flag:"🇧🇪"},{code:"+501",name:"Belize",flag:"🇧🇿"},{code:"+229",name:"Benin",flag:"🇧🇯"},{code:"+975",name:"Bhutan",flag:"🇧🇹"},{code:"+591",name:"Bolivia",flag:"🇧🇴"},{code:"+387",name:"Bosnia and Herzegovina",flag:"🇧🇦"},{code:"+267",name:"Botswana",flag:"🇧🇼"},{code:"+55",name:"Brazil",flag:"🇧🇷"},{code:"+673",name:"Brunei",flag:"🇧🇳"},{code:"+359",name:"Bulgaria",flag:"🇧🇬"},{code:"+226",name:"Burkina Faso",flag:"🇧🇫"},{code:"+257",name:"Burundi",flag:"🇧🇮"},{code:"+855",name:"Cambodia",flag:"🇰🇭"},{code:"+237",name:"Cameroon",flag:"🇨🇲"},{code:"+1",name:"Canada",flag:"🇨🇦"},{code:"+238",name:"Cape Verde",flag:"🇨🇻"},{code:"+236",name:"Central African Republic",flag:"🇨🇫"},{code:"+235",name:"Chad",flag:"🇹🇩"},{code:"+56",name:"Chile",flag:"🇨🇱"},{code:"+86",name:"China",flag:"🇨🇳"},{code:"+57",name:"Colombia",flag:"🇨🇴"},{code:"+269",name:"Comoros",flag:"🇰🇲"},{code:"+243",name:"Congo, Democratic Republic",flag:"🇨🇩"},{code:"+242",name:"Congo, Republic",flag:"🇨🇬"},{code:"+506",name:"Costa Rica",flag:"🇨🇷"},{code:"+385",name:"Croatia",flag:"🇭🇷"},{code:"+53",name:"Cuba",flag:"🇨🇺"},{code:"+357",name:"Cyprus",flag:"🇨🇾"},{code:"+420",name:"Czech Republic",flag:"🇨🇿"},{code:"+45",name:"Denmark",flag:"🇩🇰"},{code:"+253",name:"Djibouti",flag:"🇩🇯"},{code:"+1",name:"Dominica",flag:"🇩🇲"},{code:"+1",name:"Dominican Republic",flag:"🇩🇴"},{code:"+670",name:"East Timor",flag:"🇹🇱"},{code:"+593",name:"Ecuador",flag:"🇪🇨"},{code:"+20",name:"Egypt",flag:"🇪🇬"},{code:"+503",name:"El Salvador",flag:"🇸🇻"},{code:"+240",name:"Equatorial Guinea",flag:"🇬🇶"},{code:"+291",name:"Eritrea",flag:"🇪🇷"},{code:"+372",name:"Estonia",flag:"🇪🇪"},{code:"+251",name:"Ethiopia",flag:"🇪🇹"},{code:"+679",name:"Fiji",flag:"🇫🇯"},{code:"+358",name:"Finland",flag:"🇫🇮"},{code:"+33",name:"France",flag:"🇫🇷"},{code:"+241",name:"Gabon",flag:"🇬🇦"},{code:"+220",name:"Gambia",flag:"🇬🇲"},{code:"+995",name:"Georgia",flag:"🇬🇪"},{code:"+49",name:"Germany",flag:"🇩🇪"},{code:"+233",name:"Ghana",flag:"🇬🇭"},{code:"+30",name:"Greece",flag:"🇬🇷"},{code:"+1",name:"Grenada",flag:"🇬🇩"},{code:"+502",name:"Guatemala",flag:"🇬🇹"},{code:"+224",name:"Guinea",flag:"🇬🇳"},{code:"+245",name:"Guinea-Bissau",flag:"🇬🇼"},{code:"+592",name:"Guyana",flag:"🇬🇾"},{code:"+509",name:"Haiti",flag:"🇭🇹"},{code:"+504",name:"Honduras",flag:"🇭🇳"},{code:"+852",name:"Hong Kong",flag:"🇭🇰"},{code:"+36",name:"Hungary",flag:"🇭🇺"},{code:"+354",name:"Iceland",flag:"🇮🇸"},{code:"+91",name:"India",flag:"🇮🇳"},{code:"+62",name:"Indonesia",flag:"🇮🇩"},{code:"+98",name:"Iran",flag:"🇮🇷"},{code:"+964",name:"Iraq",flag:"🇮🇶"},{code:"+353",name:"Ireland",flag:"🇮🇪"},{code:"+972",name:"Israel",flag:"🇮🇱"},{code:"+39",name:"Italy",flag:"🇮🇹"},{code:"+1",name:"Jamaica",flag:"🇯🇲"},{code:"+81",name:"Japan",flag:"🇯🇵"},{code:"+962",name:"Jordan",flag:"🇯🇴"},{code:"+7",name:"Kazakhstan",flag:"🇰🇿"},{code:"+254",name:"Kenya",flag:"🇰🇪"},{code:"+686",name:"Kiribati",flag:"🇰🇮"},{code:"+965",name:"Kuwait",flag:"🇰🇼"},{code:"+996",name:"Kyrgyzstan",flag:"🇰🇬"},{code:"+856",name:"Laos",flag:"🇱🇦"},{code:"+371",name:"Latvia",flag:"🇱🇻"},{code:"+961",name:"Lebanon",flag:"🇱🇧"},{code:"+266",name:"Lesotho",flag:"🇱🇸"},{code:"+231",name:"Liberia",flag:"🇱🇷"},{code:"+218",name:"Libya",flag:"🇱🇾"},{code:"+423",name:"Liechtenstein",flag:"🇱🇮"},{code:"+370",name:"Lithuania",flag:"🇱🇹"},{code:"+352",name:"Luxembourg",flag:"🇱🇺"},{code:"+853",name:"Macau",flag:"🇲🇴"},{code:"+389",name:"Macedonia",flag:"🇲🇰"},{code:"+261",name:"Madagascar",flag:"🇲🇬"},{code:"+265",name:"Malawi",flag:"🇲🇼"},{code:"+60",name:"Malaysia",flag:"🇲🇾"},{code:"+960",name:"Maldives",flag:"🇲🇻"},{code:"+223",name:"Mali",flag:"🇲🇱"},{code:"+356",name:"Malta",flag:"🇲🇹"},{code:"+692",name:"Marshall Islands",flag:"🇲🇭"},{code:"+222",name:"Mauritania",flag:"🇲🇷"},{code:"+230",name:"Mauritius",flag:"🇲🇺"},{code:"+52",name:"Mexico",flag:"🇲🇽"},{code:"+691",name:"Micronesia",flag:"🇫🇲"},{code:"+373",name:"Moldova",flag:"🇲🇩"},{code:"+377",name:"Monaco",flag:"🇲🇨"},{code:"+976",name:"Mongolia",flag:"🇲🇳"},{code:"+382",name:"Montenegro",flag:"🇲🇪"},{code:"+212",name:"Morocco",flag:"🇲🇦"},{code:"+258",name:"Mozambique",flag:"🇲🇿"},{code:"+95",name:"Myanmar",flag:"🇲🇲"},{code:"+264",name:"Namibia",flag:"🇳🇦"},{code:"+674",name:"Nauru",flag:"🇳🇷"},{code:"+977",name:"Nepal",flag:"🇳🇵"},{code:"+31",name:"Netherlands",flag:"🇳🇱"},{code:"+64",name:"New Zealand",flag:"🇳🇿"},{code:"+505",name:"Nicaragua",flag:"🇳🇮"},{code:"+227",name:"Niger",flag:"🇳🇪"},{code:"+234",name:"Nigeria",flag:"🇳🇬"},{code:"+47",name:"Norway",flag:"🇳🇴"},{code:"+968",name:"Oman",flag:"🇴🇲"},{code:"+92",name:"Pakistan",flag:"🇵🇰"},{code:"+680",name:"Palau",flag:"🇵🇼"},{code:"+507",name:"Panama",flag:"🇵🇦"},{code:"+675",name:"Papua New Guinea",flag:"🇵🇬"},{code:"+595",name:"Paraguay",flag:"🇵🇾"},{code:"+51",name:"Peru",flag:"🇵🇪"},{code:"+63",name:"Philippines",flag:"🇵🇭"},{code:"+48",name:"Poland",flag:"🇵🇱"},{code:"+351",name:"Portugal",flag:"🇵🇹"},{code:"+974",name:"Qatar",flag:"🇶🇦"},{code:"+40",name:"Romania",flag:"🇷🇴"},{code:"+7",name:"Russia",flag:"🇷🇺"},{code:"+250",name:"Rwanda",flag:"🇷🇼"},{code:"+1",name:"Saint Kitts and Nevis",flag:"🇰🇳"},{code:"+1",name:"Saint Lucia",flag:"🇱🇨"},{code:"+1",name:"Saint Vincent and the Grenadines",flag:"🇻🇨"},{code:"+685",name:"Samoa",flag:"🇼🇸"},{code:"+378",name:"San Marino",flag:"🇸🇲"},{code:"+966",name:"Saudi Arabia",flag:"🇸🇦"},{code:"+221",name:"Senegal",flag:"🇸🇳"},{code:"+381",name:"Serbia",flag:"🇷🇸"},{code:"+248",name:"Seychelles",flag:"🇸🇨"},{code:"+232",name:"Sierra Leone",flag:"🇸🇱"},{code:"+65",name:"Singapore",flag:"🇸🇬"},{code:"+421",name:"Slovakia",flag:"🇸🇰"},{code:"+386",name:"Slovenia",flag:"🇸🇮"},{code:"+677",name:"Solomon Islands",flag:"🇸🇧"},{code:"+252",name:"Somalia",flag:"🇸🇴"},{code:"+27",name:"South Africa",flag:"🇿🇦"},{code:"+82",name:"South Korea",flag:"🇰🇷"},{code:"+211",name:"South Sudan",flag:"🇸🇸"},{code:"+34",name:"Spain",flag:"🇪🇸"},{code:"+94",name:"Sri Lanka",flag:"🇱🇰"},{code:"+249",name:"Sudan",flag:"🇸🇩"},{code:"+597",name:"Suriname",flag:"🇸🇷"},{code:"+268",name:"Swaziland",flag:"🇸🇿"},{code:"+46",name:"Sweden",flag:"🇸🇪"},{code:"+41",name:"Switzerland",flag:"🇨🇭"},{code:"+963",name:"Syria",flag:"🇸🇾"},{code:"+886",name:"Taiwan",flag:"🇹🇼"},{code:"+992",name:"Tajikistan",flag:"🇹🇯"},{code:"+255",name:"Tanzania",flag:"🇹🇿"},{code:"+66",name:"Thailand",flag:"🇹🇭"},{code:"+228",name:"Togo",flag:"🇹🇬"},{code:"+676",name:"Tonga",flag:"🇹🇴"},{code:"+1",name:"Trinidad and Tobago",flag:"🇹🇹"},{code:"+216",name:"Tunisia",flag:"🇹🇳"},{code:"+90",name:"Turkey",flag:"🇹🇷"},{code:"+993",name:"Turkmenistan",flag:"🇹🇲"},{code:"+688",name:"Tuvalu",flag:"🇹🇻"},{code:"+256",name:"Uganda",flag:"🇺🇬"},{code:"+380",name:"Ukraine",flag:"🇺🇦"},{code:"+971",name:"United Arab Emirates",flag:"🇦🇪"},{code:"+44",name:"United Kingdom",flag:"🇬🇧"},{code:"+1",name:"United States",flag:"🇺🇸"},{code:"+598",name:"Uruguay",flag:"🇺🇾"},{code:"+998",name:"Uzbekistan",flag:"🇺🇿"},{code:"+678",name:"Vanuatu",flag:"🇻🇺"},{code:"+58",name:"Venezuela",flag:"🇻🇪"},{code:"+84",name:"Vietnam",flag:"🇻🇳"},{code:"+967",name:"Yemen",flag:"🇾🇪"},{code:"+260",name:"Zambia",flag:"🇿🇲"},{code:"+263",name:"Zimbabwe",flag:"🇿🇼"}],sP=b.createContext({theme:"dark",toggleTheme:()=>{}}),hF=({children:s})=>{const[t,r]=b.useState(()=>localStorage.getItem("theme")||"dark"),a=()=>{const i=t==="dark"?"light":"dark";r(i),localStorage.setItem("theme",i)};return b.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(sP.Provider,{value:{theme:t,toggleTheme:a},children:s})},pF=({isOpen:s,message:t,type:r,onClose:a})=>s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:`bg-gray-800/90 backdrop-blur-md p-6 rounded-2xl shadow-2xl max-w-sm w-full border transform transition-all duration-300 ${r==="success"?"border-green-500 scale-100":"border-red-500 scale-100"}`,children:[e.jsxs("div",{className:"flex items-center mb-4",children:[r==="success"?e.jsx($m,{className:"text-green-400 text-2xl mr-2"}):e.jsx(He,{className:"text-red-400 text-2xl mr-2"}),e.jsx("h3",{className:`text-lg font-bold ${r==="success"?"text-green-400":"text-red-400"}`,children:r==="success"?"Éxito":"Error"})]}),e.jsx("p",{className:"text-gray-300 mb-6",children:t}),e.jsx("button",{onClick:a,className:`w-full py-2 rounded-xl font-medium transition-all duration-300 ${r==="success"?"bg-green-600 hover:bg-green-700 text-white":"bg-red-600 hover:bg-red-700 text-white"}`,children:"Cerrar"})]})}):null,fF=()=>{const[s,t]=b.useState(""),[r,a]=b.useState(""),[i,l]=b.useState(""),[o,c]=b.useState(""),[d,x]=b.useState("+51"),[f,j]=b.useState("user"),[w,S]=b.useState(""),[g,V]=b.useState(!1),[E,_]=b.useState({isOpen:!1,message:"",type:"success"}),[M,R]=b.useState(!1),q=Nt(),{theme:G,toggleTheme:Y}=b.useContext(sP),O=async u=>{u.preventDefault(),_({isOpen:!1,message:"",type:"success"}),V(!0);try{if(!s||s.length<3)throw new Error("El nombre de usuario debe tener al menos 3 caracteres.");if(!r||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r))throw new Error("Por favor, ingresa un correo electrónico válido.");if(!i||i.length<6)throw new Error("La contraseña debe tener al menos 6 caracteres.");if(!o||!/^\d{7,15}$/.test(o))throw new Error("Por favor, ingresa un número de teléfono válido (7-15 dígitos).");if(!["user","affiliate","provider"].includes(f))throw new Error("Rol no válido.");await Vr(B(I,"pendingRegistrations",r),{username:s,email:r,password:i,phone:`${d}${o}`,role:f,status:"pending",referrerCode:w||null,createdAt:new Date().toISOString()}),_({isOpen:!0,message:"Tu solicitud de registro ha sido enviada y está pendiente de aprobación. Comunicate con +51 931 757 531",type:"success"}),setTimeout(()=>{q("/login")},2e3)}catch(U){console.error("Error al registrar la solicitud:",U.message),_({isOpen:!0,message:U.message||"Error al enviar la solicitud de registro. Por favor, inténtalo de nuevo.",type:"error"})}finally{V(!1)}};return e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${G==="dark"?"bg-gradient-to-b from-gray-900 via-blue-950 to-gray-900 text-gray-200":"bg-gradient-to-b from-gray-100 via-blue-50 to-gray-100 text-gray-900"} flex flex-col`,children:[e.jsx("header",{className:`sticky top-0 z-50 backdrop-blur-md border-b ${G==="dark"?"border-gray-800/50 bg-gray-900/80":"border-gray-300/50 bg-gray-100/80"}`,children:e.jsxs("div",{className:"container mx-auto px-6 py-4 flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsx("div",{className:"flex items-center justify-center lg:justify-start",children:e.jsxs(y,{to:"/",className:"flex items-center space-x-3",children:[e.jsx(rt.img,{whileHover:{scale:1.1},src:jt,alt:"BlackStreaming",className:"h-12 w-auto transition-transform"}),e.jsx("span",{className:`text-2xl font-bold bg-gradient-to-r ${G==="dark"?"from-cyan-400/50 to-blue-600/50 text-cyan-400":"from-blue-500/50 to-indigo-500/50 text-blue-600"} bg-clip-text`,children:"BlackStreaming"})]})}),e.jsx(rt.div,{animate:{scale:[1,1.02,1]},transition:{duration:2,repeat:1/0,repeatType:"loop"},className:"text-xs font-semibold text-white bg-cyan-500/20 rounded-full px-3 py-1",children:"V 2.0"}),e.jsxs("div",{className:"flex items-center justify-center lg:justify-end space-x-3",children:[e.jsx(rt.button,{whileHover:{rotate:180},whileTap:{scale:.9},onClick:Y,className:`p-2 rounded-full ${G==="dark"?"text-cyan-400 hover:bg-gray-700/50":"text-blue-600 hover:bg-gray-200/50"} transition-all`,"aria-label":"Cambiar tema",children:G==="dark"?e.jsx(fx,{size:22}):e.jsx(hx,{size:22})}),e.jsxs(y,{to:"/login",className:"inline-flex items-center space-x-2 px-4 py-2 rounded-full text-base font-semibold text-white shadow-md transition-all duration-300 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-700 hover:to-blue-700",children:[e.jsx(px,{size:18}),e.jsx("span",{children:"Ingresar"})]}),e.jsxs(y,{to:"/register",className:"inline-flex items-center space-x-2 px-4 py-2 rounded-full text-base font-semibold text-white shadow-md transition-all duration-300 bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600",children:[e.jsx(m4,{size:18}),e.jsx("span",{children:"Registrarse"})]})]})]})}),e.jsx("main",{className:"flex-grow flex items-center justify-center p-6",children:e.jsxs("div",{className:`backdrop-blur-md rounded-2xl shadow-2xl p-12 w-full max-w-lg border-2 ${G==="dark"?"bg-gradient-to-br from-gray-800/60 to-gray-900/60 border-cyan-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-blue-500/20"}`,children:[e.jsx(rt.div,{className:"flex justify-center mb-6",children:e.jsx(rt.img,{whileHover:{scale:1.05},src:jt,alt:"BlackStreaming",className:"h-24 sm:h-32 w-auto transition-transform"})}),e.jsxs("h1",{className:`text-3xl font-bold mb-10 text-center ${G==="dark"?"text-white":"text-gray-900"}`,children:["Black",e.jsx("span",{className:G==="dark"?"text-cyan-400":"text-blue-600",children:"Streaming"})]}),e.jsx("p",{className:`text-sm text-center mb-10 ${G==="dark"?"text-gray-400":"text-gray-600"}`,children:"Regístrate para acceder al sistema."}),e.jsxs("form",{onSubmit:O,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 text-lg ${G==="dark"?"text-gray-100":"text-gray-900"}`,children:"Nombre de Usuario"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ge,{className:`absolute top-3 left-3 ${G==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx("input",{type:"text",value:s,onChange:u=>t(u.target.value),className:`w-full pl-10 pr-4 py-2.5 rounded-xl bg-transparent ${G==="dark"?"text-white":"text-gray-900"} border ${G==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-cyan-400/50 focus:border-cyan-400 shadow-md backdrop-blur-sm transition-all ${G==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,placeholder:"Elige un nombre de usuario",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 text-lg ${G==="dark"?"text-gray-100":"text-gray-900"}`,children:"Correo Electrónico"}),e.jsxs("div",{className:"relative",children:[e.jsx(oF,{className:`absolute top-3 left-3 ${G==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx("input",{type:"email",value:r,onChange:u=>a(u.target.value),className:`w-full pl-10 pr-4 py-2.5 rounded-xl bg-transparent ${G==="dark"?"text-white":"text-gray-900"} border ${G==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-cyan-400/50 focus:border-cyan-400 shadow-md backdrop-blur-sm transition-all ${G==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,placeholder:"Tu correo electrónico",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 text-lg ${G==="dark"?"text-gray-100":"text-gray-900"}`,children:"Número de Teléfono"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("div",{className:"relative flex-shrink-0 w-48",children:[e.jsx("select",{value:d,onChange:u=>x(u.target.value),className:`w-full px-4 py-2.5 rounded-xl ${G==="dark"?"bg-gray-700/50 text-white":"bg-gray-200/50 text-gray-900"} border ${G==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-cyan-400/50 focus:border-cyan-400 transition-all appearance-none`,children:mF.map(u=>e.jsxs("option",{value:u.code,children:[u.flag," ",u.name," (",u.code,")"]},u.code+u.name))}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none",children:e.jsx("svg",{className:`w-4 h-4 ${G==="dark"?"text-gray-400":"text-gray-600"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]}),e.jsxs("div",{className:"relative flex-grow",children:[e.jsx(ZI,{className:`absolute top-3 left-3 ${G==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx("input",{type:"tel",value:o,onChange:u=>c(u.target.value),className:`w-full pl-10 pr-4 py-2.5 rounded-xl bg-transparent ${G==="dark"?"text-white":"text-gray-900"} border ${G==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-cyan-400/50 focus:border-cyan-400 shadow-md backdrop-blur-sm transition-all ${G==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,placeholder:"Tu número de teléfono",required:!0})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 text-lg ${G==="dark"?"text-gray-100":"text-gray-900"}`,children:"Contraseña"}),e.jsxs("div",{className:"relative",children:[e.jsx(JI,{className:`absolute top-3 left-3 ${G==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx("input",{type:M?"text":"password",value:i,onChange:u=>l(u.target.value),className:`w-full pl-10 pr-4 py-2.5 rounded-xl bg-transparent ${G==="dark"?"text-white":"text-gray-900"} border ${G==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-cyan-400/50 focus:border-cyan-400 shadow-md backdrop-blur-sm transition-all ${G==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,placeholder:"Elige una contraseña",required:!0}),e.jsx("button",{type:"button",onClick:()=>R(!M),className:`absolute top-3 right-3 ${G==="dark"?"text-gray-400 hover:text-cyan-400":"text-gray-600 hover:text-blue-600"} transition-colors`,"aria-label":M?"Ocultar contraseña":"Mostrar contraseña",children:M?e.jsx(YI,{size:18}):e.jsx(XI,{size:18})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 text-lg ${G==="dark"?"text-gray-100":"text-gray-900"}`,children:"Rol"}),e.jsxs("div",{className:"relative",children:[e.jsx("select",{value:f,onChange:u=>j(u.target.value),className:`w-full px-4 py-2.5 rounded-xl ${G==="dark"?"bg-gray-700/50":"bg-gray-200/50"} ${G==="dark"?"text-white":"text-gray-900"} border ${G==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-cyan-400/50 focus:border-cyan-400 transition-all appearance-none`,children:e.jsx("option",{value:"user",children:"Usuario"})}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none",children:e.jsx("svg",{className:`w-4 h-4 ${G==="dark"?"text-gray-400":"text-gray-600"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 text-lg ${G==="dark"?"text-gray-100":"text-gray-900"}`,children:"Código de Referido (opcional)"}),e.jsx("input",{type:"text",value:w,onChange:u=>S(u.target.value),className:`w-full pl-4 pr-4 py-2.5 rounded-xl bg-transparent ${G==="dark"?"text-white":"text-gray-900"} border ${G==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-cyan-400/50 focus:border-cyan-400 shadow-md backdrop-blur-sm transition-all ${G==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,placeholder:"Ingresa un código de referido (si tienes)"})]}),e.jsx(rt.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"submit",disabled:g,className:`w-full py-3 rounded-xl font-medium transition-all duration-300 ${g?"bg-gray-600 text-gray-400 cursor-not-allowed":G==="dark"?"bg-gradient-to-r from-cyan-400 to-blue-600 hover:from-cyan-500 hover:to-blue-700 text-white":"bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-600 hover:to-blue-700 text-white"}`,children:g?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 text-white mr-2",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8h-8z"})]}),"Registrando..."]}):"Registrarse"})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs(y,{to:"/login",className:`flex items-center justify-center transition-all text-lg ${G==="dark"?"text-gray-400 hover:text-cyan-400":"text-gray-600 hover:text-blue-600"}`,children:[e.jsx(QI,{className:"mr-1"})," ¿Ya tienes una cuenta? Inicia sesión"]})})]})}),e.jsx("footer",{className:`backdrop-blur-md border-t py-6 ${G==="dark"?"border-gray-800/50":"border-gray-300/50"}`,children:e.jsx("div",{className:"container mx-auto px-6",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4 md:flex-row md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-8 w-auto"}),e.jsx("span",{className:`text-sm font-semibold ${G==="dark"?"text-cyan-400":"text-blue-600"}`,children:"BlackStreaming"})]}),e.jsxs("div",{className:`text-sm text-center ${G==="dark"?"text-gray-400":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Todos los derechos reservados."]}),e.jsx("div",{className:`text-sm text-center ${G==="dark"?"text-gray-400":"text-gray-600"}`,children:"Desarrollado por Saiph"})]})})}),e.jsx(pF,{isOpen:E.isOpen,message:E.message,type:E.type,onClose:()=>_({isOpen:!1,message:"",type:"success"})})]})},gF=()=>e.jsx(hF,{children:e.jsx(fF,{})}),yF=({isOpen:s,message:t,title:r,onClose:a})=>s?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:r}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(pt,{size:20})})]}),e.jsx("p",{className:"text-gray-300 mb-6",children:t}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:a,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})})]})})}):null,bF=({isOpen:s,user:t,onClose:r,onSave:a})=>{const[i,l]=b.useState((t==null?void 0:t.username)||""),[o,c]=b.useState(""),d=x=>{if(x.preventDefault(),c(""),!i.trim()){c("El nombre de usuario no puede estar vacío.");return}a(t.id,i.trim())};return s?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Editar Perfil"}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(pt,{size:20})})]}),e.jsxs("form",{onSubmit:d,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre de usuario"}),e.jsx("input",{type:"text",value:i,onChange:x=>l(x.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",required:!0}),o&&e.jsx("p",{className:"text-red-400 text-sm mt-2",children:o})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 bg-gray-600 text-white rounded-xl hover:bg-gray-700 transition-all duration-300",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Guardar"})]})]})]})})}):null},vF=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState(""),[i,l]=b.useState([]),[o,c]=b.useState({username:"",phone:""}),[d,x]=b.useState(""),[f,j]=b.useState(0),[w,S]=b.useState(null),[g,V]=b.useState("inicio"),[E,_]=b.useState([]),[M,R]=b.useState({}),[q,G]=b.useState([]),[Y,O]=b.useState(!0),[u,U]=b.useState({}),[F,Q]=b.useState(null),[T,W]=b.useState({isOpen:!1,message:"",title:""}),[Ae,Ue]=b.useState({isOpen:!1,user:null}),[_e,be]=b.useState(""),ue=Nt(),me=(A,C)=>{W({isOpen:!0,title:A,message:C})},pe=()=>{W({isOpen:!1,message:"",title:""})},Oe=A=>{Ue({isOpen:!0,user:A})},De=()=>{Ue({isOpen:!1,user:null})},n=async(A,C)=>{try{U(p=>({...p,profile:!0}));const v=B(I,"users",A);await rs(v,{username:C,updatedAt:he()}),c(p=>({...p,username:C})),me("Éxito","Perfil actualizado exitosamente"),De()}catch(v){console.error("Error al actualizar perfil:",v),me("Error",v.message||"Error al actualizar el perfil")}finally{U(v=>({...v,profile:!1}))}};b.useEffect(()=>{(async()=>{try{console.log("Fetching products...");const C=ye(Z(I,"products")),v=await gt(C);console.log("Products fetched:",v.docs.length);const p={};v.forEach(z=>{p[z.id]=z.data()}),R(p)}catch(C){console.error("Error fetching products:",C),Q("Error al cargar productos: "+C.message)}})()},[]),b.useEffect(()=>{const A=Ce(B(I,"notifications","adminMessage"),C=>{if(C.exists()){const v=C.data(),p="user";v.roles&&v.roles.includes(p)?G([{id:C.id,...v}]):G([])}else G([])},C=>{console.error("Error in notifications listener:",C),Q("Error al cargar notificaciones: "+C.message)});return()=>A()},[]);const N=async A=>{try{U(le=>({...le,[`renew_${A.id}`]:!0}));const C=parseFloat(A.renewalPrice)||parseFloat(A.price)||0;if(f<C){me("Error","Saldo insuficiente para renovar el pedido. Por favor, recarga tu saldo.");return}const v=parseInt(A.durationDays)||30,p=Qt.now(),z=p.toDate(),oe=z,se=new Date(oe.getTime()+v*24*60*60*1e3),ie=Qt.fromDate(se),ae=B(I,"sales",A.id);await rs(ae,{startDate:p,endDate:ie,renewedAt:p,status:"completed",updatedAt:he()});const re=B(I,"users",w);await rs(re,{balance:f-C}),j(le=>le-C),_(le=>le.map($=>$.id===A.id?{...$,startDate:oe,endDate:se,renewedAt:z,status:"completed",daysRemaining:v,totalDays:v,timeElapsedPercentage:0}:$)),me("Éxito",`¡Pedido renovado exitosamente! Nueva fecha de vencimiento: ${ne(se)}`)}catch(C){console.error("Error al renovar el pedido:",C),me("Error","Error al renovar el pedido: "+C.message)}finally{U(C=>({...C,[`renew_${A.id}`]:!1}))}},h=async()=>{try{await Bc(We),ue("/")}catch(A){console.error("Error al cerrar sesión:",A),me("Error",A.message||"Error al cerrar sesión")}};b.useEffect(()=>{const A=Dt(We,C=>{C?(S(C.uid),x(C.email||"No especificado"),O(!1)):ue("/login")});return()=>A()},[ue]),b.useEffect(()=>{if(!w)return;const A=B(I,"users",w),C=Ce(A,v=>{if(v.exists()){const p=v.data();c({username:p.username||"Usuario",phone:p.phone||""}),x(p.email||"No especificado"),j(Number(p.balance)||0)}else Q("Usuario no encontrado")},v=>{console.error("Error in user data listener:",v),Q("Error al cargar datos del usuario: "+v.message)});return()=>C()},[w]),b.useEffect(()=>{if(!w)return;const A=ye(Z(I,"sales"),je("customerId","==",w)),C=Ce(A,p=>{if(p.empty){_([]),O(!1);return}const z=p.docs.map(oe=>{var st,Tt,St,ts,_s,wt,yt,ss,us,js,tr;const se=oe.data(),ae=((Tt=(st=se.saleDate)==null?void 0:st.toDate)==null?void 0:Tt.call(st))||((ts=(St=se.createdAt)==null?void 0:St.toDate)==null?void 0:ts.call(St))||new Date;let re=(wt=(_s=se.startDate)==null?void 0:_s.toDate)==null?void 0:wt.call(_s),le=re||ae,$=!1;re||($=!0);const J=se.durationDays||30;let xe;se.endDate?xe=se.endDate.toDate?se.endDate.toDate():new Date(se.endDate):(xe=new Date(le.getTime()+J*24*60*60*1e3),$=!0),$&&rs(B(I,"sales",oe.id),{startDate:re||Qt.fromDate(ae),endDate:Qt.fromDate(xe),durationDays:J}).catch(sr=>{console.error("Error al actualizar startDate/endDate en Firestore:",sr)});const ke=new Date,Te=xe.getTime()-le.getTime(),fe=ke.getTime()-le.getTime(),Me=xe.getTime()-ke.getTime(),Ne=Math.ceil(Te/(1e3*60*60*24)),Le=Math.max(0,Math.ceil(Me/(1e3*60*60*24))),X=Math.ceil(fe/(1e3*60*60*24)),ce=Ne>0?X/Ne*100:100,ve=((yt=M[se.providerId])==null?void 0:yt.terms)||"No se especificaron términos y condiciones.";return{id:oe.id,productName:se.productName||"Producto sin nombre",category:se.type||"netflix",price:parseFloat(se.price)||0,renewalPrice:parseFloat(se.renewalPrice)||0,provider:se.provider||"No especificado",providerId:se.providerId||"",providerPhone:se.providerPhone||se.providerWhatsapp||"51999999999",status:se.status||"completed",saleDate:ae,startDate:le,endDate:xe,durationDays:J,daysRemaining:Le,totalDays:Ne,timeElapsedPercentage:ce,account:{email:((ss=se.accountDetails)==null?void 0:ss.email)||"No especificado",password:((us=se.accountDetails)==null?void 0:us.password)||"No especificado",profile:((js=se.accountDetails)==null?void 0:js.profile)||"No especificado",pin:((tr=se.accountDetails)==null?void 0:tr.pin)||"No especificado"},client:{customerName:se.customerName||"Cliente desconocido",email:se.customerEmail||"No especificado",phone:se.phoneNumber||"No especificado"},paymentMethod:"BlackStreaming",orderId:`BS-${oe.id.slice(0,8).toUpperCase()}`,termsAndConditions:ve,renewable:se.renewable!==void 0?se.renewable:!0}});_(z),O(!1)},p=>{console.error("Error al obtener pedidos:",p),Q("Error al cargar pedidos: "+p.message),O(!1)}),v=setInterval(()=>{_(p=>p.map(z=>{const oe=new Date,se=new Date(z.endDate).getTime()-new Date(z.startDate).getTime(),ie=oe.getTime()-new Date(z.startDate).getTime(),ae=new Date(z.endDate).getTime()-oe.getTime(),re=Math.ceil(se/(1e3*60*60*24)),le=Math.max(0,Math.ceil(ae/(1e3*60*60*24))),$=Math.ceil(ie/(1e3*60*60*24)),J=re>0?$/re*100:100;return{...z,daysRemaining:le,totalDays:re,timeElapsedPercentage:J}}))},6e4);return()=>{C(),clearInterval(v)}},[w,M]),b.useEffect(()=>{if(!w)return;const A=ye(Z(I,"pendingTopUps"),je("userId","==",w)),C=Ce(A,v=>{const p=v.docs.map(z=>{var oe,se;return{id:z.id,...z.data(),date:((se=(oe=z.data().requestedAt)==null?void 0:oe.toDate)==null?void 0:se.call(oe))||new Date,amount:parseFloat(z.data().amount)||0}});l(p)},v=>{console.error("Error al obtener recargas:",v),Q("Error al cargar recargas: "+v.message)});return()=>C()},[w]);const D=async()=>{try{if(U(C=>({...C,topUp:!0})),!r||isNaN(r)){me("Error","Ingrese un monto válido");return}const A=parseFloat(r);if(A<10){me("Error","El monto mínimo de recarga es S/ 10.00");return}await So(Z(I,"pendingTopUps"),{userId:w,username:o.username,amount:A,status:"pendiente",requestedAt:he()}),a(""),me("Éxito","Solicitud de recarga enviada correctamente")}catch(A){console.error("Error al solicitar recarga:",A),me("Error",A.message||"Error al enviar solicitud de recarga")}finally{U(A=>({...A,topUp:!1}))}},H=async A=>{A.preventDefault();try{U(se=>({...se,password:!0}));const C=A.target.password.value,v=A.target.phone.value,p=We.currentUser,z=B(I,"users",w),oe={};if(C){if(C.length<6){me("Error","La contraseña debe tener al menos 6 caracteres");return}await Jg(p,C),oe.updatedAt=he()}v&&(oe.phone=v,oe.updatedAt=he()),Object.keys(oe).length>0&&await rs(z,oe),c(se=>({...se,phone:v||se.phone})),me("Éxito","Cambios guardados correctamente"),A.target.reset()}catch(C){console.error("Error al actualizar los datos:",C),me("Error",C.message||"Error al guardar los cambios")}finally{U(C=>({...C,password:!1}))}},ne=A=>{if(!A)return"No especificada";try{const C=A instanceof Date?A:new Date(A);return isNaN(C.getTime())?"Fecha inválida":C.toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Fecha inválida"}},k=()=>{if(Y)return e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-cyan-400"})});if(F)return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(He,{className:"mx-auto text-4xl text-red-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-4",children:F}),e.jsx("button",{onClick:()=>Q(null),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})]});switch(g){case"inicio":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-6",children:["Bienvenido, ",e.jsx("span",{className:"text-cyan-400",children:o.username})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Información de cuenta"}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-cyan-400"}),e.jsx("span",{children:o.username})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx(Zr,{className:"mr-2 text-cyan-400"}),e.jsx("span",{children:d})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx(ZI,{className:"mr-2 text-cyan-400"}),e.jsx("span",{children:o.phone||"No especificado"})]})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Saldo disponible"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",f.toFixed(2)]}),e.jsx("button",{onClick:()=>V("recargar"),className:"mt-2 px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Recargar"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Pedidos activos"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:E.filter(A=>new Date(A.endDate)>new Date&&A.status==="completed").length}),e.jsx("button",{onClick:()=>V("pedidos"),className:"mt-2 px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Ver pedidos"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Pedidos recientes"}),E.length>0?E.slice(0,3).map(A=>{const C=new Date(A.endDate)>new Date&&A.status==="completed",v=A.status==="pending";return e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"font-medium text-white",children:A.productName}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${A.status==="pending"?"bg-yellow-900/80 text-yellow-400":C?"bg-green-900/80 text-green-400":"bg-red-900/80 text-red-400"}`,children:v?"A pedido":C?"Activo":"Expirado"})]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Vence: ",ne(A.endDate)]})]},A.id)}):e.jsx("p",{className:"text-gray-400 py-2",children:"No tienes pedidos recientes"}),E.length>3&&e.jsx("button",{onClick:()=>V("pedidos"),className:"w-full mt-3 text-center text-cyan-400 hover:underline text-sm",children:"Ver todos los pedidos"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Notificaciones"}),q.length>0?q.map(A=>{var C,v;return e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsx("p",{className:"text-gray-300",children:A.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:ne(((v=(C=A.updatedAt)==null?void 0:C.toDate)==null?void 0:v.call(C))||new Date)})]},A.id)}):e.jsx("p",{className:"text-gray-400 py-2",children:"No hay notificaciones"})]})]})]});case"notificaciones":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Notificaciones"}),q.length>0?e.jsx("div",{className:"space-y-4",children:q.map(A=>{var C,v;return e.jsxs("div",{className:"border border-gray-600/50 rounded-2xl p-4 hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("p",{className:"text-gray-300",children:A.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:ne(((v=(C=A.updatedAt)==null?void 0:C.toDate)==null?void 0:v.call(C))||new Date)})]},A.id)})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Go,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay notificaciones"}),e.jsx("p",{className:"text-gray-400",children:"No tienes mensajes nuevos"})]})]});case"recargar":return e.jsxs("div",{className:"space-y-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Recargar saldo"}),e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Monto a recargar (S/)"}),e.jsx("input",{type:"number",value:r,onChange:A=>a(A.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all duration-300 placeholder-gray-500",placeholder:"Mínimo S/ 10.00",min:"10",step:"0.01"})]}),e.jsx("button",{onClick:D,disabled:u.topUp||!r||parseFloat(r)<10,className:`w-full py-3 px-4 rounded-xl font-medium transition-all duration-300 ${r&&parseFloat(r)>=10&&!u.topUp?"bg-cyan-500 hover:bg-cyan-600 text-white":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:u.topUp?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Solicitar recarga"})]}),e.jsxs("div",{className:"mt-6 bg-gray-700/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50 max-w-md mx-auto",children:[e.jsxs("h4",{className:"text-lg font-semibold text-cyan-400 mb-3 flex items-center",children:[e.jsx(Es,{className:"mr-2"})," ¿Cómo realizar tu recarga?"]}),e.jsxs("p",{className:"text-gray-300 mb-2",children:["Realiza tu pago mediante ",e.jsx("span",{className:"font-semibold text-white",children:"Yape"})," al número:"]}),e.jsx("p",{className:"text-xl font-bold text-white mb-2",children:"📱 940505969"}),e.jsx("p",{className:"text-gray-300 mb-3",children:"Una vez realizado el pago, por favor contáctanos vía WhatsApp al mismo número para confirmar tu recarga."}),e.jsxs("a",{href:`https://wa.me/51940505969?text=${encodeURIComponent("Hola 😊, he realizado una recarga a través de Yape. Por favor, confirma mi pago.")}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-xl transition-all duration-300",children:[e.jsx(Zr,{className:"mr-2"})," Confirmar por WhatsApp"]})]})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Historial de recargas"}),i.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:i.map(A=>e.jsxs("tr",{className:"hover:bg-gray-600/50 transition-all duration-300",children:[e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:["S/ ",A.amount.toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${A.status==="aprobado"?"bg-green-900/80 text-green-400":A.status==="pendiente"?"bg-yellow-900/80 text-yellow-400":"bg-red-900/80 text-red-400"}`,children:A.status})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-400",children:ne(A.date)})]},A.id))})]})}):e.jsx("p",{className:"text-gray-400 py-8",children:"No hay recargas registradas"})]})]});case"pedidos":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white",children:"Mis pedidos"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar pedidos...",className:"px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all duration-300 text-sm placeholder-gray-500",value:_e,onChange:A=>be(A.target.value)}),e.jsx(Ze,{className:"absolute right-3 top-2.5 text-gray-400"})]})]}),E.length>0?E.filter(A=>(A.productName||"").toLowerCase().includes(_e.toLowerCase())||(A.orderId||"").toLowerCase().includes(_e.toLowerCase())).map(A=>{var J,xe,ke,Te,fe,Me,Ne,Le,X,ce,ve,st;const C=parseFloat(A.price)||0,v=parseFloat(A.renewalPrice)||0,p=new Date(A.endDate)>new Date&&A.status==="completed",z=A.status==="pending",oe=A.daysRemaining||0,se=A.timeElapsedPercentage||0;let ie="bg-green-400";se>70&&se<=90?ie="bg-yellow-400":se>90&&(ie="bg-red-400");const ae=z?e.jsx(Ot,{className:"text-yellow-400"}):p?e.jsx($m,{className:"text-green-400"}):e.jsx(He,{className:"text-red-400"}),re=encodeURIComponent(`*Consulta sobre Pedido - ${A.productName||"Sin nombre"}*

*N° Pedido:* ${A.orderId||"No especificado"}
*Producto:* ${A.productName||"No especificado"}
*Precio:* S/ ${C.toFixed(2)}
`+(A.renewalPrice?`*Precio de Renovación:* S/ ${v.toFixed(2)}
`:"")+`*Estado:* ${z?"A pedido":p?"Activo":"Expirado"}
*Fecha de Inicio:* ${ne(A.startDate)}
*Fecha de Vencimiento:* ${ne(A.endDate)}
`+(z?`Hola 😊, he comprado un producto a pedido (${A.productName}). ¿En cuántos días estará listo? Por favor, indíqueme los detalles para coordinar.`:"Por favor indíqueme cómo puedo resolver mi consulta sobre este pedido.")),le=encodeURIComponent(`😊 Estimado/a ${((J=A.client)==null?void 0:J.customerName)||"Cliente"} 😊

Le enviamos la información de su suscripción a nuestro servicio de streaming:
📌 Tipo: ${A.productName||"Sin nombre"}.
🔢 Código: ${A.orderId||"No especificado"}
`+(z?"":`📧 Correo: ${((xe=A.account)==null?void 0:xe.email)||"No especificado"}
🔐 Contraseña: ${((ke=A.account)==null?void 0:ke.password)||"No especificado"}
👤 Perfil: ${((Te=A.account)==null?void 0:Te.profile)||"No especificado"}
📌 PIN: ${((fe=A.account)==null?void 0:fe.pin)||"No especificado"}
`)+`🌐 URL: Sin URL
📅 Fecha de creación: ${ne(A.startDate)}
📅 Fecha de vencimiento: ${ne(A.endDate)}
🏁 Días contratados: ${A.durationDays||30} días.

`+(z?`*Nota:* Este pedido está "A pedido". El proveedor se contactará contigo para coordinar los detalles.

`:"")+`*Términos y Condiciones:*
${A.termsAndConditions||"No se especificaron términos y condiciones."}

Muchas gracias por su preferencia.
Atentamente, BLACKSTREAMING`),$=A.providerPhone?A.providerPhone.replace(/^\+51/,"").replace(/\D/g,""):"51999999999";return e.jsxs("div",{className:"border border-gray-600/50 rounded-2xl overflow-hidden hover:shadow-2xl transition-all duration-300 mb-6",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm px-4 py-3 border-b border-gray-600/50 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[ae,e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white",children:A.productName||"Producto sin nombre"}),A.orderId&&e.jsxs("p",{className:"text-xs text-gray-400",children:["N° Pedido: ",A.orderId]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-white",children:["S/ ",C.toFixed(2)]}),A.renewalPrice&&e.jsxs("p",{className:"text-xs font-medium text-gray-400",children:["Renovación: S/ ",v.toFixed(2)]}),e.jsx("p",{className:`text-xs font-medium ${z?"text-yellow-400":ie.replace("bg-","text-")}`,children:z?"Pendiente de activación":`${oe} día${oe===1?"":"s"} restante${oe===1?"":"s"}`})]})]}),e.jsxs("div",{className:"p-4 bg-gray-700/50 backdrop-blur-sm",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"w-full bg-gray-600/50 rounded-full h-2.5",children:e.jsx("div",{className:`h-2.5 rounded-full ${ie}`,style:{width:`${Math.min(se,100)}%`}})}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1 text-right",children:[se.toFixed(0),"% completado"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-4",children:[e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsxs("h5",{className:"text-sm font-medium text-cyan-400 mb-3 flex items-center",children:[e.jsx(Ge,{className:"mr-2"})," Detalles de la Cuenta"]}),e.jsx("div",{className:"space-y-2 text-gray-300",children:z?e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Usuario:"}),e.jsx("span",{className:"block text-white",children:"Por completar"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Contraseña:"}),e.jsx("span",{className:"block text-white",children:"Por completar"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Perfil:"}),e.jsx("span",{className:"block text-white",children:"Por completar"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"PIN:"}),e.jsx("span",{className:"block text-white",children:"Por completar"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Email:"}),e.jsx("span",{className:"block text-white break-all",children:((Me=A.account)==null?void 0:Me.email)||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Contraseña:"}),e.jsx("span",{className:"block text-white break-all",children:((Ne=A.account)==null?void 0:Ne.password)||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Perfil:"}),e.jsx("span",{className:"block text-white",children:((Le=A.account)==null?void 0:Le.profile)||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"PIN:"}),e.jsx("span",{className:"block text-white",children:((X=A.account)==null?void 0:X.pin)||"No especificado"})]})]})})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsxs("h5",{className:"text-sm font-medium text-cyan-400 mb-3 flex items-center",children:[e.jsx(Pe,{className:"mr-2"})," Información del Pedido"]}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Proveedor:"}),e.jsx("span",{className:"block text-white",children:A.provider||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Teléfono del Proveedor:"}),e.jsx("span",{className:"block text-white",children:A.providerPhone||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Estado:"}),e.jsx("span",{className:`block px-2 py-1 text-xs rounded-full ${z?"bg-yellow-900/80 text-yellow-400":p?"bg-green-900/80 text-green-400":"bg-red-900/80 text-red-400"}`,children:z?"A pedido":p?"Activo":"Expirado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Método de Pago:"}),e.jsx("span",{className:"block text-white",children:"BlackStreaming"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Fecha de inicio:"}),e.jsx("span",{className:"block text-white",children:ne(A.startDate)})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Fecha de vencimiento:"}),e.jsx("span",{className:"block text-white",children:ne(A.endDate)})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Días restantes:"}),e.jsx("span",{className:`block ${ie.replace("bg-","text-")}`,children:oe})]})]})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsxs("h5",{className:"text-sm font-medium text-cyan-400 mb-3 flex items-center",children:[e.jsx(Ge,{className:"mr-2"})," Información del Cliente"]}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Nombre:"}),e.jsx("span",{className:"block text-white",children:((ce=A.client)==null?void 0:ce.customerName)||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Teléfono:"}),e.jsx("span",{className:"block text-white",children:((ve=A.client)==null?void 0:ve.phone)||"No especificado"})]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("a",{href:`https://wa.me/51${$}?text=${re}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300",children:[e.jsx(Zr,{size:18})," Contactar Proveedor"]}),A.renewalPrice&&A.renewable&&e.jsx("button",{onClick:()=>N(A),disabled:u[`renew_${A.id}`],className:`flex-1 py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300 ${u[`renew_${A.id}`]?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-cyan-500 hover:bg-cyan-600 text-white"}`,children:u[`renew_${A.id}`]?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):e.jsxs(e.Fragment,{children:[e.jsx(eP,{size:18})," Renovar Pedido (S/ ",v.toFixed(2),")"]})}),((st=A.client)==null?void 0:st.phone)&&e.jsxs("a",{href:`https://wa.me/${A.client.phone.replace(/^\+/,"")}?text=${le}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300",children:[e.jsx(Zr,{size:18})," Contactar Cliente"]})]})]})]},A.id)}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Xe,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No tienes pedidos registrados"}),e.jsx("p",{className:"text-gray-400",children:"Realiza tu primer pedido en nuestra tienda"})]})]});case"configuracion":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Configuración de cuenta"}),e.jsxs("form",{onSubmit:H,className:"space-y-4",onChange:()=>Q(""),children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre de usuario"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"text",value:o.username,disabled:!0,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-gray-400 border border-gray-600/50 cursor-not-allowed"}),e.jsx("button",{type:"button",onClick:()=>Oe({id:w,username:o.username}),className:"p-2 bg-blue-600 hover:bg-blue-700 text-white rounded-xl transition-all duration-300",title:"Editar Nombre",children:e.jsx(Oy,{size:16})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Correo electrónico"}),e.jsx("input",{type:"email",value:d,disabled:!0,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-gray-400 border border-gray-600/50 cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Teléfono"}),e.jsx("input",{type:"tel",name:"phone",defaultValue:o.phone||"",placeholder:"Ingresa tu número de teléfono",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nueva contraseña (opcional)"}),e.jsx("input",{type:"password",name:"password",placeholder:"Nueva contraseña",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all"})]}),e.jsx("button",{type:"submit",disabled:u.password,className:"w-full py-3 px-4 bg-cyan-500 hover:bg-cyan-600 text-white rounded-xl font-medium mt-4 transition-all duration-300 disabled:bg-gray-600 disabled:text-gray-400 disabled:cursor-not-allowed",children:u.password?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Guardar cambios"})]}),e.jsx("div",{className:"mt-8 border-t border-gray-600/50 pt-6",children:e.jsxs("button",{onClick:h,className:"flex items-center justify-center gap-2 w-full py-3 px-4 bg-red-900/80 hover:bg-red-800 text-white rounded-xl font-medium transition-all duration-300",children:[e.jsx(It,{})," Cerrar sesión"]})})]});default:return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(He,{className:"mx-auto text-4xl text-yellow-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Sección no encontrada"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"La sección que estás buscando no existe o no está disponible."}),e.jsx("button",{onClick:()=>V("inicio"),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Volver al inicio"})]})}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200",children:[e.jsx("div",{className:"md:hidden fixed top-4 left-4 z-50",children:e.jsx("button",{onClick:()=>t(!s),className:"p-2 rounded-full bg-gray-800/50 backdrop-blur-sm hover:bg-gray-700/50 transition-all duration-300 border border-gray-700/50",children:e.jsx(Vt,{className:"text-xl"})})}),e.jsx("aside",{className:`fixed inset-y-0 left-0 transform ${s?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 bg-gray-900/90 backdrop-blur-md border-r border-gray-800/50 overflow-y-auto`,children:e.jsxs("div",{className:"p-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-cyan-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-1 rounded-full hover:bg-gray-700/50 transition-all duration-300",children:e.jsx(pt,{className:"text-lg"})})]}),e.jsxs("div",{className:"flex items-center space-x-3 mb-8 p-3 bg-gray-800/50 backdrop-blur-sm rounded-2xl border border-gray-700/50",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-cyan-500 flex items-center justify-center text-white font-bold",children:o.username.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:o.username}),e.jsx("p",{className:"text-xs text-gray-400",children:"Usuario"})]})]}),e.jsx("nav",{className:"flex-1 space-y-2",children:[{id:"inicio",label:"Inicio",icon:Wm},{id:"notificaciones",label:"Notificaciones",icon:Go},{id:"recargar",label:"Recargar saldo",icon:Es},{id:"pedidos",label:"Mis pedidos",icon:Xe},{id:"configuracion",label:"Configuración",icon:qm}].map(A=>e.jsxs("button",{onClick:()=>{V(A.id),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${g===A.id?"bg-cyan-500/20 text-cyan-400 border border-cyan-500/50":"text-gray-300 hover:bg-gray-800/50 hover:text-cyan-400"}`,children:[e.jsx(A.icon,{className:"text-lg"}),e.jsx("span",{children:A.label})]},A.id))}),e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:h,className:"w-full flex items-center space-x-3 px-4 py-3 text-red-400 hover:bg-red-900/20 rounded-xl transition-all duration-300 border border-red-900/50",children:[e.jsx(It,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 p-4 sm:p-6 min-h-screen",children:k()}),e.jsx(yF,{isOpen:T.isOpen,title:T.title,message:T.message,onClose:pe}),e.jsx(bF,{isOpen:Ae.isOpen,user:Ae.user,onClose:De,onSave:n}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-30 md:hidden",onClick:()=>t(!1)})]})},jF=({isOpen:s,message:t,title:r,onClose:a})=>s?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:r}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(pt,{size:20})})]}),e.jsx("p",{className:"text-gray-300 mb-6",children:t}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:a,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})})]})})}):null,NF=({isOpen:s,user:t,onClose:r,onSave:a})=>{const[i,l]=b.useState((t==null?void 0:t.username)||""),[o,c]=b.useState(""),d=x=>{if(x.preventDefault(),c(""),!i.trim()){c("El nombre de usuario no puede estar vacío.");return}a(t.id,i.trim())};return s?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Editar Perfil"}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(pt,{size:20})})]}),e.jsxs("form",{onSubmit:d,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre de usuario"}),e.jsx("input",{type:"text",value:i,onChange:x=>l(x.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",required:!0}),o&&e.jsx("p",{className:"text-red-400 text-sm mt-2",children:o})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 bg-gray-600 text-white rounded-xl hover:bg-gray-700 transition-all duration-300",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Guardar"})]})]})]})})}):null},wF=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState("inicio"),[i,l]=b.useState(""),[o,c]=b.useState(""),[d,x]=b.useState(""),[f,j]=b.useState([]),[w,S]=b.useState(0),[g,V]=b.useState(0),[E,_]=b.useState(null),[M,R]=b.useState(!0),[q,G]=b.useState({}),[Y,O]=b.useState(null),[u,U]=b.useState([]),[F,Q]=b.useState(!1),[T,W]=b.useState(""),[Ae,Ue]=b.useState(""),[_e,be]=b.useState([]),[ue,me]=b.useState([]),[pe,Oe]=b.useState({}),[De,n]=b.useState([]),[N,h]=b.useState({isOpen:!1,message:"",title:""}),[D,H]=b.useState({isOpen:!1,user:null}),ne=Nt(),k=($,J)=>{h({isOpen:!0,title:$,message:J})},A=()=>{h({isOpen:!1,message:"",title:""})},C=$=>{H({isOpen:!0,user:$})},v=()=>{H({isOpen:!1,user:null})},p=async($,J)=>{try{G(Te=>({...Te,profile:!0}));const xe=B(I,"users",$),ke=B(I,"affiliates",$);await rs(xe,{username:J,updatedAt:he()}),await rs(ke,{username:J,updatedAt:he()}),l(J),k("Éxito","Perfil actualizado exitosamente"),v()}catch(xe){console.error("Error al actualizar perfil:",xe),k("Error",xe.message||"Error al actualizar el perfil")}finally{G(xe=>({...xe,profile:!1}))}};b.useEffect(()=>{const $=Dt(We,J=>{J?(_(J.uid),c(J.email||"No especificado"),R(!1)):ne("/login")});return()=>$()},[ne]),b.useEffect(()=>{(async()=>{try{const J=ye(Z(I,"products")),xe=await gt(J),ke={};xe.forEach(Te=>{ke[Te.id]=Te.data()}),Oe(ke)}catch(J){console.error("Error fetching products:",J),O("Error al cargar productos")}})()},[]),b.useEffect(()=>{(()=>Ce(B(I,"notifications","adminMessage"),xe=>{if(xe.exists()){const ke=xe.data(),Te="affiliate";ke.roles&&ke.roles.includes(Te)?n([{id:xe.id,...ke}]):n([])}else n([])}))()},[]),b.useEffect(()=>{(async()=>{if(E)try{const J=B(I,"users",E),xe=await Ye(J);if(xe.exists()){const fe=xe.data();l(fe.username||"Usuario"),V(Number(fe.balance)||0)}const ke=B(I,"affiliates",E),Te=await Ye(ke);if(Te.exists()){const fe=Te.data();x(fe.affiliateCode||""),S(Number(fe.earnings)||0)}else{const fe=`AFF-${Math.random().toString(36).substring(2,8).toUpperCase()}`;await Vr(ke,{username:i||"Nuevo Afiliado",email:o,affiliateCode:fe,earnings:0,createdAt:he(),updatedAt:he()}),x(fe)}}catch(J){console.error("Error al manejar datos:",J),O("Error al cargar datos")}finally{R(!1)}})()},[E,o,i]),b.useEffect(()=>{if(!E)return;(()=>{const J=ye(Z(I,"pendingTopUps"),je("userId","==",E));return Ce(J,ke=>{const Te=ke.docs.map(fe=>{var Me,Ne;return{id:fe.id,...fe.data(),date:((Ne=(Me=fe.data().requestedAt)==null?void 0:Me.toDate)==null?void 0:Ne.call(Me))||new Date,amount:parseFloat(fe.data().amount)||0}});be(Te)},ke=>{console.error("Error al obtener recargas:",ke),O("Error al cargar recargas")})})()},[E]),b.useEffect(()=>{if(!d)return;const $=ye(Z(I,"users"),je("referrerCode","==",d),N0("createdAt","desc"),zt(5)),J=Ce($,xe=>{const ke=xe.docs.map(Te=>{var fe;return{id:Te.id,...Te.data(),joinDate:((fe=Te.data().createdAt)==null?void 0:fe.toDate())||new Date}});U(ke)});return()=>J()},[d]),b.useEffect(()=>{if(!d)return;const $=ye(Z(I,"users"),je("referrerCode","==",d)),J=Ce($,xe=>{const ke=xe.docs.map(Te=>{var fe;return{id:Te.id,...Te.data(),joinDate:((fe=Te.data().createdAt)==null?void 0:fe.toDate())||new Date}});j(ke)});return()=>J()},[d]),b.useEffect(()=>{if(!E)return;(()=>{const J=ye(Z(I,"sales"),je("customerId","==",E)),xe=Ce(J,Te=>{if(Te.empty){me([]),R(!1);return}const fe=Te.docs.map(Me=>{var $s,on,Ds,Da,vr,Hr,ee,we,Ve,Ke,bt;const Ne=Me.data(),X=((on=($s=Ne.saleDate)==null?void 0:$s.toDate)==null?void 0:on.call($s))||((Da=(Ds=Ne.createdAt)==null?void 0:Ds.toDate)==null?void 0:Da.call(Ds))||new Date;let ce=(Hr=(vr=Ne.startDate)==null?void 0:vr.toDate)==null?void 0:Hr.call(vr),ve=ce||X,st=!1;ce||(st=!0);const Tt=Ne.durationDays||30;let St;Ne.endDate?St=new Date(Ne.endDate):(St=new Date(ve.getTime()+Tt*24*60*60*1e3),st=!0),st&&rs(B(I,"sales",Me.id),{startDate:ce||Qt.fromDate(X),endDate:St.toISOString(),durationDays:Tt}).catch(_t=>{console.error("Error al actualizar startDate/endDate en Firestore:",_t)});const ts=new Date,_s=St.getTime()-ve.getTime(),wt=ts.getTime()-ve.getTime(),yt=St.getTime()-ts.getTime(),ss=Math.ceil(_s/(1e3*60*60*24)),us=Math.max(0,Math.ceil(yt/(1e3*60*60*24))),js=Math.ceil(wt/(1e3*60*60*24)),tr=ss>0?js/ss*100:100,sr=((ee=pe[Ne.providerId])==null?void 0:ee.terms)||"No se especificaron términos y condiciones.";return{id:Me.id,productName:Ne.productName||"Producto sin nombre",category:Ne.type||"netflix",price:parseFloat(Ne.price)||0,provider:Ne.provider||"No especificado",providerId:Ne.providerId||"",providerPhone:Ne.providerPhone||Ne.providerWhatsapp||"51999999999",status:Ne.status||"completed",saleDate:X,startDate:ve,endDate:St,durationDays:Tt,daysRemaining:us,totalDays:ss,timeElapsedPercentage:tr,account:{email:((we=Ne.accountDetails)==null?void 0:we.email)||"No especificado",password:((Ve=Ne.accountDetails)==null?void 0:Ve.password)||"No especificado",profile:((Ke=Ne.accountDetails)==null?void 0:Ke.profile)||"No especificado",pin:((bt=Ne.accountDetails)==null?void 0:bt.pin)||"No especificado"},client:{name:Ne.customerName||"Cliente desconocido",email:Ne.customerEmail||"No especificado",phone:Ne.phoneNumber||"No especificado"},paymentMethod:"BlackStreaming",orderId:`BS-${Me.id.slice(0,8).toUpperCase()}`,termsAndConditions:sr,renewable:Ne.renewable!==void 0?Ne.renewable:!0}});me(fe),R(!1)},Te=>{console.error("Error al obtener pedidos:",Te),O("Error al cargar pedidos: "+Te.message),R(!1)}),ke=setInterval(()=>{me(Te=>Te.map(fe=>{const Me=new Date,Ne=new Date(fe.endDate).getTime()-new Date(fe.startDate).getTime(),Le=Me.getTime()-new Date(fe.startDate).getTime(),X=new Date(fe.endDate).getTime()-Me.getTime(),ce=Math.ceil(Ne/(1e3*60*60*24)),ve=Math.max(0,Math.ceil(X/(1e3*60*60*24))),st=Math.ceil(Le/(1e3*60*60*24)),Tt=ce>0?st/ce*100:100;return{...fe,daysRemaining:ve,totalDays:ce,timeElapsedPercentage:Tt}}))},6e4);return()=>{xe(),clearInterval(ke)}})()},[E,pe]);const z=async()=>{try{if(G(J=>({...J,topUp:!0})),!Ae||isNaN(Ae)){k("Error","Ingrese un monto válido");return}const $=parseFloat(Ae);if($<10){k("Error","El monto mínimo de recarga es S/ 10.00");return}await So(Z(I,"pendingTopUps"),{userId:E,username:i,amount:$,status:"pendiente",requestedAt:he(),processed:!1}),Ue(""),k("Éxito","Solicitud de recarga enviada correctamente")}catch($){console.error("Error al solicitar recarga:",$),k("Error",$.message||"Error al enviar solicitud de recarga")}finally{G($=>({...$,topUp:!1}))}},oe=async $=>{var J,xe,ke,Te,fe,Me,Ne;try{G(wt=>({...wt,[`renew_${$.id}`]:!0}));const Le=parseFloat($.price)||0;if(g<Le){k("Error","Saldo insuficiente para renovar el pedido. Por favor, recarga tu saldo.");return}const X=parseInt($.durationDays)||30,ce=Qt.now(),ve=ce.toDate(),st=new Date(ve.getTime()+X*24*60*60*1e3),Tt=st.toISOString(),St={customerId:E,customerName:((J=$.client)==null?void 0:J.name)||"Cliente desconocido",customerEmail:((xe=$.client)==null?void 0:xe.email)||o,phoneNumber:((ke=$.client)==null?void 0:ke.phone)||"No especificado",productName:$.productName||"Producto sin nombre",type:$.category||"netflix",price:Le,accountDetails:{email:((Te=$.account)==null?void 0:Te.email)||"No especificado",password:((fe=$.account)==null?void 0:fe.password)||"No especificado",profile:((Me=$.account)==null?void 0:Me.profile)||"No especificado",pin:((Ne=$.account)==null?void 0:Ne.pin)||"No especificado"},provider:$.provider||"Proveedor desconocido",providerId:$.providerId||"",providerPhone:$.providerPhone||$.providerWhatsapp||"51999999999",status:"completed",createdAt:ce,saleDate:ce,startDate:ce,endDate:Tt,durationDays:X,renewedAt:ce,renewable:$.renewable!==void 0?$.renewable:!0},ts=await So(Z(I,"sales"),St),_s=B(I,"users",E);await rs(_s,{balance:g-Le}),V(wt=>wt-Le),me(wt=>{var yt;return[...wt,{...St,id:ts.id,saleDate:ve,startDate:ve,endDate:st,account:St.accountDetails,client:{name:St.customerName,email:St.customerEmail,phone:St.phoneNumber},orderId:`BS-${ts.id.slice(0,8).toUpperCase()}`,renewable:St.renewable,daysRemaining:X,totalDays:X,timeElapsedPercentage:0,termsAndConditions:((yt=pe[St.providerId])==null?void 0:yt.terms)||"No se especificaron términos y condiciones."}]}),k("Éxito","¡Pedido renovado exitosamente!")}catch(Le){console.error("Error al renovar el pedido:",Le),k("Error","Error al renovar el pedido: "+Le.message)}finally{G(Le=>({...Le,[`renew_${$.id}`]:!1}))}},se=()=>{d&&(navigator.clipboard.writeText(d),Q(!0),setTimeout(()=>Q(!1),2e3))},ie=$=>{if(!$)return"No especificada";try{const J=$ instanceof Date?$:new Date($);return isNaN(J.getTime())?"Fecha inválida":J.toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Fecha inválida"}},ae=async()=>{try{await Bc(We),ne("/")}catch($){console.error("Error al cerrar sesión:",$),k("Error",$.message||"Error al cerrar sesión")}},re=async $=>{$.preventDefault();try{G(ke=>({...ke,password:!0}));const J=$.target.password.value;if(!J){k("Error","Por favor, ingrese una nueva contraseña");return}if(J.length<6){k("Error","La contraseña debe tener al menos 6 caracteres");return}const xe=We.currentUser;xe&&(await Jg(xe,J),k("Éxito","Contraseña actualizada correctamente"),$.target.reset())}catch(J){console.error("Error al actualizar la contraseña:",J),k("Error",J.message||"Error al actualizar la contraseña")}finally{G(J=>({...J,password:!1}))}},le=()=>{if(M)return e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-cyan-400"})});if(Y)return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(He,{className:"mx-auto text-4xl text-red-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-4",children:Y}),e.jsx("button",{onClick:()=>O(null),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})]});switch(r){case"inicio":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-6",children:["Bienvenido, ",e.jsx("span",{className:"text-cyan-400",children:i})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Información de cuenta"}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-cyan-400"}),e.jsx("span",{children:i})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx(Zr,{className:"mr-2 text-cyan-400"}),e.jsx("span",{children:o})]})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Saldo disponible"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",g.toFixed(2)]}),e.jsx("button",{onClick:()=>a("recargas"),className:"mt-2 px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Recargar"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Ganancias totales"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",w.toFixed(2)]}),e.jsx("button",{onClick:()=>a("ganancias"),className:"mt-2 px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Ver ganancias"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Tu código de afiliado"}),e.jsxs("button",{onClick:se,disabled:!d,className:`flex items-center gap-2 px-3 py-1 rounded-xl transition-all duration-300 ${d?"bg-cyan-900/80 text-cyan-400 hover:bg-cyan-800/80":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:[e.jsx(iF,{size:16}),F?"¡Copiado!":"Copiar"]})]}),e.jsx("div",{className:"bg-gray-800/50 p-4 rounded-xl mb-6 border border-gray-600/50",children:e.jsx("p",{className:"text-2xl font-bold text-center tracking-wider text-white",children:d||"Generando código..."})}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Comparte este código con tus amigos para que se registren y ganes comisiones por sus compras."}),e.jsxs("div",{className:"bg-cyan-900/30 p-4 rounded-xl border border-cyan-800/50",children:[e.jsx("h4",{className:"font-medium text-cyan-400 mb-2",children:"Enlace de afiliado:"}),e.jsx("p",{className:"text-sm bg-gray-800/50 p-2 rounded-xl border border-gray-600/50 overflow-x-auto text-gray-300",children:d?`https://blackkstreaming.com/register?ref=${d}`:"Generando enlace..."})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Referidos recientes"}),u.length>0?u.map($=>e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"font-medium text-white",children:$.username||"Sin nombre"}),e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-green-900/80 text-green-400",children:"Activo"})]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Unido: ",ie($.joinDate)]})]},$.id)):e.jsx("p",{className:"text-gray-400 py-2",children:"No tienes referidos recientes"}),u.length>0&&e.jsx("button",{onClick:()=>a("referidos"),className:"w-full mt-3 text-center text-cyan-400 hover:underline text-sm",children:"Ver todos los referidos"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Pedidos recientes"}),ue.length>0?ue.slice(0,3).map($=>{const J=new Date($.endDate)>new Date&&$.status==="completed",xe=$.status==="pending";return e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"font-medium text-white",children:$.productName}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${xe?"bg-yellow-900/80 text-yellow-400":J?"bg-green-900/80 text-green-400":"bg-red-900/80 text-red-400"}`,children:xe?"A pedido":J?"Activo":"Expirado"})]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Vence: ",ie($.endDate)]})]},$.id)}):e.jsx("p",{className:"text-gray-400 py-2",children:"No tienes pedidos recientes"}),ue.length>3&&e.jsx("button",{onClick:()=>a("pedidos"),className:"w-full mt-3 text-center text-cyan-400 hover:underline text-sm",children:"Ver todos los pedidos"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Notificaciones"}),De.length>0?De.map($=>e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsx("p",{className:"text-gray-300",children:$.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:ie($.updatedAt)})]},$.id)):e.jsx("p",{className:"text-gray-400 py-2",children:"No hay notificaciones"})]})]})]});case"notificaciones":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Notificaciones"}),De.length>0?e.jsx("div",{className:"space-y-4",children:De.map($=>e.jsxs("div",{className:"border border-gray-600/50 rounded-2xl p-4 hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("p",{className:"text-gray-300",children:$.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:ie($.updatedAt)})]},$.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Go,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay notificaciones"}),e.jsx("p",{className:"text-gray-400",children:"No tienes mensajes nuevos"})]})]});case"recargas":return e.jsxs("div",{className:"space-y-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Recargar saldo"}),e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Monto a recargar (S/)"}),e.jsx("input",{type:"number",value:Ae,onChange:$=>Ue($.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Mínimo S/ 10.00",min:"10",step:"0.01"})]}),e.jsx("button",{onClick:z,disabled:q.topUp||!Ae||parseFloat(Ae)<10,className:`w-full py-3 px-4 rounded-xl font-medium transition-all duration-300 ${Ae&&parseFloat(Ae)>=10&&!q.topUp?"bg-cyan-500 hover:bg-cyan-600 text-white":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:q.topUp?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Solicitar recarga"}),e.jsxs("div",{className:"mt-6 bg-gray-700/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsxs("h4",{className:"text-lg font-semibold text-cyan-400 mb-3 flex items-center",children:[e.jsx(Es,{className:"mr-2"})," ¿Cómo realizar tu recarga?"]}),e.jsxs("p",{className:"text-gray-300 mb-2",children:["Realiza tu pago mediante ",e.jsx("span",{className:"font-semibold text-white",children:"Yape"})," al número:"]}),e.jsx("p",{className:"text-xl font-bold text-white mb-2",children:"📱 940505969"}),e.jsx("p",{className:"text-gray-300 mb-3",children:"Una vez realizado el pago, por favor contáctanos vía WhatsApp al mismo número para confirmar tu recarga."}),e.jsxs("a",{href:`https://wa.me/51940505969?text=${encodeURIComponent("Hola 😊, he realizado una recarga a través de Yape. Por favor, confirma mi pago.")}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-xl transition-all duration-300",children:[e.jsx(Zr,{className:"mr-2"})," Confirmar por WhatsApp"]})]})]})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4",children:"Historial de recargas"}),_e.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Acción"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:_e.map($=>{var xe,ke;const J=encodeURIComponent(`Hola, he pedido una recarga de S/ ${((xe=$.amount)==null?void 0:xe.toFixed(2))||"0.00"} con el nombre ${i}. Adjunto la captura de mi pago, por favor.`);return e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:["S/ ",((ke=$.amount)==null?void 0:ke.toFixed(2))||"0.00"]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${$.status==="aprobado"?"bg-green-900/80 text-green-400":$.status==="pendiente"?"bg-yellow-900/80 text-yellow-400":"bg-red-900/80 text-red-400"}`,children:$.status})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-400",children:ie($.date)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:$.status==="pendiente"?e.jsxs("a",{href:`https://wa.me/51940505969?text=${J}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded-xl transition-all duration-300 text-sm",children:[e.jsx(Zr,{className:"mr-2"})," Enviar captura"]}):e.jsx("span",{className:"text-gray-400 text-sm",children:"—"})})]},$.id)})})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Es,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-400",children:"No hay recargas registradas"})]})]})]});case"pedidos":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white",children:"Mis pedidos"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar pedidos...",className:"px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm placeholder-gray-500",value:T,onChange:$=>W($.target.value)}),e.jsx(Ze,{className:"absolute right-3 top-2.5 text-gray-400"})]})]}),ue.length>0?e.jsx("div",{className:"space-y-6",children:ue.filter($=>($.productName||"").toLowerCase().includes(T.toLowerCase())||($.orderId||"").toLowerCase().includes(T.toLowerCase())).map($=>{var ve,st,Tt,St,ts,_s,wt,yt,ss,us,js,tr,sr;const J=parseFloat($.price)||0,xe=new Date($.endDate)>new Date&&$.status==="completed",ke=$.status==="pending",Te=$.daysRemaining||0,fe=$.timeElapsedPercentage||0;let Me="bg-green-400";fe>70&&fe<=90?Me="bg-yellow-400":fe>90&&(Me="bg-red-400");const Ne=ke?e.jsx(Ot,{className:"text-yellow-400"}):xe?e.jsx($m,{className:"text-green-400"}):e.jsx(He,{className:"text-red-400"}),Le=encodeURIComponent(`*Consulta sobre Pedido - ${$.productName||"Sin nombre"}*

*N° Pedido:* ${$.orderId||"No especificado"}
*Producto:* ${$.productName||"No especificado"}
*Precio:* S/ ${J.toFixed(2)}
*Estado:* ${ke?"A pedido":xe?"Activo":"Expirado"}
*Fecha de Inicio:* ${ie($.startDate)}
*Fecha de Vencimiento:* ${ie($.endDate)}

`+(ke?`Hola 😊, he comprado un producto a pedido (${$.productName}). ¿En cuántos días estará listo? Por favor, indíqueme los detalles para coordinar.`:"Por favor indíqueme cómo puedo resolver mi consulta sobre este pedido.")),X=encodeURIComponent(`😊 Estimado/a ${((ve=$.client)==null?void 0:ve.name)||"Cliente"} 😊

Le enviamos la información de su suscripción a nuestro servicio de streaming:
📌 Tipo: ${$.productName||"Sin nombre"}.
🔢 Código: ${$.orderId||"No especificado"}
`+(ke?"":`📧 Correo: ${((st=$.account)==null?void 0:st.email)||"No especificado"}
🔐 Contraseña: ${((Tt=$.account)==null?void 0:Tt.password)||"No especificado"}
👤 Perfil: ${((St=$.account)==null?void 0:St.profile)||"No especificado"}
📌 PIN: ${((ts=$.account)==null?void 0:ts.pin)||"No especificado"}
`)+`🌐 URL: Sin URL
📅 Fecha de creación: ${ie($.startDate)}
📅 Fecha de vencimiento: ${ie($.endDate)}
🏁 Días contratados: ${$.durationDays||30} días.

`+(ke?`*Nota:* Este pedido está "A pedido". El proveedor se contactará contigo para coordinar los detalles.

`:"")+`*Términos y Condiciones:*
${$.termsAndConditions||"No se especificaron términos y condiciones."}

Muchas gracias por su preferencia.
Atentamente, BLACKSTREAMING`),ce=$.providerPhone?$.providerPhone.replace(/^\+51/,"").replace(/\D/g,""):"51999999999";return e.jsxs("div",{className:"border border-gray-600/50 rounded-2xl overflow-hidden hover:shadow-2xl transition-all duration-300",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm px-4 py-3 border-b border-gray-600/50 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[Ne,e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white",children:$.productName||"Producto sin nombre"}),$.orderId&&e.jsxs("p",{className:"text-xs text-gray-400",children:["N° Pedido: ",$.orderId]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-white",children:["S/ ",J.toFixed(2)]}),e.jsx("p",{className:`text-xs font-medium ${ke?"text-yellow-400":Me.replace("bg-","text-")}`,children:ke?"Pendiente de activación":`${Te} día${Te===1?"":"s"} restante${Te===1?"":"s"}`})]})]}),e.jsxs("div",{className:"p-4 bg-gray-700/50 backdrop-blur-sm",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"w-full bg-gray-600/50 rounded-full h-2.5",children:e.jsx("div",{className:`h-2.5 rounded-full ${Me}`,style:{width:`${Math.min(fe,100)}%`}})}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1 text-right",children:[fe.toFixed(0),"% completado"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-4",children:[e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsxs("h5",{className:"text-sm font-medium text-cyan-400 mb-3 flex items-center",children:[e.jsx(Ge,{className:"mr-2"})," Detalles de la Cuenta"]}),e.jsx("div",{className:"space-y-2 text-gray-300",children:ke?e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Usuario:"}),e.jsx("span",{className:"block text-white",children:"Por completar"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Contraseña:"}),e.jsx("span",{className:"block text-white",children:"Por completar"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Perfil:"}),e.jsx("span",{className:"block text-white",children:"Por completar"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"PIN:"}),e.jsx("span",{className:"block text-white",children:"Por completar"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Email:"}),e.jsx("span",{className:"block text-white break-all",children:((_s=$.account)==null?void 0:_s.email)||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Contraseña:"}),e.jsx("span",{className:"block text-white break-all",children:((wt=$.account)==null?void 0:wt.password)||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Perfil:"}),e.jsx("span",{className:"block text-white",children:((yt=$.account)==null?void 0:yt.profile)||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"PIN:"}),e.jsx("span",{className:"block text-white",children:((ss=$.account)==null?void 0:ss.pin)||"No especificado"})]})]})})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsxs("h5",{className:"text-sm font-medium text-cyan-400 mb-3 flex items-center",children:[e.jsx(Pe,{className:"mr-2"})," Información del Pedido"]}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Proveedor:"}),e.jsx("span",{className:"block text-white",children:$.provider||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Teléfono del Proveedor:"}),e.jsx("span",{className:"block text-white",children:$.providerPhone||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Estado:"}),e.jsx("span",{className:`block px-2 py-1 text-xs rounded-full ${ke?"bg-yellow-900/80 text-yellow-400":xe?"bg-green-900/80 text-green-400":"bg-red-900/80 text-red-400"}`,children:ke?"A pedido":xe?"Activo":"Expirado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Método de Pago:"}),e.jsx("span",{className:"block text-white",children:"BlackStreaming"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Fecha de inicio:"}),e.jsx("span",{className:"block text-white",children:ie($.startDate)})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Fecha de vencimiento:"}),e.jsx("span",{className:"block text-white",children:ie($.endDate)})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Días restantes:"}),e.jsx("span",{className:`block ${Me.replace("bg-","text-")}`,children:Te})]})]})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsxs("h5",{className:"text-sm font-medium text-cyan-400 mb-3 flex items-center",children:[e.jsx(Ge,{className:"mr-2"})," Información del Cliente"]}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Nombre:"}),e.jsx("span",{className:"block text-white",children:((us=$.client)==null?void 0:us.name)||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Teléfono:"}),e.jsx("span",{className:"block text-white",children:((js=$.client)==null?void 0:js.phone)||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Email:"}),e.jsx("span",{className:"block text-white",children:((tr=$.client)==null?void 0:tr.email)||"No especificado"})]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("a",{href:`https://wa.me/51${ce}?text=${Le}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300",children:[e.jsx(Zr,{size:18})," Contactar Proveedor"]}),$.renewable&&e.jsx("button",{onClick:()=>oe($),disabled:q[`renew_${$.id}`],className:`flex-1 py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300 ${q[`renew_${$.id}`]?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-cyan-500 hover:bg-cyan-600 text-white"}`,children:q[`renew_${$.id}`]?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):e.jsxs(e.Fragment,{children:[e.jsx(eP,{size:18})," Renovar Pedido"]})}),((sr=$.client)==null?void 0:sr.phone)&&e.jsxs("a",{href:`https://wa.me/${$.client.phone.replace(/^\+/,"")}?text=${X}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300",children:[e.jsx(Zr,{size:18})," Contactar Cliente"]})]})]})]},$.id)})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Xe,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No tienes pedidos registrados"}),e.jsx("p",{className:"text-gray-400",children:"Realiza tu primer pedido en nuestra tienda"})]})]});case"referidos":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white",children:["Todos tus referidos (",f.length,")"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar referidos...",className:"px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm placeholder-gray-500",value:T,onChange:$=>W($.target.value)}),e.jsx(Ze,{className:"absolute right-3 top-2.5 text-gray-400"})]})]}),f.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Usuario"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha de registro"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:f.filter($=>{const J=$.username||"",xe=$.email||"";return J.toLowerCase().includes(T.toLowerCase())||xe.toLowerCase().includes(T.toLowerCase())}).map($=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:$.username||"Sin nombre"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:$.email||"Sin email"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:$.joinDate?ie($.joinDate):"No especificada"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-900/80 text-green-400",children:$.status||"Activo"})})]},$.id))})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(cc,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No tienes referidos aún"}),e.jsx("p",{className:"text-gray-400",children:"Comparte tu código de afiliado para empezar a ganar comisiones"})]})]});case"ganancias":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Reporte de ganancias"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-6 text-center border border-gray-600/50 shadow-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Ganancias hoy"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:"S/ 0.00"}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"+0% desde ayer"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-6 text-center border border-gray-600/50 shadow-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Ganancias esta semana"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:"S/ 0.00"}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"+0% desde la semana pasada"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-6 text-center border border-gray-600/50 shadow-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Ganancias totales"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",w.toFixed(2)]}),e.jsxs("p",{className:"text-sm text-gray-400 mt-2",children:[f.length," referidos"]})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsxs("h4",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[e.jsx(G0,{className:"mr-2 text-cyan-400"})," Historial de comisiones"]}),f.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-800/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Referido"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Origen"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"})]})}),e.jsx("tbody",{className:"bg-gray-700/50 divide-y divide-gray-600/50",children:f.map($=>e.jsxs("tr",{className:"hover:bg-gray-600/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:$.username||"Usuario sin nombre"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:$.joinDate?ie($.joinDate):"No especificada"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:"S/ 0.00"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:"Registro"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-900/80 text-yellow-400",children:"Pendiente"})})]},$.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Es,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-400",children:"No hay comisiones registradas"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Gana comisiones cuando tus referidos realicen compras"})]})]})]});case"configuracion":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Configuración de cuenta"}),e.jsxs("form",{onSubmit:re,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre de usuario"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"text",value:i,disabled:!0,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-gray-400 border border-gray-600/50 cursor-not-allowed"}),e.jsx("button",{type:"button",onClick:()=>C({id:E,username:i}),className:"p-2 bg-blue-600 hover:bg-blue-700 text-white rounded-xl transition-all duration-300",title:"Editar Nombre",children:e.jsx(Oy,{size:16})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Correo electrónico"}),e.jsx("input",{type:"email",value:o,disabled:!0,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-gray-400 border border-gray-600/50 cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nueva contraseña (opcional)"}),e.jsx("input",{type:"password",name:"password",placeholder:"Nueva contraseña",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all"})]}),e.jsx("button",{type:"submit",disabled:q.password,className:"w-full py-3 px-4 bg-cyan-500 hover:bg-cyan-600 text-white rounded-xl font-medium mt-4 transition-all duration-300 disabled:bg-cyan-800",children:q.password?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Guardar cambios"})]}),e.jsx("div",{className:"mt-8 border-t border-gray-600/50 pt-6",children:e.jsxs("button",{onClick:ae,className:"flex items-center justify-center gap-2 w-full py-3 px-4 bg-red-900/80 hover:bg-red-800 text-white rounded-xl font-medium transition-all duration-300",children:[e.jsx(It,{})," Cerrar sesión"]})})]});default:return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(He,{className:"mx-auto text-4xl text-yellow-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Sección no encontrada"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"La sección que estás buscando no existe o no está disponible."}),e.jsx("button",{onClick:()=>a("inicio"),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Volver al inicio"})]})}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200",children:[e.jsx("div",{className:"md:hidden fixed top-4 left-4 z-50",children:e.jsx("button",{onClick:()=>t(!s),className:"p-2 rounded-full bg-gray-800/50 backdrop-blur-sm hover:bg-gray-700/50 transition-all duration-300 border border-gray-700/50",children:e.jsx(Vt,{className:"text-xl"})})}),e.jsx("aside",{className:`fixed inset-y-0 left-0 transform ${s?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 bg-gray-900/90 backdrop-blur-md border-r border-gray-800/50 overflow-y-auto`,children:e.jsxs("div",{className:"p-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-cyan-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-1 rounded-full hover:bg-gray-700/50 transition-all duration-300",children:e.jsx(pt,{className:"text-lg"})})]}),e.jsxs("div",{className:"flex items-center space-x-3 mb-8 p-3 bg-gray-800/50 backdrop-blur-sm rounded-2xl border border-gray-700/50",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-cyan-500 flex items-center justify-center text-white font-bold",children:i.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:i}),e.jsx("p",{className:"text-xs text-gray-400",children:"Afiliador"})]})]}),e.jsx("nav",{className:"flex-1 space-y-2",children:[{id:"inicio",label:"Inicio",icon:Wm},{id:"notificaciones",label:"Notificaciones",icon:Go},{id:"recargas",label:"Recargas",icon:Es},{id:"pedidos",label:"Pedidos",icon:Xe},{id:"referidos",label:"Referidos",icon:cc},{id:"ganancias",label:"Ganancias",icon:G0},{id:"configuracion",label:"Configuración",icon:qm}].map($=>e.jsxs("button",{onClick:()=>{a($.id),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r===$.id?"bg-cyan-500/20 text-cyan-400 border border-cyan-500/50":"text-gray-300 hover:bg-gray-800/50 hover:text-cyan-400"}`,children:[e.jsx($.icon,{className:"text-lg"}),e.jsx("span",{children:$.label})]},$.id))}),e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:ae,className:"w-full flex items-center space-x-3 px-4 py-3 text-red-400 hover:bg-red-900/20 rounded-xl transition-all duration-300 border border-red-900/50",children:[e.jsx(It,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 p-4 sm:p-6 min-h-screen",children:le()}),e.jsx(jF,{isOpen:N.isOpen,title:N.title,message:N.message,onClose:A}),e.jsx(NF,{isOpen:D.isOpen,user:D.user,onClose:v,onSave:p}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-30 md:hidden",onClick:()=>t(!1)})]})},kF=({isOpen:s,message:t,title:r,onClose:a})=>s?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:r}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(pt,{size:20})})]}),e.jsx("p",{className:"text-gray-300 mb-6",children:t}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:a,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})})]})})}):null,IF=()=>{var Hr;const[s,t]=b.useState(!1),[r,a]=b.useState("inicio"),[i,l]=b.useState("Usuario"),[o,c]=b.useState(""),[d,x]=b.useState(""),[f,j]=b.useState([]),[w,S]=b.useState([]),[g,V]=b.useState(!0),[E,_]=b.useState(""),[M,R]=b.useState({image:"",category:"Netflix",accountType:"Premium",name:"",price:"",renewal:!1,renewalPrice:"",stock:1,duration:"",providerPhone:"",details:"",terms:"",status:"En stock",accounts:Array(1).fill({email:"",password:"",profile:"",pin:""})}),[q,G]=b.useState(null),[Y,O]=b.useState(!1),[u,U]=b.useState(""),[F,Q]=b.useState(""),[T,W]=b.useState({isOpen:!1,message:"",title:""}),[Ae,Ue]=b.useState({email:"",password:"",preferences:""}),[_e,be]=b.useState([]),[ue,me]=b.useState(""),[pe,Oe]=b.useState("Yape"),[De,n]=b.useState(""),[N,h]=b.useState(!1),[D,H]=b.useState([]),[ne,k]=b.useState(!0),[A,C]=b.useState(0),[v,p]=b.useState(!1),[z,oe]=b.useState(null),[se,ie]=b.useState(""),ae=Nt(),re=ty(),le=(ee,we)=>{W({isOpen:!0,title:ee,message:we})},$=()=>{W({isOpen:!1,message:"",title:""})},J=ee=>{var we;if(!ee)return"No especificada";try{const Ve=ee instanceof Date?ee:((we=ee==null?void 0:ee.toDate)==null?void 0:we.call(ee))||new Date(ee);return isNaN(Ve.getTime())?"Fecha inválida":Ve.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch(Ve){return console.error("Error formatting date:",Ve),"Fecha inválida"}},xe=ee=>({netflix:"Netflix",spotify:"Spotify",disney:"Disney",max:"Max",primevideo:"Prime Video",vix:"Vix",crunchyroll:"Crunchyroll",canva:"Canva",chatgpt:"ChatGPT",redessociales:"Redes Sociales",dgo:"Dgo",ligamax:"Liga Max",movistarplay:"Movistar Play",youtube:"Youtube",deezer:"Deezer",tidal:"Tidal",vpn:"Vpn",wintv:"WinTv",applemusic:"Apple Music",appletv:"Apple TV",iptv:"Iptv",flujotv:"Flujo Tv",vikirakuten:"Viki Rakuten",pornhub:"Pornhub",paramount:"Paramount",licencias:"Licencias",capcut:"Capcut",duolingo:"Duolingo",buscapersonas:"BuscaPersonas"})[ee==null?void 0:ee.toLowerCase()]||"Otro";b.useEffect(()=>{const ee=Dt(re,we=>{we?(c(we.email||""),x(we.uid),ke(we.uid)):ae("/login")});return()=>ee()},[re,ae]);const ke=async ee=>{try{const we=B(I,"users",ee),Ve=await Ye(we);if(Ve.exists()){const Ke=Ve.data();l(Ke.username||"Usuario"),Ue({email:Ke.email||"",password:"",preferences:Ke.preferences||""})}V(!1)}catch(we){_("Error al cargar datos del usuario"),console.error("Error fetching user data:",we),V(!1)}};b.useEffect(()=>{o&&(async we=>{try{const Ve=await Ye(B(I,"admins",we));h(Ve.exists())}catch(Ve){console.error("Error checking admin status:",Ve)}})(o)},[o]),b.useEffect(()=>{if(!i)return;const ee=ye(Z(I,"products"),je("provider","==",i)),we=Ce(ee,Ve=>{const Ke=Ve.docs.map(bt=>({id:bt.id,...bt.data()}));S(Ke)},Ve=>{console.error("Error fetching products:",Ve),_("Error al cargar productos")});return()=>we()},[i]),b.useEffect(()=>{if(!d)return;const ee=ye(Z(I,"sales"),je("providerId","==",d)),we=Ce(ee,Ke=>{if(Ke.empty){j([]),k(!1);return}const bt=Ke.docs.map(_t=>{var ri,qi,da,ua,cn,wd,ul,xl;const Mt=_t.data(),Ar=((qi=(ri=Mt.saleDate)==null?void 0:ri.toDate)==null?void 0:qi.call(ri))||((ua=(da=Mt.createdAt)==null?void 0:da.toDate)==null?void 0:ua.call(da))||new Date;let Is=(wd=(cn=Mt.startDate)==null?void 0:cn.toDate)==null?void 0:wd.call(cn),Aa=Is||Ar,ln=!Is;const ca=Mt.durationDays||30;let rr;Mt.endDate?rr=typeof Mt.endDate=="string"?new Date(Mt.endDate):((xl=(ul=Mt.endDate).toDate)==null?void 0:xl.call(ul))||new Date(Mt.endDate):(rr=new Date(Aa.getTime()+ca*24*60*60*1e3),ln=!0),ln&&rs(B(I,"sales",_t.id),{startDate:Is||Qt.fromDate(Ar),endDate:rr.toISOString(),durationDays:ca}).catch(kd=>{console.error("Error al actualizar startDate/endDate en Firestore:",kd)});const ll=new Date,jd=rr.getTime()-Aa.getTime(),cl=ll.getTime()-Aa.getTime(),dl=rr.getTime()-ll.getTime(),$i=Math.max(1,Math.ceil(jd/(1e3*60*60*24))),Nd=Math.max(0,Math.ceil(dl/(1e3*60*60*24))),Hm=Math.ceil(cl/(1e3*60*60*24)),Wi=$i>0?Math.min(100,Hm/$i*100):100;return{id:_t.id,productName:Mt.productName||"Producto sin nombre",category:Mt.type||"netflix",amount:parseFloat(Mt.price)||0,buyer:Mt.buyerName||Mt.customerName||"Comprador desconocido",buyerPhone:Mt.buyerPhone||"No especificado",buyerEmail:Mt.customerEmail||"No especificado",status:Mt.status||"completed",saleDate:Ar,startDate:Aa,endDate:rr,durationDays:ca,daysRemaining:Nd,totalDays:$i,timeElapsedPercentage:Wi,accountDetails:Mt.accountDetails||{email:"No disponible",password:"No disponible",profile:"N/A",pin:""},balance:parseFloat(Mt.price)||0}});j(bt),k(!1)},Ke=>{console.error("Error fetching sales:",Ke),_("Error al cargar ventas"),k(!1)}),Ve=setInterval(()=>{j(Ke=>Ke.map(bt=>{const _t=new Date,Mt=new Date(bt.endDate).getTime()-new Date(bt.startDate).getTime(),la=_t.getTime()-new Date(bt.startDate).getTime(),Ar=new Date(bt.endDate).getTime()-_t.getTime(),Is=Math.max(1,Math.ceil(Mt/(1e3*60*60*24))),Aa=Math.max(0,Math.ceil(Ar/(1e3*60*60*24))),ln=Math.ceil(la/(1e3*60*60*24)),ca=Is>0?Math.min(100,ln/Is*100):100;return{...bt,daysRemaining:Aa,totalDays:Is,timeElapsedPercentage:ca}}))},6e4);return()=>{we(),clearInterval(Ve)}},[d]),b.useEffect(()=>{if(!i)return;const ee=ye(Z(I,"withdrawals"),je("provider","==",i),N0("createdAt","desc")),we=Ce(ee,Ve=>{const Ke=Ve.docs.map(bt=>{const _t=bt.data();return{id:bt.id,..._t,amount:parseFloat(_t.amount)||0,createdAt:_t.createdAt||new Date,processedAt:_t.processedAt||null}});be(Ke),k(!1)},Ve=>{});return()=>we()},[i]),b.useEffect(()=>{if(!N)return;const ee=ye(Z(I,"withdrawals"),je("status","==","pending"),N0("createdAt","desc")),we=Ce(ee,Ve=>{const Ke=Ve.docs.map(bt=>{const _t=bt.data();return{id:bt.id,..._t,amount:parseFloat(_t.amount)||0,createdAt:_t.createdAt||new Date}});H(Ke)},Ve=>{console.error("Error fetching pending withdrawals:",Ve),_("Error al cargar solicitudes de retiro pendientes")});return()=>we()},[N]),b.useEffect(()=>{if(!i)return;const ee=B(I,"providerBalances",i),we=Ce(ee,Ve=>{Ve.exists()?C(Ve.data().balance||0):(Vr(ee,{balance:0,provider:i,updatedAt:he()}),C(0)),k(!1)},Ve=>{console.error("Error fetching provider balance:",Ve),_("Error al cargar el saldo del proveedor"),k(!1)});return()=>we()},[i]);const Te=async()=>{try{await Bc(re),ae("/login")}catch(ee){console.error("Error al cerrar sesión:",ee),le("Error","Error al cerrar sesión")}},fe=ee=>{const{name:we,value:Ve,type:Ke,checked:bt}=ee.target;R(_t=>({..._t,[we]:Ke==="checkbox"?bt:Ve}))},Me=ee=>{const{name:we,value:Ve}=ee.target;Ue(Ke=>({...Ke,[we]:Ve}))},Ne=(ee,we=!1)=>{const Ve=ee.target.files[0];if(Ve){if(Ve.size>10485760){we?U("La imagen no debe exceder los 10MB"):_("La imagen no debe exceder los 10MB");return}const bt=new FileReader;bt.onloadend=()=>{we?G(_t=>({..._t,image:bt.result})):R(_t=>({..._t,image:bt.result}))},bt.readAsDataURL(Ve)}},Le=ee=>{const we=parseInt(ee.target.value)||1,Ve=M.accounts||[];if(we>Ve.length){const Ke=[...Ve];for(;Ke.length<we;)Ke.push({email:"",password:"",profile:"",pin:""});R({...M,stock:we,accounts:Ke})}else if(we<Ve.length){const Ke=Ve.slice(0,Math.max(we,1));R({...M,stock:we,accounts:Ke})}else R({...M,stock:we})},X=ee=>{const we=parseInt(ee.target.value)||1;let Ke=[...q.accounts||[]];if(we>Ke.length)for(;Ke.length<we;)Ke.push({email:"",password:"",profile:"",pin:""});else we<Ke.length&&(Ke=Ke.slice(0,Math.max(we,1)));G({...q,stock:we,accounts:Ke})},ce=(ee,we,Ve)=>{const Ke=[...M.accounts];Ke[ee]={...Ke[ee],[we]:Ve},R({...M,accounts:Ke})},ve=(ee,we,Ve)=>{G(Ke=>({...Ke,accounts:Ke.accounts.map((bt,_t)=>_t===ee?{...bt,[we]:Ve}:bt)}))},st=ee=>{const{name:we,value:Ve}=ee.target;oe(Ke=>({...Ke,accountDetails:{...Ke.accountDetails,[we]:Ve}}))},Tt=async()=>{if(_(""),!M.name||!M.price){le("Error","Por favor complete todos los campos obligatorios");return}if(M.renewal&&!M.renewalPrice){le("Error","Por favor ingrese el precio de renovación");return}if(M.status==="En stock"&&M.accounts.some(we=>!we.email||!we.password)){le("Error","Por favor complete todos los campos de las cuentas");return}try{const ee={...M,provider:i,providerId:d,providerPhone:M.status==="En stock"?M.providerPhone||"":M.providerPhone||"No especificado",createdAt:he(),availableAccounts:M.status==="En stock"?M.accounts.length:0},we=await So(Z(I,"products"),ee);if(M.status==="En stock"){const Ve=Z(I,`products/${we.id}/accounts`);for(const Ke of M.accounts)await So(Ve,{email:Ke.email,password:Ke.password,profile:Ke.profile||"",pin:Ke.pin||"",status:"available"})}R({image:"",category:"Netflix",accountType:"Premium",name:"",price:"",renewal:!1,renewalPrice:"",stock:1,duration:"",providerPhone:"",details:"",terms:"",status:"En stock",accounts:[{email:"",password:"",profile:"",pin:""}]}),a("inventario"),le("Éxito","Producto subido exitosamente!")}catch(ee){console.error("Error al subir el producto:",ee),le("Error",`Error al subir el producto: ${ee.message}`)}},St=ee=>{console.log("Producto seleccionado para editar:",ee),U(""),G({id:ee.id,name:ee.name||"",image:ee.image||"",category:ee.category||"Netflix",accountType:ee.accountType||"Premium",status:ee.status||"En stock",stock:ee.stock||1,price:ee.price||"",renewal:ee.renewal||!1,renewalPrice:ee.renewalPrice||"",duration:ee.duration||"",providerPhone:ee.providerPhone||"",details:ee.details||"",terms:ee.terms||"",providerId:ee.providerId||d,accounts:ee.status==="En stock"?ee.accounts||Array(Math.max(ee.stock||1,1)).fill({email:"",password:"",profile:"",pin:""}):[]}),O(!0)},ts=async()=>{var ee;if(U(""),!q.name||!q.price){U("Por favor complete todos los campos obligatorios");return}if(q.renewal&&!q.renewalPrice){U("Por favor ingrese el precio de renovación");return}if(q.status==="En stock"&&q.accounts.some(Ve=>!Ve.email||!Ve.password)){U("Por favor complete todos los campos de las cuentas");return}try{const we=B(I,"products",q.id);await Vr(we,{...q,providerId:q.providerId||d,availableAccounts:q.status==="En stock"&&((ee=q.accounts)==null?void 0:ee.length)||0},{merge:!0}),O(!1),le("Éxito","Producto actualizado exitosamente!")}catch(we){console.error("Error al actualizar el producto:",we),U("Error al actualizar el producto")}},_s=async ee=>{try{await N6(B(I,"products",ee)),le("Éxito","Producto eliminado exitosamente!")}catch(we){console.error("Error al eliminar el producto:",we),le("Error","Error al eliminar el producto")}},wt=async()=>{try{const ee=re.currentUser;if(ee){const we=B(I,"users",ee.uid);await Vr(we,{preferences:Ae.preferences,...Ae.password&&{password:Ae.password}},{merge:!0}),le("Éxito","Configuración actualizada correctamente!")}}catch(ee){console.error("Error al actualizar la configuración:",ee),le("Error","Error al actualizar la configuración")}},yt=async()=>{if(!ue||parseFloat(ue)<=0){le("Error","Ingrese un monto válido");return}if(parseFloat(ue)>A){le("Error","No tienes suficientes fondos disponibles");return}if(!De){le("Error","Ingrese los datos de su cuenta");return}try{await So(Z(I,"withdrawals"),{provider:i,providerEmail:o,amount:parseFloat(ue),method:pe,account:De,status:"pending",createdAt:he()}),me(""),n(""),le("Éxito","Solicitud de retiro enviada correctamente")}catch(ee){console.error("Error al solicitar retiro:",ee),le("Error","Error al solicitar retiro")}},ss=async(ee,we)=>{try{const Ve=B(I,"withdrawals",ee),Ke=await Ye(Ve);if(!Ke.exists())throw new Error("Solicitud de retiro no encontrada");const bt=Ke.data(),_t=bt.provider,Mt=parseFloat(bt.amount);if(we==="approved"){const la=B(I,"providerBalances",_t),Ar=await Ye(la);let Is=0;if(Ar.exists()&&(Is=Ar.data().balance||0),Mt>Is){le("Error","El proveedor no tiene suficientes fondos para aprobar este retiro");return}await Vr(la,{balance:Is-Mt,provider:_t,updatedAt:he()},{merge:!0})}await rs(Ve,{status:we,processedAt:he(),processedBy:o}),le("Éxito",we==="approved"?"Retiro aprobado y saldo actualizado correctamente":"Retiro rechazado")}catch(Ve){console.error("Error al procesar retiro:",Ve),le("Error","Error al procesar retiro: "+Ve.message)}},us=ee=>{ie(""),oe({...ee,accountDetails:{email:ee.accountDetails.email||"",password:ee.accountDetails.password||"",profile:ee.accountDetails.profile||"",pin:ee.accountDetails.pin||""}}),p(!0)},js=async()=>{if(ie(""),!z.accountDetails.email||!z.accountDetails.password){ie("Por favor complete todos los campos obligatorios de la cuenta");return}try{const ee=B(I,"sales",z.id);await rs(ee,{accountDetails:z.accountDetails,updatedAt:he()}),p(!1),le("Éxito","Detalles de la cuenta actualizados exitosamente!")}catch(ee){console.error("Error al actualizar los detalles de la cuenta:",ee),ie("Error al actualizar los detalles de la cuenta")}},tr=async ee=>{try{const we=B(I,"sales",ee);await rs(we,{status:"completed",updatedAt:he()}),le("Éxito","Pedido activado exitosamente!")}catch(we){console.error("Error al activar el pedido:",we),le("Error","Error al activar el pedido")}},sr=ne?0:f.reduce((ee,we)=>ee+(we.amount||0),0),$s=ne?0:_e.reduce((ee,we)=>ee+(we.status==="approved"?we.amount:0),0),Ds=(()=>ne?0:A)(),Da=w.reduce((ee,we)=>ee+(parseInt(we.stock)||0),0),vr=()=>{if(g)return e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-cyan-400"})});if(E)return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(He,{className:"mx-auto text-4xl text-red-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-4",children:E}),e.jsx("button",{onClick:()=>_(""),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})]});switch(r){case"inicio":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-6",children:["Bienvenido, ",e.jsx("span",{className:"text-cyan-400",children:i})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold text-cyan-400 mb-3 flex items-center",children:[e.jsx(uu,{className:"mr-2"})," Inventario"]}),e.jsx("p",{className:"text-3xl font-bold text-white",children:w.length}),e.jsx("p",{className:"text-gray-400",children:"Productos registrados"}),e.jsxs("p",{className:"text-gray-400",children:["Stock total: ",Da]}),e.jsx("button",{onClick:()=>a("inventario"),className:"text-cyan-400 hover:underline text-sm mt-2",children:"Ver inventario"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold text-cyan-400 mb-3 flex items-center",children:[e.jsx(Es,{className:"mr-2"})," Ganancias"]}),ne?e.jsx("div",{className:"animate-pulse text-gray-400",children:"Cargando..."}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",sr.toFixed(2)]}),e.jsxs("p",{className:"text-gray-400",children:[f.length," ventas realizadas"]}),e.jsxs("p",{className:"text-gray-400",children:["Disponible: S/ ",Ds.toFixed(2)]}),e.jsx("button",{onClick:()=>a("retiros"),className:"text-cyan-400 hover:underline text-sm mt-2",children:"Retirar fondos"})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold text-cyan-400 mb-3 flex items-center",children:[e.jsx(Ge,{className:"mr-2"})," Mi Cuenta"]}),e.jsx("p",{className:"text-lg font-medium text-white",children:i}),e.jsx("p",{className:"text-sm text-gray-400 truncate",children:o}),e.jsx("p",{className:"text-xs mt-2 bg-cyan-900 text-cyan-400 py-1 px-2 rounded-full inline-block",children:N?"Administrador":"Proveedor"}),e.jsx("button",{onClick:()=>a("configuracion"),className:"text-cyan-400 hover:underline text-sm mt-2",children:"Editar perfil"})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-3 flex items-center",children:[e.jsx(Xe,{className:"mr-2"})," Pedidos recientes"]}),f.length===0?e.jsx("p",{className:"text-gray-400 py-2 text-center",children:"No hay pedidos recientes."}):f.slice(0,3).map((ee,we)=>e.jsx("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"w-2/3",children:[e.jsx("p",{className:"font-medium text-white truncate",children:ee.productName}),e.jsxs("p",{className:"text-sm text-gray-400 truncate",children:["Comprador: ",ee.buyer]})]}),e.jsxs("div",{className:"text-right w-1/3",children:[e.jsxs("p",{className:"font-medium text-white",children:["S/ ",(ee.amount||0).toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-400",children:J(ee.date)})]})]})},we)),f.length>3&&e.jsx("button",{onClick:()=>a("pedidos"),className:"w-full mt-3 text-center text-cyan-400 hover:underline text-sm",children:"Ver todos los pedidos"})]})]});case"inventario":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white flex items-center",children:[e.jsx(uu,{className:"mr-2"})," Inventario"]}),e.jsxs("button",{onClick:()=>a("subirProducto"),className:"px-4 py-2 bg-cyan-500 hover:bg-cyan-600 text-white rounded-xl flex items-center w-full md:w-auto justify-center transition-all duration-300",children:[e.jsx(Lw,{className:"mr-2"})," Nuevo Producto"]})]}),w.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Producto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Precio"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Stock"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:w.map(ee=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[ee.image&&e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("img",{className:"h-10 w-10 rounded-full object-cover",src:ee.image,alt:ee.name})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-white truncate max-w-xs",children:ee.name}),e.jsx("div",{className:"text-xs text-gray-400",children:xe(ee.category)})]})]})}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:["S/ ",(parseFloat(ee.price)||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:ee.stock||0}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${ee.status==="En stock"?"bg-green-900/80 text-green-400":"bg-yellow-900/80 text-yellow-400"}`,children:ee.status})}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>St(ee),className:"text-cyan-400 hover:text-cyan-500 mr-3",title:"Editar",children:e.jsx(sp,{})}),e.jsx("button",{onClick:()=>_s(ee.id),className:"text-red-400 hover:text-red-500",title:"Eliminar",children:e.jsx(lF,{})})]})]},ee.id))})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(uu,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No tienes productos registrados"}),e.jsx("p",{className:"text-gray-400",children:"Agrega tu primer producto para comenzar"}),e.jsxs("button",{onClick:()=>a("subirProducto"),className:"mt-4 px-4 py-2 bg-cyan-500 hover:bg-cyan-600 text-white rounded-xl flex items-center mx-auto transition-all duration-300",children:[e.jsx(Lw,{className:"mr-2"})," Agregar Producto"]})]})]});case"subirProducto":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-4xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Subir Nuevo Producto"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Imagen del producto"}),e.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-600/50 border-dashed rounded-xl bg-gray-700/50 backdrop-blur-sm",children:M.image?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:M.image,alt:"Preview",className:"mx-auto h-48 w-full object-contain"}),e.jsx("button",{type:"button",onClick:()=>R({...M,image:""}),className:"absolute top-0 right-0 bg-red-500 text-white rounded-full p-1",children:e.jsx(pt,{size:16})})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:e.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsx("div",{className:"flex text-sm text-gray-400 justify-center",children:e.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-gray-800/50 rounded-xl font-medium text-cyan-400 hover:text-cyan-500 focus-within:outline-none",children:[e.jsx("span",{children:"Subir una imagen"}),e.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:ee=>Ne(ee),accept:"image/*"})]})}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF hasta 10MB"})]})})]}),e.jsxs("div",{className:"col-span-1 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre del producto*"}),e.jsx("input",{type:"text",name:"name",value:M.name,onChange:fe,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Ej: Netflix Premium 1 mes",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Categoría*"}),e.jsxs("select",{name:"category",value:M.category,onChange:fe,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",children:[e.jsx("option",{value:"Netflix",children:"Netflix"}),e.jsx("option",{value:"Spotify",children:"Spotify"}),e.jsx("option",{value:"Disney",children:"Disney+"}),e.jsx("option",{value:"Max",children:"Max"}),e.jsx("option",{value:"Prime Video",children:"Prime Video"}),e.jsx("option",{value:"Vix",children:"Vix"}),e.jsx("option",{value:"Crunchyroll",children:"Crunchyroll"}),e.jsx("option",{value:"Canva",children:"Canva"}),e.jsx("option",{value:"ChatGPT",children:"ChatGPT"}),e.jsx("option",{value:"Redes Sociales",children:"Redes Sociales"}),e.jsx("option",{value:"Dgo",children:"DGO"}),e.jsx("option",{value:"Liga Max",children:"Liga Max"}),e.jsx("option",{value:"Movistar Play",children:"Movistar Play"}),e.jsx("option",{value:"Youtube",children:"YouTube"}),e.jsx("option",{value:"Deezer",children:"Deezer"}),e.jsx("option",{value:"Tidal",children:"Tidal"}),e.jsx("option",{value:"Vpn",children:"VPN"}),e.jsx("option",{value:"WinTv",children:"WinTV"}),e.jsx("option",{value:"Apple Music",children:"Apple Music"}),e.jsx("option",{value:"Apple Tv",children:"Apple TV"}),e.jsx("option",{value:"Iptv",children:"IPTV"}),e.jsx("option",{value:"Flujo Tv",children:"Flujo TV"}),e.jsx("option",{value:"Viki Rakuten",children:"Viki Rakuten"}),e.jsx("option",{value:"Pornhub",children:"Pornhub"}),e.jsx("option",{value:"Paramount",children:"Paramount"}),e.jsx("option",{value:"Licencias",children:"Licencias"}),e.jsx("option",{value:"Capcut",children:"Capcut"}),e.jsx("option",{value:"Duolingo",children:"Duolingo"}),e.jsx("option",{value:"BuscaPersonas",children:"BuscaPersonas"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Tipo de cuenta*"}),e.jsxs("select",{name:"accountType",value:M.accountType,onChange:fe,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",children:[e.jsx("option",{value:"Premium",children:"Premium"}),e.jsx("option",{value:"Standard",children:"Standard"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Estado*"}),e.jsxs("select",{name:"status",value:M.status,onChange:fe,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",children:[e.jsx("option",{value:"En stock",children:"En stock"}),e.jsx("option",{value:"A pedido",children:"A pedido"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Stock*"}),e.jsx("input",{type:"number",name:"stock",value:M.stock,onChange:Le,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",min:"1",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Precio (S/)*"}),e.jsx("input",{type:"number",name:"price",value:M.price,onChange:fe,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Ej: 9.99",step:"0.01",min:"0",required:!0})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"renewal",checked:M.renewal,onChange:fe,className:"h-4 w-4 text-cyan-400 focus:ring-cyan-400 border-gray-600/50 rounded"}),e.jsx("label",{className:"ml-2 text-gray-300",children:"¿Tiene renovación?"})]})]}),M.renewal&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Precio de renovación (S/)*"}),e.jsx("input",{type:"number",name:"renewalPrice",value:M.renewalPrice,onChange:fe,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Ej: 8.99",step:"0.01",min:"0",required:!0})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Duración (días)"}),e.jsx("input",{type:"number",name:"duration",value:M.duration,onChange:fe,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Dejar vacío para ilimitado",min:"1"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-300 mb-2",children:["Teléfono de contacto ",M.status==="A pedido"?"*":""]}),e.jsx("input",{type:"text",name:"providerPhone",value:M.providerPhone,onChange:fe,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Ej: +51 987654321",required:M.status==="A pedido"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Detalles del producto"}),e.jsx("textarea",{name:"details",value:M.details,onChange:fe,rows:"3",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Describe los detalles y características del producto"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Términos y condiciones"}),e.jsx("textarea",{name:"terms",value:M.terms,onChange:fe,rows:"3",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Especifica los términos y condiciones de uso"})]}),M.status==="En stock"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Cuentas asociadas*"}),e.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Debe completar todas las cuentas según el stock indicado"}),e.jsx("div",{className:"space-y-4",children:M.accounts.map((ee,we)=>e.jsxs("div",{className:"border border-gray-600/50 rounded-xl p-4 bg-gray-700/50 backdrop-blur-sm",children:[e.jsxs("h4",{className:"text-sm font-medium text-white mb-3",children:["Cuenta ",we+1]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Correo electrónico*"}),e.jsx("input",{type:"email",value:ee.email,onChange:Ve=>ce(we,"email",Ve.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Contraseña*"}),e.jsx("input",{type:"text",value:ee.password,onChange:Ve=>ce(we,"password",Ve.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Perfil (opcional)"}),e.jsx("input",{type:"text",value:ee.profile,onChange:Ve=>ce(we,"profile",Ve.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm",placeholder:"Ej: Perfil 1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"PIN (opcional)"}),e.jsx("input",{type:"text",value:ee.pin,onChange:Ve=>ce(we,"pin",Ve.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm",placeholder:"Ej: 1234"})]})]})]},we))})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4",children:[e.jsx("button",{onClick:()=>a("inventario"),className:"px-4 py-2 bg-gray-700/50 text-gray-300 rounded-xl hover:bg-gray-600/50 transition-all duration-300",children:"Cancelar"}),e.jsx("button",{onClick:Tt,className:"px-6 py-2 bg-cyan-500 hover:bg-cyan-600 text-white font-medium rounded-xl transition-all duration-300",children:"Subir Producto"})]})]})]});case"ganancias":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6 flex items-center",children:[e.jsx(Es,{className:"mr-2"})," Ganancias"]}),e.jsx("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 mb-6 border border-gray-600/50 shadow-lg",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-white mb-1",children:"Ganancias totales"}),e.jsxs("p",{className:"text-sm text-gray-400",children:[f.length," ventas realizadas"]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Retirado: S/ ",$s.toFixed(2)]}),ne?e.jsx("p",{className:"text-sm text-gray-400",children:"Disponible: Cargando..."}):e.jsxs("p",{className:"text-sm text-gray-400",children:["Disponible: S/ ",(A||0).toFixed(2)]})]}),e.jsxs("div",{className:"text-3xl font-bold text-white mt-2 md:mt-0",children:["S/ ",sr.toFixed(2)]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Producto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Categoría"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Comprador"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Contacto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:f.map((ee,we)=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:ee.productName}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:xe(ee.category)}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-white",children:ee.buyer}),e.jsx("div",{className:"text-xs text-gray-400",children:ee.buyerEmail})]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:ee.buyerPhone}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:J(ee.date)}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-white",children:["S/ ",(ee.amount||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-900/80 text-green-400",children:"Completado"})})]},we))})]})}),f.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Es,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay ventas registradas"}),e.jsx("p",{className:"text-gray-400",children:"Tus ventas aparecerán aquí."})]})]});case"pedidos":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white",children:"Mis pedidos"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar pedidos...",className:"px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm placeholder-gray-500",value:F,onChange:ee=>Q(ee.target.value)}),e.jsx(Ze,{className:"absolute right-3 top-2.5 text-gray-400"})]})]}),f.length>0?e.jsx("div",{className:"space-y-6",children:f.filter(ee=>(ee.productName||"").toLowerCase().includes(F.toLowerCase())||(ee.category||"").toLowerCase().includes(F.toLowerCase())).map(ee=>{const we=ee.status==="pending",Ve=ee.status==="refunded",Ke=ee.daysRemaining||0,bt=ee.timeElapsedPercentage||0;let _t="bg-green-400";bt>70&&bt<=90?_t="bg-yellow-400":bt>90&&(_t="bg-red-400");const Mt=Ve?e.jsx(He,{className:"text-red-400"}):we?e.jsx(Ot,{className:"text-yellow-400"}):e.jsx($m,{className:"text-green-400"}),la=ee.buyerPhone?ee.buyerPhone.replace(/^\+/,"").replace(/\D/g,""):null,Ar=encodeURIComponent(`Hola ${ee.buyer||"Cliente"}, 😊

Soy el proveedor de tu suscripción ${ee.productName||"Sin nombre"} (N° Pedido: ${ee.id||"No especificado"}). ¿En qué puedo ayudarte hoy? Por favor, indícame tu consulta o problema.

Atentamente, BlackStreaming`),Is=encodeURIComponent(`Hola ${ee.buyer||"Cliente"}, 😊

Te informamos que tu suscripción ${ee.productName||"Sin nombre"} (N° Pedido: ${ee.id||"No especificado"}) vencerá en ${Ke} día${Ke===1?"":"s"}. Te recomendamos renovarla a tiempo.

Detalles:
- Fecha de vencimiento: ${J(ee.endDate)}
- Precio: S/ ${(ee.amount||0).toFixed(2)}

Si necesitas ayuda, contáctanos. ¡Gracias por tu preferencia!
Atentamente, BlackStreaming`);return e.jsxs("div",{className:"border border-gray-600/50 rounded-2xl overflow-hidden hover:shadow-2xl transition-all duration-300",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm px-4 py-3 border-b border-gray-600/50 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[Mt,e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white",children:ee.productName}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["Categoría: ",xe(ee.category)]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-white",children:["S/ ",(ee.amount||0).toFixed(2)]}),e.jsx("p",{className:`text-xs font-medium ${_t.replace("bg-","text-")}`,children:we?"Pendiente de activación":`${Ke} día${Ke===1?"":"s"} restante${Ke===1?"":"s"}`})]})]}),e.jsxs("div",{className:"p-4 bg-gray-700/50 backdrop-blur-sm",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"w-full bg-gray-600/50 rounded-full h-2.5",children:e.jsx("div",{className:`h-2.5 rounded-full ${_t}`,style:{width:`${Math.min(bt,100)}%`}})}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1 text-right",children:[bt.toFixed(0),"% completado"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsx("h5",{className:"text-sm font-medium text-cyan-400 mb-3",children:"Información del Comprador"}),e.jsxs("p",{className:"text-gray-300 text-sm",children:["Comprador: ",ee.buyer]}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["Teléfono: ",ee.buyerPhone]})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsx("h5",{className:"text-sm font-medium text-cyan-400 mb-3",children:"Detalles de la Cuenta"}),ee.accountDetails?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-gray-300",children:["Email: ",ee.accountDetails.email]}),e.jsxs("p",{className:"text-gray-400",children:["Contraseña: ",ee.accountDetails.password]}),e.jsxs("p",{className:"text-gray-400",children:["Perfil: ",ee.accountDetails.profile||"N/A"]}),e.jsxs("p",{className:"text-gray-400",children:["PIN: ",ee.accountDetails.pin||"N/A"]})]}):e.jsx("p",{className:"text-gray-400",children:"No disponible"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mt-4",children:[e.jsxs("button",{onClick:()=>us(ee),className:"flex-1 py-3 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-xl flex items-center justify-center gap-2 transition-all duration-300",title:"Editar cuenta",children:[e.jsx(sp,{size:18})," Editar Cuenta"]}),ee.status==="pending"&&e.jsxs("button",{onClick:()=>tr(ee.id),className:"flex-1 py-3 px-4 bg-green-600 hover:bg-green-700 text-white rounded-xl flex items-center justify-center gap-2 transition-all duration-300",title:"Activar pedido",children:[e.jsx(zu,{size:18})," Activar Pedido"]}),ee.buyerPhone&&e.jsxs(e.Fragment,{children:[e.jsxs("a",{href:`https://wa.me/${la}?text=${Ar}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300",children:[e.jsx(Zr,{size:18})," Contactar al comprador"]}),e.jsxs("a",{href:`https://wa.me/${la}?text=${Is}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-yellow-600 hover:bg-yellow-700 text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300",children:[e.jsx(Go,{size:18})," Avisar al comprador"]})]})]})]})]},ee.id)})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Xe,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay pedidos registrados"}),e.jsx("p",{className:"text-gray-400",children:"Los pedidos de tus productos aparecerán aquí."})]})]});case"retiros":return e.jsx("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:N?e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Solicitudes de Retiro Pendientes"}),D.length>0?e.jsx("div",{className:"space-y-6",children:D.map(ee=>e.jsxs("div",{className:"border border-gray-600/50 rounded-2xl p-4 hover:bg-gray-700/50 transition-all duration-300",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h4",{className:"font-semibold text-white",children:ee.provider}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["S/ ",(ee.amount||0).toFixed(2)]})]}),e.jsxs("p",{className:"text-gray-300",children:["Email: ",ee.providerEmail]}),e.jsxs("p",{className:"text-gray-400",children:["Método: ",ee.method]}),e.jsxs("p",{className:"text-gray-400",children:["Cuenta: ",ee.account]}),e.jsxs("p",{className:"text-gray-400",children:["Fecha: ",J(ee.createdAt)]}),e.jsxs("div",{className:"flex space-x-2 mt-2",children:[e.jsx("button",{onClick:()=>ss(ee.id,"approved"),className:"px-4 py-2 bg-green-600 text-white rounded-xl hover:bg-green-700 transition-all duration-300",children:"Aprobar"}),e.jsx("button",{onClick:()=>ss(ee.id,"rejected"),className:"px-4 py-2 bg-red-600 text-white rounded-xl hover:bg-red-700 transition-all duration-300",children:"Rechazar"})]})]},ee.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(tp,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay solicitudes pendientes"}),e.jsx("p",{className:"text-gray-400",children:"Las solicitudes de retiro aparecerán aquí"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Mis Retiros"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h4",{className:"text-lg font-medium text-white mb-4",children:"Solicitar Retiro"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Monto a retirar (S/)*"}),e.jsx("input",{type:"number",value:ue,onChange:ee=>me(ee.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Ej: 150.00",step:"0.01",min:"0",max:Ds}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Máximo disponible: S/ ",Ds.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Método de pago*"}),e.jsxs("select",{value:pe,onChange:ee=>Oe(ee.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",children:[e.jsx("option",{value:"Yape",children:"Yape"}),e.jsx("option",{value:"Plin",children:"Plin"}),e.jsx("option",{value:"Transferencia",children:"Transferencia Bancaria"}),e.jsx("option",{value:"Otro",children:"Otro"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Datos de la cuenta*"}),e.jsx("input",{type:"text",value:De,onChange:ee=>n(ee.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:pe==="Yape"?"Número de teléfono":"Número de cuenta",required:!0})]}),e.jsx("button",{onClick:yt,disabled:!ue||parseFloat(ue)<=0||parseFloat(ue)>Ds||!De,className:`w-full px-6 py-3 rounded-xl font-medium transition-all duration-300 ${ue&&parseFloat(ue)>0&&parseFloat(ue)<=Ds&&De?"bg-cyan-500 hover:bg-cyan-600 text-white":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:"Solicitar Retiro"})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h4",{className:"text-lg font-medium text-white mb-4",children:"Historial de Retiros"}),_e.length>0?e.jsx("div",{className:"space-y-4",children:_e.map(ee=>e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsxs("p",{className:"text-gray-300",children:["Monto: S/ ",(ee.amount||0).toFixed(2)]}),e.jsxs("p",{className:"text-gray-400",children:["Método: ",ee.method," - ",ee.account]}),e.jsxs("p",{className:"text-gray-400",children:[ee.status==="pending"?"Solicitado":"Procesado",": ",J(ee.status==="pending"?ee.createdAt:ee.processedAt)]}),e.jsxs("p",{className:"text-gray-400",children:["Estado: ",ee.status==="approved"?"Aprobado":ee.status==="rejected"?"Rechazado":"Pendiente"]})]},ee.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(tp,{className:"mx-auto text-3xl text-gray-400 mb-2"}),e.jsx("p",{className:"text-gray-400",children:"No hay retiros registrados"})]})]})]})]})});case"configuracion":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Configuración de cuenta"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre de usuario"}),e.jsx("input",{type:"text",value:i,disabled:!0,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-gray-400 border border-gray-600/50 cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Correo electrónico"}),e.jsx("input",{type:"email",value:Ae.email,disabled:!0,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-gray-400 border border-gray-600/50 cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nueva contraseña"}),e.jsx("input",{type:"password",name:"password",value:Ae.password,onChange:Me,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",placeholder:"Dejar vacío para no cambiar"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Preferencias"}),e.jsx("textarea",{name:"preferences",value:Ae.preferences,onChange:Me,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Escribe tus preferencias o notas",rows:"4"})]}),e.jsx("div",{className:"flex justify-end gap-3 pt-4",children:e.jsx("button",{onClick:wt,className:"px-6 py-2 bg-cyan-500 hover:bg-cyan-600 text-white font-medium rounded-xl transition-all duration-300",children:"Guardar Cambios"})})]})]});default:return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(He,{className:"mx-auto text-4xl text-yellow-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Sección no encontrada"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"La sección que estás buscando no existe o no está disponible."}),e.jsx("button",{onClick:()=>a("inicio"),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Volver al inicio"})]})}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200",children:[e.jsx("div",{className:"md:hidden fixed top-4 left-4 z-50",children:e.jsx("button",{onClick:()=>t(!s),className:"p-2 rounded-full bg-gray-800/50 backdrop-blur-sm hover:bg-gray-700/50 transition-all duration-300 border border-gray-700/50",children:e.jsx(Vt,{className:"text-xl"})})}),e.jsx("aside",{className:`fixed inset-y-0 left-0 transform ${s?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 bg-gray-900/90 backdrop-blur-md border-r border-gray-800/50 overflow-y-auto`,children:e.jsxs("div",{className:"p-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-cyan-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-1 rounded-full hover:bg-gray-700/50 transition-all duration-300",children:e.jsx(pt,{className:"text-lg"})})]}),e.jsxs("div",{className:"flex items-center space-x-3 mb-8 p-3 bg-gray-800/50 backdrop-blur-sm rounded-2xl border border-gray-700/50",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-cyan-500 flex items-center justify-center text-white font-bold",children:i.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:i}),e.jsx("p",{className:"text-xs text-gray-400",children:N?"Administrador":"Proveedor"})]})]}),e.jsx("nav",{className:"flex-1 space-y-2",children:[{id:"inicio",label:"Inicio",icon:Wm},{id:"inventario",label:"Inventario",icon:uu},{id:"subirProducto",label:"Subir Producto",icon:cF},{id:"ganancias",label:"Ganancias",icon:Es},{id:"pedidos",label:"Pedidos",icon:Xe},{id:"retiros",label:"Retiros",icon:tp},{id:"configuracion",label:"Configuración",icon:qm}].map(ee=>e.jsxs("button",{onClick:()=>{a(ee.id),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r===ee.id?"bg-cyan-500/20 text-cyan-400 border border-cyan-500/50":"text-gray-300 hover:bg-gray-800/50 hover:text-cyan-400"}`,children:[e.jsx(ee.icon,{className:"text-lg"}),e.jsx("span",{children:ee.label})]},ee.id))}),e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:Te,className:"w-full flex items-center space-x-3 px-4 py-3 text-red-400 hover:bg-red-900/20 rounded-xl transition-all duration-300 border border-red-900/50",children:[e.jsx(It,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 p-4 sm:p-6 min-h-screen",children:vr()}),e.jsx(kF,{isOpen:T.isOpen,title:T.title,message:T.message,onClose:$}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto border border-gray-700/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-white flex items-center",children:[e.jsx(sp,{className:"mr-2"})," Editar Producto"]}),e.jsx("button",{onClick:()=>O(!1),className:"text-gray-300 hover:text-white",children:e.jsx(pt,{size:24})})]}),u&&e.jsx("div",{className:"bg-red-900/80 border-l-4 border-red-500 p-4 mb-6 rounded-xl",children:e.jsxs("div",{className:"flex",children:[e.jsx(He,{className:"h-5 w-5 text-red-400"}),e.jsx("p",{className:"ml-3 text-sm text-red-300",children:u})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Imagen del producto"}),e.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-600/50 border-dashed rounded-xl bg-gray-700/50 backdrop-blur-sm",children:q!=null&&q.image?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:q.image,alt:"Preview",className:"mx-auto h-48 w-full object-contain"}),e.jsx("button",{type:"button",onClick:()=>G({...q,image:""}),className:"absolute top-0 right-0 bg-red-500 text-white rounded-full p-1",children:e.jsx(pt,{size:16})})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:e.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsx("div",{className:"flex text-sm text-gray-400 justify-center",children:e.jsxs("label",{htmlFor:"edit-file-upload",className:"relative cursor-pointer bg-gray-800/50 rounded-xl font-medium text-cyan-400 hover:text-cyan-500 focus-within:outline-none",children:[e.jsx("span",{children:"Subir una imagen"}),e.jsx("input",{id:"edit-file-upload",name:"edit-file-upload",type:"file",className:"sr-only",onChange:ee=>Ne(ee,!0),accept:"image/*"})]})}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF hasta 10MB"})]})})]}),e.jsxs("div",{className:"col-span-1 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre del producto*"}),e.jsx("input",{type:"text",name:"name",value:(q==null?void 0:q.name)||"",onChange:ee=>G({...q,name:ee.target.value}),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Ej: Netflix Premium 1 mes",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Categoría*"}),e.jsxs("select",{name:"category",value:(q==null?void 0:q.category)||"Netflix",onChange:ee=>G({...q,category:ee.target.value}),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",children:[e.jsx("option",{value:"Netflix",children:"Netflix"}),e.jsx("option",{value:"Spotify",children:"Spotify"}),e.jsx("option",{value:"Disney",children:"Disney+"}),e.jsx("option",{value:"Max",children:"Max"}),e.jsx("option",{value:"Prime Video",children:"Prime Video"}),e.jsx("option",{value:"Vix",children:"Vix"}),e.jsx("option",{value:"Crunchyroll",children:"Crunchyroll"}),e.jsx("option",{value:"Canva",children:"Canva"}),e.jsx("option",{value:"ChatGPT",children:"ChatGPT"}),e.jsx("option",{value:"Redes Sociales",children:"Redes Sociales"}),e.jsx("option",{value:"Dgo",children:"DGO"}),e.jsx("option",{value:"Liga Max",children:"Liga Max"}),e.jsx("option",{value:"Movistar Play",children:"Movistar Play"}),e.jsx("option",{value:"Youtube",children:"YouTube"}),e.jsx("option",{value:"Deezer",children:"Deezer"}),e.jsx("option",{value:"Tidal",children:"Tidal"}),e.jsx("option",{value:"Vpn",children:"VPN"}),e.jsx("option",{value:"WinTv",children:"WinTV"}),e.jsx("option",{value:"Apple Music",children:"Apple Music"}),e.jsx("option",{value:"Apple Tv",children:"Apple TV"}),e.jsx("option",{value:"Iptv",children:"IPTV"}),e.jsx("option",{value:"Flujo Tv",children:"Flujo TV"}),e.jsx("option",{value:"Viki Rakuten",children:"Viki Rakuten"}),e.jsx("option",{value:"Pornhub",children:"Pornhub"}),e.jsx("option",{value:"Paramount",children:"Paramount"}),e.jsx("option",{value:"Licencias",children:"Licencias"}),e.jsx("option",{value:"Capcut",children:"Capcut"}),e.jsx("option",{value:"Duolingo",children:"Duolingo"}),e.jsx("option",{value:"BuscaPersonas",children:"BuscaPersonas"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Tipo de cuenta*"}),e.jsxs("select",{name:"accountType",value:(q==null?void 0:q.accountType)||"Premium",onChange:ee=>G({...q,accountType:ee.target.value}),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",children:[e.jsx("option",{value:"Premium",children:"Premium"}),e.jsx("option",{value:"Standard",children:"Standard"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Estado*"}),e.jsxs("select",{name:"status",value:(q==null?void 0:q.status)||"En stock",onChange:ee=>G({...q,status:ee.target.value}),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",children:[e.jsx("option",{value:"En stock",children:"En stock"}),e.jsx("option",{value:"A pedido",children:"A pedido"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Stock*"}),e.jsx("input",{type:"number",name:"stock",value:(q==null?void 0:q.stock)||1,onChange:X,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",min:"1",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Precio (S/)*"}),e.jsx("input",{type:"number",name:"price",value:(q==null?void 0:q.price)||"",onChange:ee=>G({...q,price:ee.target.value}),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Ej: 9.99",step:"0.01",min:"0",required:!0})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"renewal",checked:(q==null?void 0:q.renewal)||!1,onChange:ee=>G({...q,renewal:ee.target.checked}),className:"h-4 w-4 text-cyan-400 focus:ring-cyan-400 border-gray-600/50 rounded"}),e.jsx("label",{className:"ml-2 text-gray-300",children:"¿Tiene renovación?"})]})]}),(q==null?void 0:q.renewal)&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Precio de renovación (S/)*"}),e.jsx("input",{type:"number",name:"renewalPrice",value:(q==null?void 0:q.renewalPrice)||"",onChange:ee=>G({...q,renewalPrice:ee.target.value}),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Ej: 8.99",step:"0.01",min:"0",required:!0})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Duración (días)"}),e.jsx("input",{type:"number",name:"duration",value:(q==null?void 0:q.duration)||"",onChange:ee=>G({...q,duration:ee.target.value}),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Dejar vacío para ilimitado",min:"1"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-300 mb-2",children:["Teléfono de contacto ",(q==null?void 0:q.status)==="A pedido"?"*":""]}),e.jsx("input",{type:"text",name:"providerPhone",value:(q==null?void 0:q.providerPhone)||"",onChange:ee=>G({...q,providerPhone:ee.target.value}),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Ej: +51 987654321",required:(q==null?void 0:q.status)==="A pedido"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Detalles del producto"}),e.jsx("textarea",{name:"details",value:(q==null?void 0:q.details)||"",onChange:ee=>G({...q,details:ee.target.value}),rows:"3",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Describe los detalles y características del producto"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Términos y condiciones"}),e.jsx("textarea",{name:"terms",value:(q==null?void 0:q.terms)||"",onChange:ee=>G({...q,terms:ee.target.value}),rows:"3",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Especifica los términos y condiciones de uso"})]}),(q==null?void 0:q.status)==="En stock"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Cuentas asociadas*"}),e.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Debe completar todas las cuentas según el stock indicado"}),e.jsx("div",{className:"space-y-4",children:(Hr=q==null?void 0:q.accounts)==null?void 0:Hr.map((ee,we)=>e.jsxs("div",{className:"border border-gray-600/50 rounded-xl p-4 bg-gray-700/50 backdrop-blur-sm",children:[e.jsxs("h4",{className:"text-sm font-medium text-white mb-3",children:["Cuenta ",we+1]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Correo electrónico*"}),e.jsx("input",{type:"email",value:ee.email||"",onChange:Ve=>ve(we,"email",Ve.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Contraseña*"}),e.jsx("input",{type:"text",value:ee.password||"",onChange:Ve=>ve(we,"password",Ve.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Perfil (opcional)"}),e.jsx("input",{type:"text",value:ee.profile||"",onChange:Ve=>ve(we,"profile",Ve.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm",placeholder:"Ej: Perfil 1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"PIN (opcional)"}),e.jsx("input",{type:"text",value:ee.pin||"",onChange:Ve=>ve(we,"pin",Ve.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm",placeholder:"Ej: 1234"})]})]})]},we))})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4",children:[e.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 bg-gray-700/50 text-gray-300 rounded-xl hover:bg-gray-600/50 transition-all duration-300",children:"Cancelar"}),e.jsx("button",{onClick:ts,className:"px-6 py-2 bg-cyan-500 hover:bg-cyan-600 text-white font-medium rounded-xl transition-all duration-300",children:"Guardar Cambios"})]})]})]})}),v&&e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Editar Detalles de la Cuenta"}),e.jsx("button",{onClick:()=>p(!1),className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(pt,{size:20})})]}),se&&e.jsx("div",{className:"bg-red-900/80 border-l-4 border-red-500 p-4 mb-6 rounded-xl",children:e.jsxs("div",{className:"flex",children:[e.jsx(He,{className:"h-5 w-5 text-red-400"}),e.jsx("p",{className:"ml-3 text-sm text-red-300",children:se})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Correo electrónico*"}),e.jsx("input",{type:"email",name:"email",value:(z==null?void 0:z.accountDetails.email)||"",onChange:st,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Contraseña*"}),e.jsx("input",{type:"text",name:"password",value:(z==null?void 0:z.accountDetails.password)||"",onChange:st,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Perfil (opcional)"}),e.jsx("input",{type:"text",name:"profile",value:(z==null?void 0:z.accountDetails.profile)||"",onChange:st,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",placeholder:"Ej: Perfil 1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"PIN (opcional)"}),e.jsx("input",{type:"text",name:"pin",value:(z==null?void 0:z.accountDetails.pin)||"",onChange:st,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",placeholder:"Ej: 1234"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4",children:[e.jsx("button",{onClick:()=>p(!1),className:"px-4 py-2 bg-gray-700/50 text-gray-300 rounded-xl hover:bg-gray-600/50 transition-all duration-300",children:"Cancelar"}),e.jsx("button",{onClick:js,className:"px-6 py-2 bg-cyan-500 hover:bg-cyan-600 text-white font-medium rounded-xl transition-all duration-300",children:"Actualizar Cuenta"})]})]})]})})})]})},PF=({isOpen:s,message:t,title:r,onClose:a})=>s?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:r}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(pt,{size:20})})]}),e.jsx("p",{className:"text-gray-300 mb-6",children:t}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:a,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})})]})})}):null,SF=({isOpen:s,user:t,onClose:r,onSave:a})=>{const[i,l]=b.useState((t==null?void 0:t.balance)||0),[o,c]=b.useState(""),d=x=>{if(x.preventDefault(),c(""),isNaN(i)||i<0){c("Por favor, ingrese un saldo válido (número no negativo).");return}a(t.id,parseFloat(i))};return s?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-white",children:["Editar Saldo de ",t.username]}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(pt,{size:20})})]}),e.jsxs("form",{onSubmit:d,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nuevo Saldo (S/)"}),e.jsx("input",{type:"number",value:i,onChange:x=>l(x.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",min:"0",step:"0.01",required:!0}),o&&e.jsx("p",{className:"text-red-400 text-sm mt-2",children:o})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 bg-gray-600 text-white rounded-xl hover:bg-gray-700 transition-all duration-300",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Guardar"})]})]})]})})}):null},EF=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState("inicio"),[i,l]=b.useState(""),[o,c]=b.useState(""),[d,x]=b.useState(0),[f,j]=b.useState([]),[w,S]=b.useState([]),[g,V]=b.useState([]),[E,_]=b.useState([]),[M,R]=b.useState([]),[q,G]=b.useState([]),[Y,O]=b.useState([]),[u,U]=b.useState([]),[F,Q]=b.useState(0),[T,W]=b.useState({day:0,week:0,month:0,total:0}),[Ae,Ue]=b.useState(!0),[_e,be]=b.useState({}),[ue,me]=b.useState(null),[pe,Oe]=b.useState(""),[De,n]=b.useState({isOpen:!1,message:"",title:""}),[N,h]=b.useState({isOpen:!1,user:null}),[D,H]=b.useState(!1),[ne,k]=b.useState({message:"",roles:{user:!1,affiliate:!1,provider:!1,admin:!1}}),A=Nt(),C=(X,ce)=>{n({isOpen:!0,title:X,message:ce})},v=()=>{n({isOpen:!1,message:"",title:""})},p=X=>{h({isOpen:!0,user:X})},z=()=>{h({isOpen:!1,user:null})},oe=async(X,ce)=>{try{be(st=>({...st,[`balance_${X}`]:!0}));const ve=B(I,"users",X);await rs(ve,{balance:ce,updatedAt:he()}),C("Éxito","Saldo actualizado exitosamente"),z()}catch(ve){console.error("Error al actualizar saldo:",ve),C("Error",ve.message||"Error al actualizar el saldo")}finally{be(ve=>({...ve,[`balance_${X}`]:!1}))}},se=async X=>{X.preventDefault();try{be(St=>({...St,notification:!0}));const{message:ce,roles:ve}=ne;if(!ce.trim())throw new Error("El mensaje no puede estar vacío");const st=Object.keys(ve).filter(St=>ve[St]);if(st.length===0)throw new Error("Debe seleccionar al menos un rol");const Tt=B(I,"notifications","adminMessage");await Vr(Tt,{message:ce.trim(),roles:st,updatedAt:he()}),k({message:"",roles:{user:!1,affiliate:!1,provider:!1,admin:!1}}),C("Éxito","Notificación enviada exitosamente")}catch(ce){console.error("Error al enviar notificación:",ce),C("Error",ce.message||"Error al enviar la notificación")}finally{be(ce=>({...ce,notification:!1}))}};b.useEffect(()=>{const X=Dt(We,ce=>{!ce&&!D?A("/login"):ce&&(c(ce.email),ie(ce.uid),Ue(!1))});return()=>X()},[A,D]);const ie=async X=>{try{const ce=B(I,"users",X),ve=await Ye(ce);if(ve.exists()){const st=ve.data();l(st.username||st.email.split("@")[0])}else me("Usuario no encontrado en la base de datos")}catch(ce){console.error("Error al obtener el nombre de usuario:",ce),me("Error al cargar datos del usuario")}},ae=X=>{const ve=X*5,st=ve*.25,Tt=ve*.05;W({day:Tt,week:st,month:ve,total:ve})};b.useEffect(()=>{(async()=>{try{const wt=await gt(Z(I,"users")),yt=wt.size,ss=wt.docs.map(we=>({id:we.id,...we.data()}));x(yt),j(ss.slice(-5)),S(ss),ae(yt);const us=ye(Z(I,"pendingRegistrations"),je("status","==","pending")),js=await gt(us);V(js.docs.map(we=>({id:we.id,...we.data()})));const tr=ye(Z(I,"pendingTopUps"),je("status","==","pendiente")),sr=await gt(tr);_(sr.docs.map(we=>({id:we.id,...we.data()})));const $s=ye(Z(I,"withdrawals"),je("status","==","pending")),on=await gt($s);R(on.docs.map(we=>({id:we.id,...we.data()})));const Ds=await gt(Z(I,"topUpsHistory"));G(Ds.docs.map(we=>({id:we.id,...we.data()})));const Da=await gt(Z(I,"withdrawalsHistory"));O(Da.docs.map(we=>({id:we.id,...we.data()})));const Hr=(await gt(Z(I,"sales"))).docs.map(we=>({id:we.id,...we.data()}));U(Hr);const ee=Hr.reduce((we,Ve)=>we+(Ve.price||0),0);Q(ee)}catch(wt){console.error("Error al obtener datos:",wt),me("Error al cargar datos")}})();const ce=Ce(Z(I,"users"),wt=>{const yt=wt.size,ss=wt.docs.map(us=>({id:us.id,...us.data()}));x(yt),j(ss.slice(-5)),S(ss),ae(yt)}),ve=Ce(ye(Z(I,"pendingRegistrations"),je("status","==","pending")),wt=>{V(wt.docs.map(yt=>({id:yt.id,...yt.data()})))}),st=Ce(ye(Z(I,"pendingTopUps"),je("status","==","pendiente")),wt=>{_(wt.docs.map(yt=>({id:yt.id,...yt.data()})))}),Tt=Ce(ye(Z(I,"withdrawals"),je("status","==","pending")),wt=>{R(wt.docs.map(yt=>({id:yt.id,...yt.data()})))}),St=Ce(Z(I,"topUpsHistory"),wt=>{G(wt.docs.map(yt=>({id:yt.id,...yt.data()})))}),ts=Ce(Z(I,"withdrawalsHistory"),wt=>{O(wt.docs.map(yt=>({id:yt.id,...yt.data()})))}),_s=Ce(Z(I,"sales"),wt=>{const yt=wt.docs.map(us=>({id:us.id,...us.data()}));U(yt);const ss=yt.reduce((us,js)=>us+(js.price||0),0);Q(ss)});return()=>{ce(),ve(),st(),Tt(),St(),ts(),_s()}},[]);const re=async X=>{try{be(Tt=>({...Tt,[X]:!0}));const ce=B(I,"withdrawals",X),ve=M.find(Tt=>Tt.id===X);if(!(ve!=null&&ve.providerId))throw new Error("Proveedor no encontrado para el retiro");await rs(ce,{status:"approved",updatedAt:he()});const st=B(I,"users",ve.providerId);await rs(st,{balance:tt(-ve.amount||0)}),await Vr(B(I,"withdrawalsHistory",X),{...ve,status:"approved",updatedAt:he()}),me(null),C("Éxito","Retiro aprobado exitosamente")}catch(ce){console.error("Error al aprobar retiro:",ce),me(ce.message||"Error al aprobar el retiro"),C("Error",ce.message||"Error al aprobar el retiro")}finally{be(ce=>({...ce,[X]:!1}))}},le=async X=>{try{be(st=>({...st,[X]:!0}));const ce=B(I,"withdrawals",X);await rs(ce,{status:"denied",updatedAt:he()});const ve=M.find(st=>st.id===X);await Vr(B(I,"withdrawalsHistory",X),{...ve,status:"denied",updatedAt:he()}),me(null),C("Éxito","Retiro rechazado exitosamente")}catch(ce){console.error("Error al rechazar retiro:",ce),me(ce.message||"Error al rechazar el retiro"),C("Error",ce.message||"Error al rechazar el retiro")}finally{be(ce=>({...ce,[X]:!1}))}},$=async X=>{try{be(Tt=>({...Tt,[X]:!0}));const ce=B(I,"pendingTopUps",X),ve=E.find(Tt=>Tt.id===X);if(!(ve!=null&&ve.userId))throw new Error("Usuario no encontrado para la recarga");await rs(ce,{status:"aprobado",updatedAt:he()});const st=B(I,"users",ve.userId);await rs(st,{balance:tt(ve.amount||0)}),await Vr(B(I,"topUpsHistory",X),{...ve,status:"aprobado",updatedAt:he()}),me(null),C("Éxito","Recarga aprobada exitosamente")}catch(ce){console.error("Error al aprobar recarga:",ce),me(ce.message||"Error al aprobar la recarga"),C("Error",ce.message||"Error al aprobar la recarga")}finally{be(ce=>({...ce,[X]:!1}))}},J=async X=>{try{be(st=>({...st,[X]:!0}));const ce=B(I,"pendingTopUps",X);await rs(ce,{status:"rechazado",updatedAt:he()});const ve=E.find(st=>st.id===X);await Vr(B(I,"topUpsHistory",X),{...ve,status:"rechazado",updatedAt:he()}),me(null),C("Éxito","Recarga rechazada exitosamente")}catch(ce){console.error("Error al rechazar recarga:",ce),me(ce.message||"Error al rechazar la recarga"),C("Error",ce.message||"Error al rechazar la recarga")}finally{be(ce=>({...ce,[X]:!1}))}},xe=async X=>{try{be(ts=>({...ts,[X]:!0})),H(!0);const ce=B(I,"pendingRegistrations",X),ve=g.find(ts=>ts.id===X);if(!ve)throw new Error("Solicitud no encontrada");if((await GM(We,ve.email)).length>0)throw new Error("El correo ya está registrado");const St=(await WM(We,ve.email,ve.password)).user;await Vr(B(I,"users",St.uid),{username:ve.username,email:ve.email,phone:ve.phone||null,role:ve.role||"usuario",balance:0,referrerCode:ve.referrerCode||null,createdAt:he()}),await rs(ce,{status:"approved",updatedAt:he()}),await Bc(We),me(null),C("Éxito","Solicitud de registro aprobada exitosamente")}catch(ce){console.error("Error al aceptar solicitud:",ce),me(ce.message||"Error al aceptar la solicitud de registro"),C("Error",ce.message||"Error al aceptar la solicitud de registro")}finally{be(ce=>({...ce,[X]:!1})),H(!1)}},ke=async X=>{try{be(ve=>({...ve,[X]:!0}));const ce=B(I,"pendingRegistrations",X);await rs(ce,{status:"denied",updatedAt:he()}),me(null),C("Éxito","Solicitud de registro rechazada exitosamente")}catch(ce){console.error("Error al rechazar solicitud:",ce),me(ce.message||"Error al rechazar la solicitud de registro"),C("Error",ce.message||"Error al rechazar la solicitud de registro")}finally{be(ce=>({...ce,[X]:!1}))}},Te=async()=>{try{await Bc(We),A("/")}catch(X){console.error("Error al cerrar sesión:",X),me(X.message||"Error al cerrar sesión"),C("Error",X.message||"Error al cerrar sesión")}},fe=async X=>{X.preventDefault();try{be(Tt=>({...Tt,config:!0}));const ce=We.currentUser;if(!ce)throw new Error("Usuario no autenticado");const ve=B(I,"users",ce.uid);await rs(ve,{username:i,updatedAt:he()});const st=X.target.password.value;if(st){if(st.length<6)throw new Error("La contraseña debe tener al menos 6 caracteres");await Jg(ce,st)}me(null),C("Éxito","Cambios guardados exitosamente")}catch(ce){console.error("Error al guardar cambios:",ce),me(ce.message||"Error al guardar cambios"),C("Error",ce.message||"Error al guardar cambios")}finally{be(ce=>({...ce,config:!1}))}},Me=X=>{if(!X)return"No especificada";try{const ce=X.toDate?X.toDate():new Date(X);return isNaN(ce.getTime())?"Fecha inválida":ce.toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Fecha inválida"}},Ne=X=>{if(X.status==="pending")return"Pendiente";if(!X.expirationDate)return"Activo";const ce=new Date,ve=X.expirationDate.toDate?X.expirationDate.toDate():new Date(X.expirationDate);return ce>ve?"Expirado":"Activo"},Le=()=>{if(Ae)return e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-cyan-400"})});if(ue)return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(He,{className:"mx-auto text-4xl text-red-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-4",children:ue}),e.jsx("button",{onClick:()=>me(null),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})]});switch(r){case"inicio":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-6",children:["Bienvenido, ",e.jsx("span",{className:"text-cyan-400",children:i})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Información de cuenta"}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-cyan-400"}),e.jsx("span",{children:i})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx(Zr,{className:"mr-2 text-cyan-400"}),e.jsx("span",{children:o})]})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Ganancias del mes"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",T.month.toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-300 mt-1",children:"(5 soles por cada usuario)"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Usuarios registrados"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:d}),e.jsxs("p",{className:"text-sm text-gray-300 mt-1",children:["Total Gananacias: S/ ",T.total.toFixed(2)]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Últimos usuarios"}),f.length>0?f.map(X=>e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"font-medium text-white",children:X.username||"Sin nombre"}),e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-cyan-900/80 text-cyan-400",children:X.role||"usuario"})]}),e.jsx("p",{className:"text-sm text-gray-400",children:X.email})]},X.id)):e.jsx("p",{className:"text-gray-400 py-2",children:"No hay usuarios registrados"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Solicitudes pendientes"}),g.length>0?g.slice(0,3).map(X=>e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"font-medium text-white",children:X.username||"Sin nombre"}),e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-purple-900/80 text-purple-400",children:X.role||"usuario"})]}),e.jsx("p",{className:"text-sm text-gray-400",children:X.email})]},X.id)):e.jsx("p",{className:"text-gray-400 py-2",children:"No hay solicitudes pendientes"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Retiros pendientes"}),M.length>0?M.slice(0,3).map(X=>e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"font-medium text-white",children:X.provider||"Sin proveedor"}),e.jsxs("span",{className:"text-xs px-2 py-1 rounded-full bg-yellow-900/80 text-yellow-400",children:["S/ ",(X.amount||0).toFixed(2)]})]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Método: ",X.method||"No especificado"]})]},X.id)):e.jsx("p",{className:"text-gray-400 py-2",children:"No hay retiros pendientes"})]})]})]});case"notificaciones":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Enviar Notificación"}),e.jsxs("form",{onSubmit:se,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Mensaje de la Notificación"}),e.jsx("textarea",{value:ne.message,onChange:X=>k({...ne,message:X.target.value}),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all resize-y",rows:"5",placeholder:"Escribe el mensaje para los usuarios...",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Enviar a los siguientes roles"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:["user","affiliate","provider","admin"].map(X=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:ne.roles[X],onChange:ce=>k({...ne,roles:{...ne.roles,[X]:ce.target.checked}}),className:"h-4 w-4 text-cyan-400 focus:ring-cyan-400 border-gray-600 rounded"}),e.jsx("span",{className:"text-gray-300 capitalize",children:X})]},X))})]}),e.jsx("button",{type:"submit",disabled:_e.notification,className:"w-full py-3 px-4 bg-cyan-500 hover:bg-cyan-600 text-white rounded-xl font-medium transition-all duration-300 disabled:bg-cyan-800",children:_e.notification?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Enviar Notificación"})]})]});case"usuarios":return e.jsxs("div",{className:"space-y-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4",children:"Solicitudes de registro"}),g.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Usuario"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Rol"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:g.map(X=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:X.username||"Sin nombre"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:X.email}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-cyan-900/80 text-cyan-400",children:X.role||"usuario"})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>xe(X.id),disabled:_e[X.id],className:"p-2 bg-green-600 hover:bg-green-700 text-white rounded-xl transition-all duration-300 disabled:bg-green-800",title:"Aceptar",children:_e[X.id]?e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white rounded-full border-t-transparent"}):e.jsx(zu,{size:16})}),e.jsx("button",{onClick:()=>ke(X.id),disabled:_e[X.id],className:"p-2 bg-red-600 hover:bg-red-700 text-white rounded-xl transition-all duration-300 disabled:bg-red-800",title:"Rechazar",children:_e[X.id]?e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white rounded-full border-t-transparent"}):e.jsx(pt,{size:16})})]})})]},X.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(cc,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-300",children:"No hay solicitudes de registro pendientes"})]})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white",children:["Todos los usuarios (",d,")"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar usuarios...",className:"px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm placeholder-gray-500",value:pe,onChange:X=>Oe(X.target.value)}),e.jsx(e0,{className:"absolute right-3 top-2.5 text-gray-400"})]})]}),w.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Usuario"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Rol"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Saldo"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:w.filter(X=>(X.username||"").toLowerCase().includes(pe.toLowerCase())||(X.email||"").toLowerCase().includes(pe.toLowerCase())).map(X=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:X.username||"Sin nombre"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:X.email}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-cyan-900/80 text-cyan-400",children:X.role||"usuario"})}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:["S/ ",(X.balance||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("button",{onClick:()=>p(X),disabled:_e[`balance_${X.id}`],className:"p-2 bg-blue-600 hover:bg-blue-700 text-white rounded-xl transition-all duration-300 disabled:bg-blue-800",title:"Editar Saldo",children:_e[`balance_${X.id}`]?e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white rounded-full border-t-transparent"}):e.jsx(Oy,{size:16})})})]},X.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(cc,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-300",children:"No hay usuarios registrados"})]})]})]});case"recargas":return e.jsxs("div",{className:"space-y-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Recargas pendientes"}),E.length>0?e.jsx("div",{className:"space-y-4",children:E.map(X=>e.jsxs("div",{className:"border border-gray-600/50 rounded-2xl overflow-hidden hover:shadow-2xl transition-all duration-300",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm px-4 py-3 border-b border-gray-600/50 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-cyan-900/80 rounded-full flex items-center justify-center text-cyan-400",children:e.jsx(Es,{size:18})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white",children:X.username||"Sin nombre"}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Solicitado: ",Me(X.requestedAt)]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-lg font-medium text-white",children:["S/ ",(X.amount||0).toFixed(2)]})})]}),e.jsx("div",{className:"p-4 bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("button",{onClick:()=>$(X.id),disabled:_e[X.id],className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 disabled:bg-green-800 transition-all duration-300",children:_e[X.id]?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):e.jsxs(e.Fragment,{children:[e.jsx(zu,{size:18})," Aprobar Recarga"]})}),e.jsx("button",{onClick:()=>J(X.id),disabled:_e[X.id],className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 disabled:bg-red-800 transition-all duration-300",children:_e[X.id]?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):e.jsxs(e.Fragment,{children:[e.jsx(pt,{size:18})," Rechazar Recarga"]})})]})})]},X.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Es,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay recargas pendientes"}),e.jsx("p",{className:"text-gray-400",children:"Todas las solicitudes han sido procesadas"})]})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4",children:"Historial de recargas"}),q.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Usuario"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:q.map(X=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:X.username||"Sin nombre"}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:["S/ ",(X.amount||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${X.status==="aprobado"?"bg-green-900/80 text-green-400":"bg-red-900/80 text-red-400"}`,children:X.status})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:Me(X.updatedAt)})]},X.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Es,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-300",children:"No hay historial de recargas"})]})]})]});case"retiros":return e.jsxs("div",{className:"space-y-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Solicitudes de retiro"}),M.length>0?e.jsx("div",{className:"space-y-4",children:M.map(X=>e.jsxs("div",{className:"border border-gray-600/50 rounded-2xl overflow-hidden hover:shadow-2xl transition-all duration-300",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm px-4 py-3 border-b border-gray-600/50 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-yellow-900/80 rounded-full flex items-center justify-center text-yellow-400",children:e.jsx(Es,{size:18})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white",children:X.provider||"Sin proveedor"}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Email: ",X.providerEmail||"No disponible"]}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Solicitado: ",Me(X.createdAt)]}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Método: ",X.method||"No especificado"]}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Cuenta: ",X.account||"No especificada"]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-lg font-medium text-white",children:["S/ ",(X.amount||0).toFixed(2)]})})]}),e.jsx("div",{className:"p-4 bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("button",{onClick:()=>re(X.id),disabled:_e[X.id],className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 disabled:bg-green-800 transition-all duration-300",children:_e[X.id]?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):e.jsxs(e.Fragment,{children:[e.jsx(zu,{size:18})," Aprobar Retiro"]})}),e.jsx("button",{onClick:()=>le(X.id),disabled:_e[X.id],className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 disabled:bg-red-800 transition-all duration-300",children:_e[X.id]?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):e.jsxs(e.Fragment,{children:[e.jsx(pt,{size:18})," Rechazar Retiro"]})})]})})]},X.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Es,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay retiros pendientes"}),e.jsx("p",{className:"text-gray-400",children:"Todas las solicitudes han sido procesadas"})]})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4",children:"Historial de retiros"}),Y.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Proveedor"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Método"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:Y.map(X=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:X.provider||"Sin proveedor"}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:["S/ ",(X.amount||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${X.status==="approved"?"bg-green-900/80 text-green-400":"bg-red-900/80 text-red-400"}`,children:X.status})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:Me(X.updatedAt)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:X.method||"No especificado"})]},X.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Es,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-300",children:"No hay historial de retiros"})]})]})]});case"pedidos":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4",children:"Ventas General"}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-6 text-center mb-6 border border-gray-600/50",children:[e.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Total Ventas"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",F.toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-300 mt-2",children:"Suma de todos los pedidos realizados"})]}),e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4",children:"Historial de Pedidos"}),u.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Nombre del Producto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Precio"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Proveedor"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Usuario Comprador"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha y Hora de Compra"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Detalles de la Cuenta"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:u.map(X=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:X.productName||"Sin nombre"}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:["S/ ",(X.price||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:X.provider||"Sin proveedor"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:X.customerName||"Sin usuario"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:Me(X.purchaseDate)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${Ne(X)==="Pendiente"?"bg-yellow-900/80 text-yellow-400":Ne(X)==="Activo"?"bg-green-900/80 text-green-400":"bg-red-900/80 text-red-400"}`,children:Ne(X)})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:X.accountDetails?`Email: ${X.accountDetails.email||"N/A"}, Contraseña: ${X.accountDetails.password||"N/A"}, Perfil: ${X.accountDetails.profile||"N/A"}, PIN: ${X.accountDetails.pin||"No especificado"}`:"N/A"})]},X.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Xe,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-300",children:"No hay pedidos registrados"})]})]});case"ganancias":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Reporte de ganancias"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-6 text-center border border-gray-600/50 shadow-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Ganancias hoy"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",T.day.toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-300 mt-2",children:"(5 soles por usuario)"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-6 text-center border border-gray-600/50 shadow-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Ganancias esta semana"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",T.week.toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-300 mt-2",children:"(25% del total de usuarios)"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-6 text-center border border-gray-600/50 shadow-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Ganancias este mes"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",T.month.toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-300 mt-2",children:"(5 soles por cada usuario)"})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-white",children:"Resumen de ganancias"}),e.jsxs("span",{className:"px-3 py-1 bg-cyan-900/80 text-cyan-400 rounded-full text-sm",children:["Total: S/ ",T.total.toFixed(2)]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-600/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Concepto"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Valor"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Cálculo"})]})}),e.jsxs("tbody",{className:"bg-gray-700/50 divide-y divide-gray-600/50",children:[e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-gray-300",children:"Ganancias por usuario"}),e.jsx("td",{className:"px-4 py-3 text-white",children:"S/ 5.00"}),e.jsx("td",{className:"px-4 py-3 text-gray-400",children:"Fijo por cada usuario registrado"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-gray-300",children:"Total usuarios"}),e.jsx("td",{className:"px-4 py-3 text-white",children:d}),e.jsx("td",{className:"px-4 py-3 text-gray-400",children:"Usuarios activos en el sistema"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-gray-300",children:"Ganancias totales"}),e.jsxs("td",{className:"px-4 py-3 text-white",children:["S/ ",T.total.toFixed(2)]}),e.jsxs("td",{className:"px-4 py-3 text-gray-400",children:[d," usuarios × S/ 5.00"]})]})]})]})})]})]});case"configuracion":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Configuración de cuenta"}),e.jsxs("form",{onSubmit:fe,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre de usuario"}),e.jsx("input",{type:"text",value:i,onChange:X=>l(X.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Correo electrónico"}),e.jsx("input",{type:"email",value:o,readOnly:!0,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-gray-400 border border-gray-600/50 cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nueva contraseña (opcional)"}),e.jsx("input",{type:"password",name:"password",placeholder:"Nueva contraseña",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all"})]}),e.jsx("button",{type:"submit",disabled:_e.config,className:"w-full py-3 px-4 bg-cyan-500 hover:bg-cyan-600 text-white rounded-xl font-medium mt-4 transition-all duration-300 disabled:bg-cyan-800",children:_e.config?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Guardar cambios"})]}),e.jsx("div",{className:"mt-8 border-t border-gray-600/50 pt-6",children:e.jsxs("button",{onClick:Te,className:"flex items-center justify-center gap-2 w-full py-3 px-4 bg-red-900/80 hover:bg-red-800 text-white rounded-xl font-medium transition-all duration-300",children:[e.jsx(It,{})," Cerrar sesión"]})})]});default:return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(He,{className:"mx-auto text-4xl text-yellow-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Sección no encontrada"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"La sección que estás buscando no existe o no está disponible."}),e.jsx("button",{onClick:()=>a("inicio"),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Volver al inicio"})]})}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200",children:[e.jsx("div",{className:"md:hidden fixed top-4 left-4 z-50",children:e.jsx("button",{onClick:()=>t(!s),className:"p-2 rounded-full bg-gray-800/50 backdrop-blur-sm hover:bg-gray-700/50 transition-all duration-300 border border-gray-700/50",children:e.jsx(Vt,{className:"text-xl"})})}),e.jsx("aside",{className:`fixed inset-y-0 left-0 transform ${s?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 bg-gray-900/90 backdrop-blur-md border-r border-gray-800/50 overflow-y-auto`,children:e.jsxs("div",{className:"p-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-cyan-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-1 rounded-full hover:bg-gray-700/50 transition-all duration-300",children:e.jsx(pt,{className:"text-lg"})})]}),e.jsxs("div",{className:"flex items-center space-x-3 mb-8 p-3 bg-gray-800/50 backdrop-blur-sm rounded-2xl border border-gray-700/50",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-cyan-500 flex items-center justify-center text-white font-bold",children:i.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text white",children:i}),e.jsx("p",{className:"text-xs text-gray-400",children:"Administrador"})]})]}),e.jsx("nav",{className:"flex-1 space-y-2",children:[{id:"inicio",label:"Inicio",icon:Wm},{id:"notificaciones",label:"Notificaciones",icon:Go},{id:"usuarios",label:"Usuarios",icon:cc},{id:"recargas",label:"Recargas",icon:Es},{id:"retiros",label:"Retiros",icon:Es},{id:"pedidos",label:"Pedidos",icon:Xe},{id:"ganancias",label:"Ganancias",icon:G0},{id:"configuracion",label:"Configuración",icon:qm}].map(X=>e.jsxs("button",{onClick:()=>{a(X.id),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r===X.id?"bg-cyan-500/20 text-cyan-400 border border-cyan-500/50":"text-gray-300 hover:bg-gray-800/50 hover:text-cyan-400"}`,children:[e.jsx(X.icon,{className:"text-lg"}),e.jsx("span",{children:X.label})]},X.id))}),e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:Te,className:"w-full flex items-center space-x-3 px-4 py-3 text-red-400 hover:bg-red-900/20 rounded-xl transition-all duration-300 border border-red-900/50",children:[e.jsx(It,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 p-4 sm:p-6 min-h-screen",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:Le()})}),e.jsx(PF,{isOpen:De.isOpen,title:De.title,message:De.message,onClose:v}),e.jsx(SF,{isOpen:N.isOpen,user:N.user,onClose:z,onSave:oe})]})},CF=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,_]=b.useState(null),[M,R]=b.useState(!1),[q,G]=b.useState(!1),[Y,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,Q]=b.useState(""),T=Nt(),W=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(B(I,"users",N.uid));if(h.exists()){const D=h.data();c({id:N.uid,name:D.username||"Usuario",email:N.email,orders:D.orders||[],role:D.role||"user",phone:D.phone||""}),x(Number(D.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=ye(Z(I,"products"),je("category","==","Netflix")),N=Ce(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(B(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,netflix:C.length}))},k=>{S("Error al cargar productos de Netflix"),console.error(k)}),h=ye(Z(I,"netflix_accounts"),je("status","==","available")),D=Ce(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ne=["Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=ye(Z(I,"products"),je("category","==",k));return Ce(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),D(),ne.forEach(k=>k())}},[]);const Ae=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>T("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ue=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const D=B(I,"products",n.id),H=await h.get(D);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=ye(k,je("status","==","available"),zt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,z=v.data(),oe=B(I,"users",o.id),se=await h.get(oe);if(!se.exists())throw new Error("Usuario no encontrado");const ie=B(I,"users",n.providerId),ae=await h.get(ie);if(!ae.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),le=await h.get(re);let $=0;le.exists()?$=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});let J=n.providerPhone||"";J||(J=ae.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(D,{availableAccounts:tt(-1),stock:tt(-1)});const ke=(Number(se.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Te=se.data().orders||[],fe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},terms:n.terms,type:"netflix"};h.update(oe,{balance:ke,orders:[...Te,fe]});const Ne=(Number(ae.data().balance)||0)+n.price,Le=ae.data().sales||[],X={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ie,{balance:Ne,sales:[...Le,X]});const ce=$+n.price;h.set(re,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const ve=B(Z(I,"sales"));return h.set(ve,{...fe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleId:X.saleId,terms:n.terms}),z}):await at(I,async h=>{const D=B(I,"users",o.id),H=await h.get(D);if(!H.exists())throw new Error("Usuario no encontrado");const ne=B(I,"users",n.providerId),k=await h.get(ne);if(!k.exists())throw new Error("Proveedor no encontrado");const A=B(I,"providerBalances",n.providerId),C=await h.get(A);let v=0;C.exists()?v=parseFloat(C.data().balance)||0:h.set(A,{balance:0,provider:n.providerId,updatedAt:he()});let p=n.providerPhone||"";p||(p=k.data().phoneNumber||"");const oe=(Number(H.data().balance)||0)-n.price;if(oe<0)throw new Error("Saldo insuficiente");const se=H.data().orders||[],ie={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"netflix"};h.update(D,{balance:oe,orders:[...se,ie]});const re=(Number(k.data().balance)||0)+n.price,le=k.data().sales||[],$={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ne,{balance:re,sales:[...le,$]});const J=v+n.price;h.set(A,{balance:J,provider:n.providerId,updatedAt:he()},{merge:!0});const xe=B(Z(I,"sales"));h.set(xe,{...ie,provider:n.provider,providerId:n.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:$.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},_e=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{_({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),R(!0)},ue=()=>{if(!o){T("/login");return}(o==null?void 0:o.role)==="user"?T("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?T("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?T("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&T("/dashboard/admin")},me=n=>{n.preventDefault(),F.trim()&&T(`/search?q=${encodeURIComponent(F)}&category=Netflix`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Oe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const D=n.match(/(\d+)/);return D?`${parseInt(D[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-red-500 text-white rounded-full hover:bg-red-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-red-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Netflix...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all placeholder-gray-500",value:F,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:me,className:"absolute right-3 text-gray-400 hover:text-red-400 transition-all",children:e.jsx(Ze,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-red-400"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-red-400",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),T("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-600/80 hover:bg-red-700 transition-all text-sm text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>T("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-red-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>T("/register"),className:"px-4 py-2 rounded-full bg-red-500 text-white hover:bg-red-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-red-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-red-600/30 text-white border border-red-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ze,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1522869635100-9f4c5e86aa37?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Netflix"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de tus series y películas favoritas con nuestras cuentas premium de Netflix"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-red-400 hover:text-red-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Oe(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-green-400 text-sm",children:["Renovación - S/ ",W(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-red-400",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-red-400",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-red-400",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-red-400",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",W(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>_e(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Fe,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>be(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg                           gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Pe,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>Ae(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-red-500 hover:bg-red-600":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-red-400"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",W(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-400 bg-gray-700 border-gray-600 rounded focus:ring-red-400"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>be(g.product),className:"text-red-400 hover:text-red-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-red-400 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ue,disabled:f,className:`px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-red-400"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>_(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-red-400"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{R(!1),_(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>R(!1),className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-all",children:"Volver a Compra"})]})]})}),q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-red-400"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-red-400"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),O(null)},className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-all",children:"Aceptar"})})]})})]})},TF=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,_]=b.useState(null),[M,R]=b.useState(!1),[q,G]=b.useState(!1),[Y,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,Q]=b.useState(""),T=Nt(),W=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(B(I,"users",N.uid));if(h.exists()){const D=h.data();c({id:N.uid,name:D.username||"Usuario",email:N.email,orders:D.orders||[],role:D.role||"user",phone:D.phone||""}),x(Number(D.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=ye(Z(I,"products"),je("category","==","Disney")),N=Ce(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(B(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,disney:C.length}))},k=>{S("Error al cargar productos de Disney"),console.error(k)}),h=ye(Z(I,"disney_accounts"),je("status","==","available")),D=Ce(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=ye(Z(I,"products"),je("category","==",k));return Ce(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),D(),ne.forEach(k=>k())}},[]);const Ae=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>T("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ue=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const D=B(I,"products",n.id),H=await h.get(D);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=ye(k,je("status","==","available"),zt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,z=v.data(),oe=B(I,"users",o.id),se=await h.get(oe);if(!se.exists())throw new Error("Usuario no encontrado");const ie=B(I,"users",n.providerId),ae=await h.get(ie);if(!ae.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),le=await h.get(re);let $=0;le.exists()?$=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});let J=n.providerPhone||"";J||(J=ae.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(D,{availableAccounts:tt(-1),stock:tt(-1)});const ke=(Number(se.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Te=se.data().orders||[],fe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},terms:n.terms,type:"disney"};h.update(oe,{balance:ke,orders:[...Te,fe]});const Ne=(Number(ae.data().balance)||0)+n.price,Le=ae.data().sales||[],X={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ie,{balance:Ne,sales:[...Le,X]});const ce=$+n.price;h.set(re,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const ve=B(Z(I,"sales"));return h.set(ve,{...fe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleId:X.saleId,terms:n.terms}),z}):await at(I,async h=>{const D=B(I,"users",o.id),H=await h.get(D);if(!H.exists())throw new Error("Usuario no encontrado");const ne=B(I,"users",n.providerId),k=await h.get(ne);if(!k.exists())throw new Error("Proveedor no encontrado");const A=B(I,"providerBalances",n.providerId),C=await h.get(A);let v=0;C.exists()?v=parseFloat(C.data().balance)||0:h.set(A,{balance:0,provider:n.providerId,updatedAt:he()});let p=n.providerPhone||"";p||(p=k.data().phoneNumber||"");const oe=(Number(H.data().balance)||0)-n.price;if(oe<0)throw new Error("Saldo insuficiente");const se=H.data().orders||[],ie={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"disney"};h.update(D,{balance:oe,orders:[...se,ie]});const re=(Number(k.data().balance)||0)+n.price,le=k.data().sales||[],$={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ne,{balance:re,sales:[...le,$]});const J=v+n.price;h.set(A,{balance:J,provider:n.providerId,updatedAt:he()},{merge:!0});const xe=B(Z(I,"sales"));h.set(xe,{...ie,provider:n.provider,providerId:n.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:$.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},_e=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{_({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),R(!0)},ue=()=>{if(!o){T("/login");return}(o==null?void 0:o.role)==="user"?T("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?T("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?T("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&T("/dashboard/admin")},me=n=>{n.preventDefault(),F.trim()&&T(`/search?q=${encodeURIComponent(F)}&category=Disney`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Oe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-blue-400 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const D=n.match(/(\d+)/);return D?`${parseInt(D[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-blue-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-blue-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-blue-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Disney...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500",value:F,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:me,className:"absolute right-3 text-gray-400 hover:text-blue-400 transition-all",children:e.jsx(Ze,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-blue-400"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-blue-400",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),T("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-blue-600/80 hover:bg-blue-700 transition-all text-sm text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>T("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-blue-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>T("/register"),className:"px-4 py-2 rounded-full bg-blue-500 text-white hover:bg-blue-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-blue-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-blue-600/30 text-white border border-blue-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ze,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1616469829719-5db2df7f3a88?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Disney+"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de tus películas y series favoritas con nuestras cuentas premium de Disney+"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-blue-400 hover:text-blue-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Oe(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-green-400 text-sm",children:["Renovación - S/ ",W(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-blue-400",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-blue-400",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-blue-400",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-blue-400",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",W(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>_e(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Fe,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>be(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Pe,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>Ae(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-blue-500 hover:bg-blue-600":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-blue-400"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",W(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-blue-400 bg-gray-700 border-gray-600 rounded focus:ring-blue-400"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>be(g.product),className:"text-blue-400 hover:text-blue-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-blue-400 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ue,disabled:f,className:`px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-blue-400"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>_(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-blue-400"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{R(!1),_(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>R(!1),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Volver a Compra"})]})]})}),q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-blue-400"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-blue-400"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),O(null)},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Aceptar"})})]})})]})},_F=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,_]=b.useState(null),[M,R]=b.useState(!1),[q,G]=b.useState(!1),[Y,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,Q]=b.useState(""),T=Nt(),W=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(B(I,"users",N.uid));if(h.exists()){const D=h.data();c({id:N.uid,name:D.username||"Usuario",email:N.email,orders:D.orders||[],role:D.role||"user",phone:D.phone||""}),x(Number(D.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=ye(Z(I,"products"),je("category","==","Max")),N=Ce(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(B(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,max:C.length}))},k=>{S("Error al cargar productos de Max"),console.error(k)}),h=ye(Z(I,"max_accounts"),je("status","==","available")),D=Ce(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=ye(Z(I,"products"),je("category","==",k));return Ce(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),D(),ne.forEach(k=>k())}},[]);const Ae=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>T("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ue=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const D=B(I,"products",n.id),H=await h.get(D);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=ye(k,je("status","==","available"),zt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,z=v.data(),oe=B(I,"users",o.id),se=await h.get(oe);if(!se.exists())throw new Error("Usuario no encontrado");const ie=B(I,"users",n.providerId),ae=await h.get(ie);if(!ae.exists())throw new Error("Proveedor no encontrado");let re=n.providerPhone||"";re||(re=ae.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(D,{availableAccounts:tt(-1),stock:tt(-1)});const $=(Number(se.data().balance)||0)-n.price;if($<0)throw new Error("Saldo insuficiente");const J=se.data().orders||[],xe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:re,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},terms:n.terms,type:"max"};h.update(oe,{balance:$,orders:[...J,xe]});const Te=(Number(ae.data().balance)||0)+n.price,fe=ae.data().sales||[],Me={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:re,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ie,{balance:Te,sales:[...fe,Me]});const Ne=B(I,"providerBalances",n.providerId),Le=await h.get(Ne);let X=0;Le.exists()?X=parseFloat(Le.data().balance)||0:h.set(Ne,{balance:0,provider:n.providerId,updatedAt:he()});const ce=X+n.price;h.set(Ne,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const ve=B(Z(I,"sales"));return h.set(ve,{...xe,provider:n.provider,providerId:n.providerId,providerPhone:re,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleId:Me.saleId,terms:n.terms}),z}):await at(I,async h=>{const D=B(I,"users",o.id),H=await h.get(D);if(!H.exists())throw new Error("Usuario no encontrado");const ne=B(I,"users",n.providerId),k=await h.get(ne);if(!k.exists())throw new Error("Proveedor no encontrado");let A=n.providerPhone||"";A||(A=k.data().phoneNumber||"");const v=(Number(H.data().balance)||0)-n.price;if(v<0)throw new Error("Saldo insuficiente");const p=H.data().orders||[],z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:A,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"max"};h.update(D,{balance:v,orders:[...p,z]});const se=(Number(k.data().balance)||0)+n.price,ie=k.data().sales||[],ae={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:A,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ne,{balance:se,sales:[...ie,ae]});const re=B(I,"providerBalances",n.providerId),le=await h.get(re);let $=0;le.exists()?$=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});const J=$+n.price;h.set(re,{balance:J,provider:n.providerId,updatedAt:he()},{merge:!0});const xe=B(Z(I,"sales"));h.set(xe,{...z,provider:n.provider,providerId:n.providerId,providerPhone:A,saleDate:new Date().toISOString(),status:"pending",saleId:ae.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},_e=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{_({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),R(!0)},ue=()=>{if(!o){T("/login");return}(o==null?void 0:o.role)==="user"?T("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?T("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?T("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&T("/dashboard/admin")},me=n=>{n.preventDefault(),F.trim()&&T(`/search?q=${encodeURIComponent(F)}&category=Max`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Oe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-purple-400 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const D=n.match(/(\d+)/);return D?`${parseInt(D[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-purple-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-purple-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-purple-500 text-white rounded-full hover:bg-purple-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-purple-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Max...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-purple-400 focus:border-purple-400 transition-all placeholder-gray-500",value:F,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:me,className:"absolute right-3 text-gray-400 hover:text-purple-400 transition-all",children:e.jsx(Ze,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-purple-400"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-purple-400",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),T("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-purple-600/80 hover:bg-purple-700 transition-all text-sm text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>T("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-purple-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>T("/register"),className:"px-4 py-2 rounded-full bg-purple-500 text-white hover:bg-purple-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-purple-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-purple-600/30 text-white border border-purple-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ze,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-purple-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1626814026160-2237a95fc5a0?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Max"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de tus películas y series favoritas con nuestras cuentas premium de Max"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-purple-400 hover:text-purple-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Oe(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-green-400 text-sm",children:["Renovación - S/ ",W(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-purple-400",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-purple-400",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-purple-400",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-purple-400",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",W(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>_e(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Fe,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>be(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Pe,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>Ae(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-purple-500 hover:bg-purple-600":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-purple-400"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",W(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-purple-400 focus:border-purple-400 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-purple-400 focus:border-purple-400 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-purple-400 bg-gray-700 border-gray-600 rounded focus:ring-purple-400"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>be(g.product),className:"text-purple-400 hover:text-purple-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-purple-400 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ue,disabled:f,className:`px-4 py-2 bg-purple-500 text-white rounded-md hover:bg-purple-600 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-purple-400"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>_(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-purple-400"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{R(!1),_(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>R(!1),className:"px-4 py-2 bg-purple-500 text-white rounded-md hover:bg-purple-600 transition-all",children:"Volver a Compra"})]})]})}),q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-purple-400"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover-bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsx("div",{animate:"fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fi,{className:"mr-2 text-purple-600",info:!0,children:"Info"}),"Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),O(null)},className:"px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700 transition-all rounded-md",children:"Aceptar"})})]})})})]})},DF=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,_]=b.useState(null),[M,R]=b.useState(!1),[q,G]=b.useState(!1),[Y,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,Q]=b.useState(""),T=Nt(),W=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(B(I,"users",N.uid));if(h.exists()){const D=h.data();c({id:N.uid,name:D.username||"Usuario",email:N.email,orders:D.orders||[],role:D.role||"user",phone:D.phone||""}),x(Number(D.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=ye(Z(I,"products"),je("category","==","Spotify")),N=Ce(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(B(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,spotify:C.length}))},k=>{S("Error al cargar productos de Spotify"),console.error(k)}),h=ye(Z(I,"spotify_accounts"),je("status","==","available")),D=Ce(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ne=["Netflix","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=ye(Z(I,"products"),je("category","==",k));return Ce(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),D(),ne.forEach(k=>k())}},[]);const Ae=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>T("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ue=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const D=B(I,"products",n.id),H=await h.get(D);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=ye(k,je("status","==","available"),zt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,z=v.data(),oe=B(I,"users",o.id),se=await h.get(oe);if(!se.exists())throw new Error("Usuario no encontrado");const ie=B(I,"users",n.providerId),ae=await h.get(ie);if(!ae.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),le=await h.get(re);let $=0;le.exists()?$=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});let J=n.providerPhone||"";J||(J=ae.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(D,{availableAccounts:tt(-1),stock:tt(-1)});const ke=(Number(se.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Te=se.data().orders||[],fe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},terms:n.terms,type:"spotify"};h.update(oe,{balance:ke,orders:[...Te,fe]});const Ne=(Number(ae.data().balance)||0)+n.price,Le=ae.data().sales||[],X={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ie,{balance:Ne,sales:[...Le,X]});const ce=$+n.price;h.set(re,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const ve=B(Z(I,"sales"));return h.set(ve,{...fe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleId:X.saleId,terms:n.terms}),z}):await at(I,async h=>{const D=B(I,"users",o.id),H=await h.get(D);if(!H.exists())throw new Error("Usuario no encontrado");const ne=B(I,"users",n.providerId),k=await h.get(ne);if(!k.exists())throw new Error("Proveedor no encontrado");const A=B(I,"providerBalances",n.providerId),C=await h.get(A);let v=0;C.exists()?v=parseFloat(C.data().balance)||0:h.set(A,{balance:0,provider:n.providerId,updatedAt:he()});let p=n.providerPhone||"";p||(p=k.data().phoneNumber||"");const oe=(Number(H.data().balance)||0)-n.price;if(oe<0)throw new Error("Saldo insuficiente");const se=H.data().orders||[],ie={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"spotify"};h.update(D,{balance:oe,orders:[...se,ie]});const re=(Number(k.data().balance)||0)+n.price,le=k.data().sales||[],$={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ne,{balance:re,sales:[...le,$]});const J=v+n.price;h.set(A,{balance:J,provider:n.providerId,updatedAt:he()},{merge:!0});const xe=B(Z(I,"sales"));h.set(xe,{...ie,provider:n.provider,providerId:n.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:$.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},_e=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{_({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),R(!0)},ue=()=>{if(!o){T("/login");return}(o==null?void 0:o.role)==="user"?T("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?T("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?T("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&T("/dashboard/admin")},me=n=>{n.preventDefault(),F.trim()&&T(`/search?q=${encodeURIComponent(F)}&category=Spotify`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Oe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const D=n.match(/(\d+)/);return D?`${parseInt(D[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-green-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-green-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-green-500 text-white rounded-full hover:bg-green-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-green-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Spotify...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all placeholder-gray-500",value:F,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:me,className:"absolute right-3 text-gray-400 hover:text-green-500 transition-all",children:e.jsx(Ze,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-green-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-green-500",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),T("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-green-600/80 hover:bg-green-700 transition-all text-sm text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>T("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-green-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>T("/register"),className:"px-4 py-2 rounded-full bg-green-500 text-white hover:bg-green-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-green-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-green-600/30 text-white border border-green-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-green-500"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ze,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1514320291840-2e0a9bf2a9ae?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Spotify"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Escucha tu música favorita sin interrupciones con nuestras cuentas premium de Spotify"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-green-500 hover:text-green-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Oe(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-green-400 text-sm",children:["Renovación - S/ ",W(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-green-500",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-green-500",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-green-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-green-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",W(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>_e(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Fe,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>be(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Pe,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>Ae(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-green-500 hover:bg-green-600":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-green-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",W(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-green-500 bg-gray-700 border-gray-600 rounded focus:ring-green-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>be(g.product),className:"text-green-500 hover:text-green-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-red-400 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ue,disabled:f,className:`px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-green-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>_(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-green-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{R(!1),_(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>R(!1),className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Volver a Compra"})]})]})}),q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-green-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-green-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),O(null)},className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Aceptar"})})]})})]})},AF=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,_]=b.useState(null),[M,R]=b.useState(!1),[q,G]=b.useState(!1),[Y,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,Q]=b.useState(""),T=Nt(),W=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(B(I,"users",N.uid));if(h.exists()){const D=h.data();c({id:N.uid,name:D.username||"Usuario",email:N.email,orders:D.orders||[],role:D.role||"user",phone:D.phone||""}),x(Number(D.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=ye(Z(I,"products"),je("category","==","Prime Video")),N=Ce(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(B(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,primevideo:C.length}))},k=>{S("Error al cargar productos de Prime Video"),console.error(k)}),h=ye(Z(I,"primevideo_accounts"),je("status","==","available")),D=Ce(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=ye(Z(I,"products"),je("category","==",k));return Ce(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),D(),ne.forEach(k=>k())}},[]);const Ae=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>T("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ue=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const D=B(I,"products",n.id),H=await h.get(D);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=ye(k,je("status","==","available"),zt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,z=v.data(),oe=B(I,"users",o.id),se=await h.get(oe);if(!se.exists())throw new Error("Usuario no encontrado");const ie=B(I,"users",n.providerId),ae=await h.get(ie);if(!ae.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),le=await h.get(re);let $=0;le.exists()?$=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});let J=n.providerPhone||"";J||(J=ae.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(D,{availableAccounts:tt(-1),stock:tt(-1)});const ke=(Number(se.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Te=se.data().orders||[],fe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},terms:n.terms,type:"primevideo"};h.update(oe,{balance:ke,orders:[...Te,fe]});const Ne=(Number(ae.data().balance)||0)+n.price,Le=ae.data().sales||[],X={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ie,{balance:Ne,sales:[...Le,X]});const ce=$+n.price;h.set(re,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const ve=B(Z(I,"sales"));return h.set(ve,{...fe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleId:X.saleId,terms:n.terms}),z}):await at(I,async h=>{const D=B(I,"users",o.id),H=await h.get(D);if(!H.exists())throw new Error("Usuario no encontrado");const ne=B(I,"users",n.providerId),k=await h.get(ne);if(!k.exists())throw new Error("Proveedor no encontrado");const A=B(I,"providerBalances",n.providerId),C=await h.get(A);let v=0;C.exists()?v=parseFloat(C.data().balance)||0:h.set(A,{balance:0,provider:n.providerId,updatedAt:he()});let p=n.providerPhone||"";p||(p=k.data().phoneNumber||"");const oe=(Number(H.data().balance)||0)-n.price;if(oe<0)throw new Error("Saldo insuficiente");const se=H.data().orders||[],ie={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"primevideo"};h.update(D,{balance:oe,orders:[...se,ie]});const re=(Number(k.data().balance)||0)+n.price,le=k.data().sales||[],$={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ne,{balance:re,sales:[...le,$]});const J=v+n.price;h.set(A,{balance:J,provider:n.providerId,updatedAt:he()},{merge:!0});const xe=B(Z(I,"sales"));h.set(xe,{...ie,provider:n.provider,providerId:n.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:$.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},_e=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{_({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),R(!0)},ue=()=>{if(!o){T("/login");return}(o==null?void 0:o.role)==="user"?T("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?T("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?T("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&T("/dashboard/admin")},me=n=>{n.preventDefault(),F.trim()&&T(`/search?q=${encodeURIComponent(F)}&category=Prime Video`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Oe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-blue-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const D=n.match(/(\d+)/);return D?`${parseInt(D[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-blue-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-blue-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-blue-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Prime Video...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500",value:F,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:me,className:"absolute right-3 text-gray-400 hover:text-blue-400 transition-all",children:e.jsx(Ze,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-blue-400"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-blue-400",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),T("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-blue-600/80 hover:bg-blue-700 transition-all text-sm text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>T("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-blue-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>T("/register"),className:"px-4 py-2 rounded-full bg-blue-500 text-white hover:bg-blue-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-blue-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-blue-600/30 text-white border border-blue-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ze,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1616530940355-351fab26532b?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Prime Video"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de tus películas y series favoritas con nuestras cuentas premium de Prime Video"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-blue-400 hover:text-blue-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Oe(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-blue-400 text-sm",children:["Renovación - S/ ",W(n.renewalPrice)]}):e.jsx("p",{className:"text-orange-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-blue-400",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-blue-400",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-blue-400",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-blue-400",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",W(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>_e(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Fe,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>be(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Pe,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>Ae(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-blue-500 hover:bg-blue-600":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-blue-400"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",W(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-blue-400 bg-gray-700 border-gray-600 rounded focus:ring-blue-400"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>be(g.product),className:"text-blue-400 hover:text-blue-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-blue-400 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ue,disabled:f,className:`px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-blue-400"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>_(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-blue-400"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{R(!1),_(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>R(!1),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Volver a Compra"})]})]})}),q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-blue-400"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-blue-400"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),O(null)},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Aceptar"})})]})})]})},RF=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,_]=b.useState(null),[M,R]=b.useState(!1),[q,G]=b.useState(!1),[Y,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,Q]=b.useState(""),T=Nt(),W=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(B(I,"users",N.uid));if(h.exists()){const D=h.data();c({id:N.uid,name:D.username||"Usuario",email:N.email,orders:D.orders||[],role:D.role||"user",phone:D.phone||""}),x(Number(D.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=ye(Z(I,"products"),je("category","==","Vix")),N=Ce(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(B(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,vix:C.length}))},k=>{S("Error al cargar productos de Vix"),console.error(k)}),h=ye(Z(I,"vix_accounts"),je("status","==","available")),D=Ce(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=ye(Z(I,"products"),je("category","==",k));return Ce(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),D(),ne.forEach(k=>k())}},[]);const Ae=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>T("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ue=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const D=B(I,"products",n.id),H=await h.get(D);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=ye(k,je("status","==","available"),zt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,z=v.data(),oe=B(I,"users",o.id),se=await h.get(oe);if(!se.exists())throw new Error("Usuario no encontrado");const ie=B(I,"users",n.providerId),ae=await h.get(ie);if(!ae.exists())throw new Error("Proveedor no encontrado");let re=n.providerPhone||"";re||(re=ae.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(D,{availableAccounts:tt(-1),stock:tt(-1)});const $=(Number(se.data().balance)||0)-n.price;if($<0)throw new Error("Saldo insuficiente");const J=se.data().orders||[],xe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:re,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},terms:n.terms,type:"vix"};h.update(oe,{balance:$,orders:[...J,xe]});const Te=(Number(ae.data().balance)||0)+n.price,fe=ae.data().sales||[],Me={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:re,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ie,{balance:Te,sales:[...fe,Me]});const Ne=B(I,"providerBalances",n.providerId),Le=await h.get(Ne);let X=0;Le.exists()?X=parseFloat(Le.data().balance)||0:h.set(Ne,{balance:0,provider:n.providerId,updatedAt:he()});const ce=X+n.price;h.set(Ne,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const ve=B(Z(I,"sales"));return h.set(ve,{...xe,provider:n.provider,providerId:n.providerId,providerPhone:re,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleId:Me.saleId,terms:n.terms}),z}):await at(I,async h=>{const D=B(I,"users",o.id),H=await h.get(D);if(!H.exists())throw new Error("Usuario no encontrado");const ne=B(I,"users",n.providerId),k=await h.get(ne);if(!k.exists())throw new Error("Proveedor no encontrado");let A=n.providerPhone||"";A||(A=k.data().phoneNumber||"");const v=(Number(H.data().balance)||0)-n.price;if(v<0)throw new Error("Saldo insuficiente");const p=H.data().orders||[],z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:A,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"vix"};h.update(D,{balance:v,orders:[...p,z]});const se=(Number(k.data().balance)||0)+n.price,ie=k.data().sales||[],ae={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:A,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ne,{balance:se,sales:[...ie,ae]});const re=B(I,"providerBalances",n.providerId),le=await h.get(re);let $=0;le.exists()?$=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});const J=$+n.price;h.set(re,{balance:J,provider:n.providerId,updatedAt:he()},{merge:!0});const xe=B(Z(I,"sales"));h.set(xe,{...z,provider:n.provider,providerId:n.providerId,providerPhone:A,saleDate:new Date().toISOString(),status:"pending",saleId:ae.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},_e=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{_({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),R(!0)},ue=()=>{if(!o){T("/login");return}(o==null?void 0:o.role)==="user"?T("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?T("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?T("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&T("/dashboard/admin")},me=n=>{n.preventDefault(),F.trim()&&T(`/search?q=${encodeURIComponent(F)}&category=Vix`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Oe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const D=n.match(/(\d+)/);return D?`${parseInt(D[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-red-500 text-white rounded-full hover:bg-red-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-red-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Vix...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all placeholder-gray-500",value:F,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:me,className:"absolute right-3 text-gray-400 hover:text-red-500 transition-all",children:e.jsx(Ze,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-red-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-red-500",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),T("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-600/80 hover:bg-red-700 transition-all text-sm text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>T("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-red-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>T("/register"),className:"px-4 py-2 rounded-full bg-red-500 text-white hover:bg-red-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-red-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-red-600/30 text-white border border-red-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ze,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1574375927938-d5a98e8ffe85?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Vix"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de tus telenovelas y series favoritas con nuestras cuentas premium de Vix"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-red-500 hover:text-red-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Oe(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-green-400 text-sm",children:["Renovación - S/ ",W(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-red-500",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-red-500",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-red-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-red-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",W(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>_e(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Fe,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>be(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Pe,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>Ae(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-red-500 hover:bg-red-600":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-red-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",W(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-500 bg-gray-700 border-gray-600 rounded focus:ring-red-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>be(g.product),className:"text-red-500 hover:text-red-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-red-500 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ue,disabled:f,className:`px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-red-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>_(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-red-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{R(!1),_(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>R(!1),className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-all",children:"Volver a Compra"})]})]})}),q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-red-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-red-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),O(null)},className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-all",children:"Aceptar"})})]})})]})},MF=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,_]=b.useState(null),[M,R]=b.useState(!1),[q,G]=b.useState(!1),[Y,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,Q]=b.useState(""),T=Nt(),W=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(B(I,"users",N.uid));if(h.exists()){const D=h.data();c({id:N.uid,name:D.username||"Usuario",email:N.email,orders:D.orders||[],role:D.role||"user",phone:D.phone||""}),x(Number(D.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=ye(Z(I,"products"),je("category","==","Canva")),N=Ce(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(B(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,canva:C.length}))},k=>{S("Error al cargar productos de Canva"),console.error(k)}),h=ye(Z(I,"canva_accounts"),je("status","==","available")),D=Ce(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=ye(Z(I,"products"),je("category","==",k));return Ce(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),D(),ne.forEach(k=>k())}},[]);const Ae=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>T("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ue=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const D=B(I,"products",n.id),H=await h.get(D);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=ye(k,je("status","==","available"),zt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,z=v.data(),oe=B(I,"users",o.id),se=await h.get(oe);if(!se.exists())throw new Error("Usuario no encontrado");const ie=B(I,"users",n.providerId),ae=await h.get(ie);if(!ae.exists())throw new Error("Proveedor no encontrado");let re=n.providerPhone||"";re||(re=ae.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(D,{availableAccounts:tt(-1),stock:tt(-1)});const $=(Number(se.data().balance)||0)-n.price;if($<0)throw new Error("Saldo insuficiente");const J=se.data().orders||[],xe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:re,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},terms:n.terms,type:"canva"};h.update(oe,{balance:$,orders:[...J,xe]});const Te=(Number(ae.data().balance)||0)+n.price,fe=ae.data().sales||[],Me={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:re,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ie,{balance:Te,sales:[...fe,Me]});const Ne=B(I,"providerBalances",n.providerId),Le=await h.get(Ne);let X=0;Le.exists()?X=parseFloat(Le.data().balance)||0:h.set(Ne,{balance:0,provider:n.providerId,updatedAt:he()});const ce=X+n.price;h.set(Ne,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const ve=B(Z(I,"sales"));return h.set(ve,{...xe,provider:n.provider,providerId:n.providerId,providerPhone:re,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleId:Me.saleId,terms:n.terms}),z}):await at(I,async h=>{const D=B(I,"users",o.id),H=await h.get(D);if(!H.exists())throw new Error("Usuario no encontrado");const ne=B(I,"users",n.providerId),k=await h.get(ne);if(!k.exists())throw new Error("Proveedor no encontrado");let A=n.providerPhone||"";A||(A=k.data().phoneNumber||"");const v=(Number(H.data().balance)||0)-n.price;if(v<0)throw new Error("Saldo insuficiente");const p=H.data().orders||[],z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:A,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"canva"};h.update(D,{balance:v,orders:[...p,z]});const se=(Number(k.data().balance)||0)+n.price,ie=k.data().sales||[],ae={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:A,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ne,{balance:se,sales:[...ie,ae]});const re=B(I,"providerBalances",n.providerId),le=await h.get(re);let $=0;le.exists()?$=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});const J=$+n.price;h.set(re,{balance:J,provider:n.providerId,updatedAt:he()},{merge:!0});const xe=B(Z(I,"sales"));h.set(xe,{...z,provider:n.provider,providerId:n.providerId,providerPhone:A,saleDate:new Date().toISOString(),status:"pending",saleId:ae.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},_e=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{_({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),R(!0)},ue=()=>{if(!o){T("/login");return}(o==null?void 0:o.role)==="user"?T("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?T("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?T("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&T("/dashboard/admin")},me=n=>{n.preventDefault(),F.trim()&&T(`/search?q=${encodeURIComponent(F)}&category=Canva`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Oe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-teal-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const D=n.match(/(\d+)/);return D?`${parseInt(D[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-teal-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-teal-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-teal-500 text-white rounded-full hover:bg-teal-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-teal-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Canva...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all placeholder-gray-500",value:F,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:me,className:"absolute right-3 text-gray-400 hover:text-teal-500 transition-all",children:e.jsx(Ze,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-teal-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-teal-500",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),T("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-teal-600/80 hover:bg-teal-700 transition-all text-sm text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>T("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-teal-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>T("/register"),className:"px-4 py-2 rounded-full bg-teal-500 text-white hover:bg-teal-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-teal-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-teal-600/30 text-white border border-teal-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ze,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-teal-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Canva"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Crea diseños impresionantes con nuestras cuentas premium de Canva"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-teal-500 hover:text-teal-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Oe(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-green-400 text-sm",children:["Renovación - S/ ",W(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-teal-500",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-teal-500",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-teal-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-teal-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",W(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>_e(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Fe,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>be(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Pe,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>Ae(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-teal-500 hover:bg-teal-600":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-teal-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",W(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-teal-500 bg-gray-700 border-gray-600 rounded focus:ring-teal-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>be(g.product),className:"text-teal-500 hover:text-teal-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-teal-500 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ue,disabled:f,className:`px-4 py-2 bg-teal-500 text-white rounded-md hover:bg-teal-600 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-teal-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>_(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-teal-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{R(!1),_(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>R(!1),className:"px-4 py-2 bg-teal-500 text-white rounded-md hover:bg-teal-600 transition-all",children:"Volver a Compra"})]})]})}),q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-teal-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-teal-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),O(null)},className:"px-4 py-2 bg-teal-500 text-white rounded-md hover:bg-teal-600 transition-all",children:"Aceptar"})})]})})]})},LF=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,_]=b.useState(null),[M,R]=b.useState(!1),[q,G]=b.useState(!1),[Y,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,Q]=b.useState(""),T=Nt(),W=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(B(I,"users",N.uid));if(h.exists()){const D=h.data();c({id:N.uid,name:D.username||"Usuario",email:N.email,orders:D.orders||[],role:D.role||"user",phone:D.phone||""}),x(Number(D.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=ye(Z(I,"products"),je("category","==","ChatGPT")),N=Ce(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(B(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,chatgpt:C.length}))},k=>{S("Error al cargar productos de ChatGPT"),console.error(k)}),h=ye(Z(I,"chatgpt_accounts"),je("status","==","available")),D=Ce(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=ye(Z(I,"products"),je("category","==",k));return Ce(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),D(),ne.forEach(k=>k())}},[]);const Ae=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>T("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ue=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const D=B(I,"products",n.id),H=await h.get(D);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=ye(k,je("status","==","available"),zt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,z=v.data(),oe=B(I,"users",o.id),se=await h.get(oe);if(!se.exists())throw new Error("Usuario no encontrado");const ie=B(I,"users",n.providerId),ae=await h.get(ie);if(!ae.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),le=await h.get(re);let $=0;le.exists()?$=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});let J=n.providerPhone||"";J||(J=ae.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(D,{availableAccounts:tt(-1),stock:tt(-1)});const ke=(Number(se.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Te=se.data().orders||[],fe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},terms:n.terms,type:"chatgpt"};h.update(oe,{balance:ke,orders:[...Te,fe]});const Ne=(Number(ae.data().balance)||0)+n.price,Le=ae.data().sales||[],X={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ie,{balance:Ne,sales:[...Le,X]});const ce=$+n.price;h.set(re,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const ve=B(Z(I,"sales"));return h.set(ve,{...fe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleId:X.saleId,terms:n.terms}),z}):await at(I,async h=>{const D=B(I,"users",o.id),H=await h.get(D);if(!H.exists())throw new Error("Usuario no encontrado");const ne=B(I,"users",n.providerId),k=await h.get(ne);if(!k.exists())throw new Error("Proveedor no encontrado");const A=B(I,"providerBalances",n.providerId),C=await h.get(A);let v=0;C.exists()?v=parseFloat(C.data().balance)||0:h.set(A,{balance:0,provider:n.providerId,updatedAt:he()});let p=n.providerPhone||"";p||(p=k.data().phoneNumber||"");const oe=(Number(H.data().balance)||0)-n.price;if(oe<0)throw new Error("Saldo insuficiente");const se=H.data().orders||[],ie={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"chatgpt"};h.update(D,{balance:oe,orders:[...se,ie]});const re=(Number(k.data().balance)||0)+n.price,le=k.data().sales||[],$={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ne,{balance:re,sales:[...le,$]});const J=v+n.price;h.set(A,{balance:J,provider:n.providerId,updatedAt:he()},{merge:!0});const xe=B(Z(I,"sales"));h.set(xe,{...ie,provider:n.provider,providerId:n.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:$.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},_e=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{_({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),R(!0)},ue=()=>{if(!o){T("/login");return}(o==null?void 0:o.role)==="user"?T("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?T("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?T("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&T("/dashboard/admin")},me=n=>{n.preventDefault(),F.trim()&&T(`/search?q=${encodeURIComponent(F)}&category=ChatGPT`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Oe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const D=n.match(/(\d+)/);return D?`${parseInt(D[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-teal-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-teal-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-teal-500 text-white rounded-full hover:bg-teal-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-teal-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en ChatGPT...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-teal-400 focus:border-teal-400 transition-all placeholder-gray-500",value:F,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:me,className:"absolute right-3 text-gray-400 hover:text-teal-400 transition-all",children:e.jsx(Ze,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-teal-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-teal-500",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),T("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-teal-600/80 hover:bg-teal-700 transition-all text-sm text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>T("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-teal-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>T("/register"),className:"px-4 py-2 rounded-full bg-teal-500 text-white hover:bg-teal-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-teal-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-teal-600/30 text-white border border-teal-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-teal-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ze,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-teal-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1677442136019-21780ecad339?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de ChatGPT"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Accede a funciones avanzadas de IA con nuestras cuentas premium de ChatGPT"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-teal-400 hover:text-teal-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Oe(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-green-400 text-sm",children:["Renovación - S/ ",W(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-teal-500",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-teal-500",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-teal-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-teal-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",W(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>_e(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Fe,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>be(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Pe,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>Ae(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-teal-500 hover:bg-teal-600":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-teal-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",W(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-teal-400 focus:border-teal-400 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-teal-400 focus:border-teal-400 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-teal-400 bg-gray-700 border-gray-600 rounded focus:ring-teal-400"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>be(g.product),className:"text-teal-400 hover:text-teal-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-teal-400 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ue,disabled:f,className:`px-4 py-2 bg-teal-500 text-white rounded-md hover:bg-teal-600 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-teal-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>_(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-teal-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{R(!1),_(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>R(!1),className:"px-4 py-2 bg-teal-500 text-white rounded-md hover:bg-teal-600 transition-all",children:"Volver a Compra"})]})]})}),q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-teal-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-teal-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),O(null)},className:"px-4 py-2 bg-teal-500 text-white rounded-md hover:bg-teal-600 transition-all",children:"Aceptar"})})]})})]})},OF=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,_]=b.useState(null),[M,R]=b.useState(!1),[q,G]=b.useState(!1),[Y,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,Q]=b.useState(""),T=Nt(),W=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(B(I,"users",N.uid));if(h.exists()){const D=h.data();c({id:N.uid,name:D.username||"Usuario",email:N.email,orders:D.orders||[],role:D.role||"user",phone:D.phone||""}),x(Number(D.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=ye(Z(I,"products"),je("category","==","Crunchyroll")),N=Ce(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(B(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,crunchyroll:C.length}))},k=>{S("Error al cargar productos de Crunchyroll"),console.error(k)}),h=ye(Z(I,"crunchyroll_accounts"),je("status","==","available")),D=Ce(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=ye(Z(I,"products"),je("category","==",k));return Ce(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),D(),ne.forEach(k=>k())}},[]);const Ae=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>T("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ue=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const D=B(I,"products",n.id),H=await h.get(D);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=ye(k,je("status","==","available"),zt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,z=v.data(),oe=B(I,"users",o.id),se=await h.get(oe);if(!se.exists())throw new Error("Usuario no encontrado");const ie=B(I,"users",n.providerId),ae=await h.get(ie);if(!ae.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),le=await h.get(re);let $=0;le.exists()?$=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});let J=n.providerPhone||"";J||(J=ae.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(D,{availableAccounts:tt(-1),stock:tt(-1)});const ke=(Number(se.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Te=se.data().orders||[],fe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},terms:n.terms,type:"crunchyroll"};h.update(oe,{balance:ke,orders:[...Te,fe]});const Ne=(Number(ae.data().balance)||0)+n.price,Le=ae.data().sales||[],X={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ie,{balance:Ne,sales:[...Le,X]});const ce=$+n.price;h.set(re,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const ve=B(Z(I,"sales"));return h.set(ve,{...fe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleId:X.saleId,terms:n.terms}),z}):await at(I,async h=>{const D=B(I,"users",o.id),H=await h.get(D);if(!H.exists())throw new Error("Usuario no encontrado");const ne=B(I,"users",n.providerId),k=await h.get(ne);if(!k.exists())throw new Error("Proveedor no encontrado");const A=B(I,"providerBalances",n.providerId),C=await h.get(A);let v=0;C.exists()?v=parseFloat(C.data().balance)||0:h.set(A,{balance:0,provider:n.providerId,updatedAt:he()});let p=n.providerPhone||"";p||(p=k.data().phoneNumber||"");const oe=(Number(H.data().balance)||0)-n.price;if(oe<0)throw new Error("Saldo insuficiente");const se=H.data().orders||[],ie={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"crunchyroll"};h.update(D,{balance:oe,orders:[...se,ie]});const re=(Number(k.data().balance)||0)+n.price,le=k.data().sales||[],$={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ne,{balance:re,sales:[...le,$]});const J=v+n.price;h.set(A,{balance:J,provider:n.providerId,updatedAt:he()},{merge:!0});const xe=B(Z(I,"sales"));h.set(xe,{...ie,provider:n.provider,providerId:n.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:$.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},_e=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{_({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),R(!0)},ue=()=>{if(!o){T("/login");return}(o==null?void 0:o.role)==="user"?T("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?T("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?T("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&T("/dashboard/admin")},me=n=>{n.preventDefault(),F.trim()&&T(`/search?q=${encodeURIComponent(F)}&category=Crunchyroll`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Oe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const D=n.match(/(\d+)/);return D?`${parseInt(D[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-orange-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-orange-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-orange-500 text-white rounded-full hover:bg-orange-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-orange-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Crunchyroll...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-orange-400 focus:border-orange-400 transition-all placeholder-gray-500",value:F,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:me,className:"absolute right-3 text-gray-400 hover:text-orange-400 transition-all",children:e.jsx(Ze,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-orange-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-orange-500",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),T("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-orange-600/80 hover:bg-orange-700 transition-all text-sm text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>T("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-orange-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>T("/register"),className:"px-4 py-2 rounded-full bg-orange-500 text-white hover:bg-orange-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-orange-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-orange-600/30 text-white border border-orange-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ze,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-orange-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1618336753971-53f2409b1c6f?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Crunchyroll"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de tus animes favoritos sin anuncios con nuestras cuentas premium de Crunchyroll"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-orange-400 hover:text-orange-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Oe(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-green-400 text-sm",children:["Renovación - S/ ",W(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-orange-500",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-orange-500",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-orange-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-orange-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",W(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>_e(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Fe,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>be(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Pe,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>Ae(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-orange-500 hover:bg-orange-600":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-orange-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",W(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-orange-400 focus:border-orange-400 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-orange-400 focus:border-orange-400 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-orange-400 bg-gray-700 border-gray-600 rounded focus:ring-orange-400"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>be(g.product),className:"text-orange-400 hover:text-orange-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-orange-400 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ue,disabled:f,className:`px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-orange-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>_(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-orange-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{R(!1),_(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>R(!1),className:"px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 transition-all",children:"Volver a Compra"})]})]})}),q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-orange-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-orange-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),O(null)},className:"px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 transition-all",children:"Aceptar"})})]})})]})},VF=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,_]=b.useState(null),[M,R]=b.useState(!1),[q,G]=b.useState(!1),[Y,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,Q]=b.useState(""),T=Nt(),W=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(B(I,"users",N.uid));if(h.exists()){const D=h.data();c({id:N.uid,name:D.username||"Usuario",email:N.email,orders:D.orders||[],role:D.role||"user",phone:D.phone||""}),x(Number(D.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=ye(Z(I,"products"),je("category","==","Redes Sociales")),N=Ce(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(B(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,redessociales:C.length}))},k=>{S("Error al cargar productos de Redes Sociales"),console.error(k)}),h=ye(Z(I,"redessociales_accounts"),je("status","==","available")),D=Ce(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=ye(Z(I,"products"),je("category","==",k));return Ce(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),D(),ne.forEach(k=>k())}},[]);const Ae=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>T("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ue=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const D=B(I,"products",n.id),H=await h.get(D);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=ye(k,je("status","==","available"),zt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,z=v.data(),oe=B(I,"users",o.id),se=await h.get(oe);if(!se.exists())throw new Error("Usuario no encontrado");const ie=B(I,"users",n.providerId),ae=await h.get(ie);if(!ae.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),le=await h.get(re);let $=0;le.exists()?$=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});let J=n.providerPhone||"";J||(J=ae.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(D,{availableAccounts:tt(-1),stock:tt(-1)});const ke=(Number(se.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Te=se.data().orders||[],fe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},terms:n.terms,type:"redessociales"};h.update(oe,{balance:ke,orders:[...Te,fe]});const Ne=(Number(ae.data().balance)||0)+n.price,Le=ae.data().sales||[],X={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ie,{balance:Ne,sales:[...Le,X]});const ce=$+n.price;h.set(re,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const ve=B(Z(I,"sales"));return h.set(ve,{...fe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleId:X.saleId,terms:n.terms}),z}):await at(I,async h=>{const D=B(I,"users",o.id),H=await h.get(D);if(!H.exists())throw new Error("Usuario no encontrado");const ne=B(I,"users",n.providerId),k=await h.get(ne);if(!k.exists())throw new Error("Proveedor no encontrado");const A=B(I,"providerBalances",n.providerId),C=await h.get(A);let v=0;C.exists()?v=parseFloat(C.data().balance)||0:h.set(A,{balance:0,provider:n.providerId,updatedAt:he()});let p=n.providerPhone||"";p||(p=k.data().phoneNumber||"");const oe=(Number(H.data().balance)||0)-n.price;if(oe<0)throw new Error("Saldo insuficiente");const se=H.data().orders||[],ie={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"redessociales"};h.update(D,{balance:oe,orders:[...se,ie]});const re=(Number(k.data().balance)||0)+n.price,le=k.data().sales||[],$={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ne,{balance:re,sales:[...le,$]});const J=v+n.price;h.set(A,{balance:J,provider:n.providerId,updatedAt:he()},{merge:!0});const xe=B(Z(I,"sales"));h.set(xe,{...ie,provider:n.provider,providerId:n.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:$.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},_e=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{_({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),R(!0)},ue=()=>{if(!o){T("/login");return}(o==null?void 0:o.role)==="user"?T("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?T("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?T("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&T("/dashboard/admin")},me=n=>{n.preventDefault(),F.trim()&&T(`/search?q=${encodeURIComponent(F)}&category=Redes Sociales`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Oe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const D=n.match(/(\d+)/);return D?`${parseInt(D[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-pink-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-pink-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-pink-500 text-white rounded-full hover:bg-pink-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-pink-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Redes Sociales...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-pink-400 focus:border-pink-400 transition-all placeholder-gray-500",value:F,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:me,className:"absolute right-3 text-gray-400 hover:text-pink-400 transition-all",children:e.jsx(Ze,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-pink-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-pink-500",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),T("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-pink-600/80 hover:bg-pink-700 transition-all text-sm text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>T("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-pink-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>T("/register"),className:"px-4 py-2 rounded-full bg-pink-500 text-white hover:bg-pink-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-pink-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-teal-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-pink-600/30 text-white border border-pink-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ze,{className:"text-yellow-400"}),e.jsx("span",{children:"Search"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{"className-automatic":"flex items-center space-x-3 p-3 bg-gray-600/50 rounded-lg",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-pink-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1611162617213-7d7a39e9b1d7')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Redes Sociales"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Potencia tu presencia en línea con cuentas premium de redes sociales"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-pink-400 hover:text-pink-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Oe(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-green-400 text-sm",children:["Renovación - S/ ",W(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-pink-500",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-pink-500",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-pink-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-pink-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",W(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>_e(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Fe,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>be(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Pe,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>Ae(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-pink-500 hover:bg-pink-600":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-pink-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",W(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-pink-400 focus:border-pink-400 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-pink-400 focus:border-pink-400 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-pink-400 bg-gray-700 border-gray-600 rounded focus:ring-pink-400"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>be(g.product),className:"text-pink-400 hover:text-pink-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-pink-400 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ue,disabled:f,className:`px-4 py-2 bg-pink-500 text-white rounded-md hover:bg-pink-600 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-pink-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>_(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-pink-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{R(!1),_(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>R(!1),className:"px-4 py-2 bg-pink-500 text-white rounded-md hover:bg-pink-600 transition-all",children:"Volver a Compra"})]})]})}),q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-pink-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-pink-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),O(null)},className:"px-4 py-2 bg-pink-500 text-white rounded-md hover:bg-pink-600 transition-all",children:"Aceptar"})})]})})]})},BF=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,_]=b.useState(null),[M,R]=b.useState(!1),[q,G]=b.useState(!1),[Y,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,Q]=b.useState(""),T=Nt(),W=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(B(I,"users",N.uid));if(h.exists()){const D=h.data();c({id:N.uid,name:D.username||"Usuario",email:N.email,orders:D.orders||[],role:D.role||"user",phone:D.phone||""}),x(Number(D.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=ye(Z(I,"products"),je("category","==","Apple Music")),N=Ce(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(B(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,applemusic:C.length}))},k=>{S("Error al cargar productos de Apple Music"),console.error(k)}),h=ye(Z(I,"applemusic_accounts"),je("status","==","available")),D=Ce(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=ye(Z(I,"products"),je("category","==",k));return Ce(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),D(),ne.forEach(k=>k())}},[]);const Ae=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>T("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ue=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const D=B(I,"products",n.id),H=await h.get(D);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=ye(k,je("status","==","available"),zt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,z=v.data(),oe=B(I,"users",o.id),se=await h.get(oe);if(!se.exists())throw new Error("Usuario no encontrado");const ie=B(I,"users",n.providerId),ae=await h.get(ie);if(!ae.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),le=await h.get(re);let $=0;le.exists()?$=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});let J=n.providerPhone||"";J||(J=ae.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(D,{availableAccounts:tt(-1),stock:tt(-1)});const ke=(Number(se.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Te=se.data().orders||[],fe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},terms:n.terms,type:"applemusic"};h.update(oe,{balance:ke,orders:[...Te,fe]});const Ne=(Number(ae.data().balance)||0)+n.price,Le=ae.data().sales||[],X={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ie,{balance:Ne,sales:[...Le,X]});const ce=$+n.price;h.set(re,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const ve=B(Z(I,"sales"));return h.set(ve,{...fe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleId:X.saleId,terms:n.terms}),z}):await at(I,async h=>{const D=B(I,"users",o.id),H=await h.get(D);if(!H.exists())throw new Error("Usuario no encontrado");const ne=B(I,"users",n.providerId),k=await h.get(ne);if(!k.exists())throw new Error("Proveedor no encontrado");const A=B(I,"providerBalances",n.providerId),C=await h.get(A);let v=0;C.exists()?v=parseFloat(C.data().balance)||0:h.set(A,{balance:0,provider:n.providerId,updatedAt:he()});let p=n.providerPhone||"";p||(p=k.data().phoneNumber||"");const oe=(Number(H.data().balance)||0)-n.price;if(oe<0)throw new Error("Saldo insuficiente");const se=H.data().orders||[],ie={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"applemusic"};h.update(D,{balance:oe,orders:[...se,ie]});const re=(Number(k.data().balance)||0)+n.price,le=k.data().sales||[],$={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ne,{balance:re,sales:[...le,$]});const J=v+n.price;h.set(A,{balance:J,provider:n.providerId,updatedAt:he()},{merge:!0});const xe=B(Z(I,"sales"));h.set(xe,{...ie,provider:n.provider,providerId:n.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:$.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},_e=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{_({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),R(!0)},ue=()=>{if(!o){T("/login");return}(o==null?void 0:o.role)==="user"?T("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?T("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?T("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&T("/dashboard/admin")},me=n=>{n.preventDefault(),F.trim()&&T(`/search?q=${encodeURIComponent(F)}&category=Apple Music`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Oe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const D=n.match(/(\d+)/);return D?`${parseInt(D[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-gray-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-gray-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-gray-500 text-white rounded-full hover:bg-gray-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-gray-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Apple Music...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-gray-500 focus:border-gray-500 transition-all placeholder-gray-500",value:F,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:me,className:"absolute right-3 text-gray-400 hover:text-gray-500 transition-all",children:e.jsx(Ze,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-gray-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-gray-500",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),T("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-gray-600/80 hover:bg-gray-700 transition-all text-sm text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>T("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-gray-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>T("/register"),className:"px-4 py-2 rounded-full bg-gray-500 text-white hover:bg-gray-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-gray-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-teal-400"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-blue-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-gray-600/30 text-white border border-gray-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-500"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ze,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1514525253161-7a46d19cd819?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Suscripciones Premium de Apple Music"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de millones de canciones con nuestras suscripciones premium de Apple Music"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-gray-500 hover:text-gray-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Oe(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-green-400 text-sm",children:["Renovación - S/ ",W(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-gray-500",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-gray-500",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-gray-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-gray-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",W(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>_e(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Fe,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>be(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Pe,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>Ae(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-gray-500 hover:bg-gray-600":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-gray-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",W(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-gray-500 focus:border-gray-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-gray-500 focus:border-gray-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-gray-500 bg-gray-700 border-gray-600 rounded focus:ring-gray-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>be(g.product),className:"text-gray-500 hover:text-gray-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-gray-500 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ue,disabled:f,className:`px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-gray-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>_(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-gray-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{R(!1),_(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>R(!1),className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 transition-all",children:"Volver a Compra"})]})]})}),q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-gray-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-gray-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),O(null)},className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 transition-all",children:"Aceptar"})})]})})]})},zF=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,_]=b.useState(null),[M,R]=b.useState(!1),[q,G]=b.useState(!1),[Y,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,Q]=b.useState(""),T=Nt(),W=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(B(I,"users",N.uid));if(h.exists()){const D=h.data();c({id:N.uid,name:D.username||"Usuario",email:N.email,orders:D.orders||[],role:D.role||"user",phone:D.phone||""}),x(Number(D.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=ye(Z(I,"products"),je("category","==","Apple Tv")),N=Ce(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(B(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,appletv:C.length}))},k=>{S("Error al cargar productos de Apple TV"),console.error(k)}),h=ye(Z(I,"appletv_accounts"),je("status","==","available")),D=Ce(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=ye(Z(I,"products"),je("category","==",k));return Ce(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),D(),ne.forEach(k=>k())}},[]);const Ae=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>T("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ue=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const D=B(I,"products",n.id),H=await h.get(D);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=ye(k,je("status","==","available"),zt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,z=v.data(),oe=B(I,"users",o.id),se=await h.get(oe);if(!se.exists())throw new Error("Usuario no encontrado");const ie=B(I,"users",n.providerId),ae=await h.get(ie);if(!ae.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),le=await h.get(re);let $=0;le.exists()?$=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});let J=n.providerPhone||"";J||(J=ae.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(D,{availableAccounts:tt(-1),stock:tt(-1)});const ke=(Number(se.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Te=se.data().orders||[],fe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},terms:n.terms,type:"appletv"};h.update(oe,{balance:ke,orders:[...Te,fe]});const Ne=(Number(ae.data().balance)||0)+n.price,Le=ae.data().sales||[],X={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ie,{balance:Ne,sales:[...Le,X]});const ce=$+n.price;h.set(re,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const ve=B(Z(I,"sales"));return h.set(ve,{...fe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleId:X.saleId,terms:n.terms}),z}):await at(I,async h=>{const D=B(I,"users",o.id),H=await h.get(D);if(!H.exists())throw new Error("Usuario no encontrado");const ne=B(I,"users",n.providerId),k=await h.get(ne);if(!k.exists())throw new Error("Proveedor no encontrado");const A=B(I,"providerBalances",n.providerId),C=await h.get(A);let v=0;C.exists()?v=parseFloat(C.data().balance)||0:h.set(A,{balance:0,provider:n.providerId,updatedAt:he()});let p=n.providerPhone||"";p||(p=k.data().phoneNumber||"");const oe=(Number(H.data().balance)||0)-n.price;if(oe<0)throw new Error("Saldo insuficiente");const se=H.data().orders||[],ie={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"appletv"};h.update(D,{balance:oe,orders:[...se,ie]});const re=(Number(k.data().balance)||0)+n.price,le=k.data().sales||[],$={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ne,{balance:re,sales:[...le,$]});const J=v+n.price;h.set(A,{balance:J,provider:n.providerId,updatedAt:he()},{merge:!0});const xe=B(Z(I,"sales"));h.set(xe,{...ie,provider:n.provider,providerId:n.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:$.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},_e=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{_({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),R(!0)},ue=()=>{if(!o){T("/login");return}(o==null?void 0:o.role)==="user"?T("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?T("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?T("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&T("/dashboard/admin")},me=n=>{n.preventDefault(),F.trim()&&T(`/search?q=${encodeURIComponent(F)}&category=Apple Tv`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Oe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-400 text-black flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const D=n.match(/(\d+)/);return D?`${parseInt(D[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-800 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-gray-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-800 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-gray-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-gray-400 text-black rounded-full hover:bg-gray-500 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-800 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-700/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-gray-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Apple TV...",className:"w-full px-4 py-2 rounded-full bg-gray-700/50 text-gray-200 border border-gray-600 focus:ring-2 focus:ring-gray-400 focus:border-gray-400 transition-all placeholder-gray-500",value:F,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:me,className:"absolute right-3 text-gray-400 hover:text-gray-300 transition-all",children:e.jsx(Ze,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-gray-400"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-700/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-700/50 hover:bg-gray-600/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-gray-400",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),T("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-gray-400 text-black hover:bg-gray-500 transition-all text-sm",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>T("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-gray-300 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>T("/register"),className:"px-4 py-2 rounded-full bg-gray-400 text-black hover:bg-gray-500 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-700/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-gray-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-gray-600/30 text-white border border-gray-400/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-400"}),e.jsx("span",{children:"Apple TV"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ze,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-700/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-700/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-400/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-800/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Apple TV"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de series y películas exclusivas con nuestras cuentas premium de Apple TV"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-gray-400 hover:text-gray-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-700/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-600/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-800",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Oe(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-green-400 text-sm",children:["Renovación - S/ ",W(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-600/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-gray-400",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-600/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-gray-400",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-600/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-gray-400",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-600/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-gray-400",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",W(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>_e(n),className:"flex-1 py-2 px-3 bg-gray-600/50 hover:bg-gray-500/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-500/50",children:[e.jsx(Fe,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>be(n),className:"flex-1 py-2 px-3 bg-gray-600/50 hover:bg-gray-500/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-500/50",children:[e.jsx(Pe,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>Ae(n),className:`w-full py-3 px-4 rounded-md text-black font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-gray-400 hover:bg-gray-500":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-700/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-600/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-gray-400"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",W(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-600/50 text-white border border-gray-500 focus:ring-2 focus:ring-gray-400 focus:border-gray-400 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-600/50 text-white border border-gray-500 focus:ring-2 focus:ring-gray-400 focus:border-gray-400 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-gray-400 bg-gray-600 border-gray-500 rounded focus:ring-gray-400"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>be(g.product),className:"text-gray-400 hover:text-gray-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-red-400 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-600/50 text-white rounded-md hover:bg-gray-500/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ue,disabled:f,className:`px-4 py-2 bg-gray-400 text-black rounded-md hover:bg-gray-500 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-700/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-600/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-gray-400"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>_(null),className:"px-4 py-2 bg-gray-600/50 text-white rounded-md hover:bg-gray-500/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-700/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-600/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-gray-400"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{R(!1),_(null)},className:"px-4 py-2 bg-gray-600/50 text-white rounded-md hover:bg-gray-500/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>R(!1),className:"px-4 py-2 bg-gray-400 text-black rounded-md hover:bg-gray-500 transition-all",children:"Volver a Compra"})]})]})}),q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-700/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-600/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-gray-400"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-600/50 text-white rounded-md hover:bg-gray-500/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-700/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-600/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-gray-400"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),O(null)},className:"px-4 py-2 bg-gray-400 text-black rounded-md hover:bg-gray-500 transition-all",children:"Aceptar"})})]})})]})},FF=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,_]=b.useState(null),[M,R]=b.useState(!1),[q,G]=b.useState(!1),[Y,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,Q]=b.useState(""),T=Nt(),W=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(B(I,"users",N.uid));if(h.exists()){const D=h.data();c({id:N.uid,name:D.username||"Usuario",email:N.email,orders:D.orders||[],role:D.role||"user",phone:D.phone||""}),x(Number(D.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=ye(Z(I,"products"),je("category","==","Iptv")),N=Ce(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(B(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,iptv:C.length}))},k=>{S("Error al cargar productos de IPTV"),console.error(k)}),h=ye(Z(I,"iptv_accounts"),je("status","==","available")),D=Ce(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=ye(Z(I,"products"),je("category","==",k));return Ce(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),D(),ne.forEach(k=>k())}},[]);const Ae=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>T("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ue=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const D=B(I,"products",n.id),H=await h.get(D);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=ye(k,je("status","==","available"),zt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,z=v.data(),oe=B(I,"users",o.id),se=await h.get(oe);if(!se.exists())throw new Error("Usuario no encontrado");const ie=B(I,"users",n.providerId),ae=await h.get(ie);if(!ae.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),le=await h.get(re);let $=0;le.exists()?$=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});let J=n.providerPhone||"";J||(J=ae.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(D,{availableAccounts:tt(-1),stock:tt(-1)});const ke=(Number(se.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Te=se.data().orders||[],fe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},terms:n.terms,type:"iptv"};h.update(oe,{balance:ke,orders:[...Te,fe]});const Ne=(Number(ae.data().balance)||0)+n.price,Le=ae.data().sales||[],X={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ie,{balance:Ne,sales:[...Le,X]});const ce=$+n.price;h.set(re,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const ve=B(Z(I,"sales"));return h.set(ve,{...fe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleId:X.saleId,terms:n.terms}),z}):await at(I,async h=>{const D=B(I,"users",o.id),H=await h.get(D);if(!H.exists())throw new Error("Usuario no encontrado");const ne=B(I,"users",n.providerId),k=await h.get(ne);if(!k.exists())throw new Error("Proveedor no encontrado");const A=B(I,"providerBalances",n.providerId),C=await h.get(A);let v=0;C.exists()?v=parseFloat(C.data().balance)||0:h.set(A,{balance:0,provider:n.providerId,updatedAt:he()});let p=n.providerPhone||"";p||(p=k.data().phoneNumber||"");const oe=(Number(H.data().balance)||0)-n.price;if(oe<0)throw new Error("Saldo insuficiente");const se=H.data().orders||[],ie={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"iptv"};h.update(D,{balance:oe,orders:[...se,ie]});const re=(Number(k.data().balance)||0)+n.price,le=k.data().sales||[],$={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ne,{balance:re,sales:[...le,$]});const J=v+n.price;h.set(A,{balance:J,provider:n.providerId,updatedAt:he()},{merge:!0});const xe=B(Z(I,"sales"));h.set(xe,{...ie,provider:n.provider,providerId:n.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:$.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},_e=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{_({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),R(!0)},ue=()=>{if(!o){T("/login");return}(o==null?void 0:o.role)==="user"?T("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?T("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?T("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&T("/dashboard/admin")},me=n=>{n.preventDefault(),F.trim()&&T(`/search?q=${encodeURIComponent(F)}&category=Iptv`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Oe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const D=n.match(/(\d+)/);return D?`${parseInt(D[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-blue-700 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-blue-700 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-700 text-white rounded-full hover:bg-blue-800 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-blue-700 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en IPTV...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-blue-700 focus:border-blue-700 transition-all placeholder-gray-500",value:F,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:me,className:"absolute right-3 text-gray-400 hover:text-blue-700 transition-all",children:e.jsx(Ze,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-blue-700"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-blue-700",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),T("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-blue-700/80 hover:bg-blue-800 transition-all text-sm text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>T("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-blue-700 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>T("/register"),className:"px-4 py-2 rounded-full bg-blue-700 text-white hover:bg-blue-800 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-blue-700",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-blue-700/30 text-white border border-blue-700/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ze,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-700/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1485846234645-a62644f84728?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de IPTV"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Accede a miles de canales en vivo y contenido bajo demanda con nuestras cuentas premium de IPTV"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-blue-700 hover:text-blue-600 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Oe(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-green-400 text-sm",children:["Renovación - S/ ",W(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-blue-700",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-blue-700",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-blue-700",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-blue-700",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",W(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>_e(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Fe,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>be(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Pe,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>Ae(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-blue-700 hover:bg-blue-800":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-blue-700"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",W(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-700 focus:border-blue-700 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-700 focus:border-blue-700 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-blue-700 bg-gray-700 border-gray-600 rounded focus:ring-blue-700"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>be(g.product),className:"text-blue-700 hover:text-blue-600 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-blue-700 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ue,disabled:f,className:`px-4 py-2 bg-blue-700 text-white rounded-md hover:bg-blue-800 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-blue-700"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>_(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-blue-700"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{R(!1),_(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>R(!1),className:"px-4 py-2 bg-blue-700 text-white rounded-md hover:bg-blue-800 transition-all",children:"Volver a Compra"})]})]})}),q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-blue-700"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-blue-700"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),O(null)},className:"px-4 py-2 bg-blue-700 text-white rounded-md hover:bg-blue-800 transition-all",children:"Aceptar"})})]})})]})},UF=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,_]=b.useState(null),[M,R]=b.useState(!1),[q,G]=b.useState(!1),[Y,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,Q]=b.useState(""),T=Nt(),W=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(B(I,"users",N.uid));if(h.exists()){const D=h.data();c({id:N.uid,name:D.username||"Usuario",email:N.email,orders:D.orders||[],role:D.role||"user",phone:D.phone||""}),x(Number(D.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=ye(Z(I,"products"),je("category","==","Flujo Tv")),N=Ce(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(B(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,flujotv:C.length}))},k=>{S("Error al cargar productos de Flujo TV"),console.error(k)}),h=ye(Z(I,"flujotv_accounts"),je("status","==","available")),D=Ce(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=ye(Z(I,"products"),je("category","==",k));return Ce(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),D(),ne.forEach(k=>k())}},[]);const Ae=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>T("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ue=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const D=B(I,"products",n.id),H=await h.get(D);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=ye(k,je("status","==","available"),zt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,z=v.data(),oe=B(I,"users",o.id),se=await h.get(oe);if(!se.exists())throw new Error("Usuario no encontrado");const ie=B(I,"users",n.providerId),ae=await h.get(ie);if(!ae.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),le=await h.get(re);let $=0;le.exists()?$=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});let J=n.providerPhone||"";J||(J=ae.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(D,{availableAccounts:tt(-1),stock:tt(-1)});const ke=(Number(se.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Te=se.data().orders||[],fe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},terms:n.terms,type:"flujotv"};h.update(oe,{balance:ke,orders:[...Te,fe]});const Ne=(Number(ae.data().balance)||0)+n.price,Le=ae.data().sales||[],X={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ie,{balance:Ne,sales:[...Le,X]});const ce=$+n.price;h.set(re,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const ve=B(Z(I,"sales"));return h.set(ve,{...fe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleId:X.saleId,terms:n.terms}),z}):await at(I,async h=>{const D=B(I,"users",o.id),H=await h.get(D);if(!H.exists())throw new Error("Usuario no encontrado");const ne=B(I,"users",n.providerId),k=await h.get(ne);if(!k.exists())throw new Error("Proveedor no encontrado");const A=B(I,"providerBalances",n.providerId),C=await h.get(A);let v=0;C.exists()?v=parseFloat(C.data().balance)||0:h.set(A,{balance:0,provider:n.providerId,updatedAt:he()});let p=n.providerPhone||"";p||(p=k.data().phoneNumber||"");const oe=(Number(H.data().balance)||0)-n.price;if(oe<0)throw new Error("Saldo insuficiente");const se=H.data().orders||[],ie={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"flujotv"};h.update(D,{balance:oe,orders:[...se,ie]});const re=(Number(k.data().balance)||0)+n.price,le=k.data().sales||[],$={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ne,{balance:re,sales:[...le,$]});const J=v+n.price;h.set(A,{balance:J,provider:n.providerId,updatedAt:he()},{merge:!0});const xe=B(Z(I,"sales"));h.set(xe,{...ie,provider:n.provider,providerId:n.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:$.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},_e=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{_({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),R(!0)},ue=()=>{if(!o){T("/login");return}(o==null?void 0:o.role)==="user"?T("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?T("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?T("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&T("/dashboard/admin")},me=n=>{n.preventDefault(),F.trim()&&T(`/search?q=${encodeURIComponent(F)}&category=Flujo Tv`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Oe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const D=n.match(/(\d+)/);return D?`${parseInt(D[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-red-500 text-white rounded-full hover:bg-red-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-red-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Flujo TV...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all placeholder-gray-500",value:F,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:me,className:"absolute right-3 text-gray-400 hover:text-red-500 transition-all",children:e.jsx(Ze,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-red-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-red-500",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),T("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-500/80 hover:bg-red-600 transition-all text-sm text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>T("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-red-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>T("/register"),className:"px-4 py-2 rounded-full bg-red-500 text-white hover:bg-red-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-red-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-red-500/30 text-white border border-red-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ze,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1522869635100-9f4c5e86aa37?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Flujo TV"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de canales en vivo y contenido exclusivo con nuestras cuentas premium de Flujo TV"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-red-500 hover:text-red-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Oe(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-green-400 text-sm",children:["Renovación - S/ ",W(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-red-500",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-red-500",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-red-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-red-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",W(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>_e(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Fe,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>be(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Pe,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>Ae(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-red-500 hover:bg-red-600":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-red-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",W(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-500 bg-gray-700 border-gray-600 rounded focus:ring-red-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>be(g.product),className:"text-red-500 hover:text-red-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-red-500 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ue,disabled:f,className:`px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-red-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>_(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-red-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{R(!1),_(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>R(!1),className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-all",children:"Volver a Compra"})]})]})}),q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-red-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-red-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),O(null)},className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-all",children:"Aceptar"})})]})})]})},$F=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,_]=b.useState(null),[M,R]=b.useState(!1),[q,G]=b.useState(!1),[Y,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,Q]=b.useState(""),T=Nt(),W=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(B(I,"users",N.uid));if(h.exists()){const D=h.data();c({id:N.uid,name:D.username||"Usuario",email:N.email,orders:D.orders||[],role:D.role||"user",phone:D.phone||""}),x(Number(D.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=ye(Z(I,"products"),je("category","==","Viki Rakuten")),N=Ce(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(B(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,vikirakuten:C.length}))},k=>{S("Error al cargar productos de Viki Rakuten"),console.error(k)}),h=ye(Z(I,"vikirakuten_accounts"),je("status","==","available")),D=Ce(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=ye(Z(I,"products"),je("category","==",k));return Ce(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),D(),ne.forEach(k=>k())}},[]);const Ae=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>T("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ue=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const D=B(I,"products",n.id),H=await h.get(D);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=ye(k,je("status","==","available"),zt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,z=v.data(),oe=B(I,"users",o.id),se=await h.get(oe);if(!se.exists())throw new Error("Usuario no encontrado");const ie=B(I,"users",n.providerId),ae=await h.get(ie);if(!ae.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),le=await h.get(re);let $=0;le.exists()?$=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});let J=n.providerPhone||"";J||(J=ae.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(D,{availableAccounts:tt(-1),stock:tt(-1)});const ke=(Number(se.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Te=se.data().orders||[],fe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},terms:n.terms,type:"vikirakuten"};h.update(oe,{balance:ke,orders:[...Te,fe]});const Ne=(Number(ae.data().balance)||0)+n.price,Le=ae.data().sales||[],X={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ie,{balance:Ne,sales:[...Le,X]});const ce=$+n.price;h.set(re,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const ve=B(Z(I,"sales"));return h.set(ve,{...fe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleId:X.saleId,terms:n.terms}),z}):await at(I,async h=>{const D=B(I,"users",o.id),H=await h.get(D);if(!H.exists())throw new Error("Usuario no encontrado");const ne=B(I,"users",n.providerId),k=await h.get(ne);if(!k.exists())throw new Error("Proveedor no encontrado");const A=B(I,"providerBalances",n.providerId),C=await h.get(A);let v=0;C.exists()?v=parseFloat(C.data().balance)||0:h.set(A,{balance:0,provider:n.providerId,updatedAt:he()});let p=n.providerPhone||"";p||(p=k.data().phoneNumber||"");const oe=(Number(H.data().balance)||0)-n.price;if(oe<0)throw new Error("Saldo insuficiente");const se=H.data().orders||[],ie={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"vikirakuten"};h.update(D,{balance:oe,orders:[...se,ie]});const re=(Number(k.data().balance)||0)+n.price,le=k.data().sales||[],$={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ne,{balance:re,sales:[...le,$]});const J=v+n.price;h.set(A,{balance:J,provider:n.providerId,updatedAt:he()},{merge:!0});const xe=B(Z(I,"sales"));h.set(xe,{...ie,provider:n.provider,providerId:n.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:$.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},_e=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{_({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),R(!0)},ue=()=>{if(!o){T("/login");return}(o==null?void 0:o.role)==="user"?T("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?T("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?T("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&T("/dashboard/admin")},me=n=>{n.preventDefault(),F.trim()&&T(`/search?q=${encodeURIComponent(F)}&category=Viki Rakuten`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Oe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-pink-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const D=n.match(/(\d+)/);return D?`${parseInt(D[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-pink-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-pink-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-pink-500 text-white rounded-full hover:bg-pink-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-pink-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Viki Rakuten...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-pink-500 focus:border-pink-500 transition-all placeholder-gray-500",value:F,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:me,className:"absolute right-3 text-gray-400 hover:text-pink-500 transition-all",children:e.jsx(Ze,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-pink-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-pink-500",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),T("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-pink-500/80 hover:bg-pink-600 transition-all text-sm text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>T("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-pink-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>T("/register"),className:"px-4 py-2 rounded-full bg-pink-500 text-white hover:bg-pink-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-pink-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-pink-500/30 text-white border border-pink-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ze,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-pink-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1536440136628-849c177e76a1?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Viki Rakuten"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de dramas asiáticos, películas y series exclusivas con nuestras cuentas premium de Viki Rakuten"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-pink-500 hover:text-pink-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Oe(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-green-400 text-sm",children:["Renovación - S/ ",W(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-pink-500",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-pink-500",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-pink-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-pink-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",W(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>_e(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Fe,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>be(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Pe,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>Ae(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-pink-500 hover:bg-pink-600":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-pink-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",W(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-pink-500 focus:border-pink-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-pink-500 focus:border-pink-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-pink-500 bg-gray-700 border-gray-600 rounded focus:ring-pink-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>be(g.product),className:"text-pink-500 hover:text-pink-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-pink-500 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ue,disabled:f,className:`px-4 py-2 bg-pink-500 text-white rounded-md hover:bg-pink-600 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-pink-600"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>_(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-pink-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{R(!1),_(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>R(!1),className:"px-4 py-2 bg-pink-500 text-white rounded-md hover:bg-pink-600 transition-all",children:"Volver a Compra"})]})]})}),q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-pink-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-pink-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),O(null)},className:"px-4 py-2 bg-pink-500 text-white rounded-md hover:bg-pink-600 transition-all",children:"Aceptar"})})]})})]})},WF=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,_]=b.useState(null),[M,R]=b.useState(!1),[q,G]=b.useState(!1),[Y,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,Q]=b.useState(""),T=Nt(),W=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(B(I,"users",N.uid));if(h.exists()){const D=h.data();c({id:N.uid,name:D.username||"Usuario",email:N.email,orders:D.orders||[],role:D.role||"user",phone:D.phone||""}),x(Number(D.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=ye(Z(I,"products"),je("category","==","Pornhub")),N=Ce(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(B(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,pornhub:C.length}))},k=>{S("Error al cargar productos de Pornhub"),console.error(k)}),h=ye(Z(I,"pornhub_accounts"),je("status","==","available")),D=Ce(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=ye(Z(I,"products"),je("category","==",k));return Ce(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),D(),ne.forEach(k=>k())}},[]);const Ae=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>T("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ue=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const D=B(I,"products",n.id),H=await h.get(D);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=ye(k,je("status","==","available"),zt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,z=v.data(),oe=B(I,"users",o.id),se=await h.get(oe);if(!se.exists())throw new Error("Usuario no encontrado");const ie=B(I,"users",n.providerId),ae=await h.get(ie);if(!ae.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),le=await h.get(re);let $=0;le.exists()?$=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});let J=n.providerPhone||"";J||(J=ae.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(D,{availableAccounts:tt(-1),stock:tt(-1)});const ke=(Number(se.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Te=se.data().orders||[],fe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},terms:n.terms,type:"pornhub"};h.update(oe,{balance:ke,orders:[...Te,fe]});const Ne=(Number(ae.data().balance)||0)+n.price,Le=ae.data().sales||[],X={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ie,{balance:Ne,sales:[...Le,X]});const ce=$+n.price;h.set(re,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const ve=B(Z(I,"sales"));return h.set(ve,{...fe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleId:X.saleId,terms:n.terms}),z}):await at(I,async h=>{const D=B(I,"users",o.id),H=await h.get(D);if(!H.exists())throw new Error("Usuario no encontrado");const ne=B(I,"users",n.providerId),k=await h.get(ne);if(!k.exists())throw new Error("Proveedor no encontrado");const A=B(I,"providerBalances",n.providerId),C=await h.get(A);let v=0;C.exists()?v=parseFloat(C.data().balance)||0:h.set(A,{balance:0,provider:n.providerId,updatedAt:he()});let p=n.providerPhone||"";p||(p=k.data().phoneNumber||"");const oe=(Number(H.data().balance)||0)-n.price;if(oe<0)throw new Error("Saldo insuficiente");const se=H.data().orders||[],ie={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"pornhub"};h.update(D,{balance:oe,orders:[...se,ie]});const re=(Number(k.data().balance)||0)+n.price,le=k.data().sales||[],$={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ne,{balance:re,sales:[...le,$]});const J=v+n.price;h.set(A,{balance:J,provider:n.providerId,updatedAt:he()},{merge:!0});const xe=B(Z(I,"sales"));h.set(xe,{...ie,provider:n.provider,providerId:n.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:$.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},_e=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{_({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),R(!0)},ue=()=>{if(!o){T("/login");return}(o==null?void 0:o.role)==="user"?T("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?T("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?T("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&T("/dashboard/admin")},me=n=>{n.preventDefault(),F.trim()&&T(`/search?q=${encodeURIComponent(F)}&category=Pornhub`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Oe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const D=n.match(/(\d+)/);return D?`${parseInt(D[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-orange-600 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-orange-600 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-orange-600 text-white rounded-full hover:bg-orange-700 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-orange-600 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Pornhub...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-orange-600 focus:border-orange-600 transition-all placeholder-gray-500",value:F,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:me,className:"absolute right-3 text-gray-400 hover:text-orange-600 transition-all",children:e.jsx(Ze,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-orange-600"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-orange-600",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),T("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-orange-600/80 hover:bg-orange-700 transition-all text-sm text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>T("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-orange-600 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>T("/register"),className:"px-4 py-2 rounded-full bg-orange-600 text-white hover:bg-orange-700 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-orange-600",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px 4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-600"}),e.jsx("span",{children:"LigaZone"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-orange-600/30 text-white border border-orange-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-orange-600"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ze,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-orange-600/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1515378960530-7c0da6231fb1?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Pornhub"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de contenido premium con nuestras cuentas de Pornhub"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-orange-600 hover:text-orange-500 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Oe(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-green-400 text-sm",children:["Renovación - S/ ",W(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-orange-600",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-orange-600",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-orange-600",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-orange-600",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",W(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>_e(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Fe,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>be(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Pe,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>Ae(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-orange-600 hover:bg-orange-700":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-orange-600"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",W(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-orange-600 focus:border-orange-600 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-orange-600 focus:border-orange-600 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-orange-600 bg-gray-700 border-gray-600 rounded focus:ring-orange-600"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>be(g.product),className:"text-orange-600 hover:text-orange-500 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-orange-600 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ue,disabled:f,className:`px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-orange-600"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>_(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-orange-600"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{R(!1),_(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>R(!1),className:"px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 transition-all",children:"Volver a Compra"})]})]})}),q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 sm:p-8",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-orange-600"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 sm:p-8",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-orange-600"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),O(null)},className:"px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 transition-all",children:"Aceptar"})})]})})]})},qF=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,_]=b.useState(null),[M,R]=b.useState(!1),[q,G]=b.useState(!1),[Y,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,Q]=b.useState(""),T=Nt(),W=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(B(I,"users",N.uid));if(h.exists()){const D=h.data();c({id:N.uid,name:D.username||"Usuario",email:N.email,orders:D.orders||[],role:D.role||"user",phone:D.phone||""}),x(Number(D.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=ye(Z(I,"products"),je("category","==","Paramount")),N=Ce(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(B(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,paramount:C.length}))},k=>{S("Error al cargar productos de Paramount"),console.error(k)}),h=ye(Z(I,"paramount_accounts"),je("status","==","available")),D=Ce(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=ye(Z(I,"products"),je("category","==",k));return Ce(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),D(),ne.forEach(k=>k())}},[]);const Ae=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>T("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ue=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const D=B(I,"products",n.id),H=await h.get(D);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=ye(k,je("status","==","available"),zt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,z=v.data(),oe=B(I,"users",o.id),se=await h.get(oe);if(!se.exists())throw new Error("Usuario no encontrado");const ie=B(I,"users",n.providerId),ae=await h.get(ie);if(!ae.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),le=await h.get(re);let $=0;le.exists()?$=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});let J=n.providerPhone||"";J||(J=ae.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(D,{availableAccounts:tt(-1),stock:tt(-1)});const ke=(Number(se.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Te=se.data().orders||[],fe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},terms:n.terms,type:"paramount"};h.update(oe,{balance:ke,orders:[...Te,fe]});const Ne=(Number(ae.data().balance)||0)+n.price,Le=ae.data().sales||[],X={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ie,{balance:Ne,sales:[...Le,X]});const ce=$+n.price;h.set(re,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const ve=B(Z(I,"sales"));return h.set(ve,{...fe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleId:X.saleId,terms:n.terms}),z}):await at(I,async h=>{const D=B(I,"users",o.id),H=await h.get(D);if(!H.exists())throw new Error("Usuario no encontrado");const ne=B(I,"users",n.providerId),k=await h.get(ne);if(!k.exists())throw new Error("Proveedor no encontrado");const A=B(I,"providerBalances",n.providerId),C=await h.get(A);let v=0;C.exists()?v=parseFloat(C.data().balance)||0:h.set(A,{balance:0,provider:n.providerId,updatedAt:he()});let p=n.providerPhone||"";p||(p=k.data().phoneNumber||"");const oe=(Number(H.data().balance)||0)-n.price;if(oe<0)throw new Error("Saldo insuficiente");const se=H.data().orders||[],ie={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"paramount"};h.update(D,{balance:oe,orders:[...se,ie]});const re=(Number(k.data().balance)||0)+n.price,le=k.data().sales||[],$={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ne,{balance:re,sales:[...le,$]});const J=v+n.price;h.set(A,{balance:J,provider:n.providerId,updatedAt:he()},{merge:!0});const xe=B(Z(I,"sales"));h.set(xe,{...ie,provider:n.provider,providerId:n.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:$.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},_e=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{_({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),R(!0)},ue=()=>{if(!o){T("/login");return}(o==null?void 0:o.role)==="user"?T("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?T("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?T("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&T("/dashboard/admin")},me=n=>{n.preventDefault(),F.trim()&&T(`/search?q=${encodeURIComponent(F)}&category=Paramount`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Oe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const D=n.match(/(\d+)/);return D?`${parseInt(D[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-blue-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-blue-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-blue-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Paramount...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500",value:F,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:me,className:"absolute right-3 text-gray-400 hover:text-blue-400 transition-all",children:e.jsx(Ze,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-blue-400"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-blue-400",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),T("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-blue-600/80 hover:bg-blue-700 transition-all text-sm text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>T("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-blue-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>T("/register"),className:"px-4 py-2 rounded-full bg-blue-500 text-white hover:bg-blue-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-blue-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-blue-600/30 text-white border border-blue-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ze,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1536440136628-0f1a2a76ef91?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Paramount"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de tus series y películas favoritas con nuestras cuentas premium de Paramount"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-blue-400 hover:text-blue-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Oe(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-green-400 text-sm",children:["Renovación - S/ ",W(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-blue-400",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-blue-400",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-blue-400",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-blue-400",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",W(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>_e(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Fe,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>be(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Pe,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>Ae(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-blue-500 hover:bg-blue-600":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-blue-400"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",W(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-blue-400 bg-gray-700 border-gray-600 rounded focus:ring-blue-400"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>be(g.product),className:"text-blue-400 hover:text-blue-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-blue-400 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ue,disabled:f,className:`px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-blue-400"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>_(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-blue-400"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{R(!1),_(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>R(!1),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Volver a Compra"})]})]})}),q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-blue-400"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-blue-400"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),O(null)},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Aceptar"})})]})})]})},HF=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,_]=b.useState(null),[M,R]=b.useState(!1),[q,G]=b.useState(!1),[Y,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,Q]=b.useState(""),T=Nt(),W=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(B(I,"users",N.uid));if(h.exists()){const D=h.data();c({id:N.uid,name:D.username||"Usuario",email:N.email,orders:D.orders||[],role:D.role||"user",phone:D.phone||""}),x(Number(D.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=ye(Z(I,"products"),je("category","==","Licencias")),N=Ce(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(B(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,licencias:C.length}))},k=>{S("Error al cargar productos de Licencias"),console.error(k)}),h=ye(Z(I,"licencias_accounts"),je("status","==","available")),D=Ce(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=ye(Z(I,"products"),je("category","==",k));return Ce(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),D(),ne.forEach(k=>k())}},[]);const Ae=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>T("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ue=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const D=B(I,"products",n.id),H=await h.get(D);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=ye(k,je("status","==","available"),zt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,z=v.data(),oe=B(I,"users",o.id),se=await h.get(oe);if(!se.exists())throw new Error("Usuario no encontrado");const ie=B(I,"users",n.providerId),ae=await h.get(ie);if(!ae.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),le=await h.get(re);let $=0;le.exists()?$=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});let J=n.providerPhone||"";J||(J=ae.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(D,{availableAccounts:tt(-1),stock:tt(-1)});const ke=(Number(se.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Te=se.data().orders||[],fe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},terms:n.terms,type:"licencias"};h.update(oe,{balance:ke,orders:[...Te,fe]});const Ne=(Number(ae.data().balance)||0)+n.price,Le=ae.data().sales||[],X={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ie,{balance:Ne,sales:[...Le,X]});const ce=$+n.price;h.set(re,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const ve=B(Z(I,"sales"));return h.set(ve,{...fe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleId:X.saleId,terms:n.terms}),z}):await at(I,async h=>{const D=B(I,"users",o.id),H=await h.get(D);if(!H.exists())throw new Error("Usuario no encontrado");const ne=B(I,"users",n.providerId),k=await h.get(ne);if(!k.exists())throw new Error("Proveedor no encontrado");const A=B(I,"providerBalances",n.providerId),C=await h.get(A);let v=0;C.exists()?v=parseFloat(C.data().balance)||0:h.set(A,{balance:0,provider:n.providerId,updatedAt:he()});let p=n.providerPhone||"";p||(p=k.data().phoneNumber||"");const oe=(Number(H.data().balance)||0)-n.price;if(oe<0)throw new Error("Saldo insuficiente");const se=H.data().orders||[],ie={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"licencias"};h.update(D,{balance:oe,orders:[...se,ie]});const re=(Number(k.data().balance)||0)+n.price,le=k.data().sales||[],$={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ne,{balance:re,sales:[...le,$]});const J=v+n.price;h.set(A,{balance:J,provider:n.providerId,updatedAt:he()},{merge:!0});const xe=B(Z(I,"sales"));h.set(xe,{...ie,provider:n.provider,providerId:n.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:$.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},_e=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,accountType:n.accountType})},be=n=>{_({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),R(!0)},ue=()=>{if(!o){T("/login");return}o.role==="user"?T("/dashboard/user"):o.role==="affiliate"?T("/dashboard/affiliate"):o.role==="provider"?T("/dashboard/provider"):o.role==="admin"&&T("/dashboard/admin")},me=n=>{n.preventDefault(),F.trim()&&T(`/search?q=${encodeURIComponent(F)}&category=Licencias`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Oe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const D=n.match(/(\d+)/);return D?`${parseInt(D[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-gray-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-gray-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-gray-600 text-white rounded-full hover:bg-gray-700 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-gray-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Licencias...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-gray-400 focus:border-gray-400 transition-all placeholder-gray-500",value:F,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:me,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-300 transition-all",children:e.jsx(Ze,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-gray-400"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-gray-400",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),T("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-gray-600 hover:bg-gray-700 transition-all text-sm text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>T("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-gray-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>T("/register"),className:"px-4 py-2 rounded-full bg-gray-600 text-white hover:bg-gray-700 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-gray-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-gray-600/30 text-white border border-gray-500/50",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-400"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ze,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-600/30 flex items-center justify-center text-white font-semibold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1451187580459-43490279c3b4?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Licencias Premium"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Accede a una variedad de licencias premium para software y servicios"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Licencias Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-gray-400 hover:text-gray-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Oe(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-green-400 text-sm",children:["Renovación - S/ ",W(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-gray-400",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-gray-400",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-gray-400",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-gray-400",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",W(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>_e(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Fe,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>be(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Pe,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>Ae(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-gray-600 hover:bg-gray-700":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-gray-400"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",W(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-gray-400 focus:border-gray-400 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-gray-400 focus:border-gray-400 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-gray-400 bg-gray-700 border-gray-600 rounded focus:ring-gray-400"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>be(g.product),className:"text-gray-400 hover:text-gray-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-red-400 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ue,disabled:f,className:`px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-gray-400"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>_(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-gray-400"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{R(!1),_(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>R(!1),className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-all",children:"Volver a Compra"})]})]})}),q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-gray-400"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-gray-400"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),O(null)},className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-all",children:"Aceptar"})})]})})]})},GF=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,_]=b.useState(null),[M,R]=b.useState(!1),[q,G]=b.useState(!1),[Y,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,Q]=b.useState(""),T=Nt(),W=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(B(I,"users",N.uid));if(h.exists()){const D=h.data();c({id:N.uid,name:D.username||"Usuario",email:N.email,orders:D.orders||[],role:D.role||"user",phone:D.phone||""}),x(Number(D.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=ye(Z(I,"products"),je("category","==","Capcut")),N=Ce(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(B(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,capcut:C.length}))},k=>{S("Error al cargar productos de Capcut"),console.error(k)}),h=ye(Z(I,"capcut_accounts"),je("status","==","available")),D=Ce(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=ye(Z(I,"products"),je("category","==",k));return Ce(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),D(),ne.forEach(k=>k())}},[]);const Ae=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>T("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ue=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const D=B(I,"products",n.id),H=await h.get(D);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=ye(k,je("status","==","available"),zt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,z=v.data(),oe=B(I,"users",o.id),se=await h.get(oe);if(!se.exists())throw new Error("Usuario no encontrado");const ie=B(I,"users",n.providerId),ae=await h.get(ie);if(!ae.exists())throw new Error("Proveedor no encontrado");let re=n.providerPhone||"";re||(re=ae.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(D,{availableAccounts:tt(-1),stock:tt(-1)});const $=(Number(se.data().balance)||0)-n.price;if($<0)throw new Error("Saldo insuficiente");const J=se.data().orders||[],xe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:re,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},terms:n.terms,type:"capcut"};h.update(oe,{balance:$,orders:[...J,xe]});const Te=(Number(ae.data().balance)||0)+n.price,fe=ae.data().sales||[],Me={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:re,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ie,{balance:Te,sales:[...fe,Me]});const Ne=B(I,"providerBalances",n.providerId),Le=await h.get(Ne);let X=0;Le.exists()?X=parseFloat(Le.data().balance)||0:h.set(Ne,{balance:0,provider:n.providerId,updatedAt:he()});const ce=X+n.price;h.set(Ne,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const ve=B(Z(I,"sales"));return h.set(ve,{...xe,provider:n.provider,providerId:n.providerId,providerPhone:re,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleId:Me.saleId,terms:n.terms}),z}):await at(I,async h=>{const D=B(I,"users",o.id),H=await h.get(D);if(!H.exists())throw new Error("Usuario no encontrado");const ne=B(I,"users",n.providerId),k=await h.get(ne);if(!k.exists())throw new Error("Proveedor no encontrado");let A=n.providerPhone||"";A||(A=k.data().phoneNumber||"");const v=(Number(H.data().balance)||0)-n.price;if(v<0)throw new Error("Saldo insuficiente");const p=H.data().orders||[],z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:A,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"capcut"};h.update(D,{balance:v,orders:[...p,z]});const se=(Number(k.data().balance)||0)+n.price,ie=k.data().sales||[],ae={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:A,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ne,{balance:se,sales:[...ie,ae]});const re=B(I,"providerBalances",n.providerId),le=await h.get(re);let $=0;le.exists()?$=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});const J=$+n.price;h.set(re,{balance:J,provider:n.providerId,updatedAt:he()},{merge:!0});const xe=B(Z(I,"sales"));h.set(xe,{...z,provider:n.provider,providerId:n.providerId,providerPhone:A,saleDate:new Date().toISOString(),status:"pending",saleId:ae.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},_e=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{_({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),R(!0)},ue=()=>{if(!o){T("/login");return}(o==null?void 0:o.role)==="user"?T("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?T("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?T("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&T("/dashboard/admin")},me=n=>{n.preventDefault(),F.trim()&&T(`/search?q=${encodeURIComponent(F)}&category=Capcut`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Oe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-teal-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const D=n.match(/(\d+)/);return D?`${parseInt(D[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-teal-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-teal-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-teal-500 text-white rounded-full hover:bg-teal-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-teal-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Capcut...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all placeholder-gray-500",value:F,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:me,className:"absolute right-3 text-gray-400 hover:text-teal-500 transition-all",children:e.jsx(Ze,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-teal-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-teal-500",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),T("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-teal-600/80 hover:bg-teal-700 transition-all text-sm text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>T("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-teal-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>T("/register"),className:"px-4 py-2 rounded-full bg-teal-500 text-white hover:bg-teal-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-teal-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-teal-600/30 text-white border border-teal-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ze,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-teal-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1616530940355-351fab26532b?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Capcut"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Crea y edita videos impresionantes con nuestras cuentas premium de Capcut"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-teal-500 hover:text-teal-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Oe(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-green-400 text-sm",children:["Renovación - S/ ",W(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-teal-500",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-teal-500",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-teal-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-teal-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",W(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>_e(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Fe,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>be(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Pe,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>Ae(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-teal-500 hover:bg-teal-600":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-teal-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",W(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-teal-500 bg-gray-700 border-gray-600 rounded focus:ring-teal-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>be(g.product),className:"text-teal-500 hover:text-teal-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-teal-500 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ue,disabled:f,className:`px-4 py-2 bg-teal-500 text-white rounded-md hover:bg-teal-600 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-teal-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>_(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-teal-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{R(!1),_(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>R(!1),className:"px-4 py-2 bg-teal-500 text-white rounded-md hover:bg-teal-600 transition-all",children:"Volver a Compra"})]})]})}),q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-teal-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-teal-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),O(null)},className:"px-4 py-2 bg-teal-500 text-white rounded-md hover:bg-teal-600 transition-all",children:"Aceptar"})})]})})]})},KF=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,_]=b.useState(null),[M,R]=b.useState(!1),[q,G]=b.useState(!1),[Y,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,Q]=b.useState(""),T=Nt(),W=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(B(I,"users",N.uid));if(h.exists()){const D=h.data();c({id:N.uid,name:D.username||"Usuario",email:N.email,orders:D.orders||[],role:D.role||"user",phone:D.phone||""}),x(Number(D.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=ye(Z(I,"products"),je("category","==","Duolingo")),N=Ce(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(B(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,duolingo:C.length}))},k=>{S("Error al cargar productos de Duolingo"),console.error(k)}),h=ye(Z(I,"duolingo_accounts"),je("status","==","available")),D=Ce(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=ye(Z(I,"products"),je("category","==",k));return Ce(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),D(),ne.forEach(k=>k())}},[]);const Ae=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>T("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ue=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const D=B(I,"products",n.id),H=await h.get(D);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=ye(k,je("status","==","available"),zt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,z=v.data(),oe=B(I,"users",o.id),se=await h.get(oe);if(!se.exists())throw new Error("Usuario no encontrado");const ie=B(I,"users",n.providerId),ae=await h.get(ie);if(!ae.exists())throw new Error("Proveedor no encontrado");let re=n.providerPhone||"";re||(re=ae.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(D,{availableAccounts:tt(-1),stock:tt(-1)});const $=(Number(se.data().balance)||0)-n.price;if($<0)throw new Error("Saldo insuficiente");const J=se.data().orders||[],xe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:re,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},terms:n.terms,type:"duolingo"};h.update(oe,{balance:$,orders:[...J,xe]});const Te=(Number(ae.data().balance)||0)+n.price,fe=ae.data().sales||[],Me={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:re,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ie,{balance:Te,sales:[...fe,Me]});const Ne=B(I,"providerBalances",n.providerId),Le=await h.get(Ne);let X=0;Le.exists()?X=parseFloat(Le.data().balance)||0:h.set(Ne,{balance:0,provider:n.providerId,updatedAt:he()});const ce=X+n.price;h.set(Ne,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const ve=B(Z(I,"sales"));return h.set(ve,{...xe,provider:n.provider,providerId:n.providerId,providerPhone:re,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleId:Me.saleId,terms:n.terms}),z}):await at(I,async h=>{const D=B(I,"users",o.id),H=await h.get(D);if(!H.exists())throw new Error("Usuario no encontrado");const ne=B(I,"users",n.providerId),k=await h.get(ne);if(!k.exists())throw new Error("Proveedor no encontrado");let A=n.providerPhone||"";A||(A=k.data().phoneNumber||"");const v=(Number(H.data().balance)||0)-n.price;if(v<0)throw new Error("Saldo insuficiente");const p=H.data().orders||[],z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:A,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"duolingo"};h.update(D,{balance:v,orders:[...p,z]});const se=(Number(k.data().balance)||0)+n.price,ie=k.data().sales||[],ae={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:A,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ne,{balance:se,sales:[...ie,ae]});const re=B(I,"providerBalances",n.providerId),le=await h.get(re);let $=0;le.exists()?$=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});const J=$+n.price;h.set(re,{balance:J,provider:n.providerId,updatedAt:he()},{merge:!0});const xe=B(Z(I,"sales"));h.set(xe,{...z,provider:n.provider,providerId:n.providerId,providerPhone:A,saleDate:new Date().toISOString(),status:"pending",saleId:ae.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},_e=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{_({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),R(!0)},ue=()=>{if(!o){T("/login");return}(o==null?void 0:o.role)==="user"?T("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?T("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?T("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&T("/dashboard/admin")},me=n=>{n.preventDefault(),F.trim()&&T(`/search?q=${encodeURIComponent(F)}&category=Duolingo`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Oe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const D=n.match(/(\d+)/);return D?`${parseInt(D[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-green-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-green-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-green-500 text-white rounded-full hover:bg-green-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-green-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Duolingo...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all placeholder-gray-500",value:F,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:me,className:"absolute right-3 text-gray-400 hover:text-green-500 transition-all",children:e.jsx(Ze,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-green-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-green-500",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),T("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-green-600/80 hover:bg-green-700 transition-all text-sm text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>T("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-green-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>T("/register"),className:"px-4 py-2 rounded-full bg-green-500 text-white hover:bg-green-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-green-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"fluid items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-green-600/30 text-white border border-green-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-500"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ze,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1524178232363-1fb2b075b655?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Duolingo"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Aprende idiomas de forma divertida y efectiva con nuestras cuentas premium de Duolingo"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-green-500 hover:text-green-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Oe(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-green-400 text-sm",children:["Renovación - S/ ",W(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-green-500",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-green-500",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-green-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-green-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",W(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>_e(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Fe,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>be(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Pe,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>Ae(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-green-500 hover:bg-green-600":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-green-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",W(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-green-500 bg-gray-700 border-gray-600 rounded focus:ring-green-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>be(g.product),className:"text-green-500 hover:text-green-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-green-500 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ue,disabled:f,className:`px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-green-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>_(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-green-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{R(!1),_(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>R(!1),className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Volver a Compra"})]})]})}),q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-green-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-green-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),O(null)},className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Aceptar"})})]})})]})},QF=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,_]=b.useState(null),[M,R]=b.useState(!1),[q,G]=b.useState(!1),[Y,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,Q]=b.useState(""),T=Nt(),W=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(B(I,"users",N.uid));if(h.exists()){const D=h.data();c({id:N.uid,name:D.username||"Usuario",email:N.email,orders:D.orders||[],role:D.role||"user",phone:D.phone||""}),x(Number(D.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=ye(Z(I,"products"),je("category","==","Dgo")),N=Ce(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(B(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,dgo:C.length}))},k=>{S("Error al cargar productos de Dgo"),console.error(k)}),h=ye(Z(I,"dgo_accounts"),je("status","==","available")),D=Ce(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=ye(Z(I,"products"),je("category","==",k));return Ce(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),D(),ne.forEach(k=>k())}},[]);const Ae=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>T("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ue=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const D=B(I,"products",n.id),H=await h.get(D);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=ye(k,je("status","==","available"),zt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,z=v.data(),oe=B(I,"users",o.id),se=await h.get(oe);if(!se.exists())throw new Error("Usuario no encontrado");const ie=B(I,"users",n.providerId),ae=await h.get(ie);if(!ae.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),le=await h.get(re);let $=0;le.exists()?$=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});let J=n.providerPhone||"";J||(J=ae.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(D,{availableAccounts:tt(-1),stock:tt(-1)});const ke=(Number(se.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Te=se.data().orders||[],fe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},terms:n.terms,type:"dgo"};h.update(oe,{balance:ke,orders:[...Te,fe]});const Ne=(Number(ae.data().balance)||0)+n.price,Le=ae.data().sales||[],X={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ie,{balance:Ne,sales:[...Le,X]});const ce=$+n.price;h.set(re,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const ve=B(Z(I,"sales"));return h.set(ve,{...fe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleId:X.saleId,terms:n.terms}),z}):await at(I,async h=>{const D=B(I,"users",o.id),H=await h.get(D);if(!H.exists())throw new Error("Usuario no encontrado");const ne=B(I,"users",n.providerId),k=await h.get(ne);if(!k.exists())throw new Error("Proveedor no encontrado");const A=B(I,"providerBalances",n.providerId),C=await h.get(A);let v=0;C.exists()?v=parseFloat(C.data().balance)||0:h.set(A,{balance:0,provider:n.providerId,updatedAt:he()});let p=n.providerPhone||"";p||(p=k.data().phoneNumber||"");const oe=(Number(H.data().balance)||0)-n.price;if(oe<0)throw new Error("Saldo insuficiente");const se=H.data().orders||[],ie={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"dgo"};h.update(D,{balance:oe,orders:[...se,ie]});const re=(Number(k.data().balance)||0)+n.price,le=k.data().sales||[],$={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ne,{balance:re,sales:[...le,$]});const J=v+n.price;h.set(A,{balance:J,provider:n.providerId,updatedAt:he()},{merge:!0});const xe=B(Z(I,"sales"));h.set(xe,{...ie,provider:n.provider,providerId:n.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:$.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},_e=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{_({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),R(!0)},ue=()=>{if(!o){T("/login");return}(o==null?void 0:o.role)==="user"?T("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?T("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?T("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&T("/dashboard/admin")},me=n=>{n.preventDefault(),F.trim()&&T(`/search?q=${encodeURIComponent(F)}&category=Dgo`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Oe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const D=n.match(/(\d+)/);return D?`${parseInt(D[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-blue-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Dgo...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500",value:F,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:me,className:"absolute right-3 text-gray-400 hover:text-blue-400 transition-all",children:e.jsx(Ze,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-blue-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-blue-500",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),T("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-blue-600/80 hover:bg-blue-700 transition-all text-sm text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>T("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-blue-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>T("/register"),className:"px-4 py-2 rounded-full bg-blue-500 text-white hover:bg-blue-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-blue-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-teal-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-blue-600/30 text-white border border-blue-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ze,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1522202176988-66273c2fd55f?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Dgo"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de streaming en vivo y contenido exclusivo con Dgo"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-blue-400 hover:text-blue-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Oe(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-green-400 text-sm",children:["Renovación - S/ ",W(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-blue-500",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-blue-500",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-blue-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-blue-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",W(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>_e(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Fe,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>be(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Pe,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>Ae(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-blue-500 hover:bg-blue-600":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-blue-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",W(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-blue-400 bg-gray-700 border-gray-600 rounded focus:ring-blue-400"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>be(g.product),className:"text-blue-400 hover:text-blue-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-blue-400 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ue,disabled:f,className:`px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-blue-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>_(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-blue-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{R(!1),_(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>R(!1),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Volver a Compra"})]})]})}),q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-blue-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-blue-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),O(null)},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Aceptar"})})]})})]})},YF=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,_]=b.useState(null),[M,R]=b.useState(!1),[q,G]=b.useState(!1),[Y,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,Q]=b.useState(""),T=Nt(),W=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(B(I,"users",N.uid));if(h.exists()){const D=h.data();c({id:N.uid,name:D.username||"Usuario",email:N.email,orders:D.orders||[],role:D.role||"user",phone:D.phone||""}),x(Number(D.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=ye(Z(I,"products"),je("category","==","Liga Max")),N=Ce(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(B(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,ligamax:C.length}))},k=>{S("Error al cargar productos de Liga Max"),console.error(k)}),h=ye(Z(I,"ligamax_accounts"),je("status","==","available")),D=Ce(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=ye(Z(I,"products"),je("category","==",k));return Ce(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),D(),ne.forEach(k=>k())}},[]);const Ae=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>T("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ue=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const D=B(I,"products",n.id),H=await h.get(D);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=ye(k,je("status","==","available"),zt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,z=v.data(),oe=B(I,"users",o.id),se=await h.get(oe);if(!se.exists())throw new Error("Usuario no encontrado");const ie=B(I,"users",n.providerId),ae=await h.get(ie);if(!ae.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),le=await h.get(re);let $=0;le.exists()?$=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});let J=n.providerPhone||"";J||(J=ae.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(D,{availableAccounts:tt(-1),stock:tt(-1)});const ke=(Number(se.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Te=se.data().orders||[],fe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},terms:n.terms,type:"ligamax"};h.update(oe,{balance:ke,orders:[...Te,fe]});const Ne=(Number(ae.data().balance)||0)+n.price,Le=ae.data().sales||[],X={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ie,{balance:Ne,sales:[...Le,X]});const ce=$+n.price;h.set(re,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const ve=B(Z(I,"sales"));return h.set(ve,{...fe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleId:X.saleId,terms:n.terms}),z}):await at(I,async h=>{const D=B(I,"users",o.id),H=await h.get(D);if(!H.exists())throw new Error("Usuario no encontrado");const ne=B(I,"users",n.providerId),k=await h.get(ne);if(!k.exists())throw new Error("Proveedor no encontrado");const A=B(I,"providerBalances",n.providerId),C=await h.get(A);let v=0;C.exists()?v=parseFloat(C.data().balance)||0:h.set(A,{balance:0,provider:n.providerId,updatedAt:he()});let p=n.providerPhone||"";p||(p=k.data().phoneNumber||"");const oe=(Number(H.data().balance)||0)-n.price;if(oe<0)throw new Error("Saldo insuficiente");const se=H.data().orders||[],ie={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"ligamax"};h.update(D,{balance:oe,orders:[...se,ie]});const re=(Number(k.data().balance)||0)+n.price,le=k.data().sales||[],$={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:product.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ne,{balance:re,sales:[...le,$]});const J=v+n.price;h.set(A,{balance:J,provider:n.providerId,updatedAt:he()},{merge:!0});const xe=B(Z(I,"sales"));h.set(xe,{...ie,provider:n.provider,providerId:n.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:$.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},_e=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{_({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),R(!0)},ue=()=>{if(!o){T("/login");return}(o==null?void 0:o.role)==="user"?T("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?T("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?T("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&T("/dashboard/admin")},me=n=>{n.preventDefault(),F.trim()&&T(`/search?q=${encodeURIComponent(F)}&category=Liga Max`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Oe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const D=n.match(/(\d+)/);return D?`${parseInt(D[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-green-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-green-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-green-500 text-white rounded-full hover:bg-green-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-green-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Liga Max...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all placeholder-gray-500",value:F,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:me,className:"absolute right-3 text-gray-400 hover:text-green-400 transition-all",children:e.jsx(Ze,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-green-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-green-500",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),T("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-green-600/80 hover:bg-green-700 transition-all text-sm text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>T("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-green-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>T("/register"),className:"px-4 py-2 rounded-full bg-green-500 text-white hover:bg-green-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-green-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-teal-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-green-600/30 text-white border border-green-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-500"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ze,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1461896836934-ffe607ba8211?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Liga Max"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Vive la emoción del deporte con acceso premium a Liga Max"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-green-400 hover:text-green-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Oe(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-green-400 text-sm",children:["Renovación - S/ ",W(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-green-500",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-green-500",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-green-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-green-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",W(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>_e(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Fe,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>be(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Pe,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>Ae(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-green-500 hover:bg-green-600":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-green-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",W(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-green-400 bg-gray-700 border-gray-600 rounded"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>be(g.product),className:"text-green-400 hover:text-green-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-green-400 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ue,disabled:f,className:`px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fade",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-green-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>_(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fade",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-green-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{R(!1),_(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>R(!1),className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Volver a Compra"})]})]})}),q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-pulse",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-green-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas las siguientes condiciones:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-pulse",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-green-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),O(null)},className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Aceptar"})})]})})]})},XF=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,_]=b.useState(null),[M,R]=b.useState(!1),[q,G]=b.useState(!1),[Y,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,Q]=b.useState(""),T=Nt(),W=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(B(I,"users",N.uid));if(h.exists()){const D=h.data();c({id:N.uid,name:D.username||"Usuario",email:N.email,orders:D.orders||[],role:D.role||"user",phone:D.phone||""}),x(Number(D.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=ye(Z(I,"products"),je("category","==","Movistar Play")),N=Ce(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(B(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,movistarplay:C.length}))},k=>{S("Error al cargar productos de Movistar Play"),console.error(k)}),h=ye(Z(I,"movistarplay_accounts"),je("status","==","available")),D=Ce(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=ye(Z(I,"products"),je("category","==",k));return Ce(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),D(),ne.forEach(k=>k())}},[]);const Ae=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>T("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ue=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const D=B(I,"products",n.id),H=await h.get(D);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=ye(k,je("status","==","available"),zt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,z=v.data(),oe=B(I,"users",o.id),se=await h.get(oe);if(!se.exists())throw new Error("Usuario no encontrado");const ie=B(I,"users",n.providerId),ae=await h.get(ie);if(!ae.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),le=await h.get(re);let $=0;le.exists()?$=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});let J=n.providerPhone||"";J||(J=ae.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(D,{availableAccounts:tt(-1),stock:tt(-1)});const ke=(Number(se.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Te=se.data().orders||[],fe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},terms:n.terms,type:"movistarplay"};h.update(oe,{balance:ke,orders:[...Te,fe]});const Ne=(Number(ae.data().balance)||0)+n.price,Le=ae.data().sales||[],X={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ie,{balance:Ne,sales:[...Le,X]});const ce=$+n.price;h.set(re,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const ve=B(Z(I,"sales"));return h.set(ve,{...fe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleId:X.saleId,terms:n.terms}),z}):await at(I,async h=>{const D=B(I,"users",o.id),H=await h.get(D);if(!H.exists())throw new Error("Usuario no encontrado");const ne=B(I,"users",n.providerId),k=await h.get(ne);if(!k.exists())throw new Error("Proveedor no encontrado");const A=B(I,"providerBalances",n.providerId),C=await h.get(A);let v=0;C.exists()?v=parseFloat(C.data().balance)||0:h.set(A,{balance:0,provider:n.providerId,updatedAt:he()});let p=n.providerPhone||"";p||(p=k.data().phoneNumber||"");const oe=(Number(H.data().balance)||0)-n.price;if(oe<0)throw new Error("Saldo insuficiente");const se=H.data().orders||[],ie={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"movistarplay"};h.update(D,{balance:oe,orders:[...se,ie]});const re=(Number(k.data().balance)||0)+n.price,le=k.data().sales||[],$={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ne,{balance:re,sales:[...le,$]});const J=v+n.price;h.set(A,{balance:J,provider:n.providerId,updatedAt:he()},{merge:!0});const xe=B(Z(I,"sales"));h.set(xe,{...ie,provider:n.provider,providerId:n.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:$.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},_e=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{_({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),R(!0)},ue=()=>{if(!o){T("/login");return}(o==null?void 0:o.role)==="user"?T("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?T("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?T("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&T("/dashboard/admin")},me=n=>{n.preventDefault(),F.trim()&&T(`/search?q=${encodeURIComponent(F)}&category=Movistar Play`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Oe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-blue-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const D=n.match(/(\d+)/);return D?`${parseInt(D[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-blue-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-auto",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Movistar Play...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all placeholder-gray-500",value:F,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:me,className:"absolute right-3 text-gray-400 hover:text-blue-400 transition-all",children:e.jsx(Ze,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-blue-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-blue-500",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),T("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-blue-600/80 hover:bg-blue-700 transition-all text-sm sm:text-base text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>T("/login"),className:"px-4 py-2 text-sm sm:text-base text-gray-200 hover:text-blue-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>T("/register"),className:"px-4 py-2 rounded-full bg-blue-500 text-white hover:bg-blue-600 transition-all text-sm sm:text-base",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-md text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/30`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-blue-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-600"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-600"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-600"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-green-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-500"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-blue-600/30 text-white border border-blue-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-600"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-400"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ze,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1593696954577-ab3c6b39ed36?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Movistar Play"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de películas, series y TV en vivo con Movistar Play"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-blue-400 hover:text-blue-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Oe(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-blue-400 text-sm",children:["Renovación - S/ ",W(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-blue-500",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-blue-500",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-blue-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-blue-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",W(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>_e(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Fe,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>be(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Pe,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>Ae(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-blue-500 hover:bg-blue-600":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-blue-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",W(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-blue-500 bg-gray-700 border-gray-600 rounded"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>be(g.product),className:"text-blue-400 hover:text-blue-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-blue-400 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ue,disabled:f,className:`px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fade",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-blue-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>_(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-pulse",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-blue-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{R(!1),_(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>R(!1),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Volver a Compra"})]})]})}),q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-pulse",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-blue-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas las siguientes condiciones:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-pulse",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-blue-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),O(null)},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Aceptar"})})]})})]})},JF=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,_]=b.useState(null),[M,R]=b.useState(!1),[q,G]=b.useState(!1),[Y,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,Q]=b.useState(""),T=Nt(),W=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(B(I,"users",N.uid));if(h.exists()){const D=h.data();c({id:N.uid,name:D.username||"Usuario",email:N.email,orders:D.orders||[],role:D.role||"user",phone:D.phone||""}),x(Number(D.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=ye(Z(I,"products"),je("category","==","Youtube")),N=Ce(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(B(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,youtube:C.length}))},k=>{S("Error al cargar productos de Youtube"),console.error(k)}),h=ye(Z(I,"youtube_accounts"),je("status","==","available")),D=Ce(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=ye(Z(I,"products"),je("category","==",k));return Ce(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),D(),ne.forEach(k=>k())}},[]);const Ae=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>T("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ue=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const D=B(I,"products",n.id),H=await h.get(D);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=ye(k,je("status","==","available"),zt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,z=v.data(),oe=B(I,"users",o.id),se=await h.get(oe);if(!se.exists())throw new Error("Usuario no encontrado");const ie=B(I,"users",n.providerId),ae=await h.get(ie);if(!ae.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),le=await h.get(re);let $=0;le.exists()?$=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});let J=n.providerPhone||"";J||(J=ae.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(D,{availableAccounts:tt(-1),stock:tt(-1)});const ke=(Number(se.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Te=se.data().orders||[],fe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},terms:n.terms,type:"youtube"};h.update(oe,{balance:ke,orders:[...Te,fe]});const Ne=(Number(ae.data().balance)||0)+n.price,Le=ae.data().sales||[],X={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ie,{balance:Ne,sales:[...Le,X]});const ce=$+n.price;h.set(re,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const ve=B(Z(I,"sales"));return h.set(ve,{...fe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleId:X.saleId,terms:n.terms}),z}):await at(I,async h=>{const D=B(I,"users",o.id),H=await h.get(D);if(!H.exists())throw new Error("Usuario no encontrado");const ne=B(I,"users",n.providerId),k=await h.get(ne);if(!k.exists())throw new Error("Proveedor no encontrado");const A=B(I,"providerBalances",n.providerId),C=await h.get(A);let v=0;C.exists()?v=parseFloat(C.data().balance)||0:h.set(A,{balance:0,provider:n.providerId,updatedAt:he()});let p=n.providerPhone||"";p||(p=k.data().phoneNumber||"");const oe=(Number(H.data().balance)||0)-n.price;if(oe<0)throw new Error("Saldo insuficiente");const se=H.data().orders||[],ie={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"youtube"};h.update(D,{balance:oe,orders:[...se,ie]});const re=(Number(k.data().balance)||0)+n.price,le=k.data().sales||[],$={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ne,{balance:re,sales:[...le,$]});const J=v+n.price;h.set(A,{balance:J,provider:n.providerId,updatedAt:he()},{merge:!0});const xe=B(Z(I,"sales"));h.set(xe,{...ie,provider:n.provider,providerId:n.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:$.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},_e=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{_({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),R(!0)},ue=()=>{if(!o){T("/login");return}(o==null?void 0:o.role)==="user"?T("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?T("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?T("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&T("/dashboard/admin")},me=n=>{n.preventDefault(),F.trim()&&T(`/search?q=${encodeURIComponent(F)}&category=Youtube`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Oe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const D=n.match(/(\d+)/);return D?`${parseInt(D[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-red-500 text-white rounded-full hover:bg-red-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-red-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-auto",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Youtube...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all placeholder-gray-500",value:F,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:me,className:"absolute right-3 text-gray-400 hover:text-red-400 transition-all",children:e.jsx(Ze,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-red-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-red-500",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),T("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-600/80 hover:bg-red-700 transition-all text-sm sm:text-base text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>T("/login"),className:"px-4 py-2 text-sm sm:text-base text-gray-200 hover:text-red-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>T("/register"),className:"px-4 py-2 rounded-full bg-red-500 text-white hover:bg-red-600 transition-all text-sm sm:text-base",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-md text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/30`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-red-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-600"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-600"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-600"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-green-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-500"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-red-600/30 text-white border border-red-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-500"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-600"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-400"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ze,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1611162617213-7d7a39e9b1d7?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Youtube"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de videos sin anuncios y contenido exclusivo con Youtube Premium"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-red-400 hover:text-red-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Oe(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-red-400 text-sm",children:["Renovación - S/ ",W(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-red-500",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-red-500",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-red-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-red-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",W(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>_e(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Fe,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>be(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Pe,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>Ae(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-red-500 hover:bg-red-600":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-red-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",W(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-500 bg-gray-700 border-gray-600 rounded"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>be(g.product),className:"text-red-400 hover:text-red-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-red-400 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ue,disabled:f,className:`px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fade",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-red-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>_(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-pulse",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-red-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{R(!1),_(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>R(!1),className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-all",children:"Volver a Compra"})]})]})}),q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-pulse",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-red-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas las siguientes condiciones:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-pulse",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-red-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),O(null)},className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-all",children:"Aceptar"})})]})})]})},ZF=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,_]=b.useState(null),[M,R]=b.useState(!1),[q,G]=b.useState(!1),[Y,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,Q]=b.useState(""),T=Nt(),W=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(B(I,"users",N.uid));if(h.exists()){const D=h.data();c({id:N.uid,name:D.username||"Usuario",email:N.email,orders:D.orders||[],role:D.role||"user",phone:D.phone||""}),x(Number(D.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=ye(Z(I,"products"),je("category","==","Deezer")),N=Ce(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(B(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,deezer:C.length}))},k=>{S("Error al cargar productos de Deezer"),console.error(k)}),h=ye(Z(I,"deezer_accounts"),je("status","==","available")),D=Ce(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=ye(Z(I,"products"),je("category","==",k));return Ce(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),D(),ne.forEach(k=>k())}},[]);const Ae=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>T("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ue=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const D=B(I,"products",n.id),H=await h.get(D);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=ye(k,je("status","==","available"),zt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,z=v.data(),oe=B(I,"users",o.id),se=await h.get(oe);if(!se.exists())throw new Error("Usuario no encontrado");const ie=B(I,"users",n.providerId),ae=await h.get(ie);if(!ae.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),le=await h.get(re);let $=0;le.exists()?$=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});let J=n.providerPhone||"";J||(J=ae.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(D,{availableAccounts:tt(-1),stock:tt(-1)});const ke=(Number(se.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Te=se.data().orders||[],fe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},terms:n.terms,type:"deezer"};h.update(oe,{balance:ke,orders:[...Te,fe]});const Ne=(Number(ae.data().balance)||0)+n.price,Le=ae.data().sales||[],X={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ie,{balance:Ne,sales:[...Le,X]});const ce=$+n.price;h.set(re,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const ve=B(Z(I,"sales"));return h.set(ve,{...fe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleId:X.saleId,terms:n.terms}),z}):await at(I,async h=>{const D=B(I,"users",o.id),H=await h.get(D);if(!H.exists())throw new Error("Usuario no encontrado");const ne=B(I,"users",n.providerId),k=await h.get(ne);if(!k.exists())throw new Error("Proveedor no encontrado");const A=B(I,"providerBalances",n.providerId),C=await h.get(A);let v=0;C.exists()?v=parseFloat(C.data().balance)||0:h.set(A,{balance:0,provider:n.providerId,updatedAt:he()});let p=n.providerPhone||"";p||(p=k.data().phoneNumber||"");const oe=(Number(H.data().balance)||0)-n.price;if(oe<0)throw new Error("Saldo insuficiente");const se=H.data().orders||[],ie={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"deezer"};h.update(D,{balance:oe,orders:[...se,ie]});const re=(Number(k.data().balance)||0)+n.price,le=k.data().sales||[],$={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ne,{balance:re,sales:[...le,$]});const J=v+n.price;h.set(A,{balance:J,provider:n.providerId,updatedAt:he()},{merge:!0});const xe=B(Z(I,"sales"));h.set(xe,{...ie,provider:n.provider,providerId:n.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:$.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},_e=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{_({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),R(!0)},ue=()=>{if(!o){T("/login");return}(o==null?void 0:o.role)==="user"?T("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?T("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?T("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&T("/dashboard/admin")},me=n=>{n.preventDefault(),F.trim()&&T(`/search?q=${encodeURIComponent(F)}&category=Deezer`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Oe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const D=n.match(/(\d+)/);return D?`${parseInt(D[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-green-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-green-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-green-500 text-white rounded-full hover:bg-green-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-green-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-auto",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Deezer...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all placeholder-gray-500",value:F,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:me,className:"absolute right-3 text-gray-400 hover:text-green-400 transition-all",children:e.jsx(Ze,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-green-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-green-500",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),T("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-green-600/80 hover:bg-green-700 transition-all text-sm sm:text-base text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>T("/login"),className:"px-4 py-2 text-sm sm:text-base text-gray-200 hover:text-green-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>T("/register"),className:"px-4 py-2 rounded-full bg-green-500 text-white hover:bg-green-600 transition-all text-sm sm:text-base",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-md text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/30`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-green-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-600"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-600"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-600"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-green-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-500"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-500"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-green-600/30 text-white border border-green-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-green-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-600"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-400"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ze,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1514320291840-2e0a9bf2a204?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Deezer"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Escucha música sin anuncios y sin conexión con Deezer Premium"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-green-400 hover:text-green-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Oe(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-green-400 text-sm",children:["Renovación - S/ ",W(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-green-500",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-green-500",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-green-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-green-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",W(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>_e(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Fe,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>be(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Pe,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>Ae(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-green-500 hover:bg-green-600":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-green-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",W(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-green-500 bg-gray-700 border-gray-600 rounded"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>be(g.product),className:"text-green-400 hover:text-green-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-green-400 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ue,disabled:f,className:`px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-pulse",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-green-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>_(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-pulse",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-green-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{R(!1),_(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>R(!1),className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Volver a Compra"})]})]})}),q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-green-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas las siguientes condiciones:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-pulse",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-green-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),O(null)},className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Aceptar"})})]})})]})},eU=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,_]=b.useState(null),[M,R]=b.useState(!1),[q,G]=b.useState(!1),[Y,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,Q]=b.useState(""),T=Nt(),W=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(B(I,"users",N.uid));if(h.exists()){const D=h.data();c({id:N.uid,name:D.username||"Usuario",email:N.email,orders:D.orders||[],role:D.role||"user",phone:D.phone||""}),x(Number(D.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=ye(Z(I,"products"),je("category","==","Tidal")),N=Ce(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(B(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,tidal:C.length}))},k=>{S("Error al cargar productos de Tidal"),console.error(k)}),h=ye(Z(I,"tidal_accounts"),je("status","==","available")),D=Ce(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=ye(Z(I,"products"),je("category","==",k));return Ce(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),D(),ne.forEach(k=>k())}},[]);const Ae=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>T("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ue=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const D=B(I,"products",n.id),H=await h.get(D);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=ye(k,je("status","==","available"),zt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,z=v.data(),oe=B(I,"users",o.id),se=await h.get(oe);if(!se.exists())throw new Error("Usuario no encontrado");const ie=B(I,"users",n.providerId),ae=await h.get(ie);if(!ae.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),le=await h.get(re);let $=0;le.exists()?$=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});let J=n.providerPhone||"";J||(J=ae.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(D,{availableAccounts:tt(-1),stock:tt(-1)});const ke=(Number(se.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Te=se.data().orders||[],fe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},terms:n.terms,type:"tidal"};h.update(oe,{balance:ke,orders:[...Te,fe]});const Ne=(Number(ae.data().balance)||0)+n.price,Le=ae.data().sales||[],X={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ie,{balance:Ne,sales:[...Le,X]});const ce=$+n.price;h.set(re,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const ve=B(Z(I,"sales"));return h.set(ve,{...fe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleId:X.saleId,terms:n.terms}),z}):await at(I,async h=>{const D=B(I,"users",o.id),H=await h.get(D);if(!H.exists())throw new Error("Usuario no encontrado");const ne=B(I,"users",n.providerId),k=await h.get(ne);if(!k.exists())throw new Error("Proveedor no encontrado");const A=B(I,"providerBalances",n.providerId),C=await h.get(A);let v=0;C.exists()?v=parseFloat(C.data().balance)||0:h.set(A,{balance:0,provider:n.providerId,updatedAt:he()});let p=n.providerPhone||"";p||(p=k.data().phoneNumber||"");const oe=(Number(H.data().balance)||0)-n.price;if(oe<0)throw new Error("Saldo insuficiente");const se=H.data().orders||[],ie={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"tidal"};h.update(D,{balance:oe,orders:[...se,ie]});const re=(Number(k.data().balance)||0)+n.price,le=k.data().sales||[],$={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ne,{balance:re,sales:[...le,$]});const J=v+n.price;h.set(A,{balance:J,provider:n.providerId,updatedAt:he()},{merge:!0});const xe=B(Z(I,"sales"));h.set(xe,{...ie,provider:n.provider,providerId:n.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:$.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},_e=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{_({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),R(!0)},ue=()=>{if(!o){T("/login");return}(o==null?void 0:o.role)==="user"?T("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?T("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?T("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&T("/dashboard/admin")},me=n=>{n.preventDefault(),F.trim()&&T(`/search?q=${encodeURIComponent(F)}&category=Tidal`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Oe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const D=n.match(/(\d+)/);return D?`${parseInt(D[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-teal-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-teal-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-teal-500 text-white rounded-full hover:bg-teal-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-teal-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Tidal...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-teal-400 focus:border-teal-400 transition-all placeholder-gray-500",value:F,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:me,className:"absolute right-3 text-gray-400 hover:text-teal-400 transition-all",children:e.jsx(Ze,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-teal-400"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-teal-400",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),T("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-teal-600/80 hover:bg-teal-700 transition-all text-sm text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>T("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-teal-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>T("/register"),className:"px-4 py-2 rounded-full bg-teal-500 text-white hover:bg-teal-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-teal-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-teal-600/30 text-white border border-teal-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-teal-400"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ze,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-teal-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1514320291840-2e0a9bf2a596?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Tidal"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de música en alta fidelidad con nuestras cuentas premium de Tidal"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-teal-400 hover:text-teal-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Oe(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-green-400 text-sm",children:["Renovación - S/ ",W(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-teal-400",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-teal-400",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-teal-400",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-teal-400",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",W(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>_e(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Fe,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>be(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Pe,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>Ae(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-teal-500 hover:bg-teal-600":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-teal-400"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",W(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-teal-400 focus:border-teal-400 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-teal-400 focus:border-teal-400 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-teal-400 bg-gray-700 border-gray-600 rounded focus:ring-teal-400"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>be(g.product),className:"text-teal-400 hover:text-teal-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-teal-400 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ue,disabled:f,className:`px-4 py-2 bg-teal-500 text-white rounded-md hover:bg-teal-600 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-teal-400"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>_(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-teal-400"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{R(!1),_(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>R(!1),className:"px-4 py-2 bg-teal-500 text-white rounded-md hover:bg-teal-600 transition-all",children:"Volver a Compra"})]})]})}),q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-teal-400"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-teal-400"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),O(null)},className:"px-4 py-2 bg-teal-500 text-white rounded-md hover:bg-teal-600 transition-all",children:"Aceptar"})})]})})]})},tU=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,_]=b.useState(null),[M,R]=b.useState(!1),[q,G]=b.useState(!1),[Y,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,Q]=b.useState(""),T=Nt(),W=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(B(I,"users",N.uid));if(h.exists()){const D=h.data();c({id:N.uid,name:D.username||"Usuario",email:N.email,orders:D.orders||[],role:D.role||"user",phone:D.phone||""}),x(Number(D.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=ye(Z(I,"products"),je("category","==","Vpn")),N=Ce(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(B(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,vpn:C.length}))},k=>{S("Error al cargar productos de VPN"),console.error(k)}),h=ye(Z(I,"vpn_accounts"),je("status","==","available")),D=Ce(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=ye(Z(I,"products"),je("category","==",k));return Ce(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),D(),ne.forEach(k=>k())}},[]);const Ae=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>T("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ue=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const D=B(I,"products",n.id),H=await h.get(D);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=ye(k,je("status","==","available"),zt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,z=v.data(),oe=B(I,"users",o.id),se=await h.get(oe);if(!se.exists())throw new Error("Usuario no encontrado");const ie=B(I,"users",n.providerId),ae=await h.get(ie);if(!ae.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),le=await h.get(re);let $=0;le.exists()?$=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});let J=n.providerPhone||"";J||(J=ae.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(D,{availableAccounts:tt(-1),stock:tt(-1)});const ke=(Number(se.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Te=se.data().orders||[],fe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},terms:n.terms,type:"vpn"};h.update(oe,{balance:ke,orders:[...Te,fe]});const Ne=(Number(ae.data().balance)||0)+n.price,Le=ae.data().sales||[],X={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ie,{balance:Ne,sales:[...Le,X]});const ce=$+n.price;h.set(re,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const ve=B(Z(I,"sales"));return h.set(ve,{...fe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleId:X.saleId,terms:n.terms}),z}):await at(I,async h=>{const D=B(I,"users",o.id),H=await h.get(D);if(!H.exists())throw new Error("Usuario no encontrado");const ne=B(I,"users",n.providerId),k=await h.get(ne);if(!k.exists())throw new Error("Proveedor no encontrado");const A=B(I,"providerBalances",n.providerId),C=await h.get(A);let v=0;C.exists()?v=parseFloat(C.data().balance)||0:h.set(A,{balance:0,provider:n.providerId,updatedAt:he()});let p=n.providerPhone||"";p||(p=k.data().phoneNumber||"");const oe=(Number(H.data().balance)||0)-n.price;if(oe<0)throw new Error("Saldo insuficiente");const se=H.data().orders||[],ie={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"vpn"};h.update(D,{balance:oe,orders:[...se,ie]});const re=(Number(k.data().balance)||0)+n.price,le=k.data().sales||[],$={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ne,{balance:re,sales:[...le,$]});const J=v+n.price;h.set(A,{balance:J,provider:n.providerId,updatedAt:he()},{merge:!0});const xe=B(Z(I,"sales"));h.set(xe,{...ie,provider:n.provider,providerId:n.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:$.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},_e=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{_({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),R(!0)},ue=()=>{if(!o){T("/login");return}(o==null?void 0:o.role)==="user"?T("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?T("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?T("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&T("/dashboard/admin")},me=n=>{n.preventDefault(),F.trim()&&T(`/search?q=${encodeURIComponent(F)}&category=Vpn`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Oe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const D=n.match(/(\d+)/);return D?`${parseInt(D[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-blue-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en VPN...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all placeholder-gray-500",value:F,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:me,className:"absolute right-3 text-gray-400 hover:text-blue-500 transition-all",children:e.jsx(Ze,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-blue-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-blue-500",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),T("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-blue-600/80 hover:bg-blue-700 transition-all text-sm text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>T("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-blue-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>T("/register"),className:"px-4 py-2 rounded-full bg-blue-500 text-white hover:bg-blue-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-blue-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-teal-400"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-blue-600/30 text-white border border-blue-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-blue-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ze,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1628151016710-795c42cd104f?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Servicios Premium de VPN"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Navega con seguridad y privacidad con nuestros servicios premium de VPN"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-blue-500 hover:text-blue-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Oe(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-green-400 text-sm",children:["Renovación - S/ ",W(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-blue-500",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-blue-500",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-blue-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-blue-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",W(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>_e(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Fe,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>be(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Pe,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>Ae(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-blue-500 hover:bg-blue-600":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-blue-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",W(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-blue-500 bg-gray-700 border-gray-600 rounded focus:ring-blue-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>be(g.product),className:"text-blue-500 hover:text-blue-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-blue-500 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ue,disabled:f,className:`px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-blue-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>_(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-blue-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{R(!1),_(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>R(!1),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Volver a Compra"})]})]})}),q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-blue-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-blue-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),O(null)},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Aceptar"})})]})})]})},sU=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,_]=b.useState(null),[M,R]=b.useState(!1),[q,G]=b.useState(!1),[Y,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,Q]=b.useState(""),T=Nt(),W=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(B(I,"users",N.uid));if(h.exists()){const D=h.data();c({id:N.uid,name:D.username||"Usuario",email:N.email,orders:D.orders||[],role:D.role||"user",phone:D.phone||""}),x(Number(D.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=ye(Z(I,"products"),je("category","==","WinTv")),N=Ce(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(B(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,wintv:C.length}))},k=>{S("Error al cargar productos de Win Tv"),console.error(k)}),h=ye(Z(I,"wintv_accounts"),je("status","==","available")),D=Ce(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=ye(Z(I,"products"),je("category","==",k));return Ce(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),D(),ne.forEach(k=>k())}},[]);const Ae=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>T("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ue=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const D=B(I,"products",n.id),H=await h.get(D);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=ye(k,je("status","==","available"),zt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,z=v.data(),oe=B(I,"users",o.id),se=await h.get(oe);if(!se.exists())throw new Error("Usuario no encontrado");const ie=B(I,"users",n.providerId),ae=await h.get(ie);if(!ae.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),le=await h.get(re);let $=0;le.exists()?$=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});let J=n.providerPhone||"";J||(J=ae.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(D,{availableAccounts:tt(-1),stock:tt(-1)});const ke=(Number(se.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Te=se.data().orders||[],fe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},terms:n.terms,type:"wintv"};h.update(oe,{balance:ke,orders:[...Te,fe]});const Ne=(Number(ae.data().balance)||0)+n.price,Le=ae.data().sales||[],X={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ie,{balance:Ne,sales:[...Le,X]});const ce=$+n.price;h.set(re,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const ve=B(Z(I,"sales"));return h.set(ve,{...fe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleId:X.saleId,terms:n.terms}),z}):await at(I,async h=>{const D=B(I,"users",o.id),H=await h.get(D);if(!H.exists())throw new Error("Usuario no encontrado");const ne=B(I,"users",n.providerId),k=await h.get(ne);if(!k.exists())throw new Error("Proveedor no encontrado");const A=B(I,"providerBalances",n.providerId),C=await h.get(A);let v=0;C.exists()?v=parseFloat(C.data().balance)||0:h.set(A,{balance:0,provider:n.providerId,updatedAt:he()});let p=n.providerPhone||"";p||(p=k.data().phoneNumber||"");const oe=(Number(H.data().balance)||0)-n.price;if(oe<0)throw new Error("Saldo insuficiente");const se=H.data().orders||[],ie={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"wintv"};h.update(D,{balance:oe,orders:[...se,ie]});const re=(Number(k.data().balance)||0)+n.price,le=k.data().sales||[],$={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ne,{balance:re,sales:[...le,$]});const J=v+n.price;h.set(A,{balance:J,provider:n.providerId,updatedAt:he()},{merge:!0});const xe=B(Z(I,"sales"));h.set(xe,{...ie,provider:n.provider,providerId:n.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:$.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},_e=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{_({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),R(!0)},ue=()=>{if(!o){T("/login");return}(o==null?void 0:o.role)==="user"?T("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?T("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?T("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&T("/dashboard/admin")},me=n=>{n.preventDefault(),F.trim()&&T(`/search?q=${encodeURIComponent(F)}&category=Win Tv`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Oe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const D=n.match(/(\d+)/);return D?`${parseInt(D[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-orange-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-orange-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-orange-500 text-white rounded-full hover:bg-orange-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-orange-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Win TV...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all placeholder-gray-500",value:F,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:me,className:"absolute right-3 text-gray-400 hover:text-orange-500 transition-all",children:e.jsx(Ze,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-orange-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-orange-500",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),T("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-orange-600/80 hover:bg-orange-700 transition-all text-sm text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>T("/login"),class:!0,Alcance:"lg font-semibold text-gray-200 hover:text-orange-500 transition-colors",children:"Ingresar"}),e.jsx("button",{onClick:()=>T("/register"),className:"px-4 py-2 rounded-full bg-orange-500 text-white hover:bg-orange-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-0 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-orange-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-teal-400"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-blue-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-orange-600/30 text-white border border-orange-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ze,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-orange-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1522202176988-66273c2fd55f?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Suscripciones Premium de Win TV"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de contenido exclusivo con nuestras suscripciones premium de Win TV"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-orange-500 hover:text-orange-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Oe(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-green-400 text-sm",children:["Renovación - S/ ",W(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-orange-500",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-orange-500",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-orange-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-orange-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",W(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>_e(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Fe,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>be(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Pe,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>Ae(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-orange-500 hover:bg-orange-600":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-orange-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",W(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-orange-500 bg-gray-700 border-gray-600 rounded focus:ring-orange-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>be(g.product),className:"text-orange-500 hover:text-orange-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-orange-500 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ue,disabled:f,className:`px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-orange-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>_(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-orange-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{R(!1),_(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>R(!1),className:"px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 transition-all",children:"Volver a Compra"})]})]})}),q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-orange-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-orange-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),O(null)},className:"px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 transition-all",children:"Aceptar"})})]})})]})},rU=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,_]=b.useState(null),[M,R]=b.useState(!1),[q,G]=b.useState(!1),[Y,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,Q]=b.useState(""),T=Nt(),W=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(B(I,"users",N.uid));if(h.exists()){const D=h.data();c({id:N.uid,name:D.username||"Usuario",email:N.email,orders:D.orders||[],role:D.role||"user",phone:D.phone||""}),x(Number(D.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=ye(Z(I,"products"),je("category","==","BuscaPersonas")),N=Ce(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(B(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,buscapersonas:C.length}))},k=>{S("Error al cargar productos de Busca Personas"),console.error(k)}),h=ye(Z(I,"buscapersonas_accounts"),je("status","==","available")),D=Ce(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=ye(Z(I,"products"),je("category","==",k));return Ce(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),D(),ne.forEach(k=>k())}},[]);const Ae=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>T("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ue=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const D=B(I,"products",n.id),H=await h.get(D);if(!H.exists())throw new Error("Producto no encontrado");if(H.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=ye(k,je("status","==","available"),zt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,z=v.data(),oe=B(I,"users",o.id),se=await h.get(oe);if(!se.exists())throw new Error("Usuario no encontrado");const ie=B(I,"users",n.providerId),ae=await h.get(ie);if(!ae.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),le=await h.get(re);let $=0;le.exists()?$=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});let J=n.providerPhone||"";J||(J=ae.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(D,{availableAccounts:tt(-1),stock:tt(-1)});const ke=(Number(se.data().balance)||0)-n.price;if(ke<0)throw new Error("Saldo insuficiente");const Te=se.data().orders||[],fe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},terms:n.terms,type:"buscapersonas"};h.update(oe,{balance:ke,orders:[...Te,fe]});const Ne=(Number(ae.data().balance)||0)+n.price,Le=ae.data().sales||[],X={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ie,{balance:Ne,sales:[...Le,X]});const ce=$+n.price;h.set(re,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const ve=B(Z(I,"sales"));return h.set(ve,{...fe,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:z.email||"No proporcionado",password:z.password||"No proporcionado",profile:z.profile||"No proporcionado"},saleId:X.saleId,terms:n.terms}),z}):await at(I,async h=>{const D=B(I,"users",o.id),H=await h.get(D);if(!H.exists())throw new Error("Usuario no encontrado");const ne=B(I,"users",n.providerId),k=await h.get(ne);if(!k.exists())throw new Error("Proveedor no encontrado");const A=B(I,"providerBalances",n.providerId),C=await h.get(A);let v=0;C.exists()?v=parseFloat(C.data().balance)||0:h.set(A,{balance:0,provider:n.providerId,updatedAt:he()});let p=n.providerPhone||"";p||(p=k.data().phoneNumber||"");const oe=(Number(H.data().balance)||0)-n.price;if(oe<0)throw new Error("Saldo insuficiente");const se=H.data().orders||[],ie={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"buscapersonas"};h.update(D,{balance:oe,orders:[...se,ie]});const re=(Number(k.data().balance)||0)+n.price,le=k.data().sales||[],$={saleId:B(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ne,{balance:re,sales:[...le,$]});const J=v+n.price;h.set(A,{balance:J,provider:n.providerId,updatedAt:he()},{merge:!0});const xe=B(Z(I,"sales"));h.set(xe,{...ie,provider:n.provider,providerId:n.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:$.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},_e=n=>{_({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},be=n=>{_({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),R(!0)},ue=()=>{if(!o){T("/login");return}(o==null?void 0:o.role)==="user"?T("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?T("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?T("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&T("/dashboard/admin")},me=n=>{n.preventDefault(),F.trim()&&T(`/search?q=${encodeURIComponent(F)}&category=Busca Personas`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Oe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const D=n.match(/(\d+)/);return D?`${parseInt(D[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-yellow-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-yellow-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-yellow-500 text-white rounded-full hover:bg-yellow-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-yellow-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Busca Personas...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400 transition-all placeholder-gray-500",value:F,onChange:n=>Q(n.target.value)}),e.jsx("button",{onClick:me,className:"absolute right-3 text-gray-400 hover:text-yellow-400 transition-all",children:e.jsx(Ze,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-yellow-400"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-yellow-400",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),T("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-yellow-600/80 hover:bg-yellow-700 transition-all text-sm text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>T("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-yellow-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>T("/register"),className:"px-4 py-2 rounded-full bg-yellow-500 text-white hover:bg-yellow-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-yellow-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-yellow-600/30 text-white border border-yellow-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ze,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-yellow-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321318423-f06f85e504b3?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Servicios de Busca Personas"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Accede a herramientas avanzadas para localizar personas de manera rápida y segura"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-yellow-400 hover:text-yellow-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Oe(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-green-400 text-sm",children:["Renovación - S/ ",W(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-yellow-400",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-yellow-400",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-yellow-400",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-yellow-400",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",W(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>_e(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Fe,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>be(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Pe,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>Ae(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-yellow-500 hover:bg-yellow-600":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-yellow-400"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",W(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-yellow-400 bg-gray-700 border-gray-600 rounded focus:ring-yellow-400"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>be(g.product),className:"text-yellow-400 hover:text-yellow-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-yellow-400 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ue,disabled:f,className:`px-4 py-2 bg-yellow-500 text-white rounded-md hover:bg-yellow-600 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-yellow-400"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>_(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-yellow-400"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{R(!1),_(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>R(!1),className:"px-4 py-2 bg-yellow-500 text-white rounded-md hover:bg-yellow-600 transition-all",children:"Volver a Compra"})]})]})}),q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Pe,{className:"mr-2 text-yellow-400"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fe,{className:"mr-2 text-yellow-400"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Y.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Y.onClose&&Y.onClose(),O(null)},className:"px-4 py-2 bg-yellow-500 text-white rounded-md hover:bg-yellow-600 transition-all",children:"Aceptar"})})]})})]})};b.memo(()=>{const[s,t]=b.useState(null),[r,a]=b.useState(0),[i,l]=b.useState(!0),[o,c]=b.useState(null),[d,x]=b.useState(!1),[f,j]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0}),[w,S]=b.useState(""),g=Nt();b.useEffect(()=>{const _=Dt(We,async M=>{if(M)try{const R=await Ye(B(I,"users",M.uid));if(R.exists()){const q=R.data();t({id:M.uid,name:q.username||"Usuario",email:M.email,orders:q.orders||[],role:q.role||"user"}),a(Number(q.balance)||0)}else c("Usuario no encontrado"),console.error("Usuario no encontrado en la base de datos")}catch(R){c("Error al cargar datos"),console.error(R)}else t(null),a(0);l(!1)});return()=>_()},[]),b.useEffect(()=>{const M=[{name:"Netflix",key:"netflix"},{name:"Spotify",key:"spotify"},{name:"Disney",key:"disney"},{name:"Max",key:"max"},{name:"Prime Video",key:"primevideo"},{name:"Vix",key:"vix"},{name:"Crunchyroll",key:"crunchyroll"},{name:"Canva",key:"canva"},{name:"ChatGPT",key:"chatgpt"},{name:"Redes Sociales",key:"redessociales"}].map(({name:R,key:q})=>{const G=ye(Z(I,"products"),je("category","==",R));return Ce(G,Y=>{j(O=>({...O,[q]:Y.docs.length}))},Y=>console.error(`Error loading ${R}:`,Y))});return()=>M.forEach(R=>R())},[]);const V=()=>{if(!s)return g("/login");g({user:"/dashboard/user",affiliate:"/dashboard/affiliate",provider:"/dashboard/provider",admin:"/dashboard/admin"}[s.role]||"/dashboard/user")},E=_=>{_.preventDefault(),w.trim()&&g(`/search?q=${encodeURIComponent(w)}`)};return i?e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-900",children:[e.jsx(rp,{className:"animate-spin text-4xl text-cyan-500"}),e.jsx("span",{className:"ml-2 text-white",children:"Cargando..."})]}):o?e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-900 p-4",children:[e.jsx(rp,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-400 mb-6",children:o}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600",children:"Reintentar"})]}):e.jsxs("div",{className:"min-h-screen bg-gray-900 text-white flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-800/80 backdrop-blur-sm",children:e.jsxs("div",{className:"container mx-auto px-4 py-3 flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs(y,{to:"/",className:"flex items-center gap-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-8"}),e.jsx("span",{className:"text-lg font-bold text-cyan-500 hidden sm:block",children:"BlackStreaming"})]})}),e.jsx("form",{onSubmit:E,className:"flex-1 max-w-md mx-4",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar productos...",className:"w-full py-2 px-4 rounded-lg bg-gray-700 text-white border border-gray-600 focus:ring-2 focus:ring-cyan-500 focus:border-transparent",value:w,onChange:_=>S(_.target.value)}),e.jsx("button",{type:"submit",className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-cyan-500",children:e.jsx(Ze,{size:20})})]})}),e.jsx("div",{className:"flex items-center gap-2",children:s?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"hidden sm:block text-sm text-gray-300",children:s.name}),e.jsxs("span",{className:"px-3 py-1 bg-gray-700 rounded-lg text-sm",children:["S/ ",r.toFixed(2)]}),e.jsx("button",{onClick:V,className:"p-2 hover:bg-gray-700 rounded-lg",title:"Dashboard",children:e.jsx(Ge,{className:"text-cyan-500",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),g("/")},className:"flex items-center gap-1 px-3 py-2 bg-red-600 hover:bg-red-700 rounded-lg text-sm",children:[e.jsx(It,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>g("/login"),className:"px-3 py-2 text-sm hover:text-cyan-500",children:"Ingresar"}),e.jsx("button",{onClick:()=>g("/register"),className:"px-3 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 text-sm",children:"Registrarse"})]})})]})}),e.jsx("main",{className:"flex-1 p-6 flex items-center justify-center",children:e.jsxs("div",{className:"max-w-lg text-center",children:[e.jsx("div",{className:"p-4 bg-gray-800 rounded-full inline-flex mb-6",children:e.jsx(rp,{className:"text-4xl text-cyan-500"})}),e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"En Mantenimiento"}),e.jsx("p",{className:"text-gray-300 mb-6",children:"Estamos mejorando nuestra plataforma para ti."}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-300 mb-6",children:[e.jsx(Ot,{className:"text-yellow-500"}),e.jsx("span",{children:"Volveremos pronto."})]}),e.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"¿Qué estamos haciendo?"}),e.jsxs("ul",{className:"text-left space-y-2 text-gray-300",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Corrección de errores en el sistema de pedidos"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Solución de fallos en el retiro de dinero"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Arreglo de errores al pasar del sistema al pedido"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Actualización del dashboard del proveedor"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Actualización del dashboard del usuario"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Refuerzo de la seguridad general del sitio"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Mejora en la visualización y diseño"]})]}),e.jsx("button",{onClick:()=>x(!0),className:"mt-4 text-cyan-500 hover:text-cyan-400 underline",children:"Términos Generales"})]})]})}),d&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-800 rounded-lg max-w-lg w-full max-h-[80vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Términos y Condiciones"}),e.jsx("button",{onClick:()=>x(!1),className:"hover:text-gray-300",children:e.jsx(FiX,{size:24})})]}),e.jsx("div",{className:"space-y-4 text-gray-300",children:[{title:"Proceso de Compra",text:"El proveedor te contactará en 24 horas hábiles para los accesos."},{title:"Garantía",text:"7 días de garantía. El proveedor resolverá problemas o reembolsará."},{title:"Uso Responsable",text:"No nos responsabilizamos por suspensiones por mal uso."},{title:"Soporte",text:"Contacta al proveedor vía WhatsApp."},{title:"Renovaciones",text:"Solicita renovaciones manuales antes del fin del período."}].map(({title:_,text:M},R)=>e.jsxs("div",{className:"p-4 bg-gray-700 rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-2",children:_}),e.jsx("p",{children:M})]},R))}),e.jsx("button",{onClick:()=>x(!1),className:"w-full mt-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600",children:"Cerrar"})]})})}),e.jsx("footer",{className:"bg-gray-800 py-6",children:e.jsxs("div",{className:"container mx-auto px-4 flex flex-col sm:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-6"}),e.jsx("span",{className:"text-sm font-semibold text-cyan-500",children:"BlackStreaming"})]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["© ",new Date().getFullYear()," BlackStreaming. Todos los derechos reservados."]}),e.jsx("p",{className:"text-sm text-gray-400",children:"Desarrollado por Saiph"})]})})]})});const aU=b.createContext(),nU=({children:s})=>{const t=ty(fd),[r,a]=b.useState(null),[i,l]=b.useState(!0);return b.useEffect(()=>{const o=Dt(t,c=>{a(c),l(!1)});return()=>o()},[]),e.jsx(aU.Provider,{value:{user:r,loading:i},children:!i&&s})},iU=()=>e.jsx(KC,{children:e.jsxs(e.Fragment,{children:[e.jsx(kt,{path:"/",element:e.jsx(nF,{})}),e.jsx(kt,{path:"/login",element:e.jsx(xF,{})}),e.jsx(kt,{path:"/register",element:e.jsx(gF,{})}),e.jsx(kt,{path:"/dashboard/user",element:e.jsx(vF,{})}),e.jsx(kt,{path:"/dashboard/affiliate",element:e.jsx(wF,{})}),e.jsx(kt,{path:"/dashboard/provider",element:e.jsx(IF,{})}),e.jsx(kt,{path:"/dashboard/admin",element:e.jsx(EF,{})}),e.jsx(kt,{path:"/netflix",element:e.jsx(CF,{})}),e.jsx(kt,{path:"/disney",element:e.jsx(TF,{})}),e.jsx(kt,{path:"/max",element:e.jsx(_F,{})}),e.jsx(kt,{path:"/spotify",element:e.jsx(DF,{})}),e.jsx(kt,{path:"/primevideo",element:e.jsx(AF,{})}),e.jsx(kt,{path:"/vix",element:e.jsx(RF,{})}),e.jsx(kt,{path:"/canva",element:e.jsx(MF,{})}),e.jsx(kt,{path:"/chatgpt",element:e.jsx(LF,{})}),e.jsx(kt,{path:"/crunchyroll",element:e.jsx(OF,{})}),e.jsx(kt,{path:"/redessociales",element:e.jsx(VF,{})}),e.jsx(kt,{path:"/applemusic",element:e.jsx(BF,{})}),e.jsx(kt,{path:"/appletv",element:e.jsx(zF,{})}),e.jsx(kt,{path:"/iptv",element:e.jsx(FF,{})}),e.jsx(kt,{path:"/flujotv",element:e.jsx(UF,{})}),e.jsx(kt,{path:"/vikirakuten",element:e.jsx($F,{})}),e.jsx(kt,{path:"/pornhub",element:e.jsx(WF,{})}),e.jsx(kt,{path:"/paramount",element:e.jsx(qF,{})}),e.jsx(kt,{path:"/licencias",element:e.jsx(HF,{})}),e.jsx(kt,{path:"/capcut",element:e.jsx(GF,{})}),e.jsx(kt,{path:"/duolingo",element:e.jsx(KF,{})}),e.jsx(kt,{path:"/dgo",element:e.jsx(QF,{})}),e.jsx(kt,{path:"/ligamax",element:e.jsx(YF,{})}),e.jsx(kt,{path:"/movistarplay",element:e.jsx(XF,{})}),e.jsx(kt,{path:"/youtube",element:e.jsx(JF,{})}),e.jsx(kt,{path:"/deezer",element:e.jsx(ZF,{})}),e.jsx(kt,{path:"/tidal",element:e.jsx(eU,{})}),e.jsx(kt,{path:"/vpn",element:e.jsx(tU,{})}),e.jsx(kt,{path:"/wintv",element:e.jsx(sU,{})}),e.jsx(kt,{path:"/buscapersonas",element:e.jsx(rU,{})})]})});ap.createRoot(document.getElementById("root")).render(e.jsx(Pn.StrictMode,{children:e.jsx(yT,{children:e.jsx(nU,{children:e.jsx(iU,{})})})}));
